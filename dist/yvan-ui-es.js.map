{"version":3,"file":"yvan-ui-es.js","sources":["../src/YvanEvent.ts","../src/DesignHelper.ts","../src/CtlBase.ts","../src/CtlUtils.ts","../src/YvanUIExtend.ts","../src/YvanDataSourceImp.ts","../src/CtlDefaultValue.ts","../src/Utils.ts","../src/CtlTree.ts","../src/CtlTreeTable.ts","../src/CtlContextMenu.ts","../src/CtlTab.ts","../src/CtlDataview.ts","../src/CtlECharts.ts","../src/CtlButton.ts","../src/form/input/CtlInput.ts","../src/form/input/CtlText.ts","../src/form/other/CtlCheckBox.ts","../src/form/select/CtlCombo.ts","../src/form/input/CtlDatePicker.ts","../src/form/input/CtlDateRangePicker.ts","../src/form/CtlForm.ts","../src/form/select/CtlMultiCombo.ts","../src/form/input/CtlSearch.ts","../src/CtlCarousel.ts","../src/CtlGridLocale.ts","../src/CtlGridPage.ts","../src/CtlGridIdRender.ts","../src/CtlGridDefault.ts","../src/CtlGridCellCheckbox.ts","../src/CtlGridHeadCheckbox.ts","../src/YvanDataSourceGridImp.ts","../src/CtlGridCellButton.ts","../src/CtlGridFilterSet.ts","../src/CtlGridEditor.ts","../src/CtlGridEditorText.ts","../src/CtlGridEditorCombo.ts","../src/CtlGrid.ts","../src/form/other/CtlSwitch.ts","../src/form/input/CtlNumber.ts","../src/form/other/CtlRadio.ts","../src/CtlCodeMirror.ts","../src/YvanRender.ts","../src/YvanUIAjax.ts","../src/YvanUIDb.ts","../src/YvanUIUtils.ts","../src/YvanUIMessage.ts","../src/YvanUIModule.ts","../src/YvanUICode.ts","../src/PropertyDescription.ts","../src/PropertyDescriptionTable.ts","../src/UserComponent.ts"],"sourcesContent":["export type YvEvent<SENDER, T> =\r\n  | EventBindFunction\r\n  | EventBindCommon\r\n  | EventBindSystem\r\n  | EventBindDialog\r\n  | EventFunction<SENDER, T>\r\n\r\nexport interface EventBindFunction {\r\n  type: 'function'\r\n  bind: string\r\n}\r\n\r\nexport interface EventBindCommon {\r\n  type: 'common'\r\n  bind: string\r\n}\r\n\r\nexport interface EventBindSystem {\r\n  type: 'system'\r\n  bind: string\r\n}\r\n\r\nexport interface EventBindDialog {\r\n  type: 'dialog'\r\n  dialogId: string\r\n}\r\n\r\nexport type EventFunction<SENDER, ARGS> = (sender: SENDER, args: ARGS) => void\r\n\r\nexport function YvEventDispatch<T, ARGS>(\r\n  event: YvEvent<T, any> | undefined,\r\n  sender: T,\r\n  args: ARGS,\r\n  scope?: any\r\n) {\r\n  if (!event) {\r\n    // 事件没定义\r\n    return\r\n  }\r\n\r\n  const ctl: any = sender\r\n  const vue = _.isUndefined(scope) ? ctl._webix.$scope : scope\r\n\r\n  if (typeof event === 'function') {\r\n    // 事件本身就是方法\r\n    return event.call(vue, sender, args)\r\n  }\r\n\r\n  if (event.type === 'function') {\r\n    const targetFunc = _.get(vue, event.bind)\r\n    if (typeof targetFunc !== 'function') {\r\n      console.error(`模块没有 ${event.bind} 函数`)\r\n      return\r\n    }\r\n\r\n    return targetFunc.apply(vue, [sender, args])\r\n  }\r\n}\r\n","let designMode = false;\r\n\r\nexport function initDesign(): void {\r\n    designMode = true;\r\n}\r\n\r\nexport function isDesignMode(): boolean {\r\n    return designMode;\r\n}\r\n","import { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { BaseModule } from './YvanUIModule'\r\nimport { isDesignMode } from './DesignHelper'\r\nimport webix from 'webix'\r\n\r\nexport abstract class CtlBase<T> {\r\n  /**\r\n   * 渲染时触发\r\n   */\r\n  public onRender?: YvEvent<CtlBase<T>, void>\r\n\r\n  /**\r\n   * 实体类属性\r\n   */\r\n  public entityName?: string\r\n\r\n  /**\r\n   * 控件名\r\n   */\r\n  public ctlName?: string\r\n\r\n  /**\r\n   * 最初始时候的 json\r\n   */\r\n  public vjson: any\r\n\r\n  /**\r\n   * 定焦时间\r\n   */\r\n  public ff: number = 0\r\n\r\n  /**\r\n   * webix API\r\n   * webix.ui 渲染完毕之后，webix对象就存放在这里\r\n   */\r\n  protected _webix: any\r\n\r\n  /**\r\n   * 控件所在的用户模块\r\n   */\r\n  protected _module!: BaseModule<any, any, any>\r\n\r\n  /**\r\n   * 为 entityName 进行 watch 的解绑函数\r\n   */\r\n  private _entityWatch?: Function\r\n\r\n  /**\r\n   * 在 webix 还没有初始化 (webix.ui) 的时候\r\n   * 设置的属性就临时存放在这里. 最终会作为 webix 的属性来渲染\r\n   */\r\n  protected _webixConfig: any\r\n\r\n  constructor(vjson: any) {\r\n    this.vjson = _.cloneDeep(vjson)\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 强制组件获得焦点\r\n   */\r\n  public focus(): void {\r\n    if (!this._webix) {\r\n      return\r\n    }\r\n    this._webix.focus()\r\n  }\r\n\r\n  /**\r\n   * 设置正在读取中的状态\r\n   */\r\n  set loading(nv: boolean) {\r\n    if (nv) {\r\n      webix.extend(this._webix, webix.OverlayBox)\r\n      //this._webix.showOverlay(\"<div style='...'>There is no data</div>\");\r\n      this._webix.showOverlay('Loading...')\r\n    } else {\r\n      this._webix.hideOverlay()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取模块\r\n   */\r\n  public getModule() {\r\n    return this._module\r\n  }\r\n\r\n  /**\r\n   * 组件被渲染后触发\r\n   */\r\n  protected attachHandle(webixHandler: any) {\r\n    this._webix = webixHandler\r\n    this._module = this._webix.$scope\r\n\r\n    YvEventDispatch(this.onRender, this, undefined)\r\n    this.refreshState()\r\n  }\r\n\r\n  /**\r\n   * 组件被移除后触发\r\n   */\r\n  protected removeHandle() {\r\n    const d = this._webix\r\n    if (!d) {\r\n      return\r\n    }\r\n\r\n    this._webix = undefined\r\n    if (d) {\r\n      d.destructor()\r\n    }\r\n    this.refreshState()\r\n  }\r\n\r\n  /**\r\n   * 控件 value 值发生变化后，设置 entityName 对应的值\r\n   */\r\n  protected changeToEntity(value: any) {\r\n    if (this.entityName) {\r\n      // 带 entityName 实体绑定\r\n      _.set(this._module, this.entityName, value)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * vue 或 webix 组件被设置后触发\r\n   */\r\n  protected refreshState() {\r\n    if (isDesignMode()) {\r\n      return\r\n    }\r\n    if (this._webix) {\r\n      /* ================================ 安装 ================================ */\r\n      if (this.ctlName) {\r\n        // 带 ctlName 控件属性\r\n        this._module.refs[this.ctlName] = this\r\n      }\r\n\r\n      if (this.entityName) {\r\n        // 带 entityName 实体绑定\r\n        this._entityWatch = this._module.$watch(\r\n          this.entityName,\r\n          (nv: any, ov: any) => {\r\n            _.set(this, 'value', nv)\r\n          },\r\n          { immediate: true }\r\n        )\r\n      }\r\n\r\n      return\r\n    }\r\n\r\n    /* ================================ 卸载 ================================ */\r\n    if (this.ctlName) {\r\n      // 删除控件\r\n      if (this._module) {\r\n        delete this._module.refs[this.ctlName]\r\n      }\r\n    }\r\n\r\n    if (this._entityWatch) {\r\n      // 解除绑定\r\n      this._entityWatch()\r\n      delete this._entityWatch\r\n    }\r\n\r\n    delete this._module\r\n  }\r\n\r\n  /**\r\n   * 设置隐藏\r\n   */\r\n  set hidden(nv: boolean) {\r\n    this._webixConfig.hidden = nv\r\n    if (!this._webix) {\r\n      return\r\n    }\r\n\r\n    if (nv) {\r\n      this._webix.hide()\r\n    } else {\r\n      this._webix.show()\r\n    }\r\n  }\r\n\r\n  get hidden(): boolean {\r\n    return this._webixConfig.hidden\r\n  }\r\n}\r\n","/**\r\n * 内部函数\r\n * 将 vjson 中，属于 yvanui 的属性从 vjson 中删掉。\r\n * 并返回 yvanProp 属性\r\n */\r\nexport function parseYvanPropChangeVJson(vjson: any, names: string[]): any {\r\n\r\n    const yvanProp: any = {};\r\n\r\n    _.forEach([\r\n        ...names,\r\n        'debugger',\r\n        'ctlName',\r\n        'entityName',\r\n        'onRender'\r\n\r\n    ], name => {\r\n        if (_.has(vjson, name)) {\r\n            yvanProp[name] = vjson[name];\r\n            delete vjson[name]\r\n        }\r\n    });\r\n\r\n    return yvanProp\r\n}\r\n","import {Ajax} from './YvanUIAjax';\r\nimport {Db} from './YvanUIDb';\r\n\r\nexport type FormatterFunction = (id: string) => string;\r\n\r\nexport type ValidFunction = (value: string) => string | ValidFunction | undefined;\r\n\r\nexport type ComplexValidFunction = (valid: string, value: string) => string | undefined;\r\n\r\nexport interface DictItem {\r\n    id: string;\r\n    text: string;\r\n\r\n    [id: string]: string;\r\n}\r\n\r\nexport type Dict = DictItem[];\r\n\r\n/**\r\n * YvanUI 全局扩展配置\r\n */\r\nexport interface ExtendOption {\r\n    /**\r\n     * 扩展自定义的 ajax 方法\r\n     */\r\n    ajax: Ajax.Function;\r\n\r\n    /**\r\n     * serverJS 请求前缀\r\n     */\r\n    serverJsPrefix: string;\r\n\r\n    /**\r\n     * 扩展自定义的数据库\r\n     */\r\n    dbs: { [db: string]: Db.Client };\r\n\r\n    /**\r\n     * 扩展全局 formatter 函数\r\n     */\r\n    formatter: { [db: string]: FormatterFunction };\r\n\r\n    /**\r\n     * 扩展全局 dict 字典\r\n     */\r\n    dict: { [dictName: string]: Dict };\r\n\r\n    /**\r\n     * 扩展全局 校验方法\r\n     */\r\n    validType: { [validName: string]: ValidFunction };\r\n\r\n    complexValid: { [validName: string]: ComplexValidFunction };\r\n}\r\n\r\nexport const version = \"3.0.2\"\r\n\r\n/**\r\n * 全局 ajax 方法\r\n */\r\nexport let ajax: Ajax.Function;\r\n\r\n/**\r\n * 全局 数据库连接\r\n */\r\nexport const dbs: { [db: string]: Db.Client } = {};\r\n\r\n/**\r\n * 全局 formatter 函数\r\n */\r\nexport const formatter: { [db: string]: FormatterFunction } = {};\r\n\r\n/**\r\n * 全局 dict 字典\r\n */\r\nexport const dict: { [dictName: string]: Dict } = {};\r\n\r\n/**\r\n * 全局 校验方法\r\n */\r\nexport const validType: { [validName: string]: ValidFunction } = {};\r\n\r\nexport const complexValid: { [validName: string]: ComplexValidFunction } = {};\r\n\r\n\r\n/**\r\n * YvanUI 全局扩展配置\r\n * @param option 配置信息\r\n */\r\nexport function extend(option: Partial<ExtendOption>) {\r\n    if (option.ajax) {\r\n        ajax = option.ajax\r\n    }\r\n\r\n    if (option.serverJsPrefix) {\r\n        _.extend(window, {_YvanUI_serverJSPrefix: option.serverJsPrefix});\r\n    }\r\n\r\n    if (option.dbs) {\r\n        _.extend(dbs, option.dbs);\r\n    }\r\n\r\n    if (option.dict) {\r\n        _.extend(dict, option.dict);\r\n    }\r\n\r\n    if (option.validType) {\r\n        _.extend(validType, option.validType);\r\n    }\r\n\r\n    if (option.formatter) {\r\n        _.extend(formatter, option.formatter);\r\n    }\r\n\r\n    if (option.complexValid) {\r\n        _.extend(complexValid, option.complexValid);\r\n    }\r\n}\r\n","import {\r\n  DataSource,\r\n  DataSourceStaticFunction,\r\n  DataSourceDb,\r\n  DataSourceProcessFunction\r\n} from './YvanDataSource'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport * as YvanUI from './YvanUIExtend'\r\nimport { isDesignMode } from './DesignHelper'\r\n\r\nexport class YvDataSource<T> {\r\n  private readonly module: any\r\n  private option: DataSource<T>\r\n  private dataSourceProcess?: DataSourceProcessFunction\r\n  private ctl: any\r\n  private watches: Function[] = []\r\n  public reload: undefined | (() => void)\r\n\r\n  /**\r\n   * 自定义函数式取值\r\n   */\r\n  setCustomFunctionMode(option: DataSourceStaticFunction<T>) {\r\n    const that = this\r\n    this.reload = () => {\r\n      that.ctl.loading = true\r\n      option.call(that.module, that.ctl, {\r\n        successCallback(data: any[]) {\r\n          if (that.dataSourceProcess) {\r\n            //自定义的数据处理过程\r\n            that.ctl.dataReal = that.dataSourceProcess(data)\r\n          } else {\r\n            that.ctl.dataReal = data\r\n          }\r\n\r\n          that.ctl.loading = false\r\n          YvEventDispatch(that.ctl.onDataComplete, that.ctl, undefined)\r\n        },\r\n        failCallback() {\r\n          that.ctl.dataReal = []\r\n          that.ctl.loading = false\r\n          YvEventDispatch(that.ctl.onDataComplete, that.ctl, undefined)\r\n        }\r\n      })\r\n    }\r\n    this.reload()\r\n  }\r\n\r\n  /**\r\n   * SQL取值\r\n   */\r\n  setSqlMode(option: DataSourceDb) {\r\n    const that = this\r\n    this.reload = () => {\r\n      //异步请求数据内容\r\n      that.ctl.loading = true\r\n\r\n      YvanUI.dbs[option.db]\r\n        .query({\r\n          params: option.params,\r\n          needCount: false,\r\n          sqlId: option.sqlId\r\n        })\r\n        .then(res => {\r\n          const { data: resultData, params: resParams } = res\r\n\r\n          if (this.dataSourceProcess) {\r\n            //自定义的数据处理过程\r\n            that.ctl.dataReal = this.dataSourceProcess(resultData)\r\n          } else {\r\n            that.ctl.dataReal = resultData\r\n          }\r\n          YvEventDispatch(that.ctl.onDataComplete, that.ctl, undefined)\r\n        })\r\n        .catch(r => {\r\n          that.ctl.dataReal = []\r\n        })\r\n        .finally(() => {\r\n          that.ctl.loading = false\r\n        })\r\n    }\r\n    this.reload()\r\n  }\r\n\r\n  constructor(\r\n    ctl: any,\r\n    option: DataSource<T>,\r\n    dataSourceProcess?: DataSourceProcessFunction\r\n  ) {\r\n    if (isDesignMode()) {\r\n      return\r\n    }\r\n    this.ctl = ctl\r\n    this.option = option\r\n    this.dataSourceProcess = dataSourceProcess\r\n    this.module = ctl._webix.$scope\r\n  }\r\n\r\n  public init() {\r\n    if (!this.option) {\r\n      //没有设值，退出\r\n      this.reload = undefined\r\n      return\r\n    }\r\n\r\n    if (typeof this.option === 'function') {\r\n      //以 function 方式运行\r\n      this.setCustomFunctionMode(this.option)\r\n      return\r\n    }\r\n\r\n    if (_.isArray(this.option)) {\r\n      //结果就是数组\r\n      this.reload = () => {\r\n        this.ctl.dataReal = this.option\r\n        this.ctl.$yvDispatch(this.ctl.onDataComplete)\r\n      }\r\n      this.reload()\r\n      return\r\n    }\r\n\r\n    // 使 watch 生效\r\n    _.each(this.option.watch, watchExp => {\r\n      const unwatch = this.module.$watch(watchExp, () => {\r\n        if (this.reload) {\r\n          this.reload()\r\n        }\r\n      })\r\n      this.watches.push(unwatch)\r\n    })\r\n\r\n    if (this.option.type === 'function') {\r\n      // 取 bind 函数\r\n      if (typeof this.option.bind === 'function') {\r\n        this.setCustomFunctionMode(this.option.bind)\r\n      } else {\r\n        const bindFunction: DataSourceStaticFunction<T> = _.get(\r\n          this.module,\r\n          this.option.bind\r\n        ) as DataSourceStaticFunction<T>\r\n        if (!bindFunction) {\r\n          console.error(`没有找到名称为 ${this.option.bind} 的方法`)\r\n          return\r\n        }\r\n        this.setCustomFunctionMode(bindFunction)\r\n      }\r\n    } else if (this.option.type === 'SQL') {\r\n      this.setSqlMode(this.option)\r\n    } else {\r\n      console.error(`其他方式没有实现`)\r\n    }\r\n  }\r\n\r\n  destory() {\r\n    // 解除全部 watch\r\n    _.each(this.watches, unwatch => {\r\n      unwatch()\r\n    })\r\n    this.reload = undefined\r\n    this.ctl.dataReal = []\r\n  }\r\n}\r\n","export const CtlButtonDefault: any = {\r\n    text: '',\r\n    icon: '',\r\n    // width: 120,\r\n    type: 'text',\r\n    autowidth: true,\r\n    // cssType: 'primary'\r\n};\r\n\r\nexport const CtlDataviewDefault: any = {};\r\n\r\nexport const CtlTreeDefault: any = {\r\n    showCheckbox: false,\r\n    showLeftIcon: true,\r\n    showIcon: true,\r\n};\r\n\r\nexport const CtlCodeMirrorDefault = {\r\n    mode: 'sql',\r\n    indentWithTabs: true,\r\n    smartIndent: true,\r\n    lineNumbers: true,\r\n    matchBrackets: true,\r\n    autofocus: true,\r\n    extraKeys: {\"Ctrl-Space\": \"autocomplete\"},\r\n    hintOptions: {\r\n        tables: {\r\n            users: [\"name\", \"score\", \"birthDate\"],\r\n            countries: [\"name\", \"population\", \"size\"]\r\n        }\r\n    }\r\n};\r\n\r\nconst CtlInputDefault: any = {\r\n    labelWidth: 110,\r\n    labelAlign: 'right',\r\n    // width: 250,\r\n    prompt: '请输入'\r\n};\r\n\r\nexport const CtlTextDefault: any = {\r\n    ...CtlInputDefault\r\n};\r\n\r\nexport const CtlNumberDefault: any = {\r\n    ...CtlInputDefault,\r\n    precision: 0,\r\n};\r\n\r\nexport const CtlDateDefault: any = {\r\n    ...CtlInputDefault,\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlDateTimeDefault: any = {\r\n    ...CtlInputDefault,\r\n    //width: 300,\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlDateRangeDefault: any = {\r\n    ...CtlInputDefault,\r\n    //width: 430,\r\n    separator: ' 至 ',\r\n    prompt: '请选择日期范围'\r\n};\r\n\r\nexport const CtlDateTimeRangeDefault: any = {\r\n    ...CtlInputDefault,\r\n    //width: 430,\r\n    separator: ' 至 ',\r\n    prompt: '请选择时间范围'\r\n};\r\n\r\nexport const CtlComboDefault: any = {\r\n    ...CtlInputDefault,\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlMultiComboDefault: any = {\r\n    ...CtlInputDefault,\r\n    separator: ',',\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlSearchDefault: any = {\r\n    ...CtlInputDefault,\r\n    prompt: '回车键查询'\r\n};\r\n\r\n\r\nexport const CtlCheckboxDefault: any = {\r\n    // labelWidth: 110,\r\n    labelAlign: 'right',\r\n    checkValue: 'T',\r\n    uncheckValue: 'F'\r\n};\r\n\r\nexport const CtlSwitchDefault: any = {\r\n    // labelWidth: 110,\r\n    labelAlign: 'right',\r\n    checkValue: 'T',\r\n    uncheckValue: 'F'\r\n};\r\n\r\nexport const CtlRadioDefault: any = {\r\n    labelWidth: 110,\r\n    labelAlign: 'right',\r\n};\r\n","export function getFirstPinyin(msg: string): string {\r\n    return _.get(window, 'getFirstPinyin')(msg);\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvDataSource } from './YvanDataSourceImp'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { DataSource } from './YvanDataSource'\r\nimport { CtlTreeDefault } from './CtlDefaultValue'\r\nimport { getFirstPinyin } from './Utils'\r\n\r\nexport class CtlTree extends CtlBase<CtlTree> {\r\n  static create(vjson: any): CtlTree {\r\n    const that = new CtlTree(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlTreeDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      // 'data',\r\n      'dataSource',\r\n      'onNodeClick',\r\n      'onNodeDblClick',\r\n      'onDataComplete',\r\n      'showCheckbox',\r\n      'showLeftIcon',\r\n      'showIcon'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      select: true,\r\n      filterMode: {\r\n        showSubItems: false\r\n      },\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeClick, that, item)\r\n        },\r\n        onItemDblClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeDblClick, that, item)\r\n        }\r\n      },\r\n      template: function (obj: any, common: any) {\r\n        let t = ''\r\n        if (that.showCheckbox) {\r\n          t += common.checkbox(obj, common)\r\n        }\r\n        if (that.showIcon) {\r\n          t += common.folder(obj, common)\r\n        }\r\n        if (that.showLeftIcon) {\r\n          t += common.icon(obj, common)\r\n        }\r\n        t += obj.value\r\n        return t\r\n      },\r\n      // 树的左侧图标\r\n      type: {\r\n        folder: function (obj: any) {\r\n          if (obj.icon) {\r\n            return (\r\n              \"<span style='padding-left: 5px; padding-right: 5px; color: #5fa2dd; font-size: 16px' class='\" +\r\n              obj.icon +\r\n              \"'></span>\"\r\n            )\r\n          }\r\n          return ''\r\n        }\r\n      }\r\n    })\r\n\r\n    if (vjson.threeState !== false && that.showCheckbox) {\r\n      vjson.threeState = true;\r\n    } else {\r\n      vjson.threeState = false;\r\n    }\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 拼音方式过滤查找树\r\n   */\r\n  filter(nv: string) {\r\n    if (!nv) {\r\n      this._webix.filter('')\r\n      return\r\n    }\r\n\r\n    this._webix.filter((node: any) => {\r\n      const value = node.value\r\n      const nodePy = getFirstPinyin(value).toLowerCase()\r\n      return nodePy.indexOf(nv.toLowerCase()) >= 0 || value.indexOf(nv) >= 0\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 树上的数据\r\n   */\r\n  data?: any[]\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onNodeClick?: YvEvent<CtlTree, any>\r\n\r\n  /**\r\n   * 树节点被双击后触发\r\n   */\r\n  onNodeDblClick?: YvEvent<CtlTree, any>\r\n\r\n  /**\r\n   * 数据绑定完成后触发\r\n   */\r\n  onDataComplete?: YvEvent<CtlTree, any>\r\n\r\n  /**\r\n   * 显示勾选框\r\n   */\r\n  showCheckbox: boolean = false\r\n\r\n  /**\r\n   * 显示左侧展开图标\r\n   */\r\n  showLeftIcon: boolean = true\r\n\r\n  /**\r\n   * 显示图标\r\n   */\r\n  showIcon: boolean = true\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 设置数据\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    // dataSource call back\r\n    this._webix.clearAll()\r\n    this._webix.parse(nv)\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlTree> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlTree>) {\r\n    this._dataSource = nv\r\n    this._rebindDataSource()\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取第一个节点\r\n   */\r\n  public getFirstId(): any {\r\n    return this._webix.getFirstId()\r\n  }\r\n\r\n  /**\r\n   * 展开某个节点\r\n   */\r\n  public open(id: any) {\r\n    this._webix.open(id)\r\n  }\r\n\r\n  /**\r\n   * 清空所有数据\r\n   */\r\n  public clear() {\r\n    this._webix.clearAll()\r\n  }\r\n\r\n  /**\r\n   * 取消选择所有节点\r\n   */\r\n  public uncheckAll() {\r\n    this._webix.uncheckAll()\r\n  }\r\n\r\n  /**\r\n   * 根据id获取一行数据\r\n   */\r\n  public getItem(id: any) {\r\n    return this._webix.getItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取某 id 下树节点所有的子节点\r\n   */\r\n  public getChildItems(id: any): any[] {\r\n    const ret = []\r\n    let c = this._webix.getFirstChildId(id)\r\n    while (c) {\r\n      ret.push(this._webix.getItem(c))\r\n      c = this._webix.getNextSiblingId(c)\r\n    }\r\n    return ret\r\n  }\r\n\r\n  /**\r\n   * 获取某 id 下树节点所有的子节点的编号\r\n   */\r\n  public getChildIds(id: any): any[] {\r\n    const ret = []\r\n    let c = this._webix.getFirstChildId(id)\r\n    while (c) {\r\n      ret.push(c)\r\n      c = this._webix.getNextSiblingId(c)\r\n    }\r\n    return ret\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的一行编号\r\n   */\r\n  public getSelectedId(): any {\r\n    return this._webix.getSelectedId()\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的一行\r\n   */\r\n  public getSelectedItem(): any {\r\n    return this._webix.getSelectedItem()\r\n  }\r\n\r\n  /**\r\n   * 勾选选中一行\r\n   */\r\n  public checkItem(id: any) {\r\n    this._webix.checkItem(id)\r\n  }\r\n\r\n  /**\r\n   * 选中一行\r\n   * @param id\r\n   */\r\n  public select(id: any) {\r\n    // this._webix.showItem(id);\r\n    let pid = id\r\n    while (pid) {\r\n      this._webix.open(pid)\r\n      pid = this._webix.getParentId(pid)\r\n    }\r\n\r\n    this._webix.select(id)\r\n  }\r\n\r\n  /**\r\n   * 选中多行\r\n   */\r\n  public checkItems(ids: any[]) {\r\n    for (let id of ids) {\r\n      this._webix.checkItem(id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消选中一行\r\n   */\r\n  public uncheckItem(id: any) {\r\n    this._webix.uncheckItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取选中的ID 数组\r\n   */\r\n  public getCheckedIds() {\r\n    return this._webix.getChecked()\r\n  }\r\n\r\n  /**\r\n   * 获取选中的行数组\r\n   */\r\n  public getCheckedItems() {\r\n    return _.map(this._webix.getChecked(), v => this._webix.getItem(v))\r\n  }\r\n\r\n  /**\r\n   * 查看是否被选中\r\n   */\r\n  public isChecked(id: any) {\r\n    return this._webix.isChecked(id)\r\n  }\r\n\r\n  /**\r\n   * 展开全部节点\r\n   */\r\n  public expandAll() {\r\n    this._webix.openAll()\r\n  }\r\n\r\n  /**\r\n   * 收起所有节点\r\n   */\r\n  public collapseAll() {\r\n    this._webix.closeAll()\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlTree>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlTree>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    if (this.dataSourceBind) {\r\n      this.dataSourceBind.destory()\r\n      this.dataSourceBind = undefined\r\n    }\r\n\r\n    if (this._webix && this.getModule()) {\r\n      this.dataSourceBind = new YvDataSource(\r\n        this,\r\n        this.dataSource,\r\n        this._dataSourceProcess.bind(this)\r\n      )\r\n      this.dataSourceBind.init()\r\n    }\r\n  }\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (\r\n      !this.dataSource ||\r\n      _.isArray(this.dataSource) ||\r\n      _.isFunction(this.dataSource)\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL' && this.dataSource.type !== 'function') {\r\n      return data\r\n    }\r\n\r\n    if (\r\n      !this.dataSource.parentField ||\r\n      !this.dataSource.displayField ||\r\n      !this.dataSource.valueField\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    const idField = this.dataSource.valueField\r\n    const textField = this.dataSource.displayField\r\n    const parentField = this.dataSource.parentField\r\n\r\n    data = _.cloneDeep(data)\r\n\r\n    // 第一遍扫描, 建立映射关系\r\n    const nodeMap: any = {}\r\n    const rootNode = []\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      nodeMap[row[idField]] = {\r\n        value: row[textField],\r\n        id: row[idField],\r\n        row: row\r\n      }\r\n    }\r\n\r\n    // 第二遍扫描，建立父子关系\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      const parent = row[parentField]\r\n      const id = row[idField]\r\n\r\n      if (!parent || parent === '0') {\r\n        // 没有父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n      } else if (nodeMap.hasOwnProperty(parent)) {\r\n        //找到父亲\r\n        const parentNode = nodeMap[parent]\r\n        if (parentNode.hasOwnProperty('data')) {\r\n          parentNode.data.push(nodeMap[id])\r\n        } else {\r\n          parentNode.data = [nodeMap[id]]\r\n        }\r\n      } else {\r\n        // 没有找到父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n      }\r\n    }\r\n\r\n    return rootNode\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvDataSource } from './YvanDataSourceImp'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { DataSource } from './YvanDataSource'\r\n\r\nexport class CtlTreeTable extends CtlBase<CtlTreeTable> {\r\n  static create(vjson: any): CtlTreeTable {\r\n    const that = new CtlTreeTable(vjson)\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'data',\r\n      'dataSource',\r\n      'onNodeClick',\r\n      'onNodeDblClick',\r\n      'showCheckbox',\r\n      'showLeftIcon',\r\n      'showIcon'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeClick, that, item)\r\n        },\r\n        onItemDblClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeDblClick, that, item)\r\n        }\r\n      },\r\n      template: function(obj: any, common: any) {\r\n        let t = ''\r\n        if (that.showCheckbox) {\r\n          t += common.checkbox(obj, common)\r\n        }\r\n        if (that.showIcon) {\r\n          t += common.folder(obj, common)\r\n        }\r\n        if (that.showLeftIcon) {\r\n          t += common.icon(obj, common)\r\n        }\r\n        t += obj.value\r\n        return t\r\n      },\r\n      threeState: that.showCheckbox,\r\n      // 树的左侧图标\r\n      type: {\r\n        folder: function(obj: any) {\r\n          if (obj.icon) {\r\n            return (\r\n              \"<span style='padding-left: 5px; padding-right: 5px; color: #063978; font-size: 16px' class='\" +\r\n              obj.icon +\r\n              \"'></span>\"\r\n            )\r\n          }\r\n          return ''\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 树上的数据\r\n   */\r\n  data?: any[]\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onNodeClick?: YvEvent<CtlTreeTable, any>\r\n\r\n  /**\r\n   * 树节点被双击后触发\r\n   */\r\n  onNodeDblClick?: YvEvent<CtlTreeTable, any>\r\n\r\n  /**\r\n   * 显示勾选框\r\n   */\r\n  showCheckbox: boolean = false\r\n\r\n  /**\r\n   * 显示左侧展开图标\r\n   */\r\n  showLeftIcon: boolean = true\r\n\r\n  /**\r\n   * 显示图标\r\n   */\r\n  showIcon: boolean = true\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 设置数据\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    this._webix.clearAll()\r\n    this._webix.parse(nv)\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlTreeTable> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlTreeTable>) {\r\n    this._dataSource = nv\r\n    this._rebindDataSource()\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 清空所有数据\r\n   */\r\n  public clear() {\r\n    this._webix.clearAll()\r\n  }\r\n\r\n  /**\r\n   * 取消选择所有节点\r\n   */\r\n  public uncheckAll() {\r\n    this._webix.uncheckAll()\r\n  }\r\n\r\n  /**\r\n   * 根据id获取一行数据\r\n   */\r\n  public getItem(id: any) {\r\n    return this._webix.getItem(id)\r\n  }\r\n\r\n  /**\r\n   * 勾选选中一行\r\n   */\r\n  public checkItem(id: any) {\r\n    this._webix.checkItem(id)\r\n  }\r\n\r\n  /**\r\n   * 选中一行\r\n   * @param id\r\n   */\r\n  public select(id: any) {\r\n    this._webix.showItem(id)\r\n    this._webix.select(id)\r\n  }\r\n\r\n  /**\r\n   * 选中多行\r\n   */\r\n  public checkItems(ids: any[]) {\r\n    for (let id of ids) {\r\n      this._webix.checkItem(id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消选中一行\r\n   */\r\n  public uncheckItem(id: any) {\r\n    this._webix.uncheckItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取选中的行\r\n   */\r\n  public getChecked() {\r\n    return this._webix.getChecked()\r\n  }\r\n\r\n  /**\r\n   * 查看是否被选中\r\n   */\r\n  public isChecked(id: any) {\r\n    return this._webix.isChecked(id)\r\n  }\r\n\r\n  /**\r\n   * 展开全部节点\r\n   */\r\n  public expandAll() {\r\n    this._webix.openAll()\r\n  }\r\n\r\n  /**\r\n   * 收起所有节点\r\n   */\r\n  public collapseAll() {\r\n    this._webix.closeAll()\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlTreeTable>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlTreeTable>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    if (this.dataSourceBind) {\r\n      this.dataSourceBind.destory()\r\n      this.dataSourceBind = undefined\r\n    }\r\n\r\n    if (this._webix && this.getModule()) {\r\n      this.dataSourceBind = new YvDataSource(this, this.dataSource)\r\n      this.dataSourceBind.init()\r\n    }\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { YvEventDispatch } from './YvanEvent'\r\nimport webix from 'webix'\r\n\r\n/**\r\n * 创建快捷菜单\r\n * <pre>\r\n *     {\r\n            text: '菜单1',\r\n            onClick: {\r\n                type: 'function',\r\n                bind: 'tabBar1'\r\n            }\r\n        },\r\n {\r\n            text: '菜单2',\r\n            children: [\r\n                {\r\n                    text: '菜单2.1',\r\n                    onClick: {\r\n                        type: 'function',\r\n                        bind: 'tabBar21'\r\n                    }\r\n                },\r\n                {\r\n                    text: '菜单2.2',\r\n                    onClick: {\r\n                        type: 'function',\r\n                        bind: 'tabBar22'\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n {\r\n            text: '菜单3',\r\n            onClick: {\r\n                type: 'function',\r\n                bind: 'tabBar3'\r\n            }\r\n        }\r\n * </pre>\r\n */\r\nexport function createContextMenu(config: any, scope: any): any {\r\n  const methodMap = new Map<String, any>()\r\n\r\n  function buildMenu(configArray: any): any {\r\n    const ret = new Array<any>()\r\n    _.each(configArray, menu => {\r\n      if (!menu) return\r\n      if (menu === '-' || menu.text === '-') {\r\n        ret.push({ $template: 'Separator' })\r\n      }\r\n      if (menu.text) {\r\n        const id = _.uniqueId('_cxm_')\r\n        methodMap.set(id, menu.onClick)\r\n\r\n        if (_.isArray(menu.children)) {\r\n          ret.push({ value: menu.text, submenu: buildMenu(menu.children) })\r\n        } else {\r\n          ret.push({ value: menu.text, id })\r\n        }\r\n      }\r\n    })\r\n    return ret\r\n  }\r\n\r\n  const handler = webix.ui({\r\n    view: 'contextmenu',\r\n    data: buildMenu(config),\r\n    on: {\r\n      onMenuItemClick: function(this: any, id: any) {\r\n        if (methodMap.has(id)) {\r\n          YvEventDispatch(\r\n            methodMap.get(id),\r\n            this,\r\n            this.getContext(),\r\n            this.$scope\r\n          )\r\n        }\r\n      }\r\n    },\r\n    $scope: scope\r\n  })\r\n  return handler\r\n\r\n  // return webix.ui({\r\n  //     view: \"contextmenu\",\r\n  //     data: [\r\n  //         {value: \"a\", id: 'UU_A'},\r\n  //         {value: \"b\", id: 'UU_B'},\r\n  //         // {$template: \"Spacer\"},\r\n  //         {$template: \"Separator\"},\r\n  //         {\r\n  //             value: \"Translate...\",\r\n  //             submenu: [\r\n  //                 {\r\n  //                     value: \"罗\", id: 'AAA', on: {\r\n  //                         onClick: function (id: any) {\r\n  //                             debugger\r\n  //                         }\r\n  //                     }\r\n  //                 },\r\n  //                 {value: \"三\", id: 'BBB'},\r\n  //             ]\r\n  //         }\r\n  //     ],\r\n  //     on: {\r\n  //         onMenuItemClick: function (id: any) {\r\n  //             debugger\r\n  //         }\r\n  //     }\r\n  // });\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { wrapperWebixConfig } from './YvanRender'\r\nimport { createContextMenu } from './CtlContextMenu'\r\nimport webix from 'webix'\r\n\r\nexport class CtlTab extends CtlBase<CtlTab> {\r\n  static create(vjson: any): CtlTab {\r\n    const that = new CtlTab(vjson)\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'tabbarContextMenu',\r\n      'defaultTabIndex',\r\n      'onTabChanged'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this)\r\n          _.defer(() => {\r\n            if (yvanProp.defaultTabIndex > 0) {\r\n              // 默认打开的 tab 序号\r\n              that._webix.getMultiview()._cells[yvanProp.defaultTabIndex].show()\r\n            }\r\n\r\n            if (that._menuConfig) {\r\n              const menuHandler = createContextMenu(\r\n                that._menuConfig,\r\n                that.getModule()\r\n              )\r\n              menuHandler.attachTo(that._webix.getTabbar().$view)\r\n            }\r\n          })\r\n        }\r\n      },\r\n      tabbar: {\r\n        // close: true,\r\n        on: {\r\n          onAfterDelete() {\r\n            that.removeHandle()\r\n          },\r\n          onChange(newBodyId: string) {\r\n            YvEventDispatch(that.onTabChanged, that, newBodyId)\r\n          }\r\n        }\r\n      },\r\n      multiview: {\r\n        keepViews: true // 没有显示的选项卡也要渲染DOM, 否则 aggrid 会出问题\r\n        // fitBiggest: true,    //始终以最大的 tab 页签为大小\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  defaultTabIndex = 0\r\n\r\n  /**\r\n   * 当前选项卡发生变化时触发\r\n   */\r\n  onTabChanged?: YvEvent<CtlTab, any>\r\n\r\n  /**\r\n   * tabbar 上的快捷菜单\r\n   */\r\n  set tabbarContextMenu(config: any) {\r\n    this._menuConfig = config\r\n  }\r\n\r\n  /**\r\n   * 关闭所有允许关闭的标签\r\n   */\r\n  closeAll(butIds: Array<any>) {\r\n    const cellId = new Array<any>()\r\n    _.each(this._webix.getMultiview()._cells, cell => {\r\n      if (!_.includes(butIds, cell.config.id)) {\r\n        cellId.push(cell.config.id)\r\n      }\r\n    })\r\n\r\n    _.each(cellId, id => {\r\n      this._webix.removeView(id)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 添加一个模块到标签页执行\r\n   * @param text 标签标题\r\n   * @param id 标签id\r\n   * @param vue 模块(Class)\r\n   */\r\n  addModule(text: string, id: string, vue: any) {\r\n    const that = this\r\n    const cfg = vue.buildView()\r\n\r\n    const tabId = this._webix.addView({\r\n      header: text,\r\n      close: true,\r\n      body: _.merge(cfg, {\r\n        id: id,\r\n        on: {\r\n          onDestruct() {\r\n            vue.$destroy()\r\n            delete vue._isLoadInvoked\r\n          },\r\n          onViewShow(this: any) {\r\n            if (!vue._isLoadInvoked) {\r\n              vue._webixId = tabId\r\n              vue._isLoadInvoked = true\r\n              vue.onLoad()\r\n            }\r\n\r\n            vue.onShow()\r\n          }\r\n          // onViewShow: _.once(() => {\r\n          //     // 触发 onLoad 方法\r\n          //     // 注意这有个 bug, viewTab 的最后一个标签，千万不能删除\r\n          //     vue._webixId = tabId;\r\n          //     vue.onLoad();\r\n          // })\r\n        }\r\n      })\r\n    })\r\n\r\n    this._webix.setValue(tabId)\r\n    if (this.tabCount === 1) {\r\n      // 这里有个 bug\r\n      // 如果是第一个被打开的标签，会不触发 onTabChanged 事件\r\n      YvEventDispatch(that.onTabChanged, that, id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 添加一个 Vjson 到标签\r\n   * @param text 标签标题\r\n   * @param id 标签id\r\n   * @param vjson 界面描述片段\r\n   */\r\n  addContent(text: string, id: string, vjson: any, opts?: any) {\r\n    const that = this\r\n\r\n    if (this.selectTab(id)) {\r\n      // 已经打开了页面\r\n      return\r\n    }\r\n\r\n    let close = true\r\n    if (opts && opts.close === false) {\r\n      close = false\r\n    }\r\n\r\n    wrapperWebixConfig(this.getModule(), vjson)\r\n\r\n    const tabId = this._webix.addView({\r\n      header: text,\r\n      close,\r\n      body: _.merge(vjson, {\r\n        id: id\r\n      })\r\n    })\r\n\r\n    this._webix.setValue(tabId)\r\n    if (this.tabCount === 1) {\r\n      // 这里有个 bug\r\n      // 如果是第一个被打开的标签，会不触发 onTabChanged 事件\r\n      YvEventDispatch(that.onTabChanged, that, id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取 tab 标签数量\r\n   */\r\n  get tabCount(): number {\r\n    return this._webix.getMultiview()._cells.length\r\n  }\r\n\r\n  /**\r\n   * 选定某个标签\r\n   */\r\n  public selectTab(id: string): boolean {\r\n    if (webix.$$(id)) {\r\n      webix.$$(id).show()\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 判断标签是否存在\r\n   */\r\n  public tabExsit(id: string): boolean {\r\n    if (webix.$$(id)) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 获取当前选中的 tabId\r\n   */\r\n  public getSelectedTabId(): any {\r\n    return this._webix.getTabbar().getValue()\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  /**\r\n   * 快捷菜单句柄\r\n   */\r\n  _menuConfig: any = undefined\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvDataSource } from './YvanDataSourceImp'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { DataSource } from './YvanDataSource'\r\nimport { CtlDataviewDefault } from './CtlDefaultValue'\r\n\r\nexport class CtlDataview extends CtlBase<CtlDataview> {\r\n  static create(vjson: any): CtlDataview {\r\n    const that = new CtlDataview(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlDataviewDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      // 'data',\r\n      'dataSource',\r\n      'onItemSelect',\r\n      'onItemClick',\r\n      'onItemDblClick',\r\n      'onDataComplete'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      select: true,\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onItemClick, that, item)\r\n        },\r\n        onItemDblClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onItemDblClick, that, item)\r\n        },\r\n        onAfterSelect(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onItemSelect, that, item)\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 树上的数据\r\n   */\r\n  data?: any[]\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onItemSelect?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onItemClick?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 树节点被双击后触发\r\n   */\r\n  onItemDblClick?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 数据绑定完成后触发\r\n   */\r\n  onDataComplete?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 设置数据\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    // dataSource call back\r\n    this._webix.clearAll()\r\n    this._webix.parse(nv)\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlDataview> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlDataview>) {\r\n    this._dataSource = nv\r\n    this._rebindDataSource()\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlDataview>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlDataview>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    if (this.dataSourceBind) {\r\n      this.dataSourceBind.destory()\r\n      this.dataSourceBind = undefined\r\n    }\r\n\r\n    if (this._webix && this.getModule()) {\r\n      this.dataSourceBind = new YvDataSource(\r\n        this,\r\n        this.dataSource,\r\n        this._dataSourceProcess.bind(this)\r\n      )\r\n      this.dataSourceBind.init()\r\n    }\r\n  }\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (\r\n      !this.dataSource ||\r\n      _.isArray(this.dataSource) ||\r\n      _.isFunction(this.dataSource)\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL' && this.dataSource.type !== 'function') {\r\n      return data\r\n    }\r\n\r\n    if (!this.dataSource.idField) {\r\n      return data\r\n    }\r\n\r\n    const idField = this.dataSource.idField\r\n\r\n    data = _.cloneDeep(data)\r\n\r\n    // 第一遍扫描, 建立映射关系\r\n    _.each(data, item => {\r\n      item.id = item[idField]\r\n    })\r\n\r\n    return data\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\n\r\nexport class CtlECharts extends CtlBase<CtlECharts> {\r\n  static create(vjson: any): CtlECharts {\r\n    const that = new CtlECharts(_.cloneDeep(vjson))\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    // 提取基础属性 onRender / ctlName / entityName 等等\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 yvanProp 合并至当前 CtlBase 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 删除 vjson 所有数据, 替换为 template 语法\r\n    _.forOwn(vjson, (value, key) => {\r\n      delete vjson[key]\r\n    })\r\n    _.merge(vjson, {\r\n      view: 'grid',\r\n      template: `<div role=\"echarts\"></div>`,\r\n      on: {\r\n        onAfterRender: function(this: any) {\r\n          that.attachHandle(this)\r\n          that._resetECharts()\r\n        },\r\n        onDestruct(this: any) {\r\n          if (that._echartsHandler) {\r\n            that._echartsHandler.dispose()\r\n            delete that._echartsHandler\r\n          }\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n    if (that.vjson.id) {\r\n      vjson.id = that.vjson.id\r\n    }\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  /**\r\n   * 数据绑定完毕后触发\r\n   */\r\n  onClick?: YvEvent<CtlECharts, any>\r\n\r\n  setOption(option: any, opts?: any): void {\r\n    this._echartsHandler.setOption(option, opts)\r\n    _.defer(() => {\r\n      this._echartsHandler.resize()\r\n    })\r\n  }\r\n\r\n  public get handle() {\r\n    return <any>this._echartsHandler\r\n  }\r\n\r\n  // setOption(option: echarts.EChartOption, opts?: echarts.EChartsOptionConfig): void {\r\n  //     this._echartsHandler.setOption(option, opts);\r\n  //     _.defer(() => {\r\n  //         this._echartsHandler.resize();\r\n  //     });\r\n  // }\r\n  //\r\n  // setOption2(option: echarts.EChartOption | echarts.EChartsResponsiveOption, notMerge?: boolean, lazyUpdate?: boolean): void {\r\n  //     this._echartsHandler.setOption(option, notMerge, lazyUpdate);\r\n  //     _.defer(() => {\r\n  //         this._echartsHandler.resize();\r\n  //     });\r\n  // }\r\n\r\n  resize() {\r\n    this._echartsHandler.resize()\r\n  }\r\n\r\n  clear() {\r\n    this._echartsHandler.clear()\r\n  }\r\n\r\n  /*============================ 私有属性部分 ============================*/\r\n  private _echartsHandler!: echarts.ECharts\r\n\r\n  private _resetECharts() {\r\n    const $el = $(this._webix._viewobj).find('[role=\"echarts\"]')[0]\r\n    let el: any = $el\r\n    this._echartsHandler = echarts.init(el)\r\n\r\n    this._echartsHandler.on('click', (params: any) => {\r\n      YvEventDispatch(this.onClick, this, params)\r\n    })\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { CtlButtonDefault } from './CtlDefaultValue'\r\nimport { isDesignMode } from './DesignHelper'\r\n\r\ntype CtlButtonType =\r\n  | 'default'\r\n  | 'primary'\r\n  | 'success'\r\n  | 'danger'\r\n  | string\r\n  | undefined\r\n\r\n/**\r\n * 按钮组件\r\n * @author yvan\r\n */\r\nexport class CtlButton extends CtlBase<CtlButton> {\r\n  static create(vjson: any): CtlButton {\r\n    const that = new CtlButton(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlButtonDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'onClick',\r\n      'cssType',\r\n      'icon',\r\n      'width',\r\n      'badge',\r\n      'text'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      type: 'text',\r\n      on: {\r\n        onInited: function(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onDestruct() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick: function(this: any) {\r\n          if (isDesignMode()) {\r\n            return\r\n          }\r\n          YvEventDispatch(that.onClick, that, undefined)\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n\r\n  /**\r\n   * 按下按钮后触发\r\n   */\r\n  onClick?: YvEvent<CtlButton, void>\r\n\r\n  /**\r\n   * 设置标记\r\n   */\r\n  set badge(nv: number | string | undefined) {\r\n    if (!this._webix) {\r\n      if (nv) {\r\n        this._webixConfig.badge = nv\r\n      } else {\r\n        delete this._webixConfig.css\r\n      }\r\n      return\r\n    }\r\n\r\n    this._webix.define('badge', nv)\r\n    this._webix.render()\r\n  }\r\n\r\n  /**\r\n   * 设置宽度\r\n   */\r\n  set width(nv: number | undefined) {\r\n    if (!this._webix) {\r\n      if (nv) {\r\n        this._webixConfig.width = nv\r\n      } else {\r\n        delete this._webixConfig.width\r\n      }\r\n      return\r\n    }\r\n\r\n    this._webix.define('width', nv)\r\n    this._webix.resize()\r\n  }\r\n\r\n  /**\r\n   * 显示样式\r\n   */\r\n  set cssType(nv: CtlButtonType) {\r\n    let css = nv\r\n    switch (nv) {\r\n      case 'success':\r\n        css = 'yvan_success'\r\n        break\r\n\r\n      case 'danger':\r\n        css = 'yvan_danger'\r\n        break\r\n\r\n      case 'primary':\r\n        css = 'yvan_primary'\r\n        break\r\n\r\n      case 'default':\r\n        css = ''\r\n        break\r\n    }\r\n\r\n    if (!this._webix) {\r\n      if (css) {\r\n        this._webixConfig.css = css\r\n      } else {\r\n        delete this._webixConfig.css\r\n      }\r\n      return\r\n    }\r\n\r\n    $(this._webix.$view).removeClass('webix_danger webix_primary')\r\n    this._webix.define('css', css)\r\n  }\r\n\r\n  /**\r\n   * 设置按钮图标\r\n   */\r\n  set icon(nv: string) {\r\n    this._icon = nv\r\n    this._refreshText()\r\n  }\r\n\r\n  /**\r\n   * 获取按钮图标\r\n   */\r\n  get icon(): string {\r\n    return this._icon\r\n  }\r\n\r\n  /**\r\n   * 设置按钮文本\r\n   */\r\n  set text(nv: string) {\r\n    this._text = nv\r\n    this._refreshText()\r\n  }\r\n\r\n  /**\r\n   * 获取按钮文本\r\n   */\r\n  get text(): string {\r\n    return this._text\r\n  }\r\n\r\n  /*============================ 私有属性部分 ============================*/\r\n\r\n  private _text: string = ''\r\n  private _icon: string = ''\r\n\r\n  private _refreshText(): void {\r\n    const nv = `<i class=\"${this._icon}\"></i><span>${this._text}</span>`\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n      return\r\n    }\r\n    this._webix.setValue(nv)\r\n  }\r\n}\r\n","import { CtlBase } from '../../CtlBase'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport * as YvanUI from '../../YvanUIExtend'\r\nimport { YvEvent, YvEventDispatch } from '../../YvanEvent'\r\n\r\ntype CtlInputWidth = number | undefined | 'auto'\r\n\r\nexport class CtlInput<M> extends CtlBase<M> {\r\n  protected _create<M extends CtlInput<M>>(vjson: any, me: M) {\r\n    const that: M = me\r\n\r\n    // 提取想要的属性\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'id',\r\n      'gravity',\r\n      'validate',\r\n      'onInput',\r\n      'onKeydown',\r\n      'onClick',\r\n      'onEnter',\r\n      'width',\r\n      'onFocus',\r\n      'onChange',\r\n      'onBlur',\r\n      'maxlength',\r\n      'changeValueImplete',\r\n      'ff',\r\n      'label',\r\n      'labelWidth',\r\n      'labelAlign',\r\n      'readonly',\r\n      'disabled',\r\n      'required',\r\n      'value',\r\n      'prompt'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n    if (!vjson.id) {\r\n      that.id = _.uniqueId('input_')\r\n    }\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    function onKeydown(event: any) {\r\n      YvEventDispatch(that.onKeydown, that, event)\r\n    }\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited: function(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onAfterRender: function(this: any) {\r\n          const $input = $(this.$view).find('input')\r\n          $input.on('input', that.onInputEvent.bind(that))\r\n          $input.on('keydown', onKeydown)\r\n          if (\r\n            that.constructor.name !== 'CtlSelect' &&\r\n            that._webixConfig.required\r\n          ) {\r\n            if (that.constructor.name === 'CtlDateRangePicker') {\r\n              that._showValidate(\r\n                !this.getValue().end || this.getValue().end.length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            } else {\r\n              that._showValidate(\r\n                !this.getValue() || this.getValue().length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            }\r\n          }\r\n          this.callEvent('onCtlRender', [])\r\n          if (that.ff > 0) {\r\n            setTimeout(() => {\r\n              that.focus()\r\n              that.ff = 0\r\n            }, that.ff)\r\n          }\r\n        },\r\n        onDestruct: function(this: any) {\r\n          this.callEvent('onCtlRemove', [])\r\n          const $input = $(this.$view).find('input')\r\n          $input.off('input')\r\n          $input.off('keydown')\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any) {\r\n          YvEventDispatch(that.onClick, that, undefined)\r\n        },\r\n        onEnter(this: any) {\r\n          YvEventDispatch(that.onEnter, that, undefined)\r\n        },\r\n        onFocus(this: any) {\r\n          YvEventDispatch(that.onFocus, that, undefined)\r\n        },\r\n        onChange(this: any, newValue: any, oldValue: any) {\r\n          if (!that.valueValid(newValue)) {\r\n            // 不允许触发更改\r\n            return\r\n          }\r\n          if (that.onValueChange && typeof that.onValueChange === 'function') {\r\n            that.onValueChange(newValue, oldValue)\r\n          }\r\n          newValue = that.valueProcess(newValue)\r\n          that.changeToEntity(newValue)\r\n          if (that._webixConfig.required) {\r\n            if (that.constructor.name === 'CtlDateRangePicker') {\r\n              that._showValidate(\r\n                !this.getValue().end || this.getValue().end.length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            } else {\r\n              that._showValidate(\r\n                !this.getValue() || this.getValue().length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            }\r\n          }\r\n\r\n          YvEventDispatch(that.onChange, that, newValue)\r\n        },\r\n        onBlur(this: any) {\r\n          if (that._webixConfig.required) {\r\n            if (that.constructor.name === 'CtlDateRangePicker') {\r\n              that._showValidate(\r\n                !this.getValue().end || this.getValue().end.length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            } else {\r\n              that._showValidate(\r\n                !this.getValue() || this.getValue().length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            }\r\n          }\r\n          YvEventDispatch(that.onBlur, that, undefined)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  //是否允许触发 onChange\r\n  protected valueValid(value: any): boolean {\r\n    return true\r\n  }\r\n\r\n  //更改 onChange 或实体时的值\r\n  protected valueProcess(value: any): any {\r\n    return value\r\n  }\r\n\r\n  inputCheck!: (newValue: any, oldValue: any) => boolean\r\n\r\n  onInputEvent(event: Event) {\r\n    if (this.onInputValue && typeof this.onInputValue === 'function') {\r\n      this.onInputValue((event.target as any).value)\r\n    }\r\n\r\n    if (\r\n      this.constructor.name === 'CtlText' &&\r\n      this.maxlength &&\r\n      _.size((event.target as any).value) > this.maxlength\r\n    ) {\r\n      ;(event.target as any).value = (event.target as any).value.substring(\r\n        0,\r\n        this.maxlength\r\n      )\r\n    }\r\n    if (this.changeValueImplete) {\r\n      // 改变后立刻提交值\r\n      this.value = (event.target as any).value\r\n    }\r\n\r\n    // @ts-ignore\r\n    YvEventDispatch(this.onInput, this, event)\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n\r\n  /**\r\n   * 更改任何内容时触发\r\n   */\r\n  onInput?: YvEvent<M, Event>\r\n\r\n  /**\r\n   * 离开焦点或按下回车键之后触发更改时触发\r\n   */\r\n  onChange?: YvEvent<M, string>\r\n\r\n  /**\r\n   * 鼠标点击后触发\r\n   */\r\n  onClick?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 按下回车键之后触发\r\n   */\r\n  onEnter?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 获取焦点后触发\r\n   */\r\n  onFocus?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 离开焦点后触发\r\n   */\r\n  onBlur?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 按下任何键之后触发事件\r\n   */\r\n  onKeydown?: YvEvent<M, Event>\r\n\r\n  /**\r\n   * 输入内容时是否立刻提交 value\r\n   */\r\n  changeValueImplete: boolean = false\r\n\r\n  _gravity: string = ''\r\n\r\n  set gravity(nv: any) {\r\n    this._gravity = nv\r\n\r\n    let v: any\r\n    if (!nv) {\r\n      v = undefined\r\n    } else {\r\n      v = _.parseInt(nv)\r\n    }\r\n\r\n    if (!this._webix) {\r\n      if (v) {\r\n        this._webixConfig.gravity = v\r\n      } else {\r\n        delete this._webixConfig.gravity\r\n      }\r\n    } else {\r\n      this._webix.define('gravity', v)\r\n      this._webix.resize()\r\n    }\r\n  }\r\n\r\n  get gravity(): any {\r\n    return this._gravity\r\n  }\r\n\r\n  set id(nv: any) {\r\n    this._id = nv\r\n    if (!this._webix) {\r\n      this._webixConfig.id = nv\r\n    } else {\r\n      // 运行后不允许修改 id\r\n      console.error('can\\'t set \"ID\" at runtime!')\r\n    }\r\n  }\r\n\r\n  get id(): any {\r\n    return this._id\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._validateResult) {\r\n      throw new Error('invalidate!')\r\n    }\r\n\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 定焦时间\r\n   */\r\n  ff: number = 0\r\n\r\n  /**\r\n   * 最大长度\r\n   */\r\n  maxlength?: number = undefined\r\n\r\n  // private _maxlength!:number;\r\n\r\n  /**\r\n   * 文本描述\r\n   */\r\n  set label(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.label = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('label', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 文本对齐方式\r\n   */\r\n  set labelAlign(nv: 'left' | 'right' | 'center') {\r\n    if (!this._webix) {\r\n      this._webixConfig.labelAlign = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('labelAlign', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 必填\r\n   */\r\n  set required(nv: boolean) {\r\n    if (!this._webix) {\r\n      this._webixConfig.required = nv\r\n      return\r\n    }\r\n    this._webixConfig.required = nv\r\n    this._webix.define('required', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 文本宽度\r\n   */\r\n  set labelWidth(nv: number) {\r\n    if (!this._webix) {\r\n      this._webixConfig.labelWidth = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('labelWidth', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 禁用\r\n   */\r\n  set disabled(nv: boolean) {\r\n    if (!this._webix) {\r\n      this._webixConfig.disabled = nv\r\n      return\r\n    }\r\n\r\n    if (nv) {\r\n      this._webix.disable()\r\n    } else {\r\n      this._webix.enable()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 只读\r\n   */\r\n  set readonly(nv: boolean) {\r\n    if (!this._webix) {\r\n      this._webixConfig.readonly = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('readonly', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 水印\r\n   */\r\n  set prompt(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.placeholder = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('placeholder', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 宽度\r\n   */\r\n  set width(nv: CtlInputWidth) {\r\n    if (nv === 'auto' || typeof nv === 'undefined') {\r\n      nv = undefined\r\n    }\r\n\r\n    if (!this._webix) {\r\n      this._webixConfig.width = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('width', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  onValueChange(newV: any, oldV: any) {\r\n    //validType[this.validType](newV);\r\n  }\r\n\r\n  onInputValue(value: any) {\r\n    if (this.validate && typeof this.validate === 'function') {\r\n      this._validateResult = this.validate(value)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 验证\r\n   * @param nv  div.webix_inp_static\r\n   */\r\n  set validate(nv: any) {\r\n    const that = this\r\n    if (typeof nv === 'function') {\r\n      this._validate = nv\r\n    } else if (typeof nv === 'string') {\r\n      const vl = function(value: any, data: any) {\r\n        let msg = YvanUI.complexValid['fun'](nv, value)\r\n\r\n        return that._showValidate(msg, 'inputValidate')\r\n      }\r\n      this._validate = vl\r\n    }\r\n  }\r\n\r\n  get validate(): any {\r\n    return this._validate\r\n  }\r\n\r\n  /**================ 私有属性 ===================**/\r\n  _validateResult: boolean = true\r\n\r\n  _validate: any\r\n\r\n  _id: any\r\n\r\n  _maxlength: any\r\n\r\n  _showValidate(\r\n    msg: any,\r\n    type: 'inputValidate' | 'changedValidate' | 'requiredValidate'\r\n  ): boolean {\r\n    let $input!: any\r\n    if (\r\n      this.constructor.name === 'CtlText' ||\r\n      this.constructor.name === 'CtlSearch' ||\r\n      this.constructor.name === 'CtlCombo'\r\n    ) {\r\n      $input = $(this._webix.$view).find('input')\r\n    } else if (\r\n      this.constructor.name === 'CtlDatePicker' ||\r\n      this.constructor.name === 'CtlDateRangePicker' ||\r\n      this.constructor.name === 'CtlMultiCombo' ||\r\n      this.constructor.name === 'CtlMultiSelect'\r\n    ) {\r\n      $input = $(this._webix.$view).find('div.webix_inp_static')\r\n    } else if (this.constructor.name === 'CtlSelect') {\r\n      $input = $(this._webix.$view).find('select')\r\n    } else {\r\n      return true\r\n    }\r\n\r\n    switch (type) {\r\n      case 'inputValidate': {\r\n        if (msg) {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '#ffdedb',\r\n              'border-color': '#ff8d82'\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          $(this._webix.$view).append(\r\n            `<div id=\"${this.id}_validate\" style=\"position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;\">${msg}</div>`\r\n          )\r\n          return false\r\n        } else {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '',\r\n              'border-color': ''\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          return true\r\n        }\r\n      }\r\n      case 'changedValidate': {\r\n        if (msg) {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '#ffdedb',\r\n              'border-color': '#ff8d82'\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          $(this._webix.$view).append(\r\n            `<div id=\"${this.id}_validate\" style=\"position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;\">${msg}</div>`\r\n          )\r\n          return false\r\n        } else {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '',\r\n              'border-color': ''\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          return true\r\n        }\r\n      }\r\n      case 'requiredValidate': {\r\n        if (msg) {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'border-color': '#ff8d82'\r\n            })\r\n          })\r\n          // $(`#${this.id}_validate`).remove();\r\n          // $(this._webix.$view).append(`<div id=\"${this.id}_validate\" style=\"position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;\">必填项</div>`);\r\n          return false\r\n        } else {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'border-color': ''\r\n            })\r\n          })\r\n          // $(`#${this.id}_validate`).remove();\r\n          return true\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import * as YvanUI from '../../YvanUIExtend'\r\nimport { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlTextDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlText extends CtlInput<CtlText> {\r\n  static create(vjson: any): CtlText {\r\n    const that = new CtlText(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlTextDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['validate'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig)\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n\r\n  set validate(nv: any) {\r\n    const that = this\r\n    if (typeof nv === 'function') {\r\n      this._validate = nv\r\n    } else if (typeof nv === 'string') {\r\n      const vl = function(value: any, data: any) {\r\n        let msg = YvanUI.complexValid['fun'](nv, value)\r\n        const $input = $(that._webix.$view).find('input')\r\n        if (msg) {\r\n          $input.each((index, item) => {\r\n            $(item).css({\r\n              'background-color': '#ffdedb',\r\n              'border-color': '#ff8d82'\r\n            })\r\n          })\r\n          $(`#${that.id}_validate`).remove()\r\n          $(that._webix.$view).append(\r\n            `<div id=\"${that.id}_validate\" style=\"position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;\">${msg}</div>`\r\n          )\r\n          return false\r\n        } else {\r\n          $input.each((index, item) => {\r\n            $(item).css({\r\n              'background-color': '',\r\n              'border-color': ''\r\n            })\r\n          })\r\n          $(`#${that.id}_validate`).remove()\r\n          return true\r\n        }\r\n      }\r\n      this._validate = vl\r\n    }\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlCheckboxDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlCheckBox extends CtlInput<CtlCheckBox> {\r\n  static create(vjson: any): CtlCheckBox {\r\n    const that = new CtlCheckBox(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlCheckboxDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['labelAtRight', 'value'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'checkbox',\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  private _labelAtRight: boolean = true\r\n  private _label: string = ''\r\n\r\n  /**\r\n   * label 是否在右边\r\n   */\r\n  get labelAtRight(): boolean {\r\n    return this._labelAtRight\r\n  }\r\n\r\n  set labelAtRight(nv: boolean) {\r\n    this._labelAtRight = nv\r\n    this._refreshLabel()\r\n  }\r\n\r\n  /**\r\n   * label 显示内容\r\n   */\r\n  get label(): string {\r\n    return this._label\r\n  }\r\n\r\n  set label(nv: string) {\r\n    this._label = nv\r\n    this._refreshLabel()\r\n  }\r\n\r\n  private _refreshLabel() {\r\n    const nv = this._label\r\n    if (!this._webix) {\r\n      if (this._labelAtRight) {\r\n        this._webixConfig.label = ''\r\n        this._webixConfig.labelRight = nv\r\n        this._webixConfig.labelWidth = 0\r\n      } else {\r\n        this._webixConfig.label = nv\r\n        this._webixConfig.labelRight = ''\r\n      }\r\n    } else {\r\n      if (this._labelAtRight) {\r\n        this._webix.define({\r\n          label: '',\r\n          labelRight: nv\r\n        })\r\n      } else {\r\n        this._webix.define({\r\n          label: nv,\r\n          labelRight: ''\r\n        })\r\n      }\r\n      this._webix.refresh()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 交换状态\r\n   */\r\n  toggle() {\r\n    this._webix.toggle()\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValueHere(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlComboDefault } from '../../CtlDefaultValue'\r\nimport { getFirstPinyin } from '../../Utils'\r\nimport { DataSource } from '../../YvanDataSource'\r\nimport { YvEvent } from '../../YvanEvent'\r\nimport { YvDataSource } from '../../YvanDataSourceImp'\r\n\r\n/**\r\n * 下拉框组件\r\n */\r\nexport class CtlCombo extends CtlInput<CtlCombo> {\r\n  static create(vjson: any): CtlCombo {\r\n    const that = new CtlCombo(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlComboDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['options', 'dataSource'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig)\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 数据绑定完成后触发\r\n   */\r\n  onDataComplete?: YvEvent<CtlCombo, any>\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set options(nv: any[]) {\r\n    const options: any = {\r\n      filter(item: any, filterWord: string) {\r\n        if (_.size(filterWord) <= 0) {\r\n          return true\r\n        }\r\n        const nodePy = getFirstPinyin(item.text).toLowerCase()\r\n        return (\r\n          nodePy.indexOf(filterWord.toLowerCase()) >= 0 ||\r\n          item.text.indexOf(filterWord) >= 0\r\n        )\r\n      },\r\n      body: {\r\n        template: '#text#',\r\n        type: {\r\n          height: 36\r\n        },\r\n        data: nv\r\n      }\r\n    }\r\n\r\n    if (!this._webix) {\r\n      _.merge(this._webixConfig, {\r\n        view: 'combo',\r\n        options\r\n      })\r\n      return\r\n    }\r\n    this._webix.define('options', options)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 获取显示的值\r\n   */\r\n  getText(): string {\r\n    return this._webix.getText()\r\n  }\r\n\r\n  /**\r\n   * 下拉选项\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    this.options = nv\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlCombo> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlCombo>) {\r\n    this._dataSource = nv\r\n    this._rebindDataSource()\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlCombo>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlCombo>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    if (this.dataSourceBind) {\r\n      this.dataSourceBind.destory()\r\n      this.dataSourceBind = undefined\r\n    }\r\n\r\n    if (this._webix && this.getModule()) {\r\n      this.dataSourceBind = new YvDataSource(\r\n        this,\r\n        this.dataSource,\r\n        this._dataSourceProcess.bind(this)\r\n      )\r\n      this.dataSourceBind.init()\r\n    }\r\n  }\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (\r\n      !this.dataSource ||\r\n      _.isArray(this.dataSource) ||\r\n      _.isFunction(this.dataSource)\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL') {\r\n      return data\r\n    }\r\n\r\n    const displayField = this.dataSource.displayField || 'text'\r\n    const valueField = this.dataSource.valueField || 'id'\r\n    return _.map(data, item => {\r\n      return {\r\n        id: item[valueField],\r\n        text: item[displayField]\r\n      }\r\n    })\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlDateDefault, CtlDateTimeDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlDatePicker extends CtlInput<CtlDatePicker> {\r\n  static create(vjson: any): CtlDatePicker {\r\n    const that = new CtlDatePicker(vjson)\r\n\r\n    const baseConfig: any = {}\r\n    if (vjson.view === 'datetime') {\r\n      // 日期+时间输入\r\n      baseConfig.format = '%Y-%m-%d %H:%i:%s'\r\n      baseConfig.timepicker = true\r\n      _.defaultsDeep(vjson, CtlDateTimeDefault)\r\n    } else {\r\n      // 日期输入\r\n      baseConfig.format = '%Y-%m-%d'\r\n      baseConfig.timepicker = false\r\n      _.defaultsDeep(vjson, CtlDateDefault)\r\n    }\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      editable: true,\r\n      stringResult: true,\r\n      view: 'datepicker',\r\n      ...baseConfig,\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  /**\r\n   * 设置值 (如果不符合规定的格式 会清空)\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    const value = this._webix ? this._webix.getValue() : this._webixConfig.value\r\n    if (this.vjson.view === 'datetime') {\r\n      // 日期+时间输入\r\n      return _.toString(value).substr(0, 19)\r\n    } else {\r\n      // 日期输入\r\n      return _.toString(value).substr(0, 10)\r\n    }\r\n  }\r\n\r\n  /*============================ 私有部分 ============================*/\r\n\r\n  //更改 onChange 或实体时的值\r\n  protected valueProcess(value: any): any {\r\n    const moment: any = _.get(window, 'moment')\r\n    if (_.isDate(value)) {\r\n      value = moment(value)\r\n\r\n      if (this.vjson.view === 'datetime') {\r\n        // 日期+时间输入\r\n        value = value.isValid() ? value.format('YYYY-MM-DD HH:mm:ss') : ''\r\n      } else {\r\n        // 日期输入\r\n        value = value.isValid() ? value.format('YYYY-MM-DD') : ''\r\n      }\r\n\r\n      return value\r\n    }\r\n    return value\r\n  }\r\n}\r\n","import { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport {\r\n  CtlDateRangeDefault,\r\n  CtlDateTimeRangeDefault\r\n} from '../../CtlDefaultValue'\r\n\r\nexport class CtlDateRangePicker extends CtlInput<CtlDateRangePicker> {\r\n  static create(vjson: any): CtlDateRangePicker {\r\n    const that = new CtlDateRangePicker(vjson)\r\n\r\n    const baseConfig: any = {}\r\n    if (vjson.view === 'datetimerange') {\r\n      // 日期+时间输入\r\n      baseConfig.format = '%Y-%m-%d %H:%i:%s'\r\n      baseConfig.timepicker = true\r\n      _.defaultsDeep(vjson, CtlDateTimeRangeDefault)\r\n    } else {\r\n      // 日期输入\r\n      baseConfig.format = '%Y-%m-%d'\r\n      baseConfig.timepicker = false\r\n      _.defaultsDeep(vjson, CtlDateRangeDefault)\r\n    }\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'value',\r\n      'separator',\r\n      'entityNameStart',\r\n      'entityNameEnd'\r\n    ])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      editable: true,\r\n      stringResult: true,\r\n      view: 'daterangepicker',\r\n      ...baseConfig,\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共部分 ============================*/\r\n  entityNameStart: string = ''\r\n  entityNameEnd: string = ''\r\n\r\n  get separator(): string {\r\n    if (!this._webix) {\r\n      return this._webixConfig.separator\r\n    }\r\n    return this._webix.config['separator']\r\n  }\r\n\r\n  set separator(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.separator = nv\r\n    } else {\r\n      this._webix.define('separator', nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置值 (如果不符合规定的格式 会清空)\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      if (typeof nv === 'string') {\r\n        const [start, end] = nv.split(this.separator)\r\n        this._webixConfig.value = { start, end }\r\n      } else {\r\n        this._webixConfig.value = nv\r\n      }\r\n    } else {\r\n      let value: any = nv\r\n      if (typeof nv === 'string') {\r\n        const [start, end] = nv.split(this.separator)\r\n        value = { start, end }\r\n      }\r\n      this._webix.setValue(value)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    const value = this._webix ? this._webix.getValue() : this._webixConfig.value\r\n    if (!value) {\r\n      return ''\r\n    }\r\n    const { start, end } = value\r\n    return start + this.separator + end\r\n  }\r\n\r\n  /*============================ 私有部分 ============================*/\r\n\r\n  //是否允许触发 onChange\r\n  protected valueValid(value: any): boolean {\r\n    const moment: any = _.get(window, 'moment')\r\n\r\n    if (_.isPlainObject(value)) {\r\n      let { start, end } = value\r\n      if (!moment(start).isValid() || !moment(end).isValid()) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  //更改 onChange 或实体时的值\r\n  protected valueProcess(value: any): any {\r\n    const moment: any = _.get(window, 'moment')\r\n    if (_.isPlainObject(value)) {\r\n      let { start, end } = value\r\n      start = moment(start)\r\n      end = moment(end)\r\n\r\n      if (this.vjson.view === 'datetimerange') {\r\n        // 日期+时间输入\r\n        start = start.isValid() ? start.format('YYYY-MM-DD HH:mm:ss') : ''\r\n        end = end.isValid() ? end.format('YYYY-MM-DD HH:mm:ss') : ''\r\n      } else {\r\n        // 日期输入\r\n        start = start.isValid() ? start.format('YYYY-MM-DD') : ''\r\n        end = end.isValid() ? end.format('YYYY-MM-DD') : ''\r\n      }\r\n\r\n      if (this.entityNameStart) {\r\n        // 带 entityNameStart 实体绑定\r\n        _.set(this._module, this.entityNameStart, start)\r\n      }\r\n\r\n      if (this.entityNameEnd) {\r\n        // 带 entityNameEnd 实体绑定\r\n        _.set(this._module, this.entityNameEnd, end)\r\n      }\r\n\r\n      return start + this.separator + end\r\n    }\r\n    return value\r\n  }\r\n}\r\n","import { CtlBase } from '../CtlBase'\r\nimport { parseYvanPropChangeVJson } from '../CtlUtils'\r\n\r\nexport class CtlForm extends CtlBase<CtlForm> {\r\n  static create(vjson: any): CtlForm {\r\n    const that = new CtlForm(vjson)\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 vjson 存至 _webix (此时 _webix 还只是 vjson 代理对象)\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 yvanProxy 版的 _webix 合并至 webixProp, 最终合并至 vjson\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited: function(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onAfterLoad: function(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onBeforeLoad: function(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onChange: function(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onViewShow: function(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onDestruct: function() {\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  setValues(data: any) {\r\n    this._webix.setValues(data)\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlMultiComboDefault } from '../../CtlDefaultValue'\r\nimport { getFirstPinyin } from '../../Utils'\r\n\r\nexport class CtlMultiCombo extends CtlInput<CtlMultiCombo> {\r\n  static create(vjson: any): CtlMultiCombo {\r\n    const that = new CtlMultiCombo(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlMultiComboDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['options'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig)\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set options(nv: any[]) {\r\n    const options: any = {\r\n      filter(item: any, filterWord: string) {\r\n        if (_.size(filterWord) <= 0) {\r\n          return true\r\n        }\r\n        const nodePy = getFirstPinyin(item.text).toLowerCase()\r\n        return (\r\n          nodePy.indexOf(filterWord.toLowerCase()) >= 0 ||\r\n          item.text.indexOf(filterWord) >= 0\r\n        )\r\n      },\r\n      body: {\r\n        template: '#text#',\r\n        type: {\r\n          height: 36\r\n        },\r\n        data: nv\r\n      }\r\n    }\r\n\r\n    if (!this._webix) {\r\n      _.merge(this._webixConfig, {\r\n        view: 'multicombo',\r\n        options\r\n      })\r\n      return\r\n    }\r\n    this._webix.define('options', options)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    this.options = nv\r\n  }\r\n\r\n  /**\r\n   * 值分隔符\r\n   */\r\n  get separator(): string {\r\n    if (!this._webix) {\r\n      return this._webixConfig.separator\r\n    }\r\n    return this._webix.config['separator']\r\n  }\r\n\r\n  /**\r\n   * 值分隔符\r\n   */\r\n  set separator(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.separator = nv\r\n    } else {\r\n      this._webix.define('separator', nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置值 (如果不符合规定的格式 会清空)\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { YvEventDispatch, YvEvent } from '../../YvanEvent'\r\nimport { BaseDialog } from '../../YvanUIModule'\r\nimport { CtlSearchDefault } from '../../CtlDefaultValue'\r\nimport { CtlInput } from './CtlInput'\r\n\r\n/**\r\n * search widget 接口配置\r\n */\r\ninterface WidgetOption {\r\n  /**\r\n   * 要弹出的 widget 窗口实例\r\n   */\r\n  content: any\r\n\r\n  /**\r\n   * 默认要 子对话框带的参数\r\n   */\r\n  params: any\r\n\r\n  /**\r\n   * 写会数据时所带的映射关系\r\n   */\r\n  bind?: {\r\n    /**\r\n     * 本模块的实体对象+属性名 = 弹出框附属的属性名\r\n     */\r\n    [name: string]: string\r\n  }\r\n\r\n  /**\r\n   * 读取数据时的回调\r\n   */\r\n  onLoadData?: YvEvent<CtlSearch, void>\r\n  /**\r\n   * 回写时的回调\r\n   */\r\n  onConfirm?: YvEvent<CtlSearch, any>\r\n  /**\r\n   * 清空时的回调\r\n   */\r\n  onClear?: YvEvent<CtlSearch, void>\r\n}\r\n\r\nexport class CtlSearch extends CtlInput<CtlSearch> {\r\n  static create(vjson: any): CtlSearch {\r\n    const that = new CtlSearch(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlSearchDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['widget', 'value'])\r\n\r\n    // 将 vjson 存至 _webix (此时 _webix 还只是 vjson 代理对象)\r\n    that._webixConfig = vjson\r\n\r\n    if (!vjson.id) {\r\n      that.id = _.uniqueId('input_')\r\n    }\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this)\r\n          that._refreshIcon()\r\n        },\r\n        // onAfterRender(this: any) {\r\n        //     const $dom: any = $(this.$view);\r\n        //     $dom.on('keydown', (event: KeyboardEvent) => {\r\n        //         if (event.keyCode === 13) {\r\n        //             // 从键盘响应查询\r\n        //             event.stopPropagation();\r\n        //             event.preventDefault();\r\n        //\r\n        //             that.suppressRestore = true;\r\n        //             that._searchRequest(that._webix.getValue(), that.valueOrigin);\r\n        //             return;\r\n        //         }\r\n        //\r\n        //         YvEventDispatch(this.onKeydown, this, event);\r\n        //     });\r\n        // },\r\n        onEnter() {\r\n          // 从键盘响应查询\r\n          that.suppressRestore = true\r\n          that._searchRequest(that._webix.getValue(), that.valueOrigin)\r\n        },\r\n        onFocus(this: any) {\r\n          //进入焦点时，用户输入的值既为有效值\r\n          that.valueOrigin = that._webix.getValue()\r\n          YvEventDispatch(that.onFocus, that, undefined)\r\n        },\r\n        onBlur(this: any) {\r\n          //离开焦点时，用户输入的置为无效\r\n          if (!that.suppressRestore) {\r\n            that._webix.setValue(that.valueOrigin)\r\n          }\r\n          YvEventDispatch(that.onBlur, that, undefined)\r\n        },\r\n        // onDestruct(this: any) {\r\n        //     const $dom: any = $(this.$view);\r\n        //     $dom.off('keydown');\r\n        // },\r\n        onSearchIconClick(e: Event) {\r\n          // 从鼠标响应查询\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n\r\n          const $span = $(e.target as any)\r\n          if ($span.hasClass('wxi-close')) {\r\n            // 清空\r\n            that.clear()\r\n          } else {\r\n            // 查询\r\n            that.suppressRestore = true\r\n            that._searchRequest(that._webix.getValue(), that.valueOrigin)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n\r\n  /**\r\n   * 弹框配置\r\n   */\r\n  widget?: WidgetOption\r\n\r\n  /**\r\n   * 清空值\r\n   */\r\n  clear() {\r\n    if (!this.widget) {\r\n      return\r\n    }\r\n\r\n    YvEventDispatch(this.widget.onClear, this, undefined)\r\n\r\n    //清空\r\n    _.forOwn(this.widget.bind, (value, key) => {\r\n      _.set(this._module, key, '')\r\n    })\r\n  }\r\n\r\n  get value(): string | undefined {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this.valueOrigin\r\n  }\r\n\r\n  set value(nv: string | undefined) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n      this.valueOrigin = nv\r\n    }\r\n\r\n    YvEventDispatch(this.onChange, this, nv)\r\n    this._refreshIcon()\r\n  }\r\n\r\n  _refreshIcon() {\r\n    const value = this._webix ? this._webix.getValue() : this._webixConfig.value\r\n    const icon = value ? 'wxi-close' : 'wxi-search'\r\n    let $span: any = this._webix ? $(this._webix.$view).find('span') : undefined\r\n\r\n    if (!$span || $span.length <= 0) {\r\n      if (this._webix) {\r\n        this._webix.define('icon', icon)\r\n      } else {\r\n        this._webixConfig.icon = icon\r\n      }\r\n    } else {\r\n      $span\r\n        .removeClass('wxi-close')\r\n        .removeClass('wxi-search')\r\n        .addClass(icon)\r\n    }\r\n  }\r\n\r\n  /*============================ 私有部分 ============================*/\r\n  // 原始值\r\n  private valueOrigin?: string = undefined\r\n  //抑制还原动作\r\n  private suppressRestore: boolean = false\r\n\r\n  /**\r\n   * 进入查询框\r\n   */\r\n  _searchRequest(queryValue: any, restoreValue: any) {\r\n    queryValue = _.toString(queryValue)\r\n    const searchCtl = this\r\n\r\n    if (!searchCtl.widget) {\r\n      console.error('没有设置 widget 属性')\r\n      return\r\n    }\r\n\r\n    const widgetParamter: any = {\r\n      query: queryValue,\r\n      params: searchCtl.widget.params\r\n    }\r\n\r\n    //构造查询的对象\r\n    //从 bind 获取\r\n    const queryObj = {}\r\n    _.forOwn(searchCtl.widget.bind, (value, key) => {\r\n      _.set(queryObj, value, _.get(this._module, key))\r\n    })\r\n\r\n    widgetParamter.existObject = queryObj\r\n\r\n    widgetParamter.onWidgetConfirm = function(data: any) {\r\n      if (!searchCtl.widget) {\r\n        console.error('没有设置 widget 属性')\r\n        return\r\n      }\r\n\r\n      YvEventDispatch(searchCtl.widget.onConfirm, searchCtl, undefined)\r\n\r\n      //写回\r\n      _.forOwn(searchCtl.widget.bind, (value, key) => {\r\n        _.set(searchCtl._module, key, _.get(data, value))\r\n      })\r\n\r\n      this.closeDialog()\r\n      searchCtl.focus()\r\n    }\r\n    widgetParamter.onClose = function() {\r\n      //弹窗关闭后恢复原值，并开启还原\r\n      searchCtl.value = restoreValue\r\n      searchCtl.suppressRestore = false\r\n      searchCtl.focus()\r\n    }\r\n    const dlg: BaseDialog<any, any, any> = new searchCtl.widget.content()\r\n    dlg.showDialog(widgetParamter, searchCtl._module, true)\r\n    // YvanUI.showDialogWidget(this, new searchCtl.widget.content(), widgetParamter);\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\n\r\nexport class CtlCarousel extends CtlBase<CtlCarousel> {\r\n  onShow?: YvEvent<CtlCarousel, string>\r\n\r\n  static create(vjson: any): CtlCarousel {\r\n    const that = new CtlCarousel(vjson)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['onShow'])\r\n\r\n    // 将 vjson 存至 _webix (此时 _webix 还只是 vjson 代理对象)\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited() {\r\n          that.attachHandle(this)\r\n        },\r\n        onDestruct: function() {\r\n          that.removeHandle()\r\n        },\r\n        onShow: function(this: any) {\r\n          const value = this.getActiveIndex()\r\n          YvEventDispatch(that.onShow, that, value)\r\n        }\r\n      }\r\n    })\r\n    return that\r\n  }\r\n}\r\n","const CtlGridLocale: any = {\r\n    rownumber: \" \",\r\n    page: \"页\",\r\n    more: \"更多\",\r\n    to: \"到\",\r\n    of: \"of\",\r\n    next: \"下一页\",\r\n    last: \"上一页\",\r\n    first: \"首页\",\r\n    previous: \"上一页\",\r\n    loadingOoo: \"加载中...\",\r\n    selectAll: \"查询全部\",\r\n    searchOoo: \"查询...\",\r\n    blanks: \"空白\",\r\n    filterOoo: \"过滤...\",\r\n    applyFilter: \"确定\",\r\n    clearFilter: \"清空\",\r\n    equals: \"相等\",\r\n    notEqual: \"不相等\",\r\n    lessThan: \"小于\",\r\n    greaterThan: \"大于\",\r\n    lessThanOrEqual: \"小于等于\",\r\n    greaterThanOrEqual: \"大于等于\",\r\n    inRange: \"范围查询\",\r\n    contains: \"包含\",\r\n    notContains: \"不包含\",\r\n    startsWith: \"开始于\",\r\n    endsWith: \"结束于\",\r\n    group: \"组\",\r\n    columns: \"列\",\r\n    filters: \"筛选\",\r\n    rowGroupColumns: \"laPivot Cols\",\r\n    rowGroupColumnsEmptyMessage: \"la drag cols to group\",\r\n    valueColumns: \"laValue Cols\",\r\n    pivotMode: \"laPivot-Mode\",\r\n    groups: \"laGroups\",\r\n    values: \"值\",\r\n    pivots: \"laPivots\",\r\n    valueColumnsEmptyMessage: \"la drag cols to aggregate\",\r\n    pivotColumnsEmptyMessage: \"la drag here to pivot\",\r\n    toolPanelButton: \"la tool panel\",\r\n    noRowsToShow: \"数据为空\",\r\n    pinColumn: \"laPin Column\",\r\n    valueAggregation: \"laValue Agg\",\r\n    autosizeThiscolumn: \"laAutosize Diz\",\r\n    autosizeAllColumns: \"laAutsoie em All\",\r\n    groupBy: \"排序\",\r\n    ungroupBy: \"不排序\",\r\n    resetColumns: \"重置列\",\r\n    expandAll: \"展开全部\",\r\n    collapseAll: \"关闭\",\r\n    toolPanel: \"工具面板\",\r\n    export: \"导出\",\r\n    csvExport: \"导出为CSV格式文件\",\r\n    excelExport: \"导出到Excel\",\r\n    pinLeft: \"laPin &lt;&lt;\",\r\n    pinRight: \"laPin &gt;&gt;\",\r\n    noPin: \"laDontPin &lt;&gt;\",\r\n    sum: \"总数\",\r\n    min: \"最小值\",\r\n    max: \"最大值\",\r\n    none: \"无\",\r\n    count: \"总\",\r\n    average: \"平均值\",\r\n    copy: \"复制\",\r\n    copyWithHeaders: \"携带表头复制\",\r\n    ctrlC: \"ctrl + C\",\r\n    paste: \"粘贴\",\r\n    ctrlV: \"ctrl + V\"\r\n};\r\n\r\nexport default CtlGridLocale\r\n","import { CtlGrid } from './CtlGrid'\r\n\r\nexport class CtlGridPage {\r\n  public grid: CtlGrid\r\n\r\n  public getPageData!: (currentPage: number, pageSize: number) => {}\r\n\r\n  private _currentPage: number = 1\r\n\r\n  private _pageSize: number = 100\r\n\r\n  private _pageCount: number = 0\r\n\r\n  private _itemCount: number = 0\r\n\r\n  get currentPage() {\r\n    return this._currentPage\r\n  }\r\n  set currentPage(cp: number) {\r\n    this._currentPage = cp\r\n    if (this._currentPage > this._pageCount) {\r\n      this._currentPage = this._pageCount\r\n    }\r\n    if (this._currentPage <= 0 && this._pageCount > 0) {\r\n      this._currentPage = 1\r\n    }\r\n    this.refreshPageViewInfo()\r\n  }\r\n\r\n  get pageSize() {\r\n    return this._pageSize\r\n  }\r\n  set pageSize(ps: number) {\r\n    if (ps <= 0) {\r\n      return\r\n    }\r\n\r\n    this._pageSize = ps\r\n    this.refreshPageViewInfo()\r\n  }\r\n\r\n  get pageCount() {\r\n    return this._pageCount\r\n  }\r\n\r\n  get itemCount() {\r\n    return this._itemCount\r\n  }\r\n\r\n  set itemCount(ic: number) {\r\n    this._itemCount = ic\r\n    this.refreshPageViewInfo()\r\n  }\r\n\r\n  public refreshGrid() {\r\n    this.getPageData(1, this.pageSize)\r\n  }\r\n\r\n  private firstButtomDom: any\r\n  private prevButtomDom: any\r\n  private nextButtomDom: any\r\n  private lastButtomDom: any\r\n  private currenpageDom: any\r\n  private gridpagerDom: any\r\n  private itemcountDom: any\r\n  private pageSizeDom: any\r\n  private gridpagerLeft: any\r\n  private gridpagerRight: any\r\n  private gridpagerCenter: any\r\n\r\n  constructor(grid: CtlGrid) {\r\n    this.grid = grid\r\n    this._pageSize = this.grid.pageSize\r\n\r\n    /** 找到aggrid 自带的pageview 替换子dom节点 **/\r\n\r\n    var dom = this.grid.webix.$view.getElementsByClassName(\r\n      'ag-paging-panel ag-unselectable'\r\n    )\r\n    var su_id = this.grid.webix.config.id\r\n    if (dom.length <= 0) {\r\n      return\r\n    }\r\n    /** 显示底部分页栏 **/\r\n    dom[0].className = 'ag-paging-panel ag-unselectable'\r\n\r\n    dom[0].innerHTML =\r\n      '<div id=\"wwww\" role=\"group\">' +\r\n      '    <table class=\"ui-pg-table\" style=\"width:100%;table-layout:fixed;height:100%;\">' +\r\n      '        <tbody><tr>' +\r\n      '            <td id=\"gridpager_left_' +\r\n      su_id +\r\n      '\" style=\"display: none\"></td>' +\r\n      '            <td id=\"gridpager_center_' +\r\n      su_id +\r\n      '\">' +\r\n      '                <table style=\"table-layout:auto;white-space: pre;margin-left:0;margin-right:auto;\">' +\r\n      '                    <tbody><tr>' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"First Page\" style=\"cursor: default;\"><span id=\"first_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-double-left\"></span></td>' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"Previous Page\" style=\"cursor: default;\"><span id=\"prev_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-left\"></span></td>' +\r\n      '                        <td><span style=\"color: #c0c0c0\">|</span></td>\\n' +\r\n      '                        <td dir=\"ltr\"><input aria-label=\"Page No.\" id=\"currenpage_' +\r\n      su_id +\r\n      '\" type=\"text\" size=\"2\" maxlength=\"7\" value=\"0\"> 共 <span id=\"gridpager_' +\r\n      su_id +\r\n      '\">219</span> 页 </td>' +\r\n      '                        <td><span style=\"color: #c0c0c0\">|</span></td>\\n' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"Next Page\" style=\"cursor: default;\"><span id=\"next_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-right\"></span></td>' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"Last Page\" style=\"cursor: default;\"><span id=\"last_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-double-right\"></span></td>' +\r\n      '                        <td dir=\"ltr\"><select id=\"pagesize_' +\r\n      su_id +\r\n      '\" title=\"Records per Page\"><option value=\"20\" selected=\"selected\">20</option><option value=\"50\">50</option><option value=\"100\">100</option><option value=\"200\">200</option><option value=\"500\">500</option><option value=\"1000\">1000</option></select></td>' +\r\n      '                    </tr></tbody>' +\r\n      '                </table>' +\r\n      '            </td>' +\r\n      '            <td id=\"gridpager_right_' +\r\n      su_id +\r\n      '\" style=\"text-align:right;\">' +\r\n      '               <span dir=\"ltr\" style=\"text-align:right\" id=\"itemcount_' +\r\n      su_id +\r\n      '\">41 - 60　共 4,367 条</span>' +\r\n      '            </td>' +\r\n      '        </tr></tbody>' +\r\n      '    </table>' +\r\n      '</div>'\r\n\r\n    this.firstButtomDom = document.getElementById('first_' + su_id)\r\n    this.prevButtomDom = document.getElementById('prev_' + su_id)\r\n    this.nextButtomDom = document.getElementById('next_' + su_id)\r\n    this.lastButtomDom = document.getElementById('last_' + su_id)\r\n    this.currenpageDom = document.getElementById('currenpage_' + su_id)\r\n    this.gridpagerDom = document.getElementById('gridpager_' + su_id)\r\n    this.itemcountDom = document.getElementById('itemcount_' + su_id)\r\n    this.pageSizeDom = document.getElementById('pagesize_' + su_id)\r\n    this.gridpagerCenter = document.getElementById('gridpager_center_' + su_id)\r\n    this.gridpagerLeft = document.getElementById('gridpager_left_' + su_id)\r\n    this.gridpagerRight = document.getElementById('gridpager_right_' + su_id)\r\n\r\n    if (this.grid.pagination) {\r\n      this.gridpagerCenter.style.display = ''\r\n    } else {\r\n      this.gridpagerCenter.style.display = 'none'\r\n    }\r\n\r\n    this.refreshPageViewInfo()\r\n\r\n    var me = this\r\n\r\n    this.currenpageDom.onkeydown = function(event: any) {\r\n      if (event.keyCode === 13) {\r\n        // enter键\r\n        let cp = parseInt(event.srcElement.value)\r\n        if (cp > me.pageCount) {\r\n          cp = me.pageCount\r\n        }\r\n        if (cp <= 0) {\r\n          cp = 1\r\n        }\r\n        me.getPageData(cp, me.pageSize)\r\n      } else {\r\n        if (event.keyCode !== 8 && (event.keyCode < 48 || event.keyCode > 57)) {\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    this.pageSizeDom.onchange = function(v: any) {\r\n      me.pageSize = v.srcElement.value\r\n      me.grid.paginationSetPageSize(me.pageSize)\r\n      if (typeof me.getPageData === 'function') {\r\n        me.getPageData(1, me.pageSize)\r\n      }\r\n    }\r\n\r\n    var buttons = dom[0].getElementsByClassName('ctl-grid-page ui-icon')\r\n    var buttons1 = dom[0].getElementsByClassName(\r\n      'ctl-grid-page ui-icon-disable'\r\n    )\r\n    buttons = _.union(buttons, buttons1)\r\n    _.each(buttons, button => {\r\n      button.onclick = function(q: any) {\r\n        for (let i = 0; i < q.srcElement.classList.length; i++) {\r\n          if (q.srcElement.classList[i] === 'ui-icon-disable') {\r\n            return\r\n          }\r\n        }\r\n        const pre = _.split(q.srcElement.id, '_' + me.grid.webix.config.id)\r\n\r\n        let cp = me.currentPage\r\n        switch (pre[0]) {\r\n          case 'first': {\r\n            cp = 1\r\n            break\r\n          }\r\n          case 'prev': {\r\n            if (cp > 1) {\r\n              cp -= 1\r\n            }\r\n            break\r\n          }\r\n          case 'next': {\r\n            if (cp < me.pageCount) {\r\n              cp += 1\r\n            }\r\n            break\r\n          }\r\n          case 'last': {\r\n            cp = me.pageCount\r\n            me.disableButton(q.srcElement)\r\n            break\r\n          }\r\n        }\r\n\r\n        if (typeof me.getPageData === 'function') {\r\n          me.getPageData(cp, me.pageSize)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  private disableButton(element: any) {\r\n    if (element.className.includes('ui-icon-disable')) {\r\n      return\r\n    }\r\n    element.className = _.replace(\r\n      element.className,\r\n      'ui-icon',\r\n      'ui-icon-disable'\r\n    )\r\n  }\r\n\r\n  private activeButton(element: any) {\r\n    if (\r\n      !element.className.includes('ui-icon-disable') &&\r\n      element.className.includes('ui-icon')\r\n    ) {\r\n      return\r\n    }\r\n    element.className = _.replace(\r\n      element.className,\r\n      'ui-icon-disable',\r\n      'ui-icon'\r\n    )\r\n  }\r\n\r\n  private refreshPageViewInfo() {\r\n    if (this.grid.pagination) {\r\n      if (this._itemCount > 0 && this._pageSize > 0) {\r\n        this._pageCount = Math.ceil(this._itemCount / this._pageSize)\r\n      }\r\n\r\n      this.pageSizeDom.value = this._pageSize\r\n      this.currenpageDom.value = this._currentPage\r\n      this.gridpagerDom.innerText = this._pageCount\r\n\r\n      if (this.currentPage <= 0) {\r\n        this.itemcountDom.innerText = '0 - 0　共 0 条'\r\n      } else {\r\n        let min = (this.currentPage - 1) * this.pageSize + 1\r\n        let max = this.currentPage * this.pageSize\r\n\r\n        if (min > this._itemCount) {\r\n          min = this._itemCount\r\n        }\r\n        if (max > this._itemCount) {\r\n          max = this._itemCount\r\n        }\r\n        this.itemcountDom.innerText =\r\n          min + ' - ' + max + '  共 ' + this.itemCount + ' 条'\r\n      }\r\n\r\n      if (this.currentPage > 1) {\r\n        this.activeButton(this.firstButtomDom)\r\n        this.activeButton(this.prevButtomDom)\r\n      } else {\r\n        this.disableButton(this.firstButtomDom)\r\n        this.disableButton(this.prevButtomDom)\r\n      }\r\n\r\n      if (this.currentPage < this.pageCount) {\r\n        this.activeButton(this.nextButtomDom)\r\n        this.activeButton(this.lastButtomDom)\r\n      } else {\r\n        this.disableButton(this.nextButtomDom)\r\n        this.disableButton(this.lastButtomDom)\r\n      }\r\n    } else {\r\n      this.itemcountDom.innerText = '共 ' + this.itemCount + ' 条'\r\n    }\r\n  }\r\n}\r\n","export default function (params: any, grid?: any) {\r\n    if (params.node.cstate) {\r\n        if (params.node.cstate === 'validate' || params.node.cstate === 'pending') {\r\n            return '<i class=\"fa fa-spinner fa-spin\"></i>'\r\n        }\r\n\r\n        if (params.node.cstate === 'editing') {\r\n            return '<i class=\"fa fa-edit\"></i>'\r\n        }\r\n\r\n        if (params.node.cstate === 'ok') {\r\n            return '<i class=\"fa fa-check\" style=\"color: green;\"></i>'\r\n        }\r\n\r\n        if (params.node.cstate === 'error') {\r\n            return '<i class=\"fa fa-exclamation-circle\" style=\"color: red;\"></i>'\r\n        }\r\n    }\r\n\r\n    if (params.node.rowPinned === 'top') {\r\n        return '+'\r\n    }\r\n\r\n    if (_.size(params.data) <= 0) {\r\n        //数据还没刷出来\r\n        return '<i class=\"fa fa-spinner fa-spin\"></i>'\r\n    }\r\n    if (grid && grid.pagination && grid.gridPage) {\r\n        return 1 + params.node.rowIndex + grid.gridPage.pageSize * (grid.gridPage.currentPage - 1);\r\n    }\r\n    return 1 + params.node.rowIndex\r\n}\r\n","export const YvGridProp: any = {\r\n    editable: false,\r\n    checkbox: false,\r\n    editSingleClick: true,\r\n    allowNewRow: true,\r\n    filterable: true,\r\n    loading: false,\r\n    showRowNumber: true,\r\n    autoSizeColumns: false,\r\n    allowCellSelection: false,\r\n    allowRowSelection: true,\r\n    idField: undefined,\r\n    valueSep: true,\r\n    saveOn: 'rowChanged',\r\n    newRowData: undefined,\r\n    stopEditingWhenGridLosesFocus: false,\r\n    columns: [],\r\n    columnGroup: [],\r\n    data: undefined\r\n};\r\n\r\nexport const YvGridColumnProp: any = {\r\n    hidden: false,\r\n    field: '',\r\n    title: '',\r\n    width: undefined,\r\n    maxwidth: 800,\r\n    minwidth: 0,\r\n    sortable: false,\r\n    resizable: true,\r\n    editable: false,\r\n    filterable: false,\r\n    calcExpr: undefined,\r\n    editMode: 'text'\r\n};\r\n\r\nexport const YvGridColumnEditProp: any = {\r\n    widget: undefined,\r\n    bind: [],\r\n    on: true,\r\n    off: false,\r\n    precision: 0,\r\n    idField: 'id',\r\n    textField: 'text',\r\n    maxlength: undefined,\r\n    dateformat: 'yyyy-MM-dd',\r\n    datetimeformat: 'yyyy-MM-dd HH:mm:ss',\r\n    data: []\r\n};\r\n","export default class CtlGridCellCheckbox {\r\n\r\n    checkedToggle(vue: any, childSpan: any, id: any) {\r\n        return function () {\r\n            if (childSpan.classList.contains('checked')) {\r\n                const index = vue.checkedIds.indexOf(id)\r\n                if (index >= 0) {\r\n                    vue.checkedIds.splice(index, 1)\r\n                }\r\n                childSpan.classList.remove('checked')\r\n\r\n            } else {\r\n                vue.checkedIds.push(id)\r\n                childSpan.classList.add('checked')\r\n            }\r\n\r\n            // 观测，是否显示\"全选\"框的函数\r\n            if (vue.allCheckedBoxStateChanged) {\r\n                vue.allCheckedBoxStateChanged();\r\n            }\r\n        }\r\n    }\r\n\r\n    innerRefresh(this: any, gridOptions: any) {\r\n        const vue = gridOptions.api.vue\r\n        const data = gridOptions.data\r\n        const id = vue._getIdByRow(data)\r\n        const childSpan = this.$el.querySelectorAll('.yvan-checkbox-switch')[0]\r\n        if (!childSpan) {\r\n            return\r\n        }\r\n\r\n        if (gridOptions.isCheckedIds) {\r\n            //用来做勾选数据行用 checkedIds\r\n            if (vue.checkedIds.indexOf(id) >= 0) {\r\n                childSpan.classList.add('checked')\r\n            } else {\r\n                childSpan.classList.remove('checked')\r\n            }\r\n\r\n            // 观测，是否显示\"全选\"框的函数\r\n            if (vue.allCheckedBoxStateChanged) {\r\n                vue.allCheckedBoxStateChanged();\r\n            }\r\n\r\n        } else {\r\n            //用来做数据展示用\r\n            childSpan.classList.add('disabled')\r\n            if (typeof gridOptions.on === 'string') {\r\n                //on 是个字符串\r\n                if (gridOptions.on === '' + gridOptions.value) {\r\n                    childSpan.classList.add('checked')\r\n                }\r\n\r\n            } else if (typeof gridOptions.on === 'function') {\r\n                //on 是个函数\r\n                if (gridOptions.on.call(vue, gridOptions.value, data)) {\r\n                    childSpan.classList.add('checked')\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    init(this: any, gridOptions: any) {\r\n        this.$el = document.createElement('div')\r\n        if (gridOptions.node.rowPinned) {\r\n            //这是在添加行或结尾行的数据，不用任何展示\r\n            return\r\n        }\r\n\r\n        this.$el.classList.add('yvan-checkbox')\r\n        this.$el.innerHTML =\r\n            '<span class=\"yvan-checkbox-switch\"><span class=\"yvan-checkbox-status\"></span></span>'\r\n\r\n        this.innerRefresh(gridOptions)\r\n\r\n        const vue = gridOptions.api.vue;\r\n        const childSpan = this.$el.querySelectorAll('.yvan-checkbox-switch')[0];\r\n        const data = gridOptions.data\r\n        const id = vue._getIdByRow(data)\r\n        this.$el.addEventListener('click', this.checkedToggle(vue, childSpan, id))\r\n    }\r\n\r\n    getGui(this: any) {\r\n        return this.$el\r\n    }\r\n\r\n    destroy() {\r\n    }\r\n\r\n    refresh(gridOptions: any) {\r\n        this.innerRefresh(gridOptions)\r\n    }\r\n}\r\n","export default class CtlGridHeadCheckbox {\r\n\r\n    checkedToggle(ctlGrid: any, gridOptions: any) {\r\n        const that: any = this;\r\n        return function () {\r\n            if (ctlGrid.idField) {\r\n\r\n                const domSpan = $(that.$el).find('.yvan-checkbox-switch');\r\n                const isChecked = domSpan.is('.checked');\r\n                // 当前表格的 全部行ID\r\n                const dataIds = _.map(ctlGrid.getData(), v => _.get(v, ctlGrid.idField));\r\n\r\n                if (isChecked) {\r\n                    // 取消全选\r\n                    for (let i = 0; i < dataIds.length; i++) {\r\n                        const id = dataIds[i];\r\n                        const index = ctlGrid.checkedIds.indexOf(id)\r\n                        if (index >= 0) {\r\n                            ctlGrid.checkedIds.splice(index, 1)\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    // 全选\r\n                    for (let i = 0; i < dataIds.length; i++) {\r\n                        const id = dataIds[i];\r\n                        if (!_.includes(ctlGrid.checkedIds, id)) {\r\n                            ctlGrid.checkedIds.push(id);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // 刷新\r\n                ctlGrid.gridApi.refreshCells({\r\n                    columns: ['__CB__'],\r\n                    force: true\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    innerRefresh(this: any, gridOptions: any) {\r\n        const ctlGrid = gridOptions.api.vue\r\n        const domSpan = $(this.$el).find('.yvan-checkbox-switch');\r\n\r\n        if (ctlGrid.idField) {\r\n            ctlGrid.allCheckedBoxStateChanged = () => {\r\n                // 当前表格的 全部行ID\r\n                const dataIds = _.map(ctlGrid.getData(), v => _.get(v, ctlGrid.idField));\r\n\r\n                let allIn = true;\r\n                for (let i = 0; i < dataIds.length; i++) {\r\n                    const id = dataIds[i];\r\n                    if (!_.includes(ctlGrid.checkedIds, id)) {\r\n                        // 不是全部都包含\r\n                        allIn = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                const isChecked = domSpan.is('.checked');\r\n                if (isChecked) {\r\n                    if (!allIn) {\r\n                        domSpan.removeClass('checked');\r\n                    }\r\n                } else {\r\n                    if (allIn) {\r\n                        domSpan.addClass('checked');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    init(this: any, gridOptions: any) {\r\n        this.$el = document.createElement('div')\r\n\r\n        this.$el.classList.add('yvan-checkbox')\r\n        this.$el.innerHTML =\r\n            '<span class=\"yvan-checkbox-switch\"><span class=\"yvan-checkbox-status\"></span></span>'\r\n\r\n        _.defer(() => {\r\n            const ctlGrid = gridOptions.api.vue\r\n            this.$el.addEventListener('click', this.checkedToggle(ctlGrid, gridOptions))\r\n            this.innerRefresh(gridOptions)\r\n        });\r\n\r\n        // clearInterval(this.intervalHandle)\r\n    }\r\n\r\n    getGui(this: any) {\r\n        return this.$el\r\n    }\r\n\r\n    destroy() {\r\n    }\r\n\r\n    refresh(gridOptions: any) {\r\n        this.innerRefresh(gridOptions)\r\n    }\r\n}","import * as YvanUI from './YvanUIExtend'\r\nimport {\r\n  GridDataSource,\r\n  GridDataSourceSql,\r\n  GridDataSourceStaticFunction,\r\n  WatchParam,\r\n  GetParam\r\n} from './YvanDataSourceGrid'\r\nimport { isDesignMode } from './DesignHelper'\r\n\r\nexport class YvanDataSourceGrid {\r\n  private option: GridDataSource\r\n  private ctl: any\r\n  private readonly module: any\r\n  private watches: Function[] = []\r\n  private isFirstAutoLoad: boolean = true //是否为第一次自动读取\r\n\r\n  private reload: undefined | (() => void)\r\n  private rowCount: number | undefined\r\n  private lastFilterModel: any\r\n\r\n  serverQuery = _.debounce(\r\n    (\r\n      option: GridDataSourceSql,\r\n      paramFunction: undefined | (() => any),\r\n      params: any\r\n    ) => {\r\n      const that = this\r\n\r\n      //异步请求数据内容\r\n      that.ctl.loading = true\r\n      let needCount = false\r\n      if (typeof that.rowCount === 'undefined') {\r\n        //从来没有统计过 rowCount(记录数)\r\n        needCount = true\r\n        that.lastFilterModel = _.cloneDeep(params.filterModel)\r\n      } else {\r\n        if (!_.isEqual(that.lastFilterModel, params.filterModel)) {\r\n          //深度对比，如果 filter 模型更改了，需要重新统计 rowCount(记录数)\r\n          needCount = true\r\n          that.lastFilterModel = _.cloneDeep(params.filterModel)\r\n        }\r\n      }\r\n      const queryParams = {\r\n        ...(typeof paramFunction === 'function' ? paramFunction() : undefined)\r\n      }\r\n      YvanUI.dbs[option.db]\r\n        .query({\r\n          params: queryParams,\r\n          limit: params.startRow,\r\n          limitOffset: params.endRow - params.startRow,\r\n          needCount,\r\n          orderByModel: params.sortModel,\r\n          filterModel: params.filterModel,\r\n          sqlId: option.sqlId\r\n        })\r\n        .then(res => {\r\n          const { data: resultData, totalCount, params: resParams } = res\r\n          if (needCount) {\r\n            that.rowCount = totalCount\r\n          }\r\n          params.successCallback(resultData, that.rowCount)\r\n          /** 如果不分页就在这里设置总条目数量，避免多次刷新分页栏 **/\r\n          if (!that.ctl.pagination) {\r\n            that.ctl.gridPage.itemCount = that.rowCount\r\n          }\r\n          that.ctl._bindingComplete()\r\n          if (that.ctl.entityName) {\r\n            _.set(\r\n              that.module,\r\n              that.ctl.entityName + '.selectedRow',\r\n              that.ctl.getSelectedRow()\r\n            )\r\n          }\r\n        })\r\n        .catch(r => {\r\n          params.failCallback()\r\n        })\r\n        .finally(() => {\r\n          this.ctl.loading = false\r\n        })\r\n    }\r\n  )\r\n\r\n  /**\r\n   * SQL取值\r\n   */\r\n  setSqlMode(\r\n    option: GridDataSourceSql,\r\n    paramFunction: undefined | (() => any)\r\n  ) {\r\n    const that = this\r\n    this.reload = () => {\r\n      this.ctl.loading = true\r\n      that.clearRowCount()\r\n      if (that.ctl.entityName) {\r\n        _.set(that.module, that.ctl.entityName + '.selectedRow', undefined)\r\n      }\r\n      that.ctl.gridApi.hasDataSource = true\r\n\r\n      if (that.ctl.pagination) {\r\n        /** 分页模式 **/\r\n        that.ctl.gridPage.getPageData = (\r\n          currentPage: number,\r\n          pageSize: number\r\n        ) => {\r\n          let params: any = {}\r\n          params.successCallback = (data: [], rowCount: number) => {\r\n            if (data.length > 0) {\r\n              that.ctl.setData(data)\r\n              that.ctl.gridPage.itemCount = rowCount\r\n              that.ctl.gridPage.currentPage = currentPage\r\n            }\r\n          }\r\n          params.failCallback = () => {\r\n            console.error('error')\r\n          }\r\n          params.startRow = (currentPage - 1) * pageSize\r\n          params.endRow = currentPage * pageSize\r\n          that.serverQuery(option, paramFunction, params)\r\n        }\r\n        that.ctl.gridPage.getPageData(1, that.ctl.gridPage.pageSize)\r\n      } else {\r\n        /** 无限滚动模式 **/\r\n\r\n        that.ctl.gridApi.setDatasource({\r\n          getRows: (params: any) => {\r\n            if (that.isFirstAutoLoad && that.ctl.autoLoad === false) {\r\n              that.rowCount = 0\r\n              params.successCallback([], that.rowCount)\r\n              that.ctl.loading = false\r\n              that.isFirstAutoLoad = false\r\n              return\r\n            }\r\n\r\n            that.serverQuery(option, paramFunction, params)\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    this.reload()\r\n  }\r\n\r\n  /**\r\n   * 自定义函数式取值\r\n   */\r\n  setCustomFunctionMode(\r\n    option: GridDataSourceStaticFunction,\r\n    paramFunction: undefined | (() => any)\r\n  ) {\r\n    const that = this\r\n    this.reload = () => {\r\n      that.clearRowCount()\r\n      if (that.ctl.entityName) {\r\n        _.set(that.module, that.ctl.entityName + '.selectedRow', undefined)\r\n      }\r\n      that.ctl.loading = true\r\n\r\n      // rowModelType = infinite\r\n      that.ctl.gridApi.setDatasource({\r\n        getRows: (params: any) => {\r\n          that.ctl.loading = true\r\n\r\n          if (that.isFirstAutoLoad && that.ctl.autoLoad === false) {\r\n            that.rowCount = 0\r\n            params.successCallback([], that.rowCount)\r\n            that.ctl.loading = false\r\n            that.isFirstAutoLoad = false\r\n            return\r\n          }\r\n\r\n          option.call(that.module, that.ctl, {\r\n            param:\r\n              typeof paramFunction === 'function' ? paramFunction() : undefined,\r\n\r\n            failCallback: () => {\r\n              params.failCallback()\r\n            },\r\n\r\n            successCallback: (data: any[], dataLength: number | undefined) => {\r\n              params.successCallback(data, dataLength)\r\n\r\n              that.ctl.loading = false\r\n              that.ctl._bindingComplete()\r\n              if (that.ctl.entityName) {\r\n                _.set(\r\n                  that.module,\r\n                  that.ctl.entityName + '.selectedRow',\r\n                  that.ctl.getSelectedRow()\r\n                )\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n    this.reload()\r\n  }\r\n\r\n  setCodeArrayMode(option: Array<any>) {\r\n    const that = this\r\n    const rowCount = option.length\r\n    this.reload = () => {\r\n      this.ctl.loading = true\r\n      that.clearRowCount()\r\n      if (that.ctl.entityName) {\r\n        _.set(that.module, that.ctl.entityName + '.selectedRow', undefined)\r\n      }\r\n      that.ctl.gridApi.hasDataSource = true\r\n\r\n      if (that.ctl.pagination) {\r\n        /** 分页模式 **/\r\n\r\n        that.ctl.gridPage.getPageData = (\r\n          currentPage: number,\r\n          pageSize: number\r\n        ) => {\r\n          let d = []\r\n          const startRow = (currentPage - 1) * pageSize\r\n          let endRow = currentPage * pageSize\r\n          endRow = endRow > rowCount ? rowCount : endRow\r\n\r\n          for (let i = startRow; i < endRow; i++) {\r\n            d.push(option[i])\r\n          }\r\n          that.ctl.setData(d)\r\n          that.ctl.gridPage.itemCount = rowCount\r\n          that.ctl.gridPage.currentPage = currentPage\r\n        }\r\n\r\n        that.ctl.gridPage.getPageData(1, that.ctl.gridPage.pageSize)\r\n      } else {\r\n        /** 不分页模式 **/\r\n        that.ctl.setData(option)\r\n        that.ctl.gridPage.itemCount = rowCount\r\n      }\r\n    }\r\n\r\n    this.reload()\r\n  }\r\n\r\n  constructor(ctl: any, option: GridDataSource) {\r\n    if (isDesignMode()) {\r\n      return\r\n    }\r\n    this.ctl = ctl\r\n    this.option = option\r\n    this.module = ctl._webix.$scope\r\n\r\n    if (!option) {\r\n      //没有设值，退出\r\n      this.reload = undefined\r\n      return\r\n    }\r\n\r\n    if (_.isArray(option)) {\r\n      this.setCodeArrayMode(option)\r\n      return\r\n    }\r\n\r\n    if (typeof option === 'function') {\r\n      //以 function 方式运行\r\n      this.setCustomFunctionMode(option, undefined)\r\n      return\r\n    }\r\n\r\n    // 使 watch 生效\r\n    _.forOwn(option.params, value => {\r\n      if (!_.has(value, '$watch')) {\r\n        return\r\n      }\r\n      const watchOption: WatchParam = value\r\n      this.module.$watch(watchOption.$watch, () => {\r\n        if (this.reload) {\r\n          this.reload()\r\n        }\r\n      })\r\n    })\r\n\r\n    // params 函数\r\n    let paramFunction = () => {\r\n      const result: any = {}\r\n      _.forOwn(option.params, (value, key) => {\r\n        if (_.has(value, '$get')) {\r\n          const getOption: GetParam = value\r\n          result[key] = _.get(this.module, getOption.$get)\r\n        } else if (_.has(value, '$watch')) {\r\n          const watchOption: WatchParam = value\r\n          result[key] = _.get(this.module, watchOption.$watch)\r\n        } else {\r\n          result[key] = value\r\n        }\r\n      })\r\n      return result\r\n    }\r\n\r\n    if (option.type === 'function') {\r\n      if (typeof option.bind === 'function') {\r\n        this.setCustomFunctionMode(option.bind, paramFunction)\r\n      } else {\r\n        // 取 bind 函数\r\n        const bindFunction: GridDataSourceStaticFunction = _.get(\r\n          this.module,\r\n          option.bind\r\n        ) as GridDataSourceStaticFunction\r\n        if (!bindFunction) {\r\n          console.error(`没有找到名称为 ${option.bind} 的方法`)\r\n          return\r\n        }\r\n        this.setCustomFunctionMode(bindFunction, paramFunction)\r\n      }\r\n      return\r\n    }\r\n\r\n    if (option.type === 'SQL') {\r\n      this.setSqlMode(option, paramFunction)\r\n      return\r\n    }\r\n\r\n    console.error(`其他方式没有实现`)\r\n  }\r\n\r\n  /**\r\n   * 释放与 YvGrid 的绑定\r\n   */\r\n  destory() {\r\n    // 解除全部 watch\r\n    _.each(this.watches, unwatch => {\r\n      unwatch()\r\n    })\r\n    this.reload = undefined\r\n  }\r\n\r\n  /**\r\n   * 清空 rowCount, 下次重新统计总行数\r\n   */\r\n  clearRowCount() {\r\n    delete this.rowCount\r\n  }\r\n\r\n  updateSupport(): boolean {\r\n    return false\r\n  }\r\n\r\n  _updateRow(param: any) {\r\n    throw new Error('not implements')\r\n  }\r\n}\r\n","import { YvEventDispatch } from './YvanEvent'\r\n\r\nexport default class CtlGridCellButton {\r\n  $el: any\r\n  $btns!: any[]\r\n  func!: any[]\r\n\r\n  init(params: any) {\r\n    this.$el = document.createElement('div')\r\n    this._buildHTML.call(this, params)\r\n  }\r\n\r\n  getGui() {\r\n    return this.$el\r\n  }\r\n\r\n  destroy() {\r\n    for (let i = 0; i < this.$btns.length; i++) {\r\n      const btn = this.$btns[i]\r\n      btn.removeEventListener('click', this.func[i])\r\n    }\r\n  }\r\n\r\n  refresh(params: any) {\r\n    this._buildHTML.call(this, params)\r\n  }\r\n\r\n  private _buildHTML(this: any, params: any) {\r\n    const arr: Array<any> = []\r\n    const func: Array<any> = []\r\n\r\n    const { buttons, rowIndex, data, api, column } = params\r\n\r\n    if (typeof buttons === 'object' && buttons.constructor === Array) {\r\n      _.each(buttons, btn => {\r\n        if (typeof btn.render === 'function') {\r\n          const r = btn.render.call(this, rowIndex, data)\r\n          if (r !== true) {\r\n            return\r\n          }\r\n        } else if (typeof btn.render === 'boolean' && !btn.render) {\r\n          return\r\n        }\r\n\r\n        arr.push(\r\n          `<a class=\"yv-grid-button ${btn.cssType}\">` +\r\n            (typeof btn.iconCls === 'string'\r\n              ? '<i class=\"' + btn.iconCls + '\"></i>'\r\n              : '') +\r\n            btn.text +\r\n            '</a>'\r\n        )\r\n        func.push(btn.onClick)\r\n      })\r\n    }\r\n\r\n    this.$el.innerHTML =\r\n      '<div class=\"yv-grid-buttons\">' + arr.join('') + '</div>'\r\n\r\n    const $btns = this.$el.querySelectorAll('.yv-grid-button')\r\n    for (let i = 0; i < $btns.length; i++) {\r\n      const btn = $btns[i]\r\n      const fun = func[i]\r\n      btn.addEventListener('click', () => {\r\n        const ctl = api.vue\r\n        const module = api.vue._webix.$scope\r\n        YvEventDispatch(\r\n          fun,\r\n          ctl,\r\n          { data, rowIndex, colId: column.colId },\r\n          module\r\n        )\r\n      })\r\n    }\r\n    this.$btns = $btns\r\n    this.func = func\r\n  }\r\n}\r\n","export default class CtlGridFilterSet {\r\n\r\n    $el: any;\r\n    $selectAll: any;\r\n    data!: any[];\r\n    checkedData!: any[];\r\n    $container: any;\r\n    $clear: any;\r\n    $apply: any;\r\n    hidePopup: any;\r\n\r\n    // The init(params) method is called on the filter once. See below for details on the\r\n    // parameters.\r\n    init(params: any) {\r\n        this.setupDOM(params);\r\n        const that = this;\r\n        const data = params.data;\r\n\r\n        //======================= 全选按钮 =======================\r\n        const $selectAll = $(this.$el).find('[ref=\"eSelectAll\"]')\r\n        $selectAll.on('click', () => {\r\n            if (this.checkedData.length >= this.data.length) {\r\n                //全选状态，点击后属于全不选\r\n                this.checkedData = []\r\n            } else {\r\n                //其他情况，都是全选\r\n                this.checkedData = _.clone(this.data)\r\n            }\r\n            this.refreshState()\r\n        });\r\n        this.$selectAll = $selectAll;\r\n\r\n        //======================= 确定/清空 =======================\r\n        const $clear = $(this.$el).find('[ref=\"eClearButton\"]');\r\n        const $apply = $(this.$el).find('[ref=\"eApplyButton\"]');\r\n        $clear.on('click', () => {\r\n            //清空就是全选\r\n            that.checkedData = _.clone(that.data);\r\n            that.refreshState();\r\n            params.filterChangedCallback();\r\n            if (typeof that.hidePopup === 'function') {\r\n                that.hidePopup()\r\n            }\r\n        });\r\n        $apply.on('click', () => {\r\n            //确定\r\n            params.filterChangedCallback();\r\n            if (typeof that.hidePopup === 'function') {\r\n                that.hidePopup()\r\n            }\r\n        });\r\n        this.$clear = $clear;\r\n        this.$apply = $apply;\r\n\r\n        //======================= 构建数据 =======================\r\n        const $container = $(this.$el).find('.ag-virtual-list-container');\r\n        $container.css('height', (data.length * 20 + 2) + 'px');\r\n\r\n        let h = 0;\r\n        _.each(data, item => {\r\n            $container.append(\r\n                '<div class=\"ag-virtual-list-item\" style=\"top: ' + h + 'px;\" RefDataValue=\"' + item.id + '\">' +\r\n                '  <label class=\"ag-set-filter-item\">\\n' +\r\n                '    <div class=\"ag-filter-checkbox\"><span class=\"ag-icon ag-icon-checkbox-checked\" unselectable=\"on\"></span></div>\\n' +\r\n                '    <span class=\"ag-filter-value\">' + item.text + '</span>\\n' +\r\n                '  </label>' +\r\n                '</div>'\r\n            );\r\n            h += 20\r\n        });\r\n\r\n        //ag-icon-checkbox-indeterminate\r\n        $container.on('click', '.ag-virtual-list-item', function () {\r\n            //const $cb = $(this).find('span.ag-icon');\r\n            const cv = $(this).attr('RefDataValue')\r\n            const fi = _.find(that.checkedData, item => _.toString(item.id) === cv);\r\n            if (fi) {\r\n                //已经勾选了，要删掉他\r\n                _.remove(that.checkedData, item => _.toString(item.id) === cv)\r\n\r\n            } else {\r\n                //没有勾选，要加上他\r\n                const af = _.find(that.data, item => _.toString(item.id) === cv);\r\n                that.checkedData.push({...af})\r\n            }\r\n\r\n            //刷新状态\r\n            that.refreshState()\r\n        });\r\n\r\n        this.data = data;\r\n        this.checkedData = _.clone(this.data);\r\n        this.$container = $container\r\n    }\r\n\r\n    refreshState() {\r\n        const $cb = this.$selectAll.find('span.ag-icon');\r\n\r\n        if (this.checkedData.length >= this.data.length) {\r\n            //已经全选\r\n            $cb.attr('class', 'ag-icon ag-icon-checkbox-checked');\r\n            this.$container.find('[RefDataValue]').find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-checked')\r\n\r\n        } else if (this.checkedData.length === 0) {\r\n            //一个没选\r\n            $cb.attr('class', 'ag-icon ag-icon-checkbox-unchecked');\r\n            this.$container.find('[RefDataValue]').find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-unchecked')\r\n\r\n        } else {\r\n            //其他情况\r\n            $cb.attr('class', 'ag-icon ag-icon-checkbox-indeterminate');\r\n\r\n            const that = this;\r\n            this.$container.find('[RefDataValue]').each(function (this: any) {\r\n                const $dom = $(this);\r\n                const v = $dom.attr('RefDataValue');\r\n                const fi = _.find(that.checkedData, item => item.id === v);\r\n                if (fi) {\r\n                    //有属性，加上钩\r\n                    $dom.find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-checked')\r\n\r\n                } else {\r\n                    //没属性，不打勾\r\n                    $dom.find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-unchecked')\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    // Returns the GUI for this filter. The GUI can be a) a string of html or b) a DOM element or\r\n    // node.\r\n    getGui() {\r\n        return this.$el\r\n    }\r\n\r\n    // Return true if the filter is active. If active than 1) the grid will show the filter icon in the column\r\n    // header and 2) the filter will be included in the filtering of the data.\r\n    isFilterActive() {\r\n        //如果不是全选，就是没激活\r\n        return (this.checkedData.length < this.data.length)\r\n    }\r\n\r\n    // The grid will ask each active filter, in turn, whether each row in the grid passes. If any\r\n    // filter fails, then the row will be excluded from the final set. A params object is supplied\r\n    // with attributes node (the rowNode the grid creates that wraps the data) and data (the data\r\n    // object that you provided to the grid for that row).\r\n    doesFilterPass() {\r\n        // console.log('doesFilterPass')\r\n    }\r\n\r\n    // Gets the filter state. If filter is not active, then should return null/undefined.\r\n    // The grid calls getModel() on all active filters when gridApi.getFilterModel() is called.\r\n    getModel() {\r\n        if (this.checkedData.length >= this.data.length) {\r\n            //全选，不需要带任何条件\r\n            return\r\n        }\r\n        return {\r\n            filterType: 'set',\r\n            filter: this.checkedData,\r\n        }\r\n    }\r\n\r\n    // Restores the filter state. Called by the grid after gridApi.setFilterModel(model) is called.\r\n    // The grid will pass undefined/null to clear the filter.\r\n    setModel(model: any) {\r\n        if (!model) {\r\n            //清空筛选\r\n            this.checkedData = _.clone(this.data)\r\n        } else {\r\n            //设置筛选条件\r\n        }\r\n    }\r\n\r\n    // Gets called every time the popup is shown, after the gui returned in\r\n    // getGui is attached to the DOM. If the filter popup is closed and reopened, this method is\r\n    // called each time the filter is shown. This is useful for any logic that requires attachment\r\n    // before executing, such as putting focus on a particular DOM element. The params has one\r\n    // callback method 'hidePopup', which you can call at any later point to hide the popup - good\r\n    // if you have an 'Apply' button and you want to hide the popup after it is pressed.\r\n    afterGuiAttached(param: any) {\r\n        this.hidePopup = param.hidePopup;\r\n        this.refreshState()\r\n    }\r\n\r\n    // Gets called when the Column is destroyed. If your custom filter needs to do\r\n    // any resource cleaning up, do it here. A filter is NOT destroyed when it is\r\n    // made 'not visible', as the gui is kept to be shown again if the user selects\r\n    // that filter again. The filter is destroyed when the column it is associated with is\r\n    // destroyed, either new columns are set into the grid, or the grid itself is destroyed.\r\n    destroy() {\r\n        this.$selectAll.off();\r\n        this.$container.off();\r\n        this.$clear.off();\r\n        this.$apply.off()\r\n    }\r\n\r\n    // If floating filters are turned on for the grid, but you have no floating filter\r\n    // configured for this column, then the grid will check for this method. If this\r\n    // method exists, then the grid will provide a read only floating filter for you\r\n    // and display the results of this method. For example, if your filter is a simple\r\n    // filter with one string input value, you could just return the simple string\r\n    // value here.\r\n    getModelAsString() {\r\n        console.log('getModelAsString')\r\n    }\r\n\r\n    setupDOM(params: any) {\r\n\r\n        this.$el = document.createElement('div');\r\n        const html =\r\n            '<div class=\"ag-filter-body-wrapper\">\\n' +\r\n            '  <div>\\n' +\r\n            '    <div class=\"ag-filter-header-container\" role=\"presentation\" style=\"width: 200px;\">\\n' +\r\n            '      <label ref=\"eSelectAll\" class=\"ag-set-filter-item\">\\n' +\r\n            '        <div class=\"ag-filter-checkbox\">\\n' +\r\n            '          <span class=\"ag-icon ag-icon-checkbox-checked\" unselectable=\"on\"></span>\\n' +\r\n            '        </div>\\n' +\r\n            '        <span class=\"ag-filter-value\">全选</span>\\n' +\r\n            '      </label>\\n' +\r\n            '    </div>\\n' +\r\n            '    <div class=\"ag-set-filter-list\" role=\"presentation\">\\n' +\r\n            '      <div class=\"ag-virtual-list-viewport\">\\n' +\r\n            '\\n' +\r\n            '\\n' +\r\n            '        <div class=\"ag-virtual-list-container\" style=\"height: 180px;\">' +\r\n            '        </div>\\n' +\r\n            '\\n' +\r\n            '\\n' +\r\n            '      </div>\\n' +\r\n            '    </div>\\n' +\r\n            '  </div>\\n' +\r\n            '</div>\\n' +\r\n            '<div class=\"ag-filter-apply-panel\" ref=\"eButtonsPanel\">\\n' +\r\n            '  <button type=\"button\" ref=\"eClearButton\">清空</button>\\n' +\r\n            '  <button type=\"button\" ref=\"eApplyButton\">确定</button>\\n' +\r\n            '</div>';\r\n        this.$el.innerHTML = html\r\n    }\r\n}\r\n","export default class CtlGridEditor {\r\n    data: any;\r\n    colDef: any;\r\n    column: any;\r\n    focusAfterAttached: any;\r\n    field: any;\r\n    valid: any;\r\n    origin: any;\r\n    vue: any;\r\n\r\n    // gets called once after the editor is created\r\n    init(params: any): void {\r\n        this.data = params.data;\r\n        this.colDef = params.colDef;\r\n        this.column = params.column;\r\n        const {type, data, colDef, column, cellStartedEdit, value, editParams} = params;\r\n\r\n        _.assign(this, {\r\n            type, value, data, colDef, column, editParams\r\n        });\r\n\r\n        this.focusAfterAttached = cellStartedEdit;\r\n\r\n        this.field = colDef.field;\r\n        this.valid = params.valid;\r\n        this.origin = value;\r\n        this.vue = params.api.vue;\r\n    }\r\n\r\n    // Return the DOM element of your editor, this is what the grid puts into the DOM\r\n    getGui() {\r\n    }\r\n\r\n    // Gets called once after GUI is attached to DOM.\r\n    // Useful if you want to focus or highlight a component\r\n    // (this is not possible when the element is not attached)\r\n    afterGuiAttached() {\r\n    }\r\n\r\n    // Should return the final value to the grid, the result of the editing\r\n    getValue() {\r\n    }\r\n\r\n    setValue(newValue: any) {\r\n        console.error('不支持 setValue:' + newValue)\r\n    }\r\n\r\n    // Gets called once by grid after editing is finished\r\n    // if your editor needs to do any cleanup, do it here\r\n    destroy() {\r\n        if (typeof this.valid === 'undefined') {\r\n            return\r\n        }\r\n        const validMsg = this.valid(this.getValue(), this.vue.getEditRow());\r\n        if (validMsg) {\r\n            this.vue.currentEditValidMsg[this.field] = validMsg\r\n\r\n        } else {\r\n            this.vue.currentEditValidMsg[this.field] = undefined\r\n        }\r\n    }\r\n\r\n    // Gets called once after initialised.\r\n    // If you return true, the editor will appear in a popup\r\n    isPopup() {\r\n        return false\r\n    }\r\n\r\n    // Gets called once before editing starts, to give editor a chance to\r\n    // cancel the editing before it even starts.\r\n    isCancelBeforeStart() {\r\n        //如果这里返回 true, 就会取消编辑\r\n    }\r\n\r\n    // Gets called once when editing is finished (eg if enter is pressed).\r\n    // If you return true, then the result of the edit will be ignored.\r\n    isCancelAfterEnd() {\r\n        //这里返回 true, 就会取消该单元格编辑，还原其内容\r\n    }\r\n\r\n    // If doing full row edit, then gets called when tabbing into the cell.\r\n    focusIn() {\r\n    }\r\n\r\n    // If doing full row edit, then gets called when tabbing out of the cell.\r\n    focusOut() {\r\n    }\r\n}\r\n","import CtlGridEditor from './CtlGridEditor'\r\n\r\nvar isInput = false\r\n\r\nexport default class CtlGridEditorText extends CtlGridEditor {\r\n  isPinned: any\r\n  $el: any\r\n  $input: any\r\n  value: any\r\n  editParams: any\r\n  leaveReason: any\r\n  type: any\r\n\r\n  init(params: any) {\r\n    super.init(params)\r\n\r\n    if (params.node.rowPinned) {\r\n      this.isPinned = true\r\n    }\r\n    this.$el = document.createElement('div')\r\n    this.$el.classList.add('ag-input-wrapper')\r\n    this.$el.setAttribute('role', 'presentation')\r\n\r\n    this.$el.innerHTML =\r\n      '<input class=\"ag-cell-edit-input\" type=\"text\" autocomplete=\"off\">'\r\n\r\n    this.$input = this.$el.querySelectorAll('input')[0]\r\n    this.$input.value = _.toString(params.value)\r\n\r\n    this.$input.addEventListener('keydown', this._onKeyDown.bind(this))\r\n    this.$input.addEventListener('input', this._onInput.bind(this))\r\n    this.$input.addEventListener('change', this._onChange.bind(this))\r\n    this.$input.addEventListener(\r\n      'compositionstart',\r\n      this._onCompositionstart.bind(this)\r\n    )\r\n    this.$input.addEventListener(\r\n      'compositionend',\r\n      this._onCompositionend.bind(this)\r\n    )\r\n  }\r\n\r\n  _onCompositionstart() {\r\n    isInput = true\r\n  }\r\n\r\n  _onCompositionend(e: any) {\r\n    isInput = false\r\n    this._dealWithString(e)\r\n  }\r\n\r\n  _onKeyDown(e: any) {\r\n    if (e.code === 'Tab' || e.code === 'Enter') {\r\n      // Tab键/回车键, 完全拦截，跑下一个焦点控件\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      this.value = e.target.value\r\n\r\n      if (typeof this.editParams.onValidate === 'function') {\r\n        const r = this.editParams.onValidate(this.value)\r\n        if (r) {\r\n          //有校验错误，不让跳转\r\n          return\r\n        }\r\n      }\r\n\r\n      //写入离开原因的 code 编码\r\n      this.leaveReason = e.code\r\n      //这里会触发 this.getValue() 方法\r\n      this.vue.gridApi.stopEditing()\r\n    }\r\n  }\r\n\r\n  _onInput(e: any) {\r\n    if (isInput) {\r\n      return\r\n    }\r\n    this._dealWithString(e)\r\n  }\r\n\r\n  _dealWithString(e: any) {\r\n    let value = e.target.value\r\n    if (this.type === 'number') {\r\n      if (this.editParams.precision > 0) {\r\n        value = value.replace(/[^\\d.-]/g, '') //清除\"数字\"和\".\"以外的字符\r\n        if (value.length > 1 && value.indexOf('.') > 1) {\r\n          let t\r\n          while (1) {\r\n            t = value\r\n            value = value.replace(/^0/g, '')\r\n            if (t.length === value.length) {\r\n              break\r\n            }\r\n          }\r\n          //value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n        }\r\n        value = value.replace(/^\\./g, '') //验证第一个字符是数字而不是.\r\n        value = value.replace(/\\.{2,}/g, '.') //只保留第一个. 清除多余的.\r\n        value = value\r\n          .replace('.', '$#$')\r\n          .replace(/\\./g, '')\r\n          .replace('$#$', '.') //只允许输入一个小数点\r\n\r\n        const r = eval(\r\n          '/^(\\\\-)*(\\\\d+)\\\\.(\\\\d{0,' + this.editParams.precision + '}).*$/'\r\n        )\r\n        value = value.replace(r, '$1$2.$3') //只能输入固定位数的小数\r\n      } else {\r\n        value = value.replace(/[^\\d-]/g, '') //清除\"数字\"和\"-\"以外的字符\r\n        if (value.length > 1) {\r\n          value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n        }\r\n        if (value.startsWith('-')) {\r\n          value = '-' + value.substr(1).replace(/[^\\d]/g, '')\r\n        } else {\r\n          value = value.replace(/[^\\d]/g, '')\r\n        }\r\n      }\r\n    }\r\n\r\n    e.target.value = value\r\n    if (this.value === value) {\r\n      //完全相等，不用通知更改\r\n      return\r\n    }\r\n    this.value = value\r\n\r\n    if (e.detail !== 'custom') {\r\n      if (typeof this.editParams.onInput === 'function') {\r\n        const r = this.editParams.onInput(this.value, e)\r\n        if (typeof r !== 'undefined') {\r\n          this.value = r\r\n          e.target.value = r\r\n        }\r\n\r\n        if (typeof this.editParams.onValidate === 'function') {\r\n          this.editParams.onValidate(value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _onChange(e: any) {\r\n    this.value = e.target.value\r\n\r\n    if (typeof this.editParams.onChange === 'function') {\r\n      this.editParams.onChange(this.value, e)\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n    this.$input.removeEventListener('keydown', this._onKeyDown.bind(this))\r\n    this.$input.removeEventListener('input', this._onInput.bind(this))\r\n    this.$input.removeEventListener('change', this._onChange.bind(this))\r\n    this.$input.removeEventListener(\r\n      'compositionstart',\r\n      this._onCompositionstart.bind(this)\r\n    )\r\n    this.$input.removeEventListener(\r\n      'compositionend',\r\n      this._onCompositionend.bind(this)\r\n    )\r\n  }\r\n\r\n  getGui() {\r\n    return this.$el\r\n  }\r\n\r\n  afterGuiAttached() {\r\n    super.afterGuiAttached()\r\n    this.$input.dispatchEvent(new CustomEvent('input', { detail: 'custom' }))\r\n\r\n    if (this.focusAfterAttached) {\r\n      this.$input.focus()\r\n    }\r\n  }\r\n\r\n  getValue() {\r\n    if (typeof this.leaveReason === 'undefined') {\r\n      //不是按导航键移动的\r\n      if (typeof this.editParams.onValidate === 'function') {\r\n        const r = this.editParams.onValidate(this.value)\r\n        if (r) {\r\n          //有校验错误，还原内容\r\n          return this.origin\r\n        }\r\n      }\r\n    }\r\n\r\n    if (typeof this.editParams.onCommit === 'function') {\r\n      this.editParams.onCommit({\r\n        data: this.data,\r\n        colDef: this.colDef,\r\n        column: this.column,\r\n        newValue: this.value,\r\n        isPinned: this.isPinned,\r\n        vue: this.vue,\r\n        leaveReason: this.leaveReason\r\n      })\r\n    }\r\n    return this.value\r\n  }\r\n\r\n  focusIn() {\r\n    super.focusIn()\r\n    this.$input.focus()\r\n    this.$input.select()\r\n  }\r\n\r\n  focusOut() {\r\n    super.focusOut()\r\n  }\r\n}\r\n","import CtlGridEditor from './CtlGridEditor'\r\n\r\nexport default class CtlGridEditorCombo extends CtlGridEditor {\r\n  isPinned: any\r\n  options: any\r\n  $el: any\r\n\r\n  init(params: any) {\r\n    super.init(params)\r\n    this.options = params.options\r\n    if (params.node.rowPinned) {\r\n      this.isPinned = true\r\n    }\r\n\r\n    const $dom = $('<input class=\"tmp-combo\" />')\r\n\r\n    this.$el = $dom[0]\r\n    const that = this\r\n  }\r\n\r\n  getGui() {\r\n    return this.$el\r\n  }\r\n\r\n  afterGuiAttached() {\r\n    // YvGridEditor.afterGuiAttached.apply(this, arguments)\r\n    // this.vv.focus()\r\n    //setTimeout(() => {\r\n    //    this.vv.open()\r\n    //    this.vv.$nextTick(() => {\r\n    //        debugger\r\n    //    })\r\n    //}, 1000)\r\n  }\r\n\r\n  getValue() {\r\n    // if (typeof this.leaveReason === 'undefined') {\r\n    //     //不是按导航键移动的, 需要触发校验\r\n    //     if (typeof this.editParams.onValidate === 'function') {\r\n    //         const r = this.editParams.onValidate(value)\r\n    //         if (r) {\r\n    //             //有校验错误，还原内容\r\n    //             return this.origin\r\n    //         }\r\n    //     }\r\n    // }\r\n    //\r\n    // //校验通过，调用 commit 并返回选定的新值\r\n    // if (typeof this.editParams.onCommit === 'function') {\r\n    //     this.editParams.onCommit({\r\n    //         data: this.data,\r\n    //         colDef: this.colDef,\r\n    //         column: this.column,\r\n    //         newValue: this.value,\r\n    //         leaveReason: this.leaveReason,\r\n    //     })\r\n    // }\r\n    // return this.value\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n    // this.vv.$destroy()\r\n  }\r\n\r\n  focusIn() {\r\n    super.focusIn()\r\n    // this.vv.focus()\r\n  }\r\n\r\n  focusOut() {\r\n    super.focusOut()\r\n  }\r\n}\r\n","import * as YvanUI from './YvanUIExtend'\r\nimport CtlGridLocale from './CtlGridLocale'\r\nimport { CtlGridPage } from './CtlGridPage'\r\nimport agGrid from 'ag-grid'\r\nimport CtlGridIdRender from './CtlGridIdRender'\r\nimport {\r\n  YvGridColumnEditProp,\r\n  YvGridColumnProp,\r\n  YvGridProp\r\n} from './CtlGridDefault'\r\nimport CtlGridCellCheckbox from './CtlGridCellCheckbox'\r\nimport CtlGridHeadCheckbox from './CtlGridHeadCheckbox'\r\nimport { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { GridDataSource } from './YvanDataSourceGrid'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { YvanDataSourceGrid } from './YvanDataSourceGridImp'\r\nimport CtlGridCellButton from './CtlGridCellButton'\r\nimport CtlGridFilterSet from './CtlGridFilterSet'\r\nimport CtlGridEditorText from './CtlGridEditorText'\r\nimport CtlGridEditorCombo from './CtlGridEditorCombo'\r\n\r\n/**\r\n * 表格中的行按钮被点击后触发的事件参数\r\n */\r\nexport interface CtlGridRowButtonClickArgs {\r\n  /**\r\n   * 行数据\r\n   */\r\n  data: any\r\n\r\n  /**\r\n   * 行序号\r\n   */\r\n  rowIndex: number\r\n\r\n  /**\r\n   * 列名称\r\n   */\r\n  colId: string\r\n}\r\n\r\nexport class CtlGrid extends CtlBase<CtlGrid> {\r\n  static create(vjson: any): CtlGrid {\r\n    const that = new CtlGrid(_.cloneDeep(vjson))\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    // 提取基础属性 onRender / ctlName / entityName 等等\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 yvanProp 合并至当前 CtlBase 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 删除 vjson 所有数据, 替换为 template 语法\r\n    _.forOwn(vjson, (value, key) => {\r\n      delete vjson[key]\r\n    })\r\n    _.merge(vjson, {\r\n      view: 'grid',\r\n      template: `<div role=\"yvGrid\" class=\"ag-theme-blue\"></div>`,\r\n      on: {\r\n        onAfterRender: function (this: any) {\r\n          that.attachHandle(this)\r\n          that._resetGrid()\r\n        },\r\n        onDestruct(this: any) {\r\n          if (that.gridApi) {\r\n            that.gridApi.destroy()\r\n            that.gridApi = undefined\r\n          }\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n    if (that.vjson.id) {\r\n      vjson.id = that.vjson.id\r\n    }\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  gridApi: any\r\n  columnApi: any\r\n\r\n  get webix() {\r\n    return this._webix\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: GridDataSource) {\r\n    this.vjson.dataSource = nv\r\n  }\r\n\r\n  /**\r\n   * 获取数据源\r\n   */\r\n  get dataSource(): GridDataSource {\r\n    return this.vjson.dataSource\r\n  }\r\n\r\n  /**\r\n   * 初始化时的数据\r\n   */\r\n  readonly data?: any[]\r\n\r\n  /**\r\n   * 是否允许编辑\r\n   */\r\n  readonly editable!: boolean\r\n\r\n  /**\r\n   * 允许勾选\r\n   */\r\n  readonly checkbox!: boolean\r\n\r\n  /**\r\n   * 单击后立刻进入编辑\r\n   */\r\n  readonly editSingleClick!: boolean\r\n\r\n  /**\r\n   * 允许添加\r\n   */\r\n  readonly allowNewRow!: boolean\r\n\r\n  /**\r\n   * 允许过滤\r\n   */\r\n  readonly filterable!: boolean\r\n\r\n  /**\r\n   * 显示序号\r\n   */\r\n  readonly showRowNumber!: boolean\r\n\r\n  /**\r\n   * 自动调整列宽\r\n   */\r\n  readonly autoSizeColumns!: boolean\r\n\r\n  /**\r\n   * 单元格选中模式\r\n   */\r\n  readonly allowCellSelection!: boolean\r\n\r\n  /**\r\n   * 行选中模式\r\n   */\r\n  readonly allowRowSelection!: boolean\r\n\r\n  /**\r\n   * ID字段\r\n   */\r\n  readonly idField!: string\r\n\r\n  /**\r\n   * 值分隔符\r\n   */\r\n  readonly valueSep!: string\r\n\r\n  /**\r\n   * 保存时机(换行时/编辑完后)\r\n   */\r\n  readonly saveOn!: 'editFinish' | 'rowChanged'\r\n\r\n  /**\r\n   * 新添加行时，初始化的数据\r\n   */\r\n  readonly newRowData!: any\r\n\r\n  /**\r\n   * 失去焦点后立刻结束编辑\r\n   */\r\n  readonly stopEditingWhenGridLosesFocus!: boolean\r\n\r\n  /**\r\n   * 列定义\r\n   */\r\n  readonly columns!: any[] | undefined\r\n\r\n  /**\r\n   * 二纬表头\r\n   */\r\n  readonly columnGroup!: any[] | undefined\r\n\r\n  /**\r\n   * 是否自动读取数据\r\n   */\r\n  readonly autoLoad: boolean = true\r\n\r\n  /**\r\n   * 是否分页\r\n   */\r\n  readonly pagination: boolean = false\r\n\r\n  /**\r\n   * 分页大小\r\n   */\r\n  readonly pageSize: number = 100\r\n\r\n  public gridPage!: CtlGridPage\r\n\r\n  /**\r\n   * 行被选中后触发\r\n   */\r\n  onRowSelect?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 行被双击后触发\r\n   */\r\n  onRowDblClick?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 勾选项改变后触发\r\n   */\r\n  onCheckedChange?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 数据绑定完毕后触发\r\n   */\r\n  onBindingComplete?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 焦点单元格发生变化后触发\r\n   */\r\n  onCellFocused?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 单元格被点击后触发\r\n   */\r\n  onCellClicked?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 第一行有效数据被渲染后触发\r\n   */\r\n  onFirstDataRendered?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 按下键后触发\r\n   */\r\n  onKeyDown?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 获取被勾选的行ID集合\r\n   */\r\n  checkedIds: any[] = []\r\n\r\n  /**\r\n   * 选择一个指定行\r\n   * @param condition 可以是 key(主键), 也可以是 function 条件, 匹配到符合 condition 的第一条记录\r\n   */\r\n  selectRow(condition: GridSelectCondition) {\r\n    const node: any = this._findNode(condition)\r\n    if (node) {\r\n      this.gridApi.setFocusedCell(node.rowIndex, '__ID__')\r\n      node.setSelected(true)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 闪烁指定行\r\n   * @param condition 可以是 key(主键), 也可以是 function 条件, 匹配到符合 condition 的第一条记录\r\n   */\r\n  flashRow(condition: any) {\r\n    const node = this._findNode(condition)\r\n    if (node) {\r\n      this.gridApi.flashCells({ rowNodes: [node] })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 闪烁指定单元格\r\n   * @param cols 列数组\r\n   * @param condition 可以是 key(主键), 也可以是 function 条件, 匹配到符合 condition 的第一条记录\r\n   */\r\n  flashCell(cols: any, condition: any) {\r\n    const node = this._findNode(condition)\r\n    if (node) {\r\n      this.gridApi.flashCells({ columns: cols, rowNodes: [node] })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 获取全部数据\r\n   */\r\n  getData(): any[] | undefined {\r\n    const result: any[] = []\r\n    this.gridApi.forEachNode((node: any) => {\r\n      result.push(node.data)\r\n    })\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * 为表格设置数据\r\n   * 注意，调用此方法，必须在初始化时，给一个空的 data: [] 属性\r\n   * 确保表格 rowModelType:clientSide 模式\r\n   */\r\n  setData(nv: any[] | undefined) {\r\n    this.gridApi.setRowData(nv)\r\n  }\r\n\r\n  /**\r\n   * 无感刷新\r\n   * 清空缓存，从后台重新拉取数据，表格上临时修改的内容都会被清空\r\n   *\r\n   * option:\r\n   *   clearFilter=true 是否清空筛选\r\n   */\r\n  reload(option?: any) {\r\n    this.loading = true\r\n\r\n    //无感刷新之前，清空所有状态\r\n    this._clearCache()\r\n\r\n    //需要重新请求 rowCount(总数据行)\r\n    if (this.dataSourceBind) {\r\n      this.dataSourceBind.clearRowCount()\r\n    }\r\n\r\n    if (this.entityName) {\r\n      _.set(this.getModule(), this.entityName + '.selectedRow', undefined)\r\n    }\r\n\r\n    if (option && option.clearFilter === true) {\r\n      this.gridApi.setFilterModel(null)\r\n    } else {\r\n      if (this.pagination) {\r\n        this.gridPage.refreshGrid()\r\n      } else {\r\n        this.gridApi.refreshInfiniteCache()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的行主键\r\n   */\r\n  getSelectedId() {\r\n    const row = this.getSelectedRow()\r\n    if (row) {\r\n      return this._getIdByRow(row)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置勾选的数据行集合\r\n   */\r\n  setCheckedIds(ids: Array<any>) {\r\n    // 清空所有元素\r\n    this.checkedIds = ids;\r\n\r\n    // 刷新勾选单元格\r\n    this.gridApi.refreshCells({\r\n      columns: ['__CB__'],\r\n      force: true\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 获取被勾选的所有行\r\n   */\r\n  getCheckedRows() {\r\n    const selected: any[] = []\r\n    this._findNode((node: any) => {\r\n      if (_.indexOf(this.checkedIds, this._getIdByRow(node.data)) >= 0) {\r\n        selected.push(node.data)\r\n      }\r\n      return false\r\n    })\r\n    return selected\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的行数据\r\n   */\r\n  getSelectedRow() {\r\n    const rows = this.getSelectedRows()\r\n    return rows.length > 0 ? rows[0] : undefined\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的行数据(多选情况下回返回多行数据)\r\n   */\r\n  getSelectedRows() {\r\n    // 调用原生 getSelectedRows 方法有 bug\r\n    // return this.gridApi.getSelectedRows();\r\n    const selected: any[] = []\r\n    this._findNode((node: any) => {\r\n      if (node.selected) {\r\n        selected.push(node.data)\r\n      }\r\n      return false\r\n    })\r\n    return selected\r\n  }\r\n\r\n  /**\r\n   * 显示正在读取的状态\r\n   */\r\n  set loading(newValue: boolean) {\r\n    if (!this.isGridReadReady) {\r\n      return\r\n    }\r\n    if (newValue) {\r\n      this.gridApi.showLoadingOverlay()\r\n    } else {\r\n      this.gridApi.hideOverlay()\r\n    }\r\n  }\r\n\r\n  paginationSetPageSize(size: number) {\r\n    this.gridApi.paginationSetPageSize(size)\r\n  }\r\n\r\n  /** 设置行号, 兼容分页 **/\r\n  private setRowId(p: any) {\r\n    return CtlGridIdRender(p, this)\r\n  }\r\n\r\n  /*============================ 私有属性部分 ============================*/\r\n  private isGridReadReady: boolean = false\r\n  private dataSourceBind?: YvanDataSourceGrid = undefined\r\n\r\n  private _gridOptions(): any {\r\n    _.assign(this, {\r\n      ..._.clone(YvGridProp),\r\n      ...this.vjson\r\n    })\r\n    const resultCols = []\r\n\r\n    //显示序号列\r\n    if (this.showRowNumber) {\r\n      resultCols.push({\r\n        field: '__ID__',\r\n        headerName: CtlGridLocale.rownumber,\r\n        width: 52,\r\n        //minWidth: 52,\r\n        maxWidth: 160,\r\n        pinned: 'left',\r\n        resizable: true,\r\n        sortable: false,\r\n        cellRenderer: 'CtlGridIdRender'\r\n      })\r\n    }\r\n\r\n    //显示勾选框\r\n    if (this.checkbox) {\r\n      resultCols.push({\r\n        field: '__CB__',\r\n        headerName: '',\r\n        width: 40,\r\n        minWidth: 40,\r\n        maxWidth: 40,\r\n        pinned: 'left',\r\n        resizable: false,\r\n        sortable: false,\r\n        cellRenderer: 'CtlGridCellCheckbox',\r\n        headerComponent: 'CtlGridHeadCheckbox',\r\n        cellRendererParams: {\r\n          isCheckedIds: true\r\n        }\r\n      })\r\n    }\r\n\r\n    //添加自定义列\r\n    this._gridCols(resultCols)\r\n\r\n    let columnDefs = resultCols\r\n    if (!this.columnGroup || _.size(this.columnGroup) <= 0) {\r\n      //没有多级表头\r\n      columnDefs = resultCols\r\n    } else {\r\n      //二级表头\r\n      columnDefs = []\r\n      let j = 0\r\n      let currentGroup: any\r\n      let currentGroupSpan = -1\r\n\r\n      for (let i = 0; i < resultCols.length; i++) {\r\n        const { from, title, span, width } = this.columnGroup[j]\r\n        const f = resultCols[i]\r\n        if (!this.columnGroup[j]) {\r\n          columnDefs.push(f)\r\n        }\r\n\r\n        if (currentGroupSpan > 0) {\r\n          currentGroup.children.push(f)\r\n          currentGroupSpan--\r\n          if (currentGroupSpan <= 0) {\r\n            j++\r\n          }\r\n        } else if (f.field === from) {\r\n          currentGroup = {\r\n            width: width,\r\n            headerName: title,\r\n            children: [f]\r\n          }\r\n          currentGroupSpan = span - 1\r\n          columnDefs.push(currentGroup)\r\n        } else {\r\n          columnDefs.push(f)\r\n        }\r\n      }\r\n    }\r\n\r\n    const gridOptions = {\r\n      headerHeight: 35,\r\n      rowHeight: 33,\r\n      suppressRowHoverHighlight: true,\r\n      columnDefs,\r\n      animateRows: false,\r\n      suppressCellSelection: !this.allowCellSelection,\r\n      suppressRowClickSelection: !this.allowRowSelection,\r\n      suppressColumnMoveAnimation: true,\r\n      pagination: this.pagination,\r\n      paginationPageSize: this.pageSize,\r\n      localeText: CtlGridLocale,\r\n      rowModelType: 'infinite',\r\n      infiniteInitialRowCount: 200,\r\n      //maxConcurrentDatasourceRequests: 2,\r\n      maxBlocksInCache: 5,\r\n      //cacheOverflowSize\r\n      rowSelection: 'single',\r\n      enableBrowserTooltips: true,\r\n      //enableCellChangeFlash: true,\r\n      singleClickEdit: this.editSingleClick,\r\n      floatingFilter: false,\r\n      stopEditingWhenGridLosesFocus: this.stopEditingWhenGridLosesFocus,\r\n\r\n      onFirstDataRendered: this._firstDataRendered.bind(this),\r\n\r\n      onGridReady: this._gridReady.bind(this),\r\n      tabToNextCell: this._tabToNextCell.bind(this),\r\n      navigateToNextCell: this._navigateToNextCell.bind(this),\r\n      onCellKeyDown: this._cellKeyDown.bind(this),\r\n      onRowDoubleClicked: this._rowDoubleClicked.bind(this),\r\n      onCellEditingStarted: this._cellEditingStarted.bind(this),\r\n      onCellEditingStopped: this._cellEditingStopped.bind(this),\r\n      onRowSelected: this._rowSelected.bind(this),\r\n      onModelUpdated: this._modelUpdated.bind(this),\r\n      onCellFocused: this._cellFocused.bind(this),\r\n      onCellClicked: this._cellClicked.bind(this),\r\n      enterMovesDown: false,\r\n      enterMovesDownAfterEdit: false,\r\n\r\n      components: {\r\n        CtlGridCellButton: CtlGridCellButton,\r\n        CtlGridCellCheckbox: CtlGridCellCheckbox,\r\n        CtlGridHeadCheckbox: CtlGridHeadCheckbox,\r\n        CtlGridEditorText: CtlGridEditorText,\r\n        CtlGridEditorCombo: CtlGridEditorCombo,\r\n        // // YvGridEditorDate: YvGridEditorDate,\r\n        CtlGridFilterSet: CtlGridFilterSet,\r\n        CtlGridIdRender: this.setRowId.bind(this) //CtlGridIdRender.bind(this)\r\n      }\r\n    }\r\n\r\n    if (_.isArray(this.dataSource)) {\r\n      //有数据，按 client 模式加载数据\r\n      _.assign(gridOptions, {\r\n        rowModelType: 'clientSide',\r\n        rowData: this.data,\r\n        data: []\r\n      })\r\n    }\r\n\r\n    if (this.pagination) {\r\n      _.assign(gridOptions, {\r\n        rowModelType: 'clientSide',\r\n        rowData: [],\r\n        data: []\r\n      })\r\n    }\r\n\r\n    return gridOptions\r\n  }\r\n\r\n  private _gridReady() {\r\n    this.isGridReadReady = true\r\n    /** 分页视图 **/\r\n    this.gridPage = new CtlGridPage(this)\r\n    this._rebindDataSource()\r\n  }\r\n\r\n  private _resetGrid() {\r\n    this.isGridReadReady = false\r\n    const gridOptions = this._gridOptions()\r\n    const $el = $(this._webix._viewobj).find('[role=\"yvGrid\"]')[0]\r\n    const grid: any = new agGrid.Grid($el, gridOptions)\r\n    grid.gridOptions.api.vue = this\r\n    this.gridApi = grid.gridOptions.api\r\n    this.columnApi = grid.gridOptions.columnApi\r\n\r\n    //去掉 ag-unselectable 使表格允许被选定\r\n    if ($el) {\r\n      $($el)\r\n        .find('.ag-root.ag-unselectable')\r\n        .removeClass('ag-unselectable')\r\n    }\r\n  }\r\n\r\n  _rowDoubleClicked(e: any) {\r\n    YvEventDispatch(this.onRowDblClick, this, e.data)\r\n  }\r\n\r\n  /**\r\n   * 获取下拉框的数据选项\r\n   */\r\n  _getComboFilterData(easyuiCol: any) {\r\n    if (easyuiCol.editMode === 'combo') {\r\n      if (typeof easyuiCol.editParams.data === 'string') {\r\n        if (YvanUI.dict.hasOwnProperty(easyuiCol.editParams.data)) {\r\n          return YvanUI.dict[easyuiCol.editParams.data]\r\n        } else if (YvanUI.formatter.hasOwnProperty(easyuiCol.editParams.data)) {\r\n          return YvanUI.formatter[easyuiCol.editParams.data]\r\n        } else {\r\n          console.error(\r\n            '没有发现全局函数 YvanUI.formatter[dict].' +\r\n            easyuiCol.editParams.data\r\n          )\r\n        }\r\n      } else if (easyuiCol.editParams.data.constructor === Array) {\r\n        const editParams = easyuiCol.editParams\r\n        return _.map(editParams.data, item => {\r\n          return {\r\n            id: item[editParams.idField],\r\n            text: item[editParams.textField]\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    let formatter = easyuiCol.formatter\r\n    if (typeof easyuiCol.formatter === 'string') {\r\n      // formatter 是字符串，从全局 YvanUI.formatter 找方法\r\n      if (YvanUI.dict.hasOwnProperty(easyuiCol.formatter)) {\r\n        formatter = YvanUI.dict[easyuiCol.formatter]\r\n      } else if (YvanUI.formatter.hasOwnProperty(easyuiCol.formatter)) {\r\n        easyuiCol.formatter = YvanUI.formatter[easyuiCol.formatter]\r\n      } else {\r\n        console.error(\r\n          '没有发现全局函数 YvanUI.formatter[dict].' + easyuiCol.editParams.data\r\n        )\r\n      }\r\n    }\r\n\r\n    if (formatter && formatter.constructor === Array) {\r\n      // formatter 是数组，就是下拉数据本身\r\n      return formatter\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 第一次数据被渲染之后\r\n   */\r\n  _firstDataRendered() {\r\n    YvEventDispatch(this.onFirstDataRendered, this, undefined)\r\n  }\r\n\r\n  /**\r\n   * 接受更新\r\n   * 状态位显示 OK, 删除 origin 数据, 并闪烁当前行\r\n   */\r\n  _acceptChanges(node: any) {\r\n    if (node.origin) {\r\n      node.cstate = 'ok'\r\n      delete node.origin\r\n      this.flashRow(node)\r\n      node.setDataValue('__ID__', _.uniqueId())\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 清空所有状态，准备获取新数据\r\n   * 当前编辑都应该清空, 勾选也应该清空\r\n   */\r\n  _clearCache() {\r\n    this.checkedIds = []\r\n    this.gridApi.forEachNode((node: any) => {\r\n      delete node.cstate\r\n      delete node.origin\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 根据行，获取主键 ID, 当主键不存在时 返回 undefined\r\n   */\r\n  _getIdByRow(row: any) {\r\n    if (!row) return\r\n    if (this.idField) {\r\n      if (this.idField.constructor === Array) {\r\n        //联合组件，用valueSep分割\r\n        return _.map(this.idField, f => _.toString(row[f])).join(this.valueSep)\r\n      }\r\n\r\n      return row[this.idField]\r\n    }\r\n    console.error('表格没有设置主键！！')\r\n    return undefined\r\n  }\r\n\r\n  /**\r\n   * 重新绑定数据源\r\n   */\r\n  _rebindDataSource() {\r\n    if (this.dataSourceBind) {\r\n      this.dataSourceBind.destory()\r\n      this.dataSourceBind = undefined\r\n    }\r\n    this.dataSourceBind = new YvanDataSourceGrid(this, this.dataSource)\r\n  }\r\n\r\n  /**\r\n   * 每次 AJAX 请求完毕之后会回调这里\r\n   */\r\n  _bindingComplete() {\r\n    YvEventDispatch(this.onBindingComplete, this, undefined)\r\n  }\r\n\r\n  /**\r\n   * 找到某行的 node, （一旦匹配到 condition 就停止）\r\n   */\r\n  _findNode(condition: GridSelectCondition) {\r\n    if (!condition) {\r\n      //返回第一条被找到的数据\r\n      condition = () => true\r\n    } else if (typeof condition === 'string') {\r\n      //以主键查找的方式\r\n      const key = condition\r\n      condition = (n: any) => {\r\n        return this._getIdByRow(n.data) === key\r\n      }\r\n    } else if (typeof condition === 'object') {\r\n      //就是 node 对象, 直接返回\r\n      return condition\r\n    }\r\n\r\n    const me = this\r\n    let findNode = undefined\r\n    try {\r\n      this.gridApi.forEachNode((node: any) => {\r\n        if ((condition as any).call(me, node)) {\r\n          findNode = node\r\n          throw Error()\r\n        }\r\n      })\r\n    } catch (e) { }\r\n    return findNode\r\n  }\r\n\r\n  _cellKeyDown(param: any) {\r\n    //event.stopPropagation();\r\n    //event.preventDefault();\r\n\r\n    //通知外部\r\n    const r = YvEventDispatch(this.onKeyDown, this, param)\r\n    if (r === true) {\r\n      //已经被自定义函数处理掉\r\n      return\r\n    }\r\n\r\n    if (param.event.keyCode === 13) {\r\n      param.event.stopPropagation()\r\n      param.event.preventDefault()\r\n      return\r\n    }\r\n\r\n    if (param.event.keyCode === 27) {\r\n      //按下 ESC 还原数据到 origin 状态, 并删除所有编辑形式\r\n      if (param.node.origin) {\r\n        param.event.stopPropagation()\r\n        param.event.preventDefault()\r\n\r\n        const data = {\r\n          ...param.data,\r\n          ...param.node.origin\r\n        }\r\n        delete param.node.cstate\r\n        delete param.node.origin\r\n        param.node.updateData(data)\r\n        param.node.setDataValue('__ID__', _.uniqueId())\r\n      }\r\n    }\r\n    //console.log('cellKeyDown', param);\r\n  }\r\n\r\n  _modelUpdated() {\r\n    if (this.autoSizeColumns && this.gridApi) {\r\n      this.gridApi.sizeColumnsToFit()\r\n    }\r\n  }\r\n\r\n  _cellFocused(param: any) {\r\n    YvEventDispatch(this.onCellFocused, this, param)\r\n  }\r\n\r\n  _cellClicked(param: any) {\r\n    YvEventDispatch(this.onCellClicked, this, param)\r\n  }\r\n\r\n  _rowSelected(param: any) {\r\n    const { node } = param\r\n    const { selected, id } = node\r\n\r\n    if (!selected) {\r\n      //行离开事件,查看是否有数据正在编辑，提交校验\r\n      this._rowEditingStopped(id, param)\r\n      return\r\n    }\r\n\r\n    //触发 entity 改变\r\n    if (_.size(this.entityName) > 0) {\r\n      _.set(this.getModule(), this.entityName + '.selectedRow', param.data)\r\n      //this.vcxt.module.$set(this.vcxt.module[this.entityName], \"selectedRow\", param.data);\r\n    }\r\n\r\n    //触发 onRowSelect 事件\r\n    YvEventDispatch(this.onRowSelect, this, param.data)\r\n  }\r\n\r\n  _cellEditingStarted(param: any) {\r\n    let rowId\r\n    if (param.node.rowPinned === 'top') {\r\n      //在添加行上\r\n      rowId = -1\r\n    } else if (!param.node.rowPinned) {\r\n      //在数据行上\r\n      rowId = param.node.id\r\n    }\r\n    this._rowEditingStarted(rowId, param)\r\n  }\r\n\r\n  _cellEditingStopped(param: any) {\r\n    //触发单元格校验事件\r\n    if (this.saveOn !== 'editFinish') {\r\n      //保存时机，是不是结束编辑后立刻保存\r\n      return\r\n    }\r\n\r\n    const origin = param.node.origin\r\n    if (!origin) {\r\n      // 这一行没有进入过编辑模式\r\n      return\r\n    }\r\n\r\n    const data = _.cloneDeep(param.data)\r\n    delete data['__ID__']\r\n    delete data['__CB__']\r\n\r\n    _.forOwn(origin, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        origin[key] = _.toString(value)\r\n      }\r\n    })\r\n    _.forOwn(data, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        data[key] = _.toString(value)\r\n      }\r\n    })\r\n\r\n    if (_.isEqual(origin, data)) {\r\n      //相同，改变状态位 same\r\n      param.node.cstate = 'same'\r\n    } else {\r\n      //不相同, 提交校验\r\n      param.node.cstate = 'validate'\r\n\r\n      if (this.dataSourceBind) {\r\n        if (this.dataSourceBind.updateSupport()) {\r\n          this.dataSourceBind._updateRow(param)\r\n        }\r\n      }\r\n      //console.log(this.dataSource, param.node)\r\n      //setTimeout(() => {\r\n      //    this._acceptChanges(param.node)\r\n      //}, 2000)\r\n    }\r\n    param.node.setDataValue('__ID__', _.uniqueId())\r\n  }\r\n\r\n  _rowEditingStarted(rowId: any, param: any) {\r\n    if (!param.node.origin) {\r\n      // 以前从来没有编辑过这一行, 记录 origin\r\n      const data = _.cloneDeep(param.data)\r\n      delete data['__ID__']\r\n      delete data['__CB__']\r\n      param.node.origin = data\r\n    }\r\n\r\n    param.node.cstate = 'editing'\r\n    param.node.setDataValue('__ID__', _.uniqueId())\r\n  }\r\n\r\n  _rowEditingStopped(rowId: any, param: any) {\r\n    if (this.saveOn !== 'rowChanged') {\r\n      //保存时机，是不是行更改后立刻保存\r\n      return\r\n    }\r\n\r\n    const origin = param.node.origin\r\n    if (!origin) {\r\n      // 这一行没有进入过编辑模式\r\n      return\r\n    }\r\n\r\n    const data = _.cloneDeep(param.data)\r\n    delete data['__ID__']\r\n    delete data['__CB__']\r\n\r\n    _.forOwn(origin, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        origin[key] = _.toString(value)\r\n      }\r\n    })\r\n    _.forOwn(data, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        data[key] = _.toString(value)\r\n      }\r\n    })\r\n\r\n    if (_.isEqual(origin, data)) {\r\n      //相同，改变状态位 same\r\n      param.node.cstate = 'same'\r\n    } else {\r\n      //不相同, 提交校验\r\n      param.node.cstate = 'validate'\r\n\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind._updateRow(param)\r\n      }\r\n      //console.log(this.dataSource, param.node)\r\n      //setTimeout(() => {\r\n      //    this._acceptChanges(param.node)\r\n      //}, 2000)\r\n    }\r\n    param.node.setDataValue('__ID__', _.uniqueId())\r\n  }\r\n\r\n  /**\r\n   * Tab键导航\r\n   */\r\n  _tabToNextCell(params: any) {\r\n    const previousCell = params.previousCellPosition\r\n    const nextCellPosition = params.nextCellPosition\r\n\r\n    //tab 永不换行\r\n    return {\r\n      ...nextCellPosition,\r\n      rowIndex: previousCell.rowIndex\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 上下左右键导航\r\n   */\r\n  _navigateToNextCell(params: any) {\r\n    const KEY_LEFT = 37\r\n    const KEY_UP = 38\r\n    const KEY_RIGHT = 39\r\n    const KEY_DOWN = 40\r\n\r\n    const previousCell = params.previousCellPosition\r\n    const suggestedNextCell = params.nextCellPosition\r\n    switch (params.key) {\r\n      case KEY_UP: {\r\n        const nextRowIndex = previousCell.rowIndex - 1\r\n        if (nextRowIndex < 0) {\r\n          // returning null means don't navigate\r\n          return null\r\n        }\r\n        this.selectRow(node => node.rowIndex === nextRowIndex)\r\n        return {\r\n          rowIndex: nextRowIndex,\r\n          column: previousCell.column,\r\n          floating: previousCell.floating\r\n        }\r\n      }\r\n\r\n      case KEY_DOWN: {\r\n        // return the cell below\r\n        const rowIndex = previousCell.rowIndex + 1\r\n        const renderedRowCount = this.gridApi.getModel().getRowCount()\r\n        if (rowIndex >= renderedRowCount) {\r\n          // returning null means don't navigate\r\n          return null\r\n        }\r\n        this.selectRow(node => node.rowIndex === rowIndex)\r\n        return {\r\n          rowIndex: rowIndex,\r\n          column: previousCell.column,\r\n          floating: previousCell.floating\r\n        }\r\n      }\r\n\r\n      case KEY_LEFT:\r\n      case KEY_RIGHT:\r\n        return suggestedNextCell\r\n      default:\r\n        throw 'this will never happen, navigation is always one of the 4 keys above'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 列设置计算\r\n   */\r\n  _gridCols(resultCols: any[]): void {\r\n    _.each(this.columns, column => {\r\n      const easyuiCol = _.merge(\r\n        {\r\n          ..._.clone(YvGridColumnProp),\r\n          editParams: {\r\n            ..._.clone(YvGridColumnEditProp)\r\n          }\r\n        },\r\n        column\r\n      )\r\n\r\n      //=========================== 设计模式属性 ===========================\r\n      // if (this._isDesignMode) {\r\n      //     resultCols.push({\r\n      //         suppressMovable: true,\r\n      //         field: easyuiCol.field,\r\n      //         headerName: easyuiCol.title,\r\n      //         resizable: true,\r\n      //         filter: false,\r\n      //         editable: false,\r\n      //         sortable: false,\r\n      //         //unSortIcon: true,\r\n      //         hide: false,\r\n      //         width: easyuiCol.width,\r\n      //         minWidth: easyuiCol.minwidth,\r\n      //         maxWidth: easyuiCol.maxwidth\r\n      //     });\r\n      //     return;\r\n      // }\r\n\r\n      //=========================== 基本属性 ===========================\r\n      const col: any = {\r\n        suppressMovable: true,\r\n        field: easyuiCol.field,\r\n        headerName: easyuiCol.title,\r\n        resizable: easyuiCol.resizable,\r\n        filter: false,\r\n        editable: false,\r\n        sortable: easyuiCol.sortable,\r\n        //unSortIcon: true,\r\n        hide: easyuiCol.hidden\r\n      }\r\n\r\n      if (typeof easyuiCol.width !== 'undefined') col.width = easyuiCol.width\r\n      if (typeof easyuiCol.minwidth !== 'undefined')\r\n        col.minWidth = easyuiCol.minwidth\r\n      if (typeof easyuiCol.maxwidth !== 'undefined')\r\n        col.maxWidth = easyuiCol.maxwidth\r\n\r\n      if (typeof easyuiCol.align !== 'undefined') {\r\n        col.cellClass = function (params: any) {\r\n          return ['yv-align-' + easyuiCol.align]\r\n        }\r\n      }\r\n\r\n      if (_.size(easyuiCol.field) > 0) {\r\n        col.tooltipField = easyuiCol.field\r\n      }\r\n\r\n      //=========================== buttons 属性 ===========================\r\n      if (easyuiCol.buttons) {\r\n        //col.cellRendererFramework = 'yvGridButton'\r\n        col.cellRenderer = 'CtlGridCellButton'\r\n        col.cellRendererParams = {\r\n          buttons: easyuiCol.buttons\r\n        }\r\n      }\r\n\r\n      //=========================== 编辑与formatter属性 ===========================\r\n      const { editParams } = easyuiCol\r\n      let formatable = false\r\n      if (easyuiCol.editable) {\r\n        if (easyuiCol.editMode === 'checkbox') {\r\n          //勾选框编辑\r\n          formatable = false\r\n          col.cellRenderer = 'CtlGridCellCheckbox'\r\n          col.cellRendererParams = {\r\n            editParams: easyuiCol.editParams,\r\n            on: editParams.on,\r\n            off: editParams.off,\r\n            onChange: (newValue: any) => {\r\n              YvEventDispatch(editParams.onValidate, this, {\r\n                value: newValue\r\n              })\r\n            },\r\n            onValidate: (value: any) => {\r\n              YvEventDispatch(editParams.onValidate, this, {\r\n                value: value\r\n              })\r\n            }\r\n          }\r\n\r\n          if (easyuiCol.editable) {\r\n            //允许编辑\r\n            _.assign(col, {\r\n              editable: true,\r\n              cellEditor: 'CtlGridEditorCombo',\r\n              cellEditorParams: {\r\n                editParams: easyuiCol.editParams,\r\n                options: [\r\n                  { id: editParams.on, text: '勾选' },\r\n                  { id: editParams.off, text: '不勾' }\r\n                ],\r\n                onChange: (newValue: any) => {\r\n                  YvEventDispatch(editParams.onValidate, this, {\r\n                    value: newValue\r\n                  })\r\n                },\r\n                onValidate: (value: any) => {\r\n                  YvEventDispatch(editParams.onValidate, this, {\r\n                    value: value\r\n                  })\r\n                }\r\n              }\r\n            })\r\n          }\r\n        } else if (easyuiCol.editMode === 'combo') {\r\n          //下拉框编辑\r\n          formatable = false\r\n          _.assign(col, {\r\n            editable: true,\r\n            cellEditor: 'CtlGridEditorCombo',\r\n            cellEditorParams: {\r\n              editParams: easyuiCol.editParams,\r\n              options: this._getComboFilterData(easyuiCol),\r\n              onChange: (newValue: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: newValue\r\n                })\r\n              },\r\n              onValidate: (value: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: value\r\n                })\r\n              }\r\n            }\r\n          })\r\n          //下拉框的 formatter 逻辑是固定的\r\n          const data = this._getComboFilterData(easyuiCol)\r\n          if (typeof data === 'function') {\r\n            col.valueFormatter = (params: any) => {\r\n              return data(params.value)\r\n            }\r\n          } else {\r\n            col.valueFormatter = (params: any) => {\r\n              if (_.size(params.data) <= 0) return\r\n\r\n              const optionItem = _.find(data, item => {\r\n                const id = _.toString(item['id'])\r\n                return id && id === _.toString(params.value)\r\n              })\r\n\r\n              if (optionItem) {\r\n                //找到text属性值\r\n                return optionItem['text']\r\n              }\r\n              return params.value\r\n            }\r\n          }\r\n        } else if (easyuiCol.editMode === 'area') {\r\n          //大型富文本框编辑\r\n          formatable = true\r\n          _.assign(col, {\r\n            editable: true,\r\n            cellEditor: 'agLargeTextCellEditor',\r\n            cellEditorParams: {\r\n              editParams: easyuiCol.editParams,\r\n              maxLength: editParams.maxlength\r\n            }\r\n          })\r\n        } else if (\r\n          easyuiCol.editMode === 'text' ||\r\n          easyuiCol.editMode === 'number'\r\n        ) {\r\n          //普通文本框编辑\r\n          formatable = true\r\n          _.assign(col, {\r\n            editable: true,\r\n            cellEditor: 'CtlGridEditorText',\r\n            cellEditorParams: {\r\n              type: easyuiCol.editMode,\r\n              editParams: easyuiCol.editParams,\r\n              onChange: (newValue: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: newValue\r\n                })\r\n              },\r\n              onValidate: (value: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: value\r\n                })\r\n              },\r\n              onInput: (e: any) => {\r\n                YvEventDispatch(editParams.onInput, this, this, {\r\n                  event: e\r\n                })\r\n              }\r\n            }\r\n          })\r\n        } else if (\r\n          easyuiCol.editMode === 'date' ||\r\n          easyuiCol.editMode === 'datetime'\r\n        ) {\r\n          formatable = true\r\n          // _.assign(col, {\r\n          //     editable: true,\r\n          //     cellEditor: \"YvGridEditorDate\",\r\n          //     cellEditorParams: {\r\n          //         type: easyuiCol.editMode,\r\n          //         editParams: easyuiCol.editParams,\r\n          //         onChange: newValue => {\r\n          //             this.$yvDispatch(editParams.onValidate, newValue, this.getEditRow());\r\n          //         },\r\n          //         onValidate: value => {\r\n          //             this.$yvDispatch(editParams.onValidate, value, this.getEditRow());\r\n          //         },\r\n          //         onInput: e => {\r\n          //             this.$yvDispatch(editParams.onInput, e, this.getEditRow());\r\n          //         }\r\n          //     }\r\n          // });\r\n          console.error('not support date editor')\r\n        }\r\n      } else {\r\n        //不允许编辑的情况，全都允许格式化\r\n        formatable = true\r\n      }\r\n\r\n      //=========================== formatter属性 ===========================\r\n      if (formatable) {\r\n        const data = this._getComboFilterData(easyuiCol)\r\n        if (data) {\r\n          //从下拉框逻辑中找到了固定映射关系\r\n          col.valueFormatter = (params: any) => {\r\n            if (_.size(params.data) <= 0) return undefined\r\n            const optionItem = _.find(data, item => {\r\n              const id = _.toString(item['id'])\r\n              return id && id === _.toString(params.value)\r\n            })\r\n\r\n            if (optionItem) {\r\n              //找到text属性值\r\n              return optionItem['text']\r\n            }\r\n            return params.value\r\n          }\r\n        } else {\r\n          //以 function 方式获得显示逻辑\r\n          let formatter = easyuiCol.formatter\r\n          if (typeof easyuiCol.formatter === 'string') {\r\n            // formatter 是字符串，从全局 YvanUI.formatter 找方法\r\n            if (!YvanUI.formatter.hasOwnProperty(easyuiCol.formatter)) {\r\n              console.error(\r\n                '没有发现全局函数 YvanUI.formatter.' + easyuiCol.formatter\r\n              )\r\n            } else {\r\n              formatter = YvanUI.formatter[easyuiCol.formatter]\r\n            }\r\n          }\r\n\r\n          if (typeof formatter === 'function') {\r\n            //formatter 是函数，调用函数来显示\r\n            col.valueFormatter = (params: any) => {\r\n              if (_.size(params.data) <= 0) return undefined\r\n              return formatter.call(\r\n                this,\r\n                params.data[easyuiCol.field],\r\n                this,\r\n                params.data\r\n              )\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      //=========================== 过滤属性 ===========================\r\n      if (this.filterable && easyuiCol.filterable && !easyuiCol.hidden) {\r\n        const datas = this._getComboFilterData(easyuiCol)\r\n        if (typeof datas === 'object') {\r\n          //下拉框过滤\r\n          _.assign(col, {\r\n            filter: 'CtlGridFilterSet',\r\n            //suppressMenu: true,\r\n            filterParams: {\r\n              data: datas\r\n            }\r\n          })\r\n        } else if (easyuiCol.editMode === 'number') {\r\n          //数字过滤\r\n          _.assign(col, {\r\n            filter: 'agNumberColumnFilter',\r\n            //suppressMenu: true,\r\n            filterParams: {\r\n              applyButton: true,\r\n              clearButton: true,\r\n              suppressAndOrCondition: true\r\n              //filterOptions: [\r\n              //    'equals',\r\n              //    'notEqual',\r\n              //    'lessThan',\r\n              //    'greaterThan',\r\n              //    'lessThanOrEqual',\r\n              //    'greaterThanOrEqual',\r\n              //]\r\n            }\r\n          })\r\n        } else if (\r\n          easyuiCol.editMode === 'date' ||\r\n          easyuiCol.editMode === 'datetime'\r\n        ) {\r\n          //日期筛选\r\n          _.assign(col, {\r\n            filter: 'agDateColumnFilter',\r\n            filterParams: {\r\n              applyButton: true,\r\n              clearButton: true,\r\n              filterOptions: ['inRange'],\r\n              suppressAndOrCondition: true,\r\n              comparator: function (\r\n                filterLocalDateAtMidnight: any,\r\n                cellValue: any\r\n              ) {\r\n                const dateAsString = cellValue\r\n                if (dateAsString == null) return 0\r\n\r\n                // In the example application, dates are stored as dd/mm/yyyy\r\n                // We create a Date object for comparison against the filter date\r\n                const dateParts = dateAsString.split('/')\r\n                const day = Number(dateParts[2])\r\n                const month = Number(dateParts[1]) - 1\r\n                const year = Number(dateParts[0])\r\n                const cellDate = new Date(day, month, year)\r\n\r\n                // Now that both parameters are Date objects, we can compare\r\n                if (cellDate < filterLocalDateAtMidnight) {\r\n                  return -1\r\n                }\r\n                if (cellDate > filterLocalDateAtMidnight) {\r\n                  return 1\r\n                }\r\n                return 0\r\n              }\r\n            }\r\n          })\r\n        } else {\r\n          //其他情况都是字符串筛选\r\n          _.assign(col, {\r\n            filter: 'agTextColumnFilter',\r\n            filterParams: {\r\n              applyButton: true,\r\n              clearButton: true,\r\n              filterOptions: ['startsWith', 'equals', 'contains'],\r\n              suppressAndOrCondition: true,\r\n              textFormatter: function (r: any) {\r\n                if (r == null) return null\r\n                r = r.replace(new RegExp('[àáâãäå]', 'g'), 'a')\r\n                r = r.replace(new RegExp('æ', 'g'), 'ae')\r\n                r = r.replace(new RegExp('ç', 'g'), 'c')\r\n                r = r.replace(new RegExp('[èéêë]', 'g'), 'e')\r\n                r = r.replace(new RegExp('[ìíîï]', 'g'), 'i')\r\n                r = r.replace(new RegExp('ñ', 'g'), 'n')\r\n                r = r.replace(new RegExp('[òóôõøö]', 'g'), 'o')\r\n                r = r.replace(new RegExp('œ', 'g'), 'oe')\r\n                r = r.replace(new RegExp('[ùúûü]', 'g'), 'u')\r\n                r = r.replace(new RegExp('[ýÿ]', 'g'), 'y')\r\n                return r\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      //=========================== 渲染属性 ===========================\r\n      if (typeof easyuiCol.onStyle === 'function') {\r\n        _.assign(col, {\r\n          cellStyle: (param: any) => {\r\n            return easyuiCol.onStyle.call(this, param)\r\n          }\r\n        })\r\n      }\r\n\r\n      resultCols.push(col)\r\n    })\r\n  }\r\n}\r\n\r\nexport type GridSelectCondition = ((row: any) => boolean) | string\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlSwitchDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlSwitch extends CtlInput<CtlSwitch> {\r\n  static create(vjson: any): CtlSwitch {\r\n    const that = new CtlSwitch(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlSwitchDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['value'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'switch',\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 交换状态\r\n   */\r\n  toggle() {\r\n    this._webix.toggle()\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValueHere(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlNumberDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlNumber extends CtlInput<CtlNumber> {\r\n  static create(vjson: any): CtlNumber {\r\n    const that = new CtlNumber(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlNumberDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['precision'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'text',\r\n      type: 'number'\r\n      // attr: {\r\n      //     min: \"0.00\",\r\n      //     step: \"0.01\"\r\n      // }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  public precision?: number\r\n\r\n  private _testNumber(value: any) {\r\n    if (this.precision && this.precision > 0) {\r\n      value = value.replace(/[^\\d.-]/g, '') //清除\"数字\"和\".\"以外的字符\r\n      if (value.length > 1 && value.indexOf('.') > 1) {\r\n        let t\r\n        while (1) {\r\n          t = value\r\n          value = value.replace(/^0/g, '')\r\n          if (t.length === value.length) {\r\n            break\r\n          }\r\n        }\r\n        //value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n      }\r\n      value = value.replace(/^\\./g, '') //验证第一个字符是数字而不是.\r\n      value = value.replace(/\\.{2,}/g, '.') //只保留第一个. 清除多余的.\r\n      value = value\r\n        .replace('.', '$#$')\r\n        .replace(/\\./g, '')\r\n        .replace('$#$', '.') //只允许输入一个小数点\r\n\r\n      const r = eval('/^(\\\\-)*(\\\\d+)\\\\.(\\\\d{0,' + this.precision + '}).*$/')\r\n      value = value.replace(r, '$1$2.$3') //只能输入固定位数的小数\r\n    } else {\r\n      value = value.replace(/[^\\d-]/g, '') //清除\"数字\"和\"-\"以外的字符\r\n      if (value.length > 1) {\r\n        value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n      }\r\n      if (value.startsWith('-')) {\r\n        value = '-' + value.substr(1).replace(/[^\\d]/g, '')\r\n      } else {\r\n        value = value.replace(/[^\\d]/g, '')\r\n      }\r\n    }\r\n    return value\r\n  }\r\n\r\n  onInputEvent(e: Event) {\r\n    let value = (e.target as any).value\r\n    ;(e.target as any).value = this._testNumber(value)\r\n    super.onInputEvent(e)\r\n  }\r\n\r\n  /**\r\n   * 设置值 (如果不符合数字或小数位数格式，会被清空)\r\n   */\r\n  set value(nv: any) {\r\n    nv = this._testNumber(nv)\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlRadioDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlRadio extends CtlInput<CtlRadio> {\r\n  static create(vjson: any): CtlRadio {\r\n    const that = new CtlRadio(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlRadioDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['options'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'radio',\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set options(nv: any[]) {\r\n    const value = nv.map(item => {\r\n      return { id: item.id, value: item.text }\r\n    })\r\n\r\n    if (!this._webix) {\r\n      _.merge(this._webixConfig, {\r\n        options: value\r\n      })\r\n      return\r\n    }\r\n    this._webix.define('options', value)\r\n    this._webix.refresh()\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { CtlCodeMirrorDefault } from './CtlDefaultValue'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport webix from 'webix'\r\n\r\nwebix.protoUI(\r\n  {\r\n    name: 'codemirror-editor',\r\n    defaults: {},\r\n    $init: function(config: any) {\r\n      this.$view.innerHTML =\r\n        \"<textarea style='width:100%;height:100%;'></textarea>\"\r\n      this._waitEditor = webix.promise.defer()\r\n      this.$ready.push(this._render_cm_editor)\r\n      _.extend(this.config, config)\r\n      if (config.on && typeof config.on.onInited === 'function') {\r\n        config.on.onInited.call(this)\r\n      }\r\n    },\r\n    _render_cm_editor: function() {\r\n      this._render_when_ready()\r\n      // if (this.config.cdn === false) {\r\n      //     this._render_when_ready;\r\n      //     return;\r\n      // }\r\n      //\r\n      // var cdn = this.config.cdn || \"//cdn.bootcss.com/codemirror/5.38.0/\";\r\n      // // basic\r\n      // var sources = [\r\n      //     cdn + \"/codemirror.css\",\r\n      //     cdn + \"/codemirror.js\"\r\n      // ];\r\n      //\r\n      // // mode\r\n      // if (this.config.mode === \"htmlmixed\") {\r\n      //     sources.push(cdn + \"/mode/xml/xml.js\");\r\n      //     sources.push(cdn + \"/mode/css/css.js\");\r\n      //     sources.push(cdn + \"/mode/javascript/javascript.js\");\r\n      //\r\n      // } else {\r\n      //     var mode = this.config.mode ? this.config.mode : \"javascript\";\r\n      //     sources.push(cdn + \"/mode/\" + mode + \"/\" + mode + \".js\");\r\n      // }\r\n      //\r\n      // // theme\r\n      // if (this.config.theme && this.config.theme !== \"default\") {\r\n      //     sources.push(cdn + \"/theme/\" + this.config.theme + \".css\")\r\n      // }\r\n      //\r\n      // // matchbrackets add-on\r\n      // if (this.config.matchBrackets) {\r\n      //     sources.push(cdn + \"/addon/edit/matchbrackets.js\")\r\n      // }\r\n      //\r\n      // webix.require(sources)\r\n      //     .then(webix.bind(this._render_when_ready, this))\r\n      //     .catch((e: any) => {\r\n      //         console.log(e);\r\n      //     });\r\n    },\r\n    _render_when_ready: function(this: any) {\r\n      const CodeMirror: any = _.get(window, 'CodeMirror')\r\n      this._editor = CodeMirror.fromTextArea(this.$view.firstChild, {\r\n        // mode: this.config.mode,\r\n        // lineNumbers: this.config.lineNumbers,\r\n        // matchBrackets: this.config.matchBrackets,\r\n        // theme: this.config.theme\r\n        ...this.config\r\n      })\r\n\r\n      this._waitEditor.resolve(this._editor)\r\n\r\n      this.setValue(this.config.value)\r\n      if (this._focus_await) {\r\n        this.focus()\r\n      }\r\n    },\r\n    _set_inner_size: function() {\r\n      if (!this._editor || !this.$width) return\r\n\r\n      this._updateScrollSize()\r\n      this._editor.scrollTo(0, 0) //force repaint, mandatory for IE\r\n    },\r\n    _updateScrollSize: function() {\r\n      var box = this._editor.getWrapperElement()\r\n      var height = (this.$height || 0) + 'px'\r\n\r\n      box.style.height = height\r\n      box.style.width = (this.$width || 0) + 'px'\r\n\r\n      var scroll = this._editor.getScrollerElement()\r\n      if (scroll.style.height !== height) {\r\n        scroll.style.height = height\r\n        this._editor.refresh()\r\n      }\r\n    },\r\n    $setSize: function(x: any, y: any) {\r\n      if (webix.ui.view.prototype.$setSize.call(this, x, y)) {\r\n        this._set_inner_size()\r\n      }\r\n    },\r\n    setValue: function(value: any) {\r\n      if (!value && value !== 0) {\r\n        value = ''\r\n      }\r\n\r\n      this.config.value = value\r\n      if (this._editor) {\r\n        this._editor.setValue(value)\r\n        //by default - clear editor's undo history when setting new value\r\n        if (!this.config.preserveUndoHistory) {\r\n          this._editor.clearHistory()\r\n        }\r\n        this._updateScrollSize()\r\n      }\r\n    },\r\n    getValue: function() {\r\n      return this._editor ? this._editor.getValue() : this.config.value\r\n    },\r\n    focus: function() {\r\n      this._focus_await = true\r\n      if (this._editor) {\r\n        this._editor.focus()\r\n      }\r\n    },\r\n    getEditor: function(waitEditor: any) {\r\n      return waitEditor ? this._waitEditor : this._editor\r\n    },\r\n    // //undo, redo, etc\r\n    // undo: function () {\r\n    //     this._editor.undo();\r\n    // },\r\n    // redo: function () {\r\n    //     this._editor.redo();\r\n    // },\r\n    undoLength: function() {\r\n      return this._editor.historySize().undo\r\n    }\r\n  },\r\n  webix.ui.view\r\n)\r\n\r\nexport class CtlCodeMirror extends CtlBase<CtlCodeMirror> {\r\n  static create(vjson: any): CtlCodeMirror {\r\n    const that = new CtlCodeMirror(vjson)\r\n\r\n    _.defaultsDeep(vjson, CtlCodeMirrorDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['value'])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this)\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 撤销\r\n   */\r\n  undo() {\r\n    this._webix.getEditor().undo()\r\n  }\r\n\r\n  /**\r\n   * 重做\r\n   */\r\n  redo() {\r\n    this._webix.getEditor().redo()\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","/* eslint-disable */\r\nimport Vue from 'vue'\r\nimport { BaseModule, BizWatch, VJson } from './YvanUIModule'\r\nimport { CtlTree } from './CtlTree'\r\nimport { CtlTreeTable } from './CtlTreeTable'\r\nimport { CtlTab } from './CtlTab'\r\nimport { CtlDataview } from './CtlDataview'\r\nimport { CtlECharts } from './CtlECharts'\r\nimport { CtlButton } from './CtlButton'\r\nimport { CtlText } from './form/input/CtlText'\r\nimport { CtlCheckBox } from './form/other/CtlCheckBox'\r\nimport { CtlCombo } from './form/select/CtlCombo'\r\nimport { CtlDatePicker } from './form/input/CtlDatePicker'\r\nimport { CtlDateRangePicker } from './form/input/CtlDateRangePicker'\r\nimport { CtlForm } from './form/CtlForm'\r\nimport { CtlMultiCombo } from './form/select/CtlMultiCombo'\r\nimport { CtlSearch } from './form/input/CtlSearch'\r\nimport { CtlCarousel } from './CtlCarousel'\r\nimport { CtlGrid } from './CtlGrid'\r\nimport { CtlSwitch } from './form/other/CtlSwitch'\r\nimport { CtlNumber } from './form/input/CtlNumber'\r\nimport { CtlRadio } from './form/other/CtlRadio'\r\nimport { CtlCodeMirror } from './CtlCodeMirror'\r\nimport webix from 'webix'\r\n\r\n// export const webix = require(\"../webix/webix\");\r\nwebix.i18n.setLocale('zh-CN')\r\n_.set(window, 'webix', webix);\r\n\r\n/**\r\n * 深度遍历 vjson\r\n * @param vjson 视图JSON\r\n * @param resolver 分析函数\r\n * @return 记录 resolver 方法返回 true 时，对象的访问路径\r\n */\r\nexport function deepTravVJson(\r\n  vjson: VJson,\r\n  resolver: (child: VJson) => any\r\n): Array<PathMarker> {\r\n  const markerList: Array<PathMarker> = []\r\n  deepTrav1(vjson, resolver, markerList)\r\n  return markerList\r\n}\r\n\r\n/**\r\n * 深度遍历 vjson 后，所有 mark 对象及访问方法\r\n */\r\nexport interface PathMarker {\r\n  id: number\r\n  keyName: string\r\n  object: any\r\n}\r\n\r\nfunction deepTrav1(\r\n  obj: VJson,\r\n  resolver: (child: VJson) => any,\r\n  marker?: Array<PathMarker>\r\n) {\r\n  let isMarker = resolver(obj)\r\n  if (marker && isMarker === true) {\r\n    marker.unshift({ id: 0, keyName: '', object: obj })\r\n  }\r\n\r\n  //设计器组件不扫描\r\n  if (obj.xtype === 'yvDesignCanvas') return\r\n  if (obj.xtype === 'yvDesignProperty') return\r\n  if (obj.xtype === 'yvDesignToolbox') return\r\n\r\n  _.forOwn(obj, (value, key) => {\r\n    if (typeof value !== 'object') {\r\n      return\r\n    }\r\n    if (_.has(obj, 'view') && obj.view === 'toolbar') {\r\n      if (key === 'dataSource' || key === 'suggest' || key === 'options') {\r\n        return\r\n      }\r\n    } else {\r\n      // 模型、数据、数据源不扫描\r\n      if (\r\n        key === 'data' ||\r\n        key === 'dataSource' ||\r\n        key === 'suggest' ||\r\n        key === 'options'\r\n      ) {\r\n        return\r\n      }\r\n    }\r\n\r\n    //事件不扫描\r\n    if (key === 'on' && _.isObject(value)) {\r\n      return\r\n    }\r\n    if (_.startsWith(key, 'on') && _.size(key) > 2) {\r\n      return\r\n    }\r\n    const isMarkerChild = deepTrav1(value, resolver, marker)\r\n    if (marker && isMarkerChild === true) {\r\n      isMarker = true\r\n      marker.unshift({ id: obj.id, keyName: key, object: value })\r\n    }\r\n  })\r\n\r\n  return isMarker\r\n}\r\n\r\nfunction deepTravFindSuper(obj: VJson, targetId: number): VJson {\r\n  //设计器组件不扫描\r\n  if (obj.xtype === 'yvDesignCanvas') return\r\n  if (obj.xtype === 'yvDesignProperty') return\r\n  if (obj.xtype === 'yvDesignToolbox') return\r\n\r\n  let rObj: VJson = null\r\n\r\n  _.forOwn(obj, (value, key) => {\r\n    if (rObj) {\r\n      return\r\n    }\r\n    if (typeof value !== 'object') {\r\n      return\r\n    }\r\n    // 模型、数据、数据源不扫描\r\n    if (\r\n      key === 'data' ||\r\n      key === 'dataSource' ||\r\n      key === 'suggest' ||\r\n      key === 'options'\r\n    ) {\r\n      return\r\n    }\r\n    //事件不扫描\r\n    if (key === 'on' && _.isObject(value)) {\r\n      return\r\n    }\r\n    if (key.startsWith('on') && _.size(key) > 2) {\r\n      return\r\n    }\r\n    if (value.id === targetId) {\r\n      rObj = obj\r\n      return\r\n    }\r\n    rObj = deepTravFindSuper(value, targetId)\r\n  })\r\n\r\n  return rObj\r\n}\r\n\r\n/**\r\n * 根据id查找上级vjson\r\n * @param obj 原始 vjson 视图\r\n * @param targetId 子元素的id\r\n */\r\nexport function getSuperVjson(obj: VJson, targetId: number): VJson {\r\n  return deepTravFindSuper(obj, targetId)\r\n}\r\n\r\nfunction deepTravFindCurrent(obj: VJson, targetId: number): VJson {\r\n  //设计器组件不扫描\r\n  if (obj.xtype === 'yvDesignCanvas') return\r\n  if (obj.xtype === 'yvDesignProperty') return\r\n  if (obj.xtype === 'yvDesignToolbox') return\r\n\r\n  let rObj: VJson = null\r\n\r\n  _.forOwn(obj, (value, key) => {\r\n    if (rObj) {\r\n      return\r\n    }\r\n    if (typeof value !== 'object') {\r\n      return\r\n    }\r\n    // 模型、数据、数据源不扫描\r\n    if (\r\n      key === 'data' ||\r\n      key === 'dataSource' ||\r\n      key === 'suggest' ||\r\n      key === 'options'\r\n    ) {\r\n      return\r\n    }\r\n    //事件不扫描\r\n    if (key === 'on' && _.isObject(value)) {\r\n      return\r\n    }\r\n    if (key.startsWith('on') && _.size(key) > 2) {\r\n      return\r\n    }\r\n    if (value.id === targetId) {\r\n      rObj = value\r\n      return\r\n    }\r\n    rObj = deepTravFindCurrent(value, targetId)\r\n  })\r\n\r\n  return rObj\r\n}\r\n\r\n/**\r\n * 根据id查找vjson\r\n * @param obj 原始 vjson 视图\r\n * @param targetId 子元素的id\r\n */\r\nexport function getCurrentVjson(obj: VJson, targetId: number): VJson {\r\n  return deepTravFindCurrent(obj, targetId)\r\n}\r\n\r\nfunction deepTravDeleteVjson(obj: VJson, targetId: number): boolean {\r\n  let isDelete: boolean = false\r\n  //设计器组件不扫描\r\n  if (obj.xtype === 'yvDesignCanvas') return isDelete\r\n  if (obj.xtype === 'yvDesignProperty') return isDelete\r\n  if (obj.xtype === 'yvDesignToolbox') return isDelete\r\n\r\n  _.forOwn(obj, (value, key) => {\r\n    if (isDelete) {\r\n      return\r\n    }\r\n    if (typeof value !== 'object') {\r\n      return\r\n    }\r\n    // 模型、数据、数据源不扫描\r\n    if (\r\n      key === 'data' ||\r\n      key === 'dataSource' ||\r\n      key === 'suggest' ||\r\n      key === 'options'\r\n    ) {\r\n      return\r\n    }\r\n    //事件不扫描\r\n    if (key === 'on' && _.isObject(value)) {\r\n      return\r\n    }\r\n    if (key.startsWith('on') && _.size(key) > 2) {\r\n      return\r\n    }\r\n    if (value.id === targetId) {\r\n      isDelete = true\r\n      /** 如果是数组的元素*/\r\n      if (webix.isArray(obj)) {\r\n        obj.splice(key, 1)\r\n      } else {\r\n        delete obj[key]\r\n      }\r\n      return\r\n    }\r\n    isDelete = deepTravDeleteVjson(value, targetId)\r\n\r\n    /** 删除因为删除元素后造成的空元素 */\r\n    if (isDelete) {\r\n      if (\r\n        (webix.isArray(value) && value.length <= 0) ||\r\n        Object.keys(value).length <= 0 ||\r\n        (Object.keys(value).length === 1 && value.id > 0) ||\r\n        value === undefined ||\r\n        value === null\r\n      ) {\r\n        if (webix.isArray(obj)) {\r\n          obj.splice(key, 1)\r\n        } else {\r\n          delete obj[key]\r\n        }\r\n      }\r\n    }\r\n  })\r\n  return isDelete\r\n}\r\n\r\n/**\r\n * 根据id删除Vjson 会删除因删除元素造成的空对象\r\n * @param obj 原始 vjson 视图\r\n * @param targetId 子元素的id\r\n */\r\nexport function deletVjsonById(obj: VJson, targetId: number): boolean {\r\n  let isDeleted = deepTravDeleteVjson(obj, targetId)\r\n  if (webix.isArray(obj)) {\r\n    if (obj.length <= 0) {\r\n      let T: VJson = {\r\n        view: 'template',\r\n        template: '拖动任何组件到此处',\r\n        role: 'placeholder',\r\n        id: webix.uid()\r\n      }\r\n      obj.push(T)\r\n    }\r\n  }\r\n  return isDeleted\r\n}\r\n\r\n/**\r\n * 根据 vjson 中的 ctlName, 合并属性\r\n * @param vjson 原始 vjson 视图\r\n * @param ctlOption 要被扩展的 ctlName 属性对\r\n */\r\nexport function viewExtend(vjson: VJson, ctlOption: any): VJson {\r\n  // 收集所有 ctlName 属性，放到收集器的 collector.ctls\r\n  // 收集所有 entityName 属性，放到收集器的 collector.entity\r\n  const collector = {\r\n    ctls: {}\r\n  }\r\n\r\n  deepTravVJson(vjson, obj => {\r\n    if (obj.ctlName) {\r\n      _.set(collector.ctls, obj.ctlName, obj)\r\n    }\r\n  })\r\n\r\n  _.forOwn(ctlOption, (extendVJson, ctlName) => {\r\n    if (_.has(collector.ctls, ctlName)) {\r\n      _.merge(_.get(collector.ctls, ctlName), extendVJson)\r\n    }\r\n  })\r\n\r\n  return vjson\r\n}\r\n\r\nconst $internalHooks = ['data', 'destory', 'watches', 'computed']\r\n\r\n/**\r\n * 收集成员变量\r\n */\r\nfunction collectDataFromConstructor(vm: Vue, Component: any) {\r\n  // override _init to prevent to init as Vue instance\r\n  const originalInit = Component.prototype._init\r\n  Component.prototype._init = function (this: Vue) {\r\n    // proxy to actual vm\r\n    const keys = Object.getOwnPropertyNames(vm)\r\n    // 2.2.0 compat (props are no longer exposed as self properties)\r\n    if (vm.$options.props) {\r\n      for (const key in vm.$options.props) {\r\n        if (!vm.hasOwnProperty(key)) {\r\n          keys.push(key)\r\n        }\r\n      }\r\n    }\r\n    keys.forEach(key => {\r\n      if (key.charAt(0) !== '_') {\r\n        Object.defineProperty(this, key, {\r\n          get: () => _.get(vm, key),\r\n          set: value => {\r\n            _.set(vm, key, value)\r\n          },\r\n          configurable: true\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  // should be acquired class property values\r\n  const data = new Component()\r\n\r\n  // restore original _init to avoid memory leak (#209)\r\n  Component.prototype._init = originalInit\r\n\r\n  // create plain data object\r\n  const plainData = {}\r\n  Object.keys(data).forEach(key => {\r\n    if (data[key] !== undefined) {\r\n      _.set(plainData, key, data[key])\r\n    }\r\n  })\r\n\r\n  return plainData\r\n}\r\n\r\n/**\r\n * 收集成员方法\r\n */\r\nfunction collectMethods(proto: any, options: any) {\r\n  Object.getOwnPropertyNames(proto).forEach(key => {\r\n    // 如果是constructor，则不处理。\r\n    if (key === 'constructor') {\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 viewExtend 方法\r\n    if (key === 'viewExtend') {\r\n      // options.viewExtends.push(proto[key]);\r\n      console.error(\r\n        '不支持使用 viewExtend, 请考虑使用 YvanUI.viewExtend(super.viewResolver(),{})'\r\n      )\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 viewIntercept 方法\r\n    if (key === 'viewIntercept') {\r\n      // options.viewIntercepts.push(proto[key]);\r\n      console.error('不支持使用 viewIntercept, 请考虑使用 super.viewResolver()')\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 onLoad 方法\r\n    if (key === 'onLoad') {\r\n      options.onLoads.push(proto[key])\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 onShow 方法\r\n    if (key === 'onShow') {\r\n      options.onShows.push(proto[key])\r\n    }\r\n\r\n    // 如果原型属性(方法)名是vue生命周期钩子名，则直接作为钩子函数挂载在options最外层\r\n    if ($internalHooks.indexOf(key) > -1) {\r\n      options[key] = proto[key]\r\n      return\r\n    }\r\n\r\n    // 先获取到原型属性的descriptor。\r\n    // 在前文已提及，计算属性其实也是挂载在原型上的，所以需要对descriptor进行判断\r\n    const descriptor = Object.getOwnPropertyDescriptor(proto, key)!\r\n    if (descriptor.value !== void 0) {\r\n      // 如果属性值是一个function，则认为这是一个方法，挂载在methods下\r\n      if (typeof descriptor.value === 'function') {\r\n        if (!_.has(options.methods, key)) {\r\n          options.methods[key] = descriptor.value\r\n        }\r\n      } else {\r\n        // 如果不是，则认为是一个普通的data属性。\r\n        // 但是这是原型上，所以更类似mixins，因此挂在mixins下。\r\n        options.mixins.push({\r\n          data(this: Vue) {\r\n            return { [key]: descriptor.value }\r\n          }\r\n        })\r\n      }\r\n    } else if (descriptor.get || descriptor.set) {\r\n      // 如果value是undefined(ps：void 0 === undefined)。\r\n      // 且描述符具有get或者set方法，则认为是计算属性。不理解的参考我上面关于class转换成构造函数的例子\r\n      // 这里可能和普通的计算属性不太一样，因为一般计算属性只是用来获取值的，但这里却有setter。\r\n      // 不过如果不使用setter，与非class方式开发无异，但有这一步处理，在某些场景会有特效。\r\n      ; (options.computed || (options.computed = {}))[key] = {\r\n        get: descriptor.get,\r\n        set: descriptor.set\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 基础混入器\r\n */\r\nfunction createCommonMix<M, Refs, INP>() {\r\n  return {}\r\n}\r\n\r\n/**\r\n * 根据 vjson 格式，嵌入 yvan 组件, 生成能够为 webix 使用的 vjson\r\n */\r\nexport function wrapperWebixConfig<M, Refs, INP>(\r\n  module: BaseModule<M, Refs, INP>,\r\n  vjson: VJson\r\n) {\r\n  // 形成最终的 viewResolver 方法\r\n  deepTravVJson(vjson, obj => {\r\n    if (obj.view === 'iframe') {\r\n      return\r\n    }\r\n\r\n    if (module && _.has(obj, 'id')) {\r\n      if (obj.id !== 'MainWindowFirstPage') {\r\n        console.error('禁用 ID 属性', obj)\r\n      }\r\n    }\r\n\r\n    if (typeof obj.placeId === 'string') {\r\n      obj.id = module.instanceId + '$' + obj.placeId\r\n    }\r\n\r\n    if (typeof obj.view === 'string') {\r\n      switch (obj.view) {\r\n        case 'button':\r\n          CtlButton.create(obj)\r\n          break\r\n\r\n        case 'text':\r\n          CtlText.create(obj)\r\n          break\r\n\r\n        case 'number':\r\n        case 'counter':\r\n          CtlNumber.create(obj)\r\n          break\r\n\r\n        case 'datepicker':\r\n        case 'date':\r\n        case 'datetime':\r\n          CtlDatePicker.create(obj)\r\n          break\r\n\r\n        case 'codemirror-editor':\r\n          CtlCodeMirror.create(obj)\r\n          break\r\n\r\n        case 'dataview':\r\n          CtlDataview.create(obj)\r\n          break\r\n\r\n        case 'echarts':\r\n          CtlECharts.create(obj)\r\n          break\r\n\r\n        case 'daterangepicker':\r\n        case 'daterange':\r\n        case 'datetimerange':\r\n          CtlDateRangePicker.create(obj)\r\n          break\r\n\r\n        case 'combo':\r\n        case 'combobox':\r\n          CtlCombo.create(obj)\r\n          break\r\n\r\n        case 'multicombo':\r\n          CtlMultiCombo.create(obj)\r\n          break\r\n\r\n        case 'search':\r\n        case 'searchbox':\r\n          CtlSearch.create(obj)\r\n          break\r\n\r\n        case 'check':\r\n        case 'checkbox':\r\n          CtlCheckBox.create(obj)\r\n          break\r\n\r\n        case 'switch':\r\n        case 'switchbox':\r\n          CtlSwitch.create(obj)\r\n          break\r\n\r\n        case 'radio':\r\n        case 'radiobox':\r\n          CtlRadio.create(obj)\r\n          break\r\n\r\n        case 'tree':\r\n          CtlTree.create(obj)\r\n          break\r\n\r\n        case 'treetable':\r\n          CtlTreeTable.create(obj)\r\n          break\r\n\r\n        case 'tabview':\r\n          CtlTab.create(obj)\r\n          break\r\n\r\n        case 'grid':\r\n          CtlGrid.create(obj)\r\n          break\r\n\r\n        case 'form':\r\n          CtlForm.create(obj)\r\n          break\r\n\r\n        case 'carousel':\r\n          CtlCarousel.create(obj)\r\n          break\r\n      }\r\n    }\r\n  })\r\n\r\n  if (module) {\r\n    vjson.$scope = module\r\n  }\r\n}\r\n\r\n/**\r\n * 将传统 Java Class 转换为 Vue 对象\r\n */\r\nexport function componentFactory<M, Refs, INP>(\r\n  Component: BaseModule<M, Refs, INP> & any,\r\n  options: any = {}\r\n): any {\r\n  //return VueComponent<BaseModule<M, Refs, INP>>(options)\r\n  if (!options.mixins) {\r\n    options.mixins = []\r\n  }\r\n\r\n  if (!options.methods) {\r\n    options.methods = {}\r\n  }\r\n\r\n  if (!options.viewExtends) {\r\n    options.viewExtends = []\r\n  }\r\n\r\n  if (!options.viewIntercepts) {\r\n    options.viewIntercepts = []\r\n  }\r\n\r\n  if (!options.onLoads) {\r\n    options.onLoads = []\r\n  }\r\n\r\n  if (!options.onShows) {\r\n    options.onShows = []\r\n  }\r\n\r\n  // 获取构造函数原型，这个原型上挂在了该类的method\r\n  for (\r\n    let proto = Component.prototype;\r\n    proto.constructor !== Vue;\r\n    proto = Object.getPrototypeOf(proto)\r\n  ) {\r\n    // 一直向上收集, 直到 Object 级\r\n    collectMethods(proto, options)\r\n  }\r\n\r\n  // 添加公共基础 MIX\r\n  options.mixins.push(createCommonMix<M, Refs, INP>())\r\n\r\n  // 解析 @Watch 装饰器方法，执行 watch\r\n  const watches = Component.prototype.watches\r\n  delete Component.prototype.watches\r\n\r\n  // 实例化Component构造函数，并收集其自身的(非原型上的)属性导出\r\n  options.mixins.push({\r\n    data(this: Vue) {\r\n      const data: any = {\r\n        refs: {},\r\n        dialog: undefined,\r\n        inParamter: undefined,\r\n        dialogParent: undefined,\r\n        instanceId: _.uniqueId('_mins_id_'),\r\n        ...collectDataFromConstructor(this, Component)\r\n      }\r\n      return data\r\n    },\r\n    created(this: Vue & any) {\r\n      if (_.isArray(watches)) {\r\n        _.each(watches, (item: BizWatch) => {\r\n          this.$watch(item.expr, item.handler, {\r\n            deep: item.deep,\r\n            immediate: item.immediate\r\n          })\r\n          //console.log('$watch', item.expr, item.handler, { deep: item.deep, immediate: item.immediate })\r\n        })\r\n      }\r\n    },\r\n    destroyed() { },\r\n    methods: {\r\n      onLoad(this: Vue) {\r\n        _.each(options.onLoads, load => {\r\n          load.call(this)\r\n        })\r\n      },\r\n      onShow(this: Vue) {\r\n        _.each(options.onShows, load => {\r\n          load.call(this)\r\n        })\r\n      },\r\n      buildView<M, Refs, INP>(this: Vue & BaseModule<M, Refs, INP>) {\r\n        // 获取到 viewResolver 方法，拿到最原始的 vjson\r\n        const vjson: VJson = this.viewResolver()\r\n\r\n        // 与 yvan 组件进行交换，使 vjson 能被 webix 使用\r\n        wrapperWebixConfig(this, vjson)\r\n        return vjson\r\n      },\r\n      closeDialog(this: Vue & any) {\r\n        this.dialog.close()\r\n      },\r\n      showDialog(this: Vue & BaseModule<M, Refs, INP> & any, inParamter: INP, container: any, isFromSearchBox: boolean = false): void {\r\n        // 显示对话框\r\n        const module: any = this\r\n        module.inParamter = inParamter\r\n        module.dialogParent = container\r\n\r\n        // 获取到 viewResolver 方法，拿到最原始的 vjson\r\n        const vjson: any = module.viewResolver()\r\n\r\n        if (!_.has(vjson, 'body')) {\r\n          vjson.body = {\r\n            template: 'dialog 没有 body'\r\n          }\r\n        }\r\n\r\n        // 与 yvan 组件进行交换，使 vjson 能被 webix 使用\r\n        wrapperWebixConfig(module, vjson.body)\r\n\r\n        // 构建 window\r\n        _.merge(vjson, {\r\n          view: 'window',\r\n          close: vjson.close === undefined ? true : vjson.close,\r\n          move: vjson.move === undefined ? true : vjson.move,\r\n          modal: vjson.modal === undefined ? true : vjson.modal,\r\n          position: 'center',\r\n          resize: vjson.resize === undefined ? true : vjson.resize,\r\n          head: {\r\n            view: \"toolbar\", margin: -4, cols: [\r\n              { view: \"label\", label: vjson.title, css: 'webix_header webix_win_title' },\r\n              {\r\n                view: \"icon\", icon: \"wxi-plus-square\", click: function (this: any) {\r\n                  dialog.config.fullscreen = !dialog.config.fullscreen;\r\n                  if (dialog.config.fullscreen) {\r\n                    dialog.config.oldtop = dialog.config.top;\r\n                    dialog.config.oldleft = dialog.config.left;\r\n                    dialog.config.left = 0;\r\n                    dialog.config.top = 0;\r\n                    this.define({ icon: 'wxi-minus-square' });\r\n                  } else {\r\n                    dialog.config.top = dialog.config.oldtop;\r\n                    dialog.config.left = dialog.config.oldleft;\r\n                    this.define({ icon: 'wxi-plus-square' });\r\n                  }\r\n                  dialog.resize();\r\n                  this.refresh();\r\n                }\r\n              },\r\n              {\r\n                view: \"icon\", icon: \"wxi-close\", click: function () {\r\n                  dialog.close();\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          on: {\r\n            onShow() {\r\n              module.onLoad()\r\n            },\r\n            onDestruct() {\r\n              module.onClose()\r\n            }\r\n          },\r\n        })\r\n        const dialog: any = webix.ui(vjson)\r\n        module._webixId = this.dialog = dialog\r\n        this.dialog.show();\r\n\r\n        $(this.dialog.$view).keypress((event) => {\r\n          if (event.keyCode === 27) {\r\n            module.onEsc()\r\n            event.stopPropagation()\r\n            event.preventDefault()\r\n            return;\r\n          }\r\n          if (event.keyCode === 13) {\r\n            module.onEnter()\r\n            if (isFromSearchBox) {\r\n              event.stopPropagation()\r\n            }\r\n            event.preventDefault()\r\n            return;\r\n          }\r\n        })\r\n\r\n        /** \r\n        const {\r\n          title = '未命名对话框',\r\n          width = 500,\r\n          height = 300,\r\n          modal = true,\r\n          body,\r\n          btn\r\n        } = vjson\r\n\r\n        const layerConfig: any = {\r\n          id: _.uniqueId('layerno_'),\r\n          zIndex: layer.zIndex, // layer.zIndex - 19891000,\r\n          type: 1,\r\n          area: [`${width}px`, `${height}px`],\r\n          title,\r\n          shade: modal ? 0.6 : false,\r\n          maxmin: true,\r\n          btn: btn,\r\n          anim: 0,\r\n          content: ''\r\n        }\r\n\r\n        // layer 打开后的回调\r\n        layerConfig.success = function(layero: any) {\r\n          module.layero = layero\r\n          layer.setTop(layero)\r\n          // 默认焦点在关闭上\r\n          layero\r\n            .find('a.layui-layer-close')\r\n            .attr('tabindex', 1)\r\n            .focus()\r\n\r\n          // if (isFromSearchBox) {\r\n          // 监听回车和取消键\r\n          layero.on('keydown', (event: KeyboardEvent) => {\r\n            if (event.keyCode === 13) {\r\n              module.onEnter()\r\n              if (isFromSearchBox) {\r\n                event.stopPropagation()\r\n              }\r\n              event.preventDefault()\r\n            } else if (event.keyCode === 27) {\r\n              module.onEsc()\r\n              event.stopPropagation()\r\n              event.preventDefault()\r\n            }\r\n          })\r\n          // }\r\n\r\n          // DOM 结果出现之后, 渲染 webix\r\n          body.container = layero.find('.layui-layer-content').attr('id') // layero[0]; // layero.attr('id');\r\n          module._layeroInner = body.container\r\n          const $innerDOM = $('#' + module._layeroInner)\r\n          _.extend(body, {\r\n            width: $innerDOM.innerWidth(),\r\n            height: $innerDOM.innerHeight()\r\n          })\r\n          module._webixId = webix.ui(body)\r\n          module.onLoad()\r\n        }\r\n\r\n        // layer 大小改变后的回调\r\n        layerConfig.restore = layerConfig.full = layerConfig.resizing = function(\r\n          layero: any\r\n        ) {\r\n          //$$(module._webixId).resize();\r\n          const $innerDOM = $('#' + module._layeroInner)\r\n          module._webixId.define({\r\n            width: $innerDOM.innerWidth(),\r\n            height: $innerDOM.innerHeight()\r\n          })\r\n          module._webixId.resize()\r\n          console.log('resized')\r\n        }\r\n\r\n        // layer 关闭后的回调\r\n        layerConfig.end = function() {\r\n          module.onClose()\r\n\r\n          webix.$$(module._webixId).destructor()\r\n          module.$destroy()\r\n        }\r\n\r\n        module._layerIndex = layer.open(layerConfig)\r\n        */\r\n      }\r\n    }\r\n  })\r\n\r\n  // 通过 vue.extend 生成一个 vue 类型的功能模块对象\r\n  const VueModule: any = Vue.extend(options)\r\n  return VueModule\r\n}\r\n\r\n/**\r\n * 在目标 DOM 选择器上渲染模块\r\n */\r\nexport function render<M, Refs, INP>(\r\n  selector: string,\r\n  baseModule: BaseModule<M, Refs, INP>\r\n) {\r\n  const lastHandle = _.get(window, 'LastRenderHandler')\r\n  if (lastHandle) {\r\n    lastHandle.destructor()\r\n    _.set(window, 'LastRenderHandler', null)\r\n  }\r\n\r\n  const cfg = (baseModule as any).buildView()\r\n  cfg.container = selector\r\n  baseModule._webixId = webix.ui(cfg)\r\n  baseModule.onLoad()\r\n\r\n  webix.event(<any>window, 'resize', () => {\r\n    // $$(baseModule._webixId).resize();\r\n    baseModule._webixId.resize()\r\n  })\r\n\r\n  _.set(window, 'LastRenderHandler', baseModule._webixId)\r\n  return baseModule._webixId\r\n}\r\n\r\n/**\r\n * 在占位空间 spaceId 上渲染 vjson\r\n * @param module 当前模块\r\n * @param spaceId 占位空间\r\n * @param vjson 界面描述\r\n */\r\nexport function renderPlace<M, Refs, INP>(\r\n  module: BaseModule<M, Refs, INP>,\r\n  spaceId: string,\r\n  vjson: VJson\r\n) {\r\n  wrapperWebixConfig(module, vjson)\r\n  webix.ui(vjson, webix.$$(module.instanceId + '$' + spaceId))\r\n}\r\n","import axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport Qs from 'qs'\r\nimport { YvanDataSourceGrid } from './YvanDataSourceGridImp';\r\n\r\nexport function invokeApi<T>(apiId: string, args: IArguments, entity: T): Promise<T> {\r\n    return new Promise<T>((resolve, reject) => {\r\n        const ajax: Ajax.Function = _.get(window, 'YvanUI.ajax');\r\n        const prefix = _.get(window, '_YvanUI_serverJSPrefix');\r\n\r\n        const postBodyParamter = [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            postBodyParamter.push(args[i]);\r\n        }\r\n\r\n        ajax({\r\n            url: prefix + apiId,\r\n            method: 'POST-JSON',\r\n            data: {\r\n                p: postBodyParamter\r\n            }\r\n\r\n        }).then(res => {\r\n            _.extend(entity, res.data);\r\n            resolve(entity);\r\n        });\r\n    })\r\n}\r\n\r\nexport namespace Ajax {\r\n\r\n    export interface CreateAjaxOption {\r\n        baseUrl: string\r\n    }\r\n\r\n    export type MethodType = 'POST' | 'GET' | 'POST-JSON' | 'UPLOADEXCEL' | 'DOWNLOAD' | 'POST-FILE'\r\n\r\n    /**\r\n     * 请求参数\r\n     */\r\n    export interface Option {\r\n        /**\r\n         * url 地址\r\n         */\r\n        url: string,\r\n\r\n        /**\r\n         * 下载文件名\r\n         */\r\n        fileName?: string,\r\n\r\n        /**\r\n         * 请求方法\r\n         */\r\n        method: MethodType,\r\n\r\n        /**\r\n         * 上传文件（如果需要的话）\r\n         */\r\n        file?: any,\r\n\r\n        /**\r\n         * 请求参数\r\n         */\r\n        data?: any,\r\n\r\n        /**\r\n         * 请求头\r\n         */\r\n        headers?: any\r\n\r\n        /**\r\n         * 是否只传送 responseData\r\n         */\r\n        disableResponseData?: boolean\r\n    }\r\n\r\n    /**\r\n     * 数据响应\r\n     */\r\n    export interface Response {\r\n        success: boolean\r\n        msg: string\r\n        data: any\r\n    }\r\n\r\n    export type Function = (option: Option) => Promise<Ajax.Response>\r\n}\r\n\r\nexport function downLoad(downLoadUrl: string, filename: string, data: any, header: any) {\r\n    const YvanUI: any = _.get(window, 'YvanUI');\r\n    YvanUI.loading();\r\n    const createObjectURL = (object: any) => {\r\n        return (window.URL) ? window.URL.createObjectURL(object) : _.get(window, 'webkitURL').createObjectURL(object)\r\n    };\r\n\r\n    // const formData = new FormData();\r\n    // _.forOwn(data, (v, k) => {\r\n    //     formData.append(k, v);\r\n    // });\r\n    const formData = data ? Qs.stringify(data) : '';\r\n\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('POST', downLoadUrl);\r\n    xhr.responseType = 'blob';\r\n    //xhr.setRequestHeader('Authorization', $.cookie('auth'))\r\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n    if (header) {\r\n        _.forOwn(header, (v, k) => {\r\n            xhr.setRequestHeader(k, v);\r\n        })\r\n    }\r\n    xhr.onload = function (e: any) {\r\n        if (this.status === 200) {\r\n            const blob = this.response;\r\n            if (_.has(window, 'navigator.msSaveOrOpenBlob')) {\r\n                navigator.msSaveBlob(blob, filename)\r\n                YvanUI.clearLoading();\r\n\r\n            } else {\r\n                const a = document.createElement('a');\r\n                const url = createObjectURL(blob);\r\n                a.href = url;\r\n                a.download = filename;\r\n                $('body').append(a);\r\n                a.click();\r\n                $(a).remove();\r\n                window.URL.revokeObjectURL(url)\r\n                YvanUI.clearLoading();\r\n            }\r\n        }\r\n    };\r\n    xhr.send(formData);\r\n}\r\n\r\n/**\r\n * 创建一个 Ajax 客户端\r\n */\r\nexport function createAjax(createOption: Ajax.CreateAjaxOption): Ajax.Function {\r\n\r\n    if (createOption.baseUrl) {\r\n        axios.defaults.baseURL = createOption.baseUrl;\r\n    }\r\n\r\n    return function (option: Ajax.Option) {\r\n\r\n        const ax: AxiosRequestConfig = {\r\n            url: option.url\r\n        };\r\n\r\n        if (option.method === 'DOWNLOAD') {\r\n            downLoad(createOption.baseUrl + option.url, option.fileName || 'file',\r\n                option.data, option.headers);\r\n            return new Promise<Ajax.Response>((resolver, reject) => {\r\n            });\r\n        }\r\n\r\n        if (option.method === 'POST-JSON') {\r\n            ax.method = 'POST';\r\n            ax.headers = {\r\n                'Content-Type': 'application/json',\r\n                ...option.headers\r\n            };\r\n            ax.data = JSON.stringify(option.data)\r\n\r\n        } else if (option.method === 'POST-FILE') {\r\n            //TODO 刘壮. 上传文件\r\n            var forms = new FormData();\r\n            ax.headers = {\r\n                'Content-Type': 'multipart/form-data',\r\n                ...option.headers\r\n            };\r\n            _.forOwn(option.data, (value, key) => {\r\n                if (key === 'files') {\r\n                    let i = 0;\r\n                    _.each(value, f => {\r\n                        forms.append('file' + (++i), f)\r\n                    })\r\n                } else {\r\n                    forms.append(key, value)\r\n                }\r\n            });\r\n            ax.data = forms;\r\n            ax.method = 'POST'\r\n        } else if (option.method === 'POST') {\r\n            ax.method = 'POST';\r\n            ax.headers = {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n                ...option.headers\r\n            };\r\n            ax.data = Qs.stringify(option.data)\r\n\r\n        } else if (option.method === 'GET') {\r\n            ax.method = 'GET';\r\n            ax.params = option.data\r\n            ax.headers = {\r\n                ...option.headers\r\n            }\r\n\r\n        } else {\r\n            throw new Error('not implements')\r\n        }\r\n\r\n        return new Promise<Ajax.Response>((resolver, reject) => {\r\n            axios(ax).then((resolverRaw: AxiosResponse<any>) => {\r\n                resolver(resolverRaw.data)\r\n\r\n            }).catch((reason: any) => {\r\n                reject(reason)\r\n            })\r\n        })\r\n    }\r\n}\r\n","import { Ajax } from './YvanUIAjax';\r\n\r\nexport namespace Db {\r\n\r\n    export interface CreateDbOption {\r\n        baseUrl: string,\r\n        defaultDb: string,\r\n        ajax: Ajax.Function\r\n    }\r\n\r\n    export interface CompileOption {\r\n        sqlId: string\r\n    }\r\n\r\n    export interface ExecuteOption extends CompileOption {\r\n        params?: any\r\n    }\r\n\r\n    export interface QueryOption extends ExecuteOption {\r\n        limit?: number\r\n        limitOffset?: number\r\n        needCount?: boolean\r\n        filterModel?: any\r\n        orderByModel?: any\r\n    }\r\n\r\n    export interface Response {\r\n\r\n        /**\r\n         * 输出后台运行的实际 SQL (DEBUG 模式才会存在)\r\n         */\r\n        sql: string\r\n\r\n        /**\r\n         * 输出后台运行的实际 SQL参数 (DEBUG 模式才会存在)\r\n         */\r\n        params: any[]\r\n\r\n        /**\r\n         * 统计的总行数\r\n         */\r\n        totalCount?: number\r\n\r\n        /**\r\n         * 行数取值\r\n         */\r\n        limit?: number\r\n\r\n        /**\r\n         * 偏移值\r\n         */\r\n        limitOffset?: number\r\n\r\n        /**\r\n         * SQL 运行输出的参数\r\n         */\r\n        data: any\r\n    }\r\n\r\n    export class Client {\r\n        private baseUrl: string;\r\n        private ajax: Ajax.Function;\r\n        private defaultDb: string;\r\n\r\n        constructor(createOption: Db.CreateDbOption) {\r\n            this.baseUrl = createOption.baseUrl\r\n            this.ajax = createOption.ajax\r\n            this.defaultDb = createOption.defaultDb\r\n        }\r\n\r\n        execute(option: Db.ExecuteOption): Promise<Db.Response> {\r\n            return new Promise(((resolve, reject) => {\r\n                const sqlTimeId = _.uniqueId('SQL')\r\n                console.time(sqlTimeId)\r\n\r\n                this.ajax({\r\n                    url: this.baseUrl + '/execute',\r\n                    method: 'POST-JSON',\r\n                    data: {\r\n                        db: this.defaultDb,\r\n                        sqlId: option.sqlId,\r\n                        params: option.params\r\n                    }\r\n\r\n                }).then((root) => {\r\n                    if (root && root.success) {\r\n                        const { sql, params: resParams, data } = root.data\r\n                        if (sql) {\r\n                            console.log('SQL-execute', { sql, resParams })\r\n                        }\r\n                        resolve(data)\r\n                        return\r\n                    }\r\n                    reject(root.msg)\r\n\r\n                }).catch((err) => {\r\n                    reject(err)\r\n\r\n                }).finally(() => {\r\n                    console.timeEnd(sqlTimeId)\r\n                })\r\n\r\n            }))\r\n        }\r\n\r\n        query(option: Db.QueryOption): Promise<Db.Response> {\r\n            return new Promise(((resolve, reject) => {\r\n                const sqlTimeId = _.uniqueId('SQL')\r\n                console.time(sqlTimeId)\r\n\r\n                this.ajax({\r\n                    url: this.baseUrl + '/query',\r\n                    method: 'POST-JSON',\r\n                    data: {\r\n                        db: this.defaultDb,\r\n                        filterModel: option.filterModel,\r\n                        orderByModel: option.orderByModel,\r\n                        limit: option.limit,\r\n                        limitOffset: option.limitOffset,\r\n                        needCount: option.needCount,\r\n                        sqlId: option.sqlId,\r\n                        params: option.params,\r\n                    }\r\n\r\n                }).then((root) => {\r\n                    if (root && root.success) {\r\n                        const { sql, params: resParams, data } = root.data\r\n                        if (sql) {\r\n                            console.log('SQL-query', { sql, resParams })\r\n                        }\r\n                        resolve(root.data)\r\n                        return\r\n                    }\r\n                    reject(root.msg)\r\n\r\n                }).catch((err) => {\r\n                    reject(err)\r\n\r\n                }).finally(() => {\r\n                    console.timeEnd(sqlTimeId)\r\n                })\r\n            }))\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 创建一个 db 客户端\r\n */\r\nexport function createDb(createOption: Db.CreateDbOption): Db.Client {\r\n    return new Db.Client(createOption)\r\n}\r\n","/**\r\n * 获取页面 URL 问号之后的参数\r\n */\r\nexport function getQueryString(): any {\r\n    const url = document.location.search;\r\n    const theRequest: any = {};\r\n    if (url.indexOf(\"?\") >= 0) {\r\n        let str = url.substr(1);\r\n        const strs = str.split(\"&\");\r\n        for (var i = 0; i < strs.length; i++) {\r\n            const vs = strs[i].split(\"=\");\r\n            theRequest[vs[0]] = unescape(vs[1]);\r\n        }\r\n    }\r\n    return theRequest;\r\n}\r\n\r\n/**\r\n * 统一吧下划线（字符串/对象/数组）变成驼峰命名\r\n */\r\nexport function camelCase(obj: any): any {\r\n    if (typeof obj === 'string') {\r\n        return _.camelCase(obj)\r\n    }\r\n    if (_.isArray(obj)) {\r\n        return _.map(obj, (item) => {\r\n            return camelCase(item)\r\n        })\r\n    }\r\n    if (typeof obj === 'object') {\r\n        const ret: any = {}\r\n        _.forOwn(obj, (value, key) => {\r\n            ret[_.camelCase(key)] = value\r\n        })\r\n        return ret\r\n    }\r\n    console.error('无法转换' + obj)\r\n}\r\n\r\n/**\r\n * 统一吧驼峰（字符串/对象/数组）变成下划线\r\n */\r\nexport function snakeCase(obj: any): any {\r\n    if (typeof obj === 'string') {\r\n        return _.snakeCase(obj)\r\n    }\r\n    if (_.isArray(obj)) {\r\n        return _.map(obj, (item) => {\r\n            return snakeCase(item)\r\n        })\r\n    }\r\n    if (typeof obj === 'object') {\r\n        const ret: any = {}\r\n        _.forOwn(obj, (value, key) => {\r\n            ret[_.snakeCase(key)] = value\r\n        })\r\n        return ret\r\n    }\r\n    console.error('无法转换' + obj)\r\n}\r\n\r\n\r\n/**\r\n * 将任意 planObject 对象，转换为 hash 描述\r\n */\r\nexport function param(obj: any): string {\r\n    return $.param(obj)\r\n}\r\n\r\n/**\r\n * 将 hash 描述转换为 planObject 对象\r\n * @param s\r\n */\r\nexport function unparam(query: string): any {\r\n    const queryString: any = {};\r\n    if (query.slice(0, 1) === \"#\") {\r\n        query = query.slice(1);\r\n    }\r\n    const vars = query.split(\"&\");\r\n    for (let i = 0; i < vars.length; i++) {\r\n        const pair = vars[i].split(\"=\");\r\n        pair[0] = decodeURIComponent(pair[0]);\r\n        pair[1] = decodeURIComponent(pair[1]);\r\n        // If first entry with this name\r\n        if (typeof queryString[pair[0]] === \"undefined\") {\r\n            queryString[pair[0]] = pair[1];\r\n        } else if (typeof queryString[pair[0]] === \"string\") {\r\n            const arr = [queryString[pair[0]], pair[1]];\r\n            queryString[pair[0]] = arr;\r\n        } else {\r\n            queryString[pair[0]].push(pair[1]);\r\n        }\r\n    }\r\n    return queryString;\r\n}\r\n","import webix, { $$ } from 'webix'\r\nimport { wrapperWebixConfig } from './YvanRender'\r\nimport { idText } from 'typescript'\r\n\r\n// eslint-disable-next-line\r\nconst baseKeyboardOption: any = {\r\n  success(layero: any, layerIndex: any) {\r\n    layer.setTop(layero)\r\n    layero\r\n      .find('a.layui-layer-btn0')\r\n      .attr('tabindex', 1)\r\n      .focus()\r\n    layero.on('keydown', (event: KeyboardEvent) => {\r\n      if (event.keyCode === 13 || event.keyCode === 27) {\r\n        layer.close(layerIndex)\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nconst escKeyboardOption: any = {\r\n  success(layero: any, layerIndex: any) {\r\n    layer.setTop(layero)\r\n    const $input = layero.find('input.layui-layer-input')\r\n\r\n    // 确定按钮获得焦点\r\n    const $btn0 = layero.find('a.layui-layer-btn0').attr('tabindex', 1)\r\n    // 取消按钮能获得焦点\r\n    const $btn1 = layero.find('a.layui-layer-btn1').attr('tabindex', 1)\r\n\r\n    if ($input.length <= 0) {\r\n      // 如果没有输入框存在，默认让\"确认按钮\"获得焦点\r\n      $btn0.focus()\r\n    }\r\n\r\n    layero.on('keydown', (event: KeyboardEvent) => {\r\n      if (event.keyCode === 13) {\r\n        layero.find('a.layui-layer-btn0').trigger('click')\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n      } else if (event.keyCode === 27) {\r\n        // 取消\r\n        layero.find('a.layui-layer-btn1').trigger('click')\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * 显示正在读取\r\n */\r\nexport function loading(msg?: string) {\r\n  clearLoading()\r\n  if (!msg) {\r\n    msg = '请稍后'\r\n  }\r\n  const $body = $('body')\r\n  $body.append(`<div class=\"load-view\" style=\"z-index: 19850224;\"><div class=\"load-an-view\"><div class=\"fading-circle\">\r\n  <div class=\"sk-circle1 sk-circle\"></div>\r\n  <div class=\"sk-circle2 sk-circle\"></div>\r\n  <div class=\"sk-circle3 sk-circle\"></div>\r\n  <div class=\"sk-circle4 sk-circle\"></div>\r\n  <div class=\"sk-circle5 sk-circle\"></div>\r\n  <div class=\"sk-circle6 sk-circle\"></div>\r\n  <div class=\"sk-circle7 sk-circle\"></div> \r\n  <div class=\"sk-circle8 sk-circle\"></div>\r\n  <div class=\"sk-circle9 sk-circle\"></div>\r\n  <div class=\"sk-circle10 sk-circle\"></div>\r\n  <div class=\"sk-circle11 sk-circle\"></div>\r\n  <div class=\"sk-circle12 sk-circle\"></div>\r\n</div></div><div class=\"load-tip\">${msg}</div></div>`)\r\n\r\n  $body.append($(`<div class=\"webix_modal load-view-masker\" style=\"z-index: 19850223;\"></div>`))\r\n}\r\n\r\n/**\r\n * 清空正在读取\r\n */\r\nexport function clearLoading() {\r\n  const $body = $('body')\r\n  $body.find('.load-view').remove()\r\n  $body.find('.load-view-masker').remove();\r\n}\r\n\r\n/**\r\n * 中间灰底白字提示\r\n */\r\nexport function msg(message: string): void {\r\n  const $body = $('body')\r\n\r\n  $body.find('[xtype=msg]').remove()\r\n  const $w = $(\r\n    '<div xtype=\"msg\" class=\"yvan-msg yvan-anim yvan-anim-00\">' +\r\n    '  <div class=\"yvan-msg-content\">' +\r\n    message +\r\n    '</div></div>'\r\n  )\r\n  $body.append($w)\r\n\r\n  const iframeWidth = $w.parent().width() as number\r\n  const iframeHeight = $w.parent().height() as number\r\n\r\n  const windowWidth = $w.width() as number\r\n  const windowHeight = $w.height() as number\r\n\r\n  let setWidth = (iframeWidth - windowWidth) / 2\r\n  let setHeight = (iframeHeight - windowHeight) / 2\r\n  if (iframeHeight < windowHeight || setHeight < 0) {\r\n    setHeight = 0\r\n  }\r\n  if (iframeWidth < windowWidth || setWidth < 0) {\r\n    setWidth = 0\r\n  }\r\n  $w.css({ left: setWidth, top: setHeight })\r\n  setTimeout(() => {\r\n    $w.remove()\r\n  }, 3000)\r\n}\r\n\r\n/**\r\n * 弹出输入框\r\n * @param title 输入框标题\r\n * @param defValue 默认值\r\n */\r\nexport function prompt(title: string = '请输入内容', defValue: string = ''): Promise<string> {\r\n  const tid: any = webix.uid()\r\n  let dialog: any = undefined;\r\n  return new Promise<string>((resolve, reject) => {\r\n\r\n    function onConfirm() {\r\n      const value = (<any>webix.$$(tid.toString())).getValue()\r\n      if (value) {\r\n        resolve(value);\r\n        dialog.close();\r\n        return;\r\n      }\r\n\r\n      msg('请输入内容');\r\n    }\r\n\r\n    function onCancel() {\r\n      reject();\r\n      dialog.close();\r\n    }\r\n\r\n    const vjson = {\r\n      view: 'window', close: false, move: true, modal: true, position: 'center', resize: true, fullscreen: false,\r\n      head: title,\r\n      on: {\r\n        onShow() {\r\n          // 进入后立刻获得焦点\r\n          (<any>webix.$$(tid)).focus();\r\n        }\r\n      },\r\n      body: {\r\n        rows: [\r\n          { view: 'text', id: tid, placeholder: '请输入', value: defValue },\r\n          {\r\n            cols: [\r\n              {},\r\n              {\r\n                view: 'button',\r\n                value: '确定',\r\n                width: 100,\r\n                css: 'yvan_primary',\r\n                click: onConfirm,\r\n              },\r\n              {\r\n                view: 'button',\r\n                value: '取消',\r\n                width: 100,\r\n                css: 'default',\r\n                click: () => {\r\n                  onCancel()\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n\r\n    };\r\n    dialog = webix.ui(vjson);\r\n    dialog.show();\r\n    $(webix.$$(tid).$view).keydown((e) => {\r\n      // 必须借助 jquery 拦截 keydown 事件\r\n      if (e.keyCode === 27) {\r\n        onCancel();\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n      if (e.keyCode === 13) {\r\n        onConfirm();\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n    })\r\n\r\n  });\r\n}\r\n\r\n/**\r\n * 弹出提示框\r\n * @param content 提示框内容\r\n */\r\nexport function alert(content: string): void {\r\n  webix.alert({ title: \"提示\", text: content, });\r\n}\r\n\r\n/**\r\n * 弹出错误框\r\n * @param content 错误的提示内容\r\n */\r\nexport function error(content: string): void {\r\n  webix.modalbox({ title: \"错误\", text: content, buttons: [\"确认\"], type: \"confirm-error\" });\r\n}\r\n\r\n/**\r\n * 弹出确认框\r\n * @param content 需要确认的文字内容\r\n */\r\nexport function confirm(content: string): Promise<void> {\r\n  return new Promise<void>((resolve, reject) => {\r\n    webix.confirm({\r\n      title: \"提示\",\r\n      text: content,\r\n      ok: \"确认\", cancel: \"取消\",\r\n\r\n    }).then(() => {\r\n      resolve();\r\n\r\n    }).catch(() => {\r\n      reject();\r\n    });\r\n  })\r\n}\r\n\r\n/**\r\n * 右上角弹出错误消息\r\n * @param content 消息内容\r\n */\r\nexport function msgError(content: string): void {\r\n  const toastr = _.get(window, 'toastr')\r\n  if (!toastr) {\r\n    webix.message({ type: 'error', text: content, expire: -1 })\r\n  } else {\r\n    toastr.error(content, '错误')\r\n  }\r\n}\r\n\r\n/**\r\n * 右上角弹出成功消息\r\n * @param content 消息内容\r\n */\r\nexport function msgSuccess(content: string): void {\r\n  const toastr = _.get(window, 'toastr')\r\n  if (!toastr) {\r\n    webix.message({ type: 'success', text: content, expire: 2000 })\r\n  } else {\r\n    toastr.success(content, '成功')\r\n  }\r\n}\r\n\r\n/**\r\n * 右上角弹出通知消息\r\n * @param content 消息内容\r\n */\r\nexport function msgInfo(content: string): void {\r\n  const toastr = _.get(window, 'toastr')\r\n  if (!toastr) {\r\n    webix.message({ type: 'info', text: content, expire: 2000 })\r\n  } else {\r\n    toastr.info(content)\r\n  }\r\n  // https://docs.webix.com/desktop__message_boxes.html\r\n}\r\n","import Vue from 'vue'\r\nimport { componentFactory } from './YvanRender'\r\nimport webix from 'webix'\r\n\r\n/**\r\n * 扩展 grid 组件\r\n */\r\nwebix.protoUI(\r\n  {\r\n    name: 'grid'\r\n  },\r\n  webix.ui.template\r\n)\r\n\r\n/**\r\n * 扩展 echarts 组件\r\n */\r\nwebix.protoUI(\r\n  {\r\n    name: 'echarts'\r\n  },\r\n  webix.ui.template\r\n)\r\n\r\nexport type VJson = any\r\n\r\nexport type ViewExtendType<T> = {\r\n  [P in keyof T]?: Partial<T[P]>\r\n}\r\n\r\n/**\r\n * 业务模块接口\r\n */\r\nexport interface Module<M, Refs, INP> {\r\n  viewResolver(): VJson\r\n\r\n  viewIntercept?(vjson: VJson, inParamter?: INP): void\r\n\r\n  viewExtend?(inParamter?: INP): ViewExtendType<Refs>\r\n\r\n  onLoad?(): void\r\n}\r\n\r\nexport abstract class BaseModule<M, Refs, INP> extends Vue\r\n  implements Module<M, Refs, INP> {\r\n  /**\r\n   * 组件对象引用\r\n   */\r\n  refs!: Refs\r\n\r\n  /**\r\n   * showDialog 带来的参数\r\n   */\r\n  inParamter!: INP\r\n\r\n  _webixId: any\r\n\r\n  /**\r\n   * 模块实例 ID (运行时自动创建)\r\n   */\r\n  instanceId!: string\r\n\r\n  /**\r\n   * 模块被渲染完成之后调用\r\n   */\r\n  onLoad(): void {}\r\n\r\n  /**\r\n   * 每次从隐藏状态换显出来后调用\r\n   */\r\n  onShow(): void {}\r\n\r\n  abstract viewResolver(): VJson\r\n\r\n  /**\r\n   * 根据名称，获取空白区域操作句柄\r\n   */\r\n  getPlace(placeId: string): any {\r\n    return webix.$$(_.get(this, 'instanceId') + '$' + placeId)\r\n  }\r\n}\r\n\r\nexport abstract class BaseDialog<M, Refs, INP> extends BaseModule<\r\n  M,\r\n  Refs,\r\n  INP\r\n> {\r\n  /**\r\n   * 对话框 DOM 对象\r\n   */\r\n  layero: any\r\n\r\n  /**\r\n   * 组件对象引用\r\n   */\r\n  refs!: Refs\r\n\r\n  /**\r\n   * 显示对话框\r\n   * @param inParamter 输入参数\r\n   * @param container 父容器\r\n   */\r\n  showDialog!: (\r\n    inParamter: INP,\r\n    container: any,\r\n    isFromSearchBox?: boolean\r\n  ) => void\r\n\r\n  /**\r\n   * 关闭对话框\r\n   */\r\n  closeDialog!: () => void\r\n\r\n  /**\r\n   * 按下 ESC 键\r\n   */\r\n  onEsc() {\r\n    this.closeDialog()\r\n  }\r\n\r\n  /**\r\n   * 按下 Enter 键\r\n   */\r\n  onEnter() {\r\n    debugger\r\n  }\r\n\r\n  /**\r\n   * 关闭后触发\r\n   */\r\n  onClose() {}\r\n\r\n  /**\r\n   * 对话框的父亲（打开者）\r\n   */\r\n  dialogParent!: any\r\n\r\n  /**\r\n   * 对话框标题\r\n   */\r\n  get title(): string {\r\n    return $(this.layero)\r\n      .find('.layui-layer-title')\r\n      .html()\r\n  }\r\n\r\n  /**\r\n   * 设置对话框标题\r\n   */\r\n  set title(nv: string) {\r\n    $(this.layero)\r\n      .find('.layui-layer-title')\r\n      .html(nv)\r\n  }\r\n\r\n  /**\r\n   * 显示进行中的状态\r\n   */\r\n  showLoading() {\r\n    webix.extend(this._webixId, webix.OverlayBox)\r\n    //this._webix.showOverlay(\"<div style='...'>There is no data</div>\");\r\n    this._webixId.showOverlay('Loading...')\r\n  }\r\n\r\n  /**\r\n   * 关闭进行中的状态\r\n   */\r\n  closeLoading() {\r\n    this._webixId.hideOverlay()\r\n  }\r\n}\r\n\r\nexport type BaseModuleType<M, Refs, INP> = typeof BaseModule\r\n\r\n/**\r\n * 装饰业务模块\r\n * @param options\r\n */\r\nexport function BizModule<M, Refs, INP>(option?: any): Function {\r\n  return function(Component: BaseModule<M, Refs, INP>) {\r\n    return componentFactory(Component, option)\r\n  }\r\n\r\n  // const option = {\r\n  //     ...createOption,\r\n  //     template: `<webix-ui ref='webixui' :config='viewResolver()'/>`,\r\n  //     ...createMixins<M, Refs, INP>(createOption)\r\n  // }\r\n\r\n  // return VueComponent<BaseModule<M, Refs, INP>>(option)\r\n}\r\n\r\nexport interface BizWatch {\r\n  /**\r\n   * 监听的表达式\r\n   */\r\n  expr: string\r\n\r\n  /**\r\n   * 深度监听\r\n   */\r\n  deep: boolean\r\n\r\n  /**\r\n   * 是否立刻执行\r\n   */\r\n  immediate: boolean\r\n\r\n  /**\r\n   * 执行的方法\r\n   */\r\n  handler: any\r\n}\r\n\r\n/**\r\n * 装饰字段（监听某个属性值变化）\r\n */\r\nexport function Watch(\r\n  propName: string,\r\n  deep: boolean = false,\r\n  immediate: boolean = false\r\n) {\r\n  if (typeof deep === 'undefined') {\r\n    deep = false\r\n  }\r\n  if (typeof immediate === 'undefined') {\r\n    immediate = false\r\n  }\r\n  return function(\r\n    target: any,\r\n    propertyKey: string,\r\n    descriptor: PropertyDescriptor\r\n  ) {\r\n    if (typeof target.watches === 'undefined') {\r\n      target.watches = []\r\n    }\r\n    const watch: BizWatch = {\r\n      expr: propName,\r\n      deep,\r\n      immediate,\r\n      handler: descriptor.value\r\n    }\r\n    target.watches.push(watch)\r\n  }\r\n}\r\n","// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport ts from 'typescript'\r\n\r\n/**\r\n * 导出代码生成器\r\n */\r\nexport function getTS(): typeof ts {\r\n    return ts;\r\n}\r\n\r\n/**\r\n * 导出代码生成器\r\n */\r\nexport function tsCodeGenerate(tsNode: ts.Node): string {\r\n    const resultFile = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        \"\",\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n    const printer = ts.createPrinter({\r\n        newLine: ts.NewLineKind.LineFeed\r\n    });\r\n    const result = printer.printNode(\r\n        ts.EmitHint.Unspecified,\r\n        tsNode,\r\n        resultFile\r\n    );\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * 导出代码AST解析器\r\n */\r\nexport function tsCodeParse(content: string): ts.NodeArray<ts.Statement> {\r\n    const file = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        content,\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n    return file.statements;\r\n}\r\n\r\nexport function getTSDemo2(): any {\r\n    const resultFile = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        contentText,\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n\r\n    return resultFile;\r\n}\r\n\r\nexport function getTSDemo(): string {\r\n\r\n    function makeFactorialFunction() {\r\n\r\n        const functionName = ts.createIdentifier(\"factorial\");\r\n        const paramName = ts.createIdentifier(\"n\");\r\n        const parameter = ts.createParameter(\r\n            /*decorators*/ undefined,\r\n            /*modifiers*/ undefined,\r\n            /*dotDotDotToken*/ undefined,\r\n            paramName\r\n        );\r\n\r\n        const condition = ts.createBinary(\r\n            paramName,\r\n            ts.SyntaxKind.LessThanEqualsToken,\r\n            ts.createLiteral(1)\r\n        );\r\n\r\n        const ifBody = ts.createBlock(\r\n            [ts.createReturn(ts.createLiteral(1))],\r\n            /*multiline*/ true\r\n        );\r\n        const decrementedArg = ts.createBinary(\r\n            paramName,\r\n            ts.SyntaxKind.MinusToken,\r\n            ts.createLiteral(1)\r\n        );\r\n        const recurse = ts.createBinary(\r\n            paramName,\r\n            ts.SyntaxKind.AsteriskToken,\r\n            ts.createCall(functionName, /*typeArgs*/ undefined, [decrementedArg])\r\n        );\r\n        const statements = [\r\n            ts.createEnumDeclaration(\r\n                undefined,\r\n                undefined,\r\n                ts.createIdentifier(\"MyEnum\"),\r\n                [\r\n                    ts.createEnumMember(\r\n                        ts.createIdentifier(\"member\"),\r\n                        undefined\r\n                    ),\r\n                    ts.createEnumMember(\r\n                        ts.createIdentifier(\"user\"),\r\n                        undefined\r\n                    )\r\n                ]\r\n            ),\r\n            ts.createIf(condition, ifBody), ts.createReturn(recurse)\r\n        ];\r\n\r\n        return ts.createFunctionDeclaration(\r\n            /*decorators*/ undefined,\r\n            /*modifiers*/ [ts.createToken(ts.SyntaxKind.ExportKeyword)],\r\n            /*asteriskToken*/ undefined,\r\n            functionName,\r\n            /*typeParameters*/ undefined,\r\n            [parameter],\r\n            /*returnType*/ ts.createKeywordTypeNode(ts.SyntaxKind.NumberKeyword),\r\n            ts.createBlock(statements, /*multiline*/ true)\r\n        );\r\n    }\r\n\r\n    const resultFile = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        \"\",\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n    const printer = ts.createPrinter({\r\n        newLine: ts.NewLineKind.LineFeed\r\n    });\r\n    const result = printer.printNode(\r\n        ts.EmitHint.Unspecified,\r\n        makeFactorialFunction(),\r\n        resultFile\r\n    );\r\n\r\n    return result;\r\n}\r\n\r\nconst contentText = `export type Refs = {\r\n};\r\n\r\nexport default abstract class<M, INP> extends YvanUI.BaseDialog<M, Refs, INP> {\r\n\r\n    main: {\r\n        FADMINID:string,\r\n        FADMINNAME: string,\r\n        FADMINPHONE: string,\r\n        FEMAIL: string\r\n    } = {\r\n        FADMINID:'',\r\n        FADMINNAME: '',\r\n        FADMINPHONE:'',\r\n        FEMAIL:''\r\n    };\r\n\r\n    viewResolver(): any {\r\n        console.log(this, this.inParamter);\r\n\r\n        return {\r\n            title: '联系方式维护',\r\n            modal: true,\r\n            width: 400,\r\n            height: 200,\r\n            body: {\r\n                rows: [\r\n                    {\r\n                        view: 'text',\r\n                        entityName: \"main.FADMINNAME\",\r\n                        label: \"管理员名称\",\r\n                        required: true,\r\n                        width: 320,\r\n                    },\r\n                    {\r\n                        view: 'text',\r\n                        entityName: 'main.FADMINPHONE',\r\n                        label: '管理员联系方式',\r\n                        width: 320,\r\n                        required: true,\r\n                    },\r\n                    {\r\n                        view: 'text',\r\n                        entityName: \"main.FEMAIL\",\r\n                        label: \"联系EMAIL\",\r\n                        width: 320,\r\n                        required: true,\r\n                    },\r\n                    {\r\n                        cols: [\r\n                            {width: 110},\r\n                            {\r\n                                view: \"button\", text: \"确定\", cssType: \"primary\", width: 0,\r\n                                onClick: {\r\n                                    type: 'function',\r\n                                    bind: 'ok'\r\n                                }\r\n                            },\r\n                            {\r\n                                view: \"button\", text: \"取消\", cssType: 'default', width: 0,\r\n                                onClick: {\r\n                                    type: 'function',\r\n                                    bind: 'cancel'\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    }\r\n}`;\r\n","export type GroupType = 'css' | 'data' | 'bind' | 'common'\r\n\r\nexport interface PropertyValue {\r\n  /**\r\n   * 属性名\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * 默认值\r\n   */\r\n  default: any\r\n\r\n  /**\r\n   * 隶属分组\r\n   */\r\n  group: GroupType\r\n\r\n  /**\r\n   * 描述\r\n   */\r\n  desc: string\r\n\r\n  /**\r\n   * 取值范围\r\n   */\r\n  type:\r\n    | 'boolean'\r\n    | 'number'\r\n    | 'string'\r\n    | 'object'\r\n    | 'dataSource'\r\n    | 'valid'\r\n    | Array<string>\r\n}\r\n\r\nexport interface EventValue {\r\n  /**\r\n   * 属性名\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * 描述\r\n   */\r\n  desc: string\r\n}\r\n\r\nexport interface PropertyDescriptionInterface {\r\n  props: PropertyValue[]\r\n  events?: EventValue[]\r\n}\r\n\r\nexport class PropertyDescription {\r\n  propertyes: PropertyDescriptionInterface = {\r\n    props: [],\r\n    events: []\r\n  }\r\n\r\n  constructor(...args: PropertyDescriptionInterface[]) {\r\n    _.each(args, arg => {\r\n      this.merge(arg)\r\n    })\r\n  }\r\n\r\n  merge(pd: PropertyDescriptionInterface) {\r\n    this.propertyes.props = <any>(\r\n      _.uniqBy([...this.propertyes.props, ...pd.props], 'name')\r\n    )\r\n    if (pd.events) {\r\n      if (this.propertyes.events) {\r\n        this.propertyes.events = <any>(\r\n          _.uniqBy([...this.propertyes.events, ...pd.events], 'name')\r\n        )\r\n      } else {\r\n        this.propertyes.events = <any>_.uniqBy([...pd.events], 'name')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据分组名 获取属性定义\r\n   */\r\n  getPropsByGroup(name: GroupType): PropertyValue[] {\r\n    return _.filter(this.propertyes.props, i => i.group === name)\r\n  }\r\n\r\n  /**\r\n   * 获取全部事件\r\n   */\r\n  getEvents(): EventValue[] {\r\n    return this.propertyes.events!\r\n  }\r\n}\r\n","import {\r\n  PropertyDescription,\r\n  PropertyDescriptionInterface\r\n} from './PropertyDescription'\r\n\r\nexport const PropertyDescriptionTable = new Map<String, PropertyDescription>()\r\n\r\nPropertyDescriptionTable.set(\r\n  'layout',\r\n  new PropertyDescription({\r\n    props: [\r\n      {\r\n        name: 'borderless',\r\n        default: true,\r\n        group: 'css',\r\n        desc: '有无边框',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'type',\r\n        default: '',\r\n        group: 'css',\r\n        desc: '布局类型',\r\n        type: ['line', 'clean', 'wide', 'space', 'form']\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nconst YvBase: PropertyDescriptionInterface = {\r\n  props: [\r\n    {\r\n      name: 'entityName',\r\n      default: '',\r\n      group: 'bind',\r\n      desc: '实体类名',\r\n      type: 'string'\r\n    },\r\n    {\r\n      name: 'ctlName',\r\n      default: '',\r\n      group: 'bind',\r\n      desc: '控件名',\r\n      type: 'string'\r\n    },\r\n    {\r\n      name: 'css',\r\n      default: '',\r\n      group: 'css',\r\n      desc: '样式类名',\r\n      type: 'string'\r\n    },\r\n    {\r\n      name: 'attr',\r\n      default: {},\r\n      group: 'css',\r\n      desc: 'HTML属性',\r\n      type: 'object'\r\n    },\r\n    {\r\n      name: 'render',\r\n      default: true,\r\n      group: 'common',\r\n      desc: '是否显示',\r\n      type: 'boolean'\r\n    },\r\n    {\r\n      name: 'padding',\r\n      default: undefined,\r\n      group: 'css',\r\n      desc: '内边距',\r\n      type: 'object'\r\n    },\r\n    {\r\n      name: 'margin',\r\n      default: undefined,\r\n      group: 'css',\r\n      desc: '外边距',\r\n      type: 'object'\r\n    },\r\n    {\r\n      name: 'ff',\r\n      default: 0,\r\n      group: 'common',\r\n      desc: '自动定焦时间',\r\n      type: 'number'\r\n    }\r\n  ],\r\n  events: [{ name: 'onRender', desc: '第一次控件被渲染时触发' }]\r\n}\r\n\r\nconst YvDataSource: PropertyDescriptionInterface = {\r\n  props: [\r\n    {\r\n      name: 'type',\r\n      default: '',\r\n      group: 'data',\r\n      desc: '数据源类型',\r\n      type: 'dataSource'\r\n    }\r\n  ],\r\n  events: [{ name: 'onDataComplete', desc: '数据绑定完成后触发' }]\r\n}\r\n\r\nPropertyDescriptionTable.set(\r\n  'template',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'template',\r\n        default: '',\r\n        group: 'common',\r\n        desc: 'HTML内容',\r\n        type: 'string'\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'text',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'label',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '文本描述',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'labelAlign',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '描述对齐方式',\r\n        type: ['left', 'right', 'center']\r\n      },\r\n      {\r\n        name: 'labelWidth',\r\n        default: undefined,\r\n        group: 'common',\r\n        desc: '文本宽度',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'gravity',\r\n        default: 1,\r\n        group: 'common',\r\n        desc: '占位权重',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'readonly',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '只读',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'disabled',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '禁用',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'required',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '必填',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'value',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '字段值',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'prompt',\r\n        default: '请输入',\r\n        group: 'common',\r\n        desc: '水印',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'validType',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '校验类型',\r\n        type: 'valid'\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'button',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'text',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '按钮标题',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'icon',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '图标样式',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'disabled',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '是否禁用',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'gravity',\r\n        default: 1,\r\n        group: 'css',\r\n        desc: '占位权重',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'tooltip',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '悬停提示',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'cssType',\r\n        default: 'default',\r\n        group: 'css',\r\n        desc: '样式类型',\r\n        type: ['default', 'primary', 'danger', 'success']\r\n      }\r\n    ],\r\n    events: [{ name: 'onClick', desc: '第一次控件被渲染时触发' }]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'label',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'label',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '标签内容',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'align',\r\n        default: 'left',\r\n        group: 'common',\r\n        desc: '对齐方式',\r\n        type: ['left', 'right', 'center']\r\n      },\r\n      {\r\n        name: 'disabled',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '是否禁用',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'width',\r\n        default: 100,\r\n        group: 'css',\r\n        desc: '宽度',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'gravity',\r\n        default: 1,\r\n        group: 'css',\r\n        desc: '占位权重',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'tooltip',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '悬停提示',\r\n        type: 'string'\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'tree',\r\n  new PropertyDescription(YvDataSource, YvBase, {\r\n    props: [\r\n      {\r\n        name: 'showCheckbox',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '显示勾选',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'showLeftIcon',\r\n        default: true,\r\n        group: 'common',\r\n        desc: '显示左侧图标',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'showIcon',\r\n        default: true,\r\n        group: 'common',\r\n        desc: '显示图标',\r\n        type: 'boolean'\r\n      }\r\n    ],\r\n    events: [\r\n      { name: 'onNodeClick', desc: '节点被点击后触发' },\r\n      { name: 'onNodeDblClick', desc: '节点被双击后触发' }\r\n    ]\r\n  })\r\n)\r\n","function userComponentFactory(Component: any, name: string) {\r\n\r\n}\r\n\r\n/**\r\n * 自定义组件\r\n */\r\nexport function UserComponent(name: string): Function {\r\n    return function (Component: any) {\r\n        return userComponentFactory(Component, name);\r\n    };\r\n}\r\n\r\n// 自定义组件\r\nexport abstract class UserComponentBase<T> {\r\n\r\n    /**\r\n     * 执行渲染\r\n     */\r\n    abstract render(parentElement: Element): void;\r\n\r\n}\r\n"],"names":["YvanUI.dbs","YvanUI.complexValid","YvanUI.dict","YvanUI.formatter","formatter","YvDataSource"],"mappings":"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"}