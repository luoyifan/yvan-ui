!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue"),require("webix"),require("ag-grid"),require("axios"),require("qs"),require("typescript")):"function"==typeof define&&define.amd?define(["exports","vue","webix","ag-grid","axios","qs","typescript"],t):t((e=e||self)["yvan-ui"]={},e.Vue,e.webix,e.agGrid,e.axios,e.Qs,e.ts)}(this,(function(exports,Vue,webix,agGrid,axios,Qs,ts){"use strict";Vue=Vue&&Object.prototype.hasOwnProperty.call(Vue,"default")?Vue.default:Vue,webix=webix&&Object.prototype.hasOwnProperty.call(webix,"default")?webix.default:webix,agGrid=agGrid&&Object.prototype.hasOwnProperty.call(agGrid,"default")?agGrid.default:agGrid,axios=axios&&Object.prototype.hasOwnProperty.call(axios,"default")?axios.default:axios,Qs=Qs&&Object.prototype.hasOwnProperty.call(Qs,"default")?Qs.default:Qs,ts=ts&&Object.prototype.hasOwnProperty.call(ts,"default")?ts.default:ts;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function __extends(e,t){function i(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n}function YvEventDispatch(e,t,i,n){if(e){var o=t,r=_.isUndefined(n)?o._webix.$scope:n;if("function"==typeof e)return e.call(r,t,i);if("function"===e.type){var a=_.get(r,e.bind);return"function"!=typeof a?void console.error("模块没有 "+e.bind+" 函数"):a.apply(r,[t,i])}}}var designMode=!1;function initDesign(){designMode=!0}function isDesignMode(){return designMode}var CtlBase=function(){function e(e){this.ff=0,this.vjson=_.cloneDeep(e),e.hasOwnProperty("debugger")}return e.prototype.focus=function(){this._webix&&this._webix.focus()},Object.defineProperty(e.prototype,"loading",{set:function(e){e?(webix.extend(this._webix,webix.OverlayBox),this._webix.showOverlay("Loading...")):this._webix.hideOverlay()},enumerable:!0,configurable:!0}),e.prototype.getModule=function(){return this._module},e.prototype.attachHandle=function(e){this._webix=e,this._module=this._webix.$scope,YvEventDispatch(this.onRender,this,void 0),this.refreshState()},e.prototype.removeHandle=function(){var e=this._webix;e&&(this._webix=void 0,e&&e.destructor(),this.refreshState())},e.prototype.changeToEntity=function(e){this.entityName&&_.set(this._module,this.entityName,e)},e.prototype.refreshState=function(){var e=this;if(!isDesignMode()){if(this._webix)return this.ctlName&&(this._module.refs[this.ctlName]=this),void(this.entityName&&(this._entityWatch=this._module.$watch(this.entityName,(function(t,i){_.set(e,"value",t)}),{immediate:!0})));this.ctlName&&this._module&&delete this._module.refs[this.ctlName],this._entityWatch&&(this._entityWatch(),delete this._entityWatch),delete this._module}},Object.defineProperty(e.prototype,"hidden",{get:function(){return this._webixConfig.hidden},set:function(e){this._webixConfig.hidden=e,this._webix&&(e?this._webix.hide():this._webix.show())},enumerable:!0,configurable:!0}),e}();function parseYvanPropChangeVJson(e,t){var i={};return _.forEach(__spreadArrays(t,["debugger","ctlName","entityName","onRender"]),(function(t){_.has(e,t)&&(i[t]=e[t],delete e[t])})),i}var version="3.0.2",dbs={},formatter={},dict={},validType={},complexValid={};function extend(e){e.ajax&&(exports.ajax=e.ajax),e.serverJsPrefix&&_.extend(window,{_YvanUI_serverJSPrefix:e.serverJsPrefix}),e.dbs&&_.extend(dbs,e.dbs),e.dict&&_.extend(dict,e.dict),e.validType&&_.extend(validType,e.validType),e.formatter&&_.extend(formatter,e.formatter),e.complexValid&&_.extend(complexValid,e.complexValid)}var YvDataSource=function(){function e(e,t,i){this.watches=[],isDesignMode()||(this.ctl=e,this.option=t,this.dataSourceProcess=i,this.module=e._webix.$scope)}return e.prototype.setCustomFunctionMode=function(e){var t=this;this.reload=function(){t.ctl.loading=!0,e.call(t.module,t.ctl,{successCallback:function(e){t.dataSourceProcess?t.ctl.dataReal=t.dataSourceProcess(e):t.ctl.dataReal=e,t.ctl.loading=!1,YvEventDispatch(t.ctl.onDataComplete,t.ctl,void 0)},failCallback:function(){t.ctl.dataReal=[],t.ctl.loading=!1,YvEventDispatch(t.ctl.onDataComplete,t.ctl,void 0)}})},this.reload()},e.prototype.setSqlMode=function(e){var t=this,i=this;this.reload=function(){i.ctl.loading=!0,dbs[e.db].query({params:e.params,needCount:!1,sqlId:e.sqlId}).then((function(e){var n=e.data;e.params;t.dataSourceProcess?i.ctl.dataReal=t.dataSourceProcess(n):i.ctl.dataReal=n,YvEventDispatch(i.ctl.onDataComplete,i.ctl,void 0)})).catch((function(e){i.ctl.dataReal=[]})).finally((function(){i.ctl.loading=!1}))},this.reload()},e.prototype.init=function(){var e=this;if(this.option)if("function"!=typeof this.option){if(_.isArray(this.option))return this.reload=function(){e.ctl.dataReal=e.option,e.ctl.$yvDispatch(e.ctl.onDataComplete)},void this.reload();if(_.each(this.option.watch,(function(t){var i=e.module.$watch(t,(function(){e.reload&&e.reload()}));e.watches.push(i)})),"function"===this.option.type)if("function"==typeof this.option.bind)this.setCustomFunctionMode(this.option.bind);else{var t=_.get(this.module,this.option.bind);if(!t)return void console.error("没有找到名称为 "+this.option.bind+" 的方法");this.setCustomFunctionMode(t)}else"SQL"===this.option.type?this.setSqlMode(this.option):console.error("其他方式没有实现")}else this.setCustomFunctionMode(this.option);else this.reload=void 0},e.prototype.destory=function(){_.each(this.watches,(function(e){e()})),this.reload=void 0,this.ctl.dataReal=[]},e}(),CtlButtonDefault={text:"",icon:"",type:"text",autowidth:!0},CtlDataviewDefault={},CtlTreeDefault={showCheckbox:!1,showLeftIcon:!0,showIcon:!0},CtlCodeMirrorDefault={mode:"sql",indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autofocus:!0,extraKeys:{"Ctrl-Space":"autocomplete"},hintOptions:{tables:{users:["name","score","birthDate"],countries:["name","population","size"]}}},CtlInputDefault={labelWidth:110,labelAlign:"right",prompt:"请输入"},CtlTextDefault=__assign({},CtlInputDefault),CtlNumberDefault=__assign(__assign({},CtlInputDefault),{precision:0}),CtlDateDefault=__assign(__assign({},CtlInputDefault),{prompt:"请选择"}),CtlDateTimeDefault=__assign(__assign({},CtlInputDefault),{prompt:"请选择"}),CtlDateRangeDefault=__assign(__assign({},CtlInputDefault),{separator:" 至 ",prompt:"请选择日期范围"}),CtlDateTimeRangeDefault=__assign(__assign({},CtlInputDefault),{separator:" 至 ",prompt:"请选择时间范围"}),CtlComboDefault=__assign(__assign({},CtlInputDefault),{prompt:"请选择"}),CtlMultiComboDefault=__assign(__assign({},CtlInputDefault),{separator:",",prompt:"请选择"}),CtlSearchDefault=__assign(__assign({},CtlInputDefault),{prompt:"回车键查询"}),CtlCheckboxDefault={labelAlign:"right",checkValue:"T",uncheckValue:"F"},CtlSwitchDefault={labelAlign:"right",checkValue:"T",uncheckValue:"F"},CtlRadioDefault={labelWidth:110,labelAlign:"right"};function getFirstPinyin(e){return _.get(window,"getFirstPinyin")(e)}var CtlTree=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showCheckbox=!1,t.showLeftIcon=!0,t.showIcon=!0,t}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlTreeDefault);var n=parseYvanPropChangeVJson(e,["dataSource","onNodeClick","onNodeDblClick","onDataComplete","showCheckbox","showLeftIcon","showIcon"]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{select:!0,filterMode:{showSubItems:!1},on:{onInited:function(){i.attachHandle(this)},onAfterDelete:function(){i.removeHandle()},onItemClick:function(e){var t=this.getItem(e);YvEventDispatch(i.onNodeClick,i,t)},onItemDblClick:function(e){var t=this.getItem(e);YvEventDispatch(i.onNodeDblClick,i,t)}},template:function(e,t){var n="";return i.showCheckbox&&(n+=t.checkbox(e,t)),i.showIcon&&(n+=t.folder(e,t)),i.showLeftIcon&&(n+=t.icon(e,t)),n+=e.value},type:{folder:function(e){return e.icon?"<span style='padding-left: 5px; padding-right: 5px; color: #5fa2dd; font-size: 16px' class='"+e.icon+"'></span>":""}}}),!1!==e.threeState&&i.showCheckbox?e.threeState=!0:e.threeState=!1,i},t.prototype.filter=function(e){e?this._webix.filter((function(t){var i=t.value;return getFirstPinyin(i).toLowerCase().indexOf(e.toLowerCase())>=0||i.indexOf(e)>=0})):this._webix.filter("")},Object.defineProperty(t.prototype,"value",{get:function(){return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataReal",{set:function(e){this._webix.clearAll(),this._webix.parse(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource=e,this._rebindDataSource()},enumerable:!0,configurable:!0}),t.prototype.reload=function(){this.dataSourceBind&&this.dataSourceBind.reload&&this.dataSourceBind.reload()},t.prototype.getFirstId=function(){return this._webix.getFirstId()},t.prototype.open=function(e){this._webix.open(e)},t.prototype.clear=function(){this._webix.clearAll()},t.prototype.uncheckAll=function(){this._webix.uncheckAll()},t.prototype.getItem=function(e){return this._webix.getItem(e)},t.prototype.getChildItems=function(e){for(var t=[],i=this._webix.getFirstChildId(e);i;)t.push(this._webix.getItem(i)),i=this._webix.getNextSiblingId(i);return t},t.prototype.getChildIds=function(e){for(var t=[],i=this._webix.getFirstChildId(e);i;)t.push(i),i=this._webix.getNextSiblingId(i);return t},t.prototype.getSelectedId=function(){return this._webix.getSelectedId()},t.prototype.getSelectedItem=function(){return this._webix.getSelectedItem()},t.prototype.checkItem=function(e){this._webix.checkItem(e)},t.prototype.select=function(e){for(var t=e;t;)this._webix.open(t),t=this._webix.getParentId(t);this._webix.select(e)},t.prototype.checkItems=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this._webix.checkItem(n)}},t.prototype.uncheckItem=function(e){this._webix.uncheckItem(e)},t.prototype.getCheckedIds=function(){return this._webix.getChecked()},t.prototype.getCheckedItems=function(){var e=this;return _.map(this._webix.getChecked(),(function(t){return e._webix.getItem(t)}))},t.prototype.isChecked=function(e){return this._webix.isChecked(e)},t.prototype.expandAll=function(){this._webix.openAll()},t.prototype.collapseAll=function(){this._webix.closeAll()},t.prototype._rebindDataSource=function(){this.dataSourceBind&&(this.dataSourceBind.destory(),this.dataSourceBind=void 0),this._webix&&this.getModule()&&(this.dataSourceBind=new YvDataSource(this,this.dataSource,this._dataSourceProcess.bind(this)),this.dataSourceBind.init())},t.prototype._dataSourceProcess=function(e){if(!this.dataSource||_.isArray(this.dataSource)||_.isFunction(this.dataSource))return e;if("SQL"!==this.dataSource.type&&"function"!==this.dataSource.type)return e;if(!this.dataSource.parentField||!this.dataSource.displayField||!this.dataSource.valueField)return e;var t=this.dataSource.valueField,i=this.dataSource.displayField,n=this.dataSource.parentField;e=_.cloneDeep(e);for(var o={},r=[],a=0;a<e.length;a++){o[(s=e[a])[t]]={value:s[i],id:s[t],row:s}}for(a=0;a<e.length;a++){var s,l=(s=e[a])[n],c=s[t];if(l&&"0"!==l)if(o.hasOwnProperty(l)){var d=o[l];d.hasOwnProperty("data")?d.data.push(o[c]):d.data=[o[c]]}else r.push(o[c]);else r.push(o[c])}return r},t.prototype.refreshState=function(){e.prototype.refreshState.call(this),this._rebindDataSource()},t}(CtlBase),CtlTreeTable=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showCheckbox=!1,t.showLeftIcon=!0,t.showIcon=!0,t}return __extends(t,e),t.create=function(e){var i=new t(e);e.hasOwnProperty("debugger");var n=parseYvanPropChangeVJson(e,["data","dataSource","onNodeClick","onNodeDblClick","showCheckbox","showLeftIcon","showIcon"]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{on:{onInited:function(){i.attachHandle(this)},onAfterDelete:function(){i.removeHandle()},onItemClick:function(e){var t=this.getItem(e);YvEventDispatch(i.onNodeClick,i,t)},onItemDblClick:function(e){var t=this.getItem(e);YvEventDispatch(i.onNodeDblClick,i,t)}},template:function(e,t){var n="";return i.showCheckbox&&(n+=t.checkbox(e,t)),i.showIcon&&(n+=t.folder(e,t)),i.showLeftIcon&&(n+=t.icon(e,t)),n+=e.value},threeState:i.showCheckbox,type:{folder:function(e){return e.icon?"<span style='padding-left: 5px; padding-right: 5px; color: #063978; font-size: 16px' class='"+e.icon+"'></span>":""}}}),i},Object.defineProperty(t.prototype,"value",{get:function(){return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataReal",{set:function(e){this._webix.clearAll(),this._webix.parse(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource=e,this._rebindDataSource()},enumerable:!0,configurable:!0}),t.prototype.reload=function(){this.dataSourceBind&&this.dataSourceBind.reload&&this.dataSourceBind.reload()},t.prototype.clear=function(){this._webix.clearAll()},t.prototype.uncheckAll=function(){this._webix.uncheckAll()},t.prototype.getItem=function(e){return this._webix.getItem(e)},t.prototype.checkItem=function(e){this._webix.checkItem(e)},t.prototype.select=function(e){this._webix.showItem(e),this._webix.select(e)},t.prototype.checkItems=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this._webix.checkItem(n)}},t.prototype.uncheckItem=function(e){this._webix.uncheckItem(e)},t.prototype.getChecked=function(){return this._webix.getChecked()},t.prototype.isChecked=function(e){return this._webix.isChecked(e)},t.prototype.expandAll=function(){this._webix.openAll()},t.prototype.collapseAll=function(){this._webix.closeAll()},t.prototype._rebindDataSource=function(){this.dataSourceBind&&(this.dataSourceBind.destory(),this.dataSourceBind=void 0),this._webix&&this.getModule()&&(this.dataSourceBind=new YvDataSource(this,this.dataSource),this.dataSourceBind.init())},t.prototype.refreshState=function(){e.prototype.refreshState.call(this),this._rebindDataSource()},t}(CtlBase);function createContextMenu(e,t){var i=new Map;return webix.ui({view:"contextmenu",data:function e(t){var n=new Array;return _.each(t,(function(t){if(t&&("-"!==t&&"-"!==t.text||n.push({$template:"Separator"}),t.text)){var o=_.uniqueId("_cxm_");i.set(o,t.onClick),_.isArray(t.children)?n.push({value:t.text,submenu:e(t.children)}):n.push({value:t.text,id:o})}})),n}(e),on:{onMenuItemClick:function(e){i.has(e)&&YvEventDispatch(i.get(e),this,this.getContext(),this.$scope)}},$scope:t})}var CtlTab=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultTabIndex=0,t._menuConfig=void 0,t}return __extends(t,e),t.create=function(e){var i=new t(e);e.hasOwnProperty("debugger");var n=parseYvanPropChangeVJson(e,["tabbarContextMenu","defaultTabIndex","onTabChanged"]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{on:{onInited:function(){i.attachHandle(this),_.defer((function(){(n.defaultTabIndex>0&&i._webix.getMultiview()._cells[n.defaultTabIndex].show(),i._menuConfig)&&createContextMenu(i._menuConfig,i.getModule()).attachTo(i._webix.getTabbar().$view)}))}},tabbar:{on:{onAfterDelete:function(){i.removeHandle()},onChange:function(e){YvEventDispatch(i.onTabChanged,i,e)}}},multiview:{keepViews:!0}}),i},Object.defineProperty(t.prototype,"tabbarContextMenu",{set:function(e){this._menuConfig=e},enumerable:!0,configurable:!0}),t.prototype.closeAll=function(e){var t=this,i=new Array;_.each(this._webix.getMultiview()._cells,(function(t){_.includes(e,t.config.id)||i.push(t.config.id)})),_.each(i,(function(e){t._webix.removeView(e)}))},t.prototype.addModule=function(e,t,i){var n=i.buildView(),o=this._webix.addView({header:e,close:!0,body:_.merge(n,{id:t,on:{onDestruct:function(){i.$destroy(),delete i._isLoadInvoked},onViewShow:function(){i._isLoadInvoked||(i._webixId=o,i._isLoadInvoked=!0,i.onLoad()),i.onShow()}}})});this._webix.setValue(o),1===this.tabCount&&YvEventDispatch(this.onTabChanged,this,t)},t.prototype.addContent=function(e,t,i,n){if(!this.selectTab(t)){var o=!0;n&&!1===n.close&&(o=!1),wrapperWebixConfig(this.getModule(),i);var r=this._webix.addView({header:e,close:o,body:_.merge(i,{id:t})});this._webix.setValue(r),1===this.tabCount&&YvEventDispatch(this.onTabChanged,this,t)}},Object.defineProperty(t.prototype,"tabCount",{get:function(){return this._webix.getMultiview()._cells.length},enumerable:!0,configurable:!0}),t.prototype.selectTab=function(e){return!!webix.$$(e)&&(webix.$$(e).show(),!0)},t.prototype.tabExsit=function(e){return!!webix.$$(e)},t.prototype.getSelectedTabId=function(){return this._webix.getTabbar().getValue()},t}(CtlBase),CtlDataview=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlDataviewDefault);var n=parseYvanPropChangeVJson(e,["dataSource","onItemSelect","onItemClick","onItemDblClick","onDataComplete"]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{select:!0,on:{onInited:function(){i.attachHandle(this)},onAfterDelete:function(){i.removeHandle()},onItemClick:function(e){var t=this.getItem(e);YvEventDispatch(i.onItemClick,i,t)},onItemDblClick:function(e){var t=this.getItem(e);YvEventDispatch(i.onItemDblClick,i,t)},onAfterSelect:function(e){var t=this.getItem(e);YvEventDispatch(i.onItemSelect,i,t)}}}),i},Object.defineProperty(t.prototype,"value",{get:function(){return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataReal",{set:function(e){this._webix.clearAll(),this._webix.parse(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource=e,this._rebindDataSource()},enumerable:!0,configurable:!0}),t.prototype.reload=function(){this.dataSourceBind&&this.dataSourceBind.reload&&this.dataSourceBind.reload()},t.prototype._rebindDataSource=function(){this.dataSourceBind&&(this.dataSourceBind.destory(),this.dataSourceBind=void 0),this._webix&&this.getModule()&&(this.dataSourceBind=new YvDataSource(this,this.dataSource,this._dataSourceProcess.bind(this)),this.dataSourceBind.init())},t.prototype._dataSourceProcess=function(e){if(!this.dataSource||_.isArray(this.dataSource)||_.isFunction(this.dataSource))return e;if("SQL"!==this.dataSource.type&&"function"!==this.dataSource.type)return e;if(!this.dataSource.idField)return e;var t=this.dataSource.idField;return e=_.cloneDeep(e),_.each(e,(function(e){e.id=e[t]})),e},t.prototype.refreshState=function(){e.prototype.refreshState.call(this),this._rebindDataSource()},t}(CtlBase),CtlECharts=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(_.cloneDeep(e));e.hasOwnProperty("debugger");var n=parseYvanPropChangeVJson(e,[]);return _.assign(i,n),_.forOwn(e,(function(t,i){delete e[i]})),_.merge(e,{view:"grid",template:'<div role="echarts"></div>',on:{onAfterRender:function(){i.attachHandle(this),i._resetECharts()},onDestruct:function(){i._echartsHandler&&(i._echartsHandler.dispose(),delete i._echartsHandler),i.removeHandle()}}}),i.vjson.id&&(e.id=i.vjson.id),i},t.prototype.setOption=function(e,t){var i=this;this._echartsHandler.setOption(e,t),_.defer((function(){i._echartsHandler.resize()}))},Object.defineProperty(t.prototype,"handle",{get:function(){return this._echartsHandler},enumerable:!0,configurable:!0}),t.prototype.resize=function(){this._echartsHandler.resize()},t.prototype.clear=function(){this._echartsHandler.clear()},t.prototype._resetECharts=function(){var e=this,t=$(this._webix._viewobj).find('[role="echarts"]')[0];this._echartsHandler=echarts.init(t),this._echartsHandler.on("click",(function(t){YvEventDispatch(e.onClick,e,t)}))},t}(CtlBase),CtlButton=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._text="",t._icon="",t}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlButtonDefault);var n=parseYvanPropChangeVJson(e,["onClick","cssType","icon","width","badge","text"]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{type:"text",on:{onInited:function(){i.attachHandle(this)},onDestruct:function(){i.removeHandle()},onItemClick:function(){isDesignMode()||YvEventDispatch(i.onClick,i,void 0)}}}),i},Object.defineProperty(t.prototype,"badge",{set:function(e){this._webix?(this._webix.define("badge",e),this._webix.render()):e?this._webixConfig.badge=e:delete this._webixConfig.css},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{set:function(e){this._webix?(this._webix.define("width",e),this._webix.resize()):e?this._webixConfig.width=e:delete this._webixConfig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssType",{set:function(e){var t=e;switch(e){case"success":t="yvan_success";break;case"danger":t="yvan_danger";break;case"primary":t="yvan_primary";break;case"default":t=""}this._webix?($(this._webix.$view).removeClass("webix_danger webix_primary"),this._webix.define("css",t)):t?this._webixConfig.css=t:delete this._webixConfig.css},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e,this._refreshText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this._refreshText()},enumerable:!0,configurable:!0}),t.prototype._refreshText=function(){var e='<i class="'+this._icon+'"></i><span>'+this._text+"</span>";this._webix?this._webix.setValue(e):this._webixConfig.value=e},t}(CtlBase),CtlInput=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeValueImplete=!1,t._gravity="",t.ff=0,t.maxlength=void 0,t._validateResult=!0,t}return __extends(t,e),t.prototype._create=function(e,t){var i=t,n=parseYvanPropChangeVJson(e,["id","gravity","validate","onInput","onKeydown","onClick","onEnter","width","onFocus","onChange","onBlur","maxlength","changeValueImplete","ff","label","labelWidth","labelAlign","readonly","disabled","required","value","prompt"]);function o(e){YvEventDispatch(i.onKeydown,i,e)}i._webixConfig=e,e.id||(i.id=_.uniqueId("input_")),_.assign(i,n),_.merge(e,i._webixConfig,{on:{onInited:function(){i.attachHandle(this)},onAfterRender:function(){var e=$(this.$view).find("input");e.on("input",i.onInputEvent.bind(i)),e.on("keydown",o),"CtlSelect"!==i.constructor.name&&i._webixConfig.required&&("CtlDateRangePicker"===i.constructor.name?i._showValidate(!this.getValue().end||this.getValue().end.length<=0,"requiredValidate"):i._showValidate(!this.getValue()||this.getValue().length<=0,"requiredValidate")),this.callEvent("onCtlRender",[]),i.ff>0&&setTimeout((function(){i.focus(),i.ff=0}),i.ff)},onDestruct:function(){this.callEvent("onCtlRemove",[]);var e=$(this.$view).find("input");e.off("input"),e.off("keydown"),i.removeHandle()},onItemClick:function(){YvEventDispatch(i.onClick,i,void 0)},onEnter:function(){YvEventDispatch(i.onEnter,i,void 0)},onFocus:function(){YvEventDispatch(i.onFocus,i,void 0)},onChange:function(e,t){i.valueValid(e)&&(i.onValueChange&&"function"==typeof i.onValueChange&&i.onValueChange(e,t),e=i.valueProcess(e),i.changeToEntity(e),i._webixConfig.required&&("CtlDateRangePicker"===i.constructor.name?i._showValidate(!this.getValue().end||this.getValue().end.length<=0,"requiredValidate"):i._showValidate(!this.getValue()||this.getValue().length<=0,"requiredValidate")),YvEventDispatch(i.onChange,i,e))},onBlur:function(){i._webixConfig.required&&("CtlDateRangePicker"===i.constructor.name?i._showValidate(!this.getValue().end||this.getValue().end.length<=0,"requiredValidate"):i._showValidate(!this.getValue()||this.getValue().length<=0,"requiredValidate")),YvEventDispatch(i.onBlur,i,void 0)}}})},t.prototype.valueValid=function(e){return!0},t.prototype.valueProcess=function(e){return e},t.prototype.onInputEvent=function(e){this.onInputValue&&"function"==typeof this.onInputValue&&this.onInputValue(e.target.value),"CtlText"===this.constructor.name&&this.maxlength&&_.size(e.target.value)>this.maxlength&&(e.target.value=e.target.value.substring(0,this.maxlength)),this.changeValueImplete&&(this.value=e.target.value),YvEventDispatch(this.onInput,this,e)},Object.defineProperty(t.prototype,"gravity",{get:function(){return this._gravity},set:function(e){var t;this._gravity=e,t=e?_.parseInt(e):void 0,this._webix?(this._webix.define("gravity",t),this._webix.resize()):t?this._webixConfig.gravity=t:delete this._webixConfig.gravity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._webix?console.error('can\'t set "ID" at runtime!'):this._webixConfig.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){if(!this._validateResult)throw new Error("invalidate!");return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{set:function(e){this._webix?(this._webix.define("label",e),this._webix.refresh()):this._webixConfig.label=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAlign",{set:function(e){this._webix?(this._webix.define("labelAlign",e),this._webix.refresh()):this._webixConfig.labelAlign=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{set:function(e){this._webix?(this._webixConfig.required=e,this._webix.define("required",e),this._webix.refresh()):this._webixConfig.required=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelWidth",{set:function(e){this._webix?(this._webix.define("labelWidth",e),this._webix.refresh()):this._webixConfig.labelWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{set:function(e){this._webix?e?this._webix.disable():this._webix.enable():this._webixConfig.disabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{set:function(e){this._webix?(this._webix.define("readonly",e),this._webix.refresh()):this._webixConfig.readonly=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prompt",{set:function(e){this._webix?(this._webix.define("placeholder",e),this._webix.refresh()):this._webixConfig.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{set:function(e){"auto"!==e&&void 0!==e||(e=void 0),this._webix?(this._webix.define("width",e),this._webix.refresh()):this._webixConfig.width=e},enumerable:!0,configurable:!0}),t.prototype.onValueChange=function(e,t){},t.prototype.onInputValue=function(e){this.validate&&"function"==typeof this.validate&&(this._validateResult=this.validate(e))},Object.defineProperty(t.prototype,"validate",{get:function(){return this._validate},set:function(e){var t=this;if("function"==typeof e)this._validate=e;else if("string"==typeof e){this._validate=function(i,n){var o=complexValid.fun(e,i);return t._showValidate(o,"inputValidate")}}},enumerable:!0,configurable:!0}),t.prototype._showValidate=function(e,t){var i;if("CtlText"===this.constructor.name||"CtlSearch"===this.constructor.name||"CtlCombo"===this.constructor.name)i=$(this._webix.$view).find("input");else if("CtlDatePicker"===this.constructor.name||"CtlDateRangePicker"===this.constructor.name||"CtlMultiCombo"===this.constructor.name||"CtlMultiSelect"===this.constructor.name)i=$(this._webix.$view).find("div.webix_inp_static");else{if("CtlSelect"!==this.constructor.name)return!0;i=$(this._webix.$view).find("select")}switch(t){case"inputValidate":case"changedValidate":return e?(i.each((function(e,t){$(t).css({"background-color":"#ffdedb","border-color":"#ff8d82"})})),$("#"+this.id+"_validate").remove(),$(this._webix.$view).append('<div id="'+this.id+'_validate" style="position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;">'+e+"</div>"),!1):(i.each((function(e,t){$(t).css({"background-color":"","border-color":""})})),$("#"+this.id+"_validate").remove(),!0);case"requiredValidate":return e?(i.each((function(e,t){$(t).css({"border-color":"#ff8d82"})})),!1):(i.each((function(e,t){$(t).css({"border-color":""})})),!0)}},t}(CtlBase),CtlText=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlTextDefault),i._create(e,i);var n=parseYvanPropChangeVJson(e,["validate"]);return _.assign(i,n),_.merge(e,i._webixConfig),i},Object.defineProperty(t.prototype,"validate",{set:function(e){var t=this;if("function"==typeof e)this._validate=e;else if("string"==typeof e){this._validate=function(i,n){var o=complexValid.fun(e,i),r=$(t._webix.$view).find("input");return o?(r.each((function(e,t){$(t).css({"background-color":"#ffdedb","border-color":"#ff8d82"})})),$("#"+t.id+"_validate").remove(),$(t._webix.$view).append('<div id="'+t.id+'_validate" style="position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;">'+o+"</div>"),!1):(r.each((function(e,t){$(t).css({"background-color":"","border-color":""})})),$("#"+t.id+"_validate").remove(),!0)}}},enumerable:!0,configurable:!0}),t}(CtlInput),CtlCheckBox=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelAtRight=!0,t._label="",t}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlCheckboxDefault),i._create(e,i);var n=parseYvanPropChangeVJson(e,["labelAtRight","value"]);return _.assign(i,n),_.merge(e,i._webixConfig,{view:"checkbox",on:{}}),i},Object.defineProperty(t.prototype,"labelAtRight",{get:function(){return this._labelAtRight},set:function(e){this._labelAtRight=e,this._refreshLabel()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this._refreshLabel()},enumerable:!0,configurable:!0}),t.prototype._refreshLabel=function(){var e=this._label;this._webix?(this._labelAtRight?this._webix.define({label:"",labelRight:e}):this._webix.define({label:e,labelRight:""}),this._webix.refresh()):this._labelAtRight?(this._webixConfig.label="",this._webixConfig.labelRight=e,this._webixConfig.labelWidth=0):(this._webixConfig.label=e,this._webixConfig.labelRight="")},t.prototype.toggle=function(){this._webix.toggle()},Object.defineProperty(t.prototype,"value",{get:function(){return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){this._webix?this._webix.setValueHere(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),t}(CtlInput),CtlCombo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlComboDefault),i._create(e,i);var n=parseYvanPropChangeVJson(e,["options","dataSource"]);return _.assign(i,n),_.merge(e,i._webixConfig),i},Object.defineProperty(t.prototype,"options",{set:function(e){var t={filter:function(e,t){return _.size(t)<=0||(getFirstPinyin(e.text).toLowerCase().indexOf(t.toLowerCase())>=0||e.text.indexOf(t)>=0)},body:{template:"#text#",type:{height:36},data:e}};this._webix?(this._webix.define("options",t),this._webix.refresh()):_.merge(this._webixConfig,{view:"combo",options:t})},enumerable:!0,configurable:!0}),t.prototype.getText=function(){return this._webix.getText()},Object.defineProperty(t.prototype,"dataReal",{set:function(e){this.options=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource=e,this._rebindDataSource()},enumerable:!0,configurable:!0}),t.prototype.reload=function(){this.dataSourceBind&&this.dataSourceBind.reload&&this.dataSourceBind.reload()},t.prototype._rebindDataSource=function(){this.dataSourceBind&&(this.dataSourceBind.destory(),this.dataSourceBind=void 0),this._webix&&this.getModule()&&(this.dataSourceBind=new YvDataSource(this,this.dataSource,this._dataSourceProcess.bind(this)),this.dataSourceBind.init())},t.prototype._dataSourceProcess=function(e){if(!this.dataSource||_.isArray(this.dataSource)||_.isFunction(this.dataSource))return e;if("SQL"!==this.dataSource.type)return e;var t=this.dataSource.displayField||"text",i=this.dataSource.valueField||"id";return _.map(e,(function(e){return{id:e[i],text:e[t]}}))},t.prototype.refreshState=function(){e.prototype.refreshState.call(this),this._rebindDataSource()},t}(CtlInput),CtlDatePicker=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e),n={};"datetime"===e.view?(n.format="%Y-%m-%d %H:%i:%s",n.timepicker=!0,_.defaultsDeep(e,CtlDateTimeDefault)):(n.format="%Y-%m-%d",n.timepicker=!1,_.defaultsDeep(e,CtlDateDefault)),i._create(e,i);var o=parseYvanPropChangeVJson(e,[]);return _.assign(i,o),_.merge(e,i._webixConfig,__assign(__assign({editable:!0,stringResult:!0,view:"datepicker"},n),{on:{}})),i},Object.defineProperty(t.prototype,"value",{get:function(){var e=this._webix?this._webix.getValue():this._webixConfig.value;return"datetime"===this.vjson.view?_.toString(e).substr(0,19):_.toString(e).substr(0,10)},set:function(e){this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),t.prototype.valueProcess=function(e){var t=_.get(window,"moment");return _.isDate(e)?(e=t(e),e="datetime"===this.vjson.view?e.isValid()?e.format("YYYY-MM-DD HH:mm:ss"):"":e.isValid()?e.format("YYYY-MM-DD"):""):e},t}(CtlInput),CtlDateRangePicker=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.entityNameStart="",t.entityNameEnd="",t}return __extends(t,e),t.create=function(e){var i=new t(e),n={};"datetimerange"===e.view?(n.format="%Y-%m-%d %H:%i:%s",n.timepicker=!0,_.defaultsDeep(e,CtlDateTimeRangeDefault)):(n.format="%Y-%m-%d",n.timepicker=!1,_.defaultsDeep(e,CtlDateRangeDefault)),i._create(e,i);var o=parseYvanPropChangeVJson(e,["value","separator","entityNameStart","entityNameEnd"]);return _.assign(i,o),_.merge(e,i._webixConfig,__assign(__assign({editable:!0,stringResult:!0,view:"daterangepicker"},n),{on:{}})),i},Object.defineProperty(t.prototype,"separator",{get:function(){return this._webix?this._webix.config.separator:this._webixConfig.separator},set:function(e){this._webix?this._webix.define("separator",e):this._webixConfig.separator=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var e=this._webix?this._webix.getValue():this._webixConfig.value;if(!e)return"";var t=e.start,i=e.end;return t+this.separator+i},set:function(e){if(this._webix){var t=e;if("string"==typeof e){var i=e.split(this.separator);t={start:o=i[0],end:r=i[1]}}this._webix.setValue(t)}else if("string"==typeof e){var n=e.split(this.separator),o=n[0],r=n[1];this._webixConfig.value={start:o,end:r}}else this._webixConfig.value=e},enumerable:!0,configurable:!0}),t.prototype.valueValid=function(e){var t=_.get(window,"moment");if(_.isPlainObject(e)){var i=e.start,n=e.end;if(!t(i).isValid()||!t(n).isValid())return!1}return!0},t.prototype.valueProcess=function(e){var t=_.get(window,"moment");if(_.isPlainObject(e)){var i=e.start,n=e.end;return i=t(i),n=t(n),"datetimerange"===this.vjson.view?(i=i.isValid()?i.format("YYYY-MM-DD HH:mm:ss"):"",n=n.isValid()?n.format("YYYY-MM-DD HH:mm:ss"):""):(i=i.isValid()?i.format("YYYY-MM-DD"):"",n=n.isValid()?n.format("YYYY-MM-DD"):""),this.entityNameStart&&_.set(this._module,this.entityNameStart,i),this.entityNameEnd&&_.set(this._module,this.entityNameEnd,n),i+this.separator+n}return e},t}(CtlInput),CtlForm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);e.hasOwnProperty("debugger");var n=parseYvanPropChangeVJson(e,[]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{on:{onInited:function(){i.attachHandle(this)},onAfterLoad:function(){i.attachHandle(this)},onBeforeLoad:function(){i.attachHandle(this)},onChange:function(){i.attachHandle(this)},onViewShow:function(){i.attachHandle(this)},onDestruct:function(){i.removeHandle()}}}),i},t.prototype.setValues=function(e){this._webix.setValues(e)},t}(CtlBase),CtlMultiCombo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlMultiComboDefault),i._create(e,i);var n=parseYvanPropChangeVJson(e,["options"]);return _.assign(i,n),_.merge(e,i._webixConfig),i},Object.defineProperty(t.prototype,"options",{set:function(e){var t={filter:function(e,t){return _.size(t)<=0||(getFirstPinyin(e.text).toLowerCase().indexOf(t.toLowerCase())>=0||e.text.indexOf(t)>=0)},body:{template:"#text#",type:{height:36},data:e}};this._webix?(this._webix.define("options",t),this._webix.refresh()):_.merge(this._webixConfig,{view:"multicombo",options:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataReal",{set:function(e){this.options=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"separator",{get:function(){return this._webix?this._webix.config.separator:this._webixConfig.separator},set:function(e){this._webix?this._webix.define("separator",e):this._webixConfig.separator=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._webix.getValue()},set:function(e){this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),t}(CtlInput),CtlSearch=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.valueOrigin=void 0,t.suppressRestore=!1,t}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlSearchDefault),i._create(e,i);var n=parseYvanPropChangeVJson(e,["widget","value"]);return i._webixConfig=e,e.id||(i.id=_.uniqueId("input_")),_.assign(i,n),_.merge(e,i._webixConfig,{on:{onInited:function(){i.attachHandle(this),i._refreshIcon()},onEnter:function(){i.suppressRestore=!0,i._searchRequest(i._webix.getValue(),i.valueOrigin)},onFocus:function(){i.valueOrigin=i._webix.getValue(),YvEventDispatch(i.onFocus,i,void 0)},onBlur:function(){i.suppressRestore||i._webix.setValue(i.valueOrigin),YvEventDispatch(i.onBlur,i,void 0)},onSearchIconClick:function(e){e.stopPropagation(),e.preventDefault(),$(e.target).hasClass("wxi-close")?i.clear():(i.suppressRestore=!0,i._searchRequest(i._webix.getValue(),i.valueOrigin))}}}),i},t.prototype.clear=function(){var e=this;this.widget&&(YvEventDispatch(this.widget.onClear,this,void 0),_.forOwn(this.widget.bind,(function(t,i){_.set(e._module,i,"")})))},Object.defineProperty(t.prototype,"value",{get:function(){return this._webix?this.valueOrigin:this._webixConfig.value},set:function(e){this._webix?(this._webix.setValue(e),this.valueOrigin=e):this._webixConfig.value=e,YvEventDispatch(this.onChange,this,e),this._refreshIcon()},enumerable:!0,configurable:!0}),t.prototype._refreshIcon=function(){var e=(this._webix?this._webix.getValue():this._webixConfig.value)?"wxi-close":"wxi-search",t=this._webix?$(this._webix.$view).find("span"):void 0;!t||t.length<=0?this._webix?this._webix.define("icon",e):this._webixConfig.icon=e:t.removeClass("wxi-close").removeClass("wxi-search").addClass(e)},t.prototype._searchRequest=function(e,t){var i=this;e=_.toString(e);var n=this;if(n.widget){var o={query:e,params:n.widget.params},r={};_.forOwn(n.widget.bind,(function(e,t){_.set(r,e,_.get(i._module,t))})),o.existObject=r,o.onWidgetConfirm=function(e){n.widget?(YvEventDispatch(n.widget.onConfirm,n,void 0),_.forOwn(n.widget.bind,(function(t,i){_.set(n._module,i,_.get(e,t))})),this.closeDialog(),n.focus()):console.error("没有设置 widget 属性")},o.onClose=function(){n.value=t,n.suppressRestore=!1,n.focus()},(new n.widget.content).showDialog(o,n._module,!0)}else console.error("没有设置 widget 属性")},t}(CtlInput),CtlCarousel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e),n=parseYvanPropChangeVJson(e,["onShow"]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{on:{onInited:function(){i.attachHandle(this)},onDestruct:function(){i.removeHandle()},onShow:function(){var e=this.getActiveIndex();YvEventDispatch(i.onShow,i,e)}}}),i},t}(CtlBase),CtlGridLocale={rownumber:" ",page:"页",more:"更多",to:"到",of:"of",next:"下一页",last:"上一页",first:"首页",previous:"上一页",loadingOoo:"加载中...",selectAll:"查询全部",searchOoo:"查询...",blanks:"空白",filterOoo:"过滤...",applyFilter:"确定",clearFilter:"清空",equals:"相等",notEqual:"不相等",lessThan:"小于",greaterThan:"大于",lessThanOrEqual:"小于等于",greaterThanOrEqual:"大于等于",inRange:"范围查询",contains:"包含",notContains:"不包含",startsWith:"开始于",endsWith:"结束于",group:"组",columns:"列",filters:"筛选",rowGroupColumns:"laPivot Cols",rowGroupColumnsEmptyMessage:"la drag cols to group",valueColumns:"laValue Cols",pivotMode:"laPivot-Mode",groups:"laGroups",values:"值",pivots:"laPivots",valueColumnsEmptyMessage:"la drag cols to aggregate",pivotColumnsEmptyMessage:"la drag here to pivot",toolPanelButton:"la tool panel",noRowsToShow:"数据为空",pinColumn:"laPin Column",valueAggregation:"laValue Agg",autosizeThiscolumn:"laAutosize Diz",autosizeAllColumns:"laAutsoie em All",groupBy:"排序",ungroupBy:"不排序",resetColumns:"重置列",expandAll:"展开全部",collapseAll:"关闭",toolPanel:"工具面板",export:"导出",csvExport:"导出为CSV格式文件",excelExport:"导出到Excel",pinLeft:"laPin &lt;&lt;",pinRight:"laPin &gt;&gt;",noPin:"laDontPin &lt;&gt;",sum:"总数",min:"最小值",max:"最大值",none:"无",count:"总",average:"平均值",copy:"复制",copyWithHeaders:"携带表头复制",ctrlC:"ctrl + C",paste:"粘贴",ctrlV:"ctrl + V"},CtlGridPage=function(){function e(e){this._currentPage=1,this._pageSize=100,this._pageCount=0,this._itemCount=0,this.grid=e,this._pageSize=this.grid.pageSize;var t=this.grid.webix.$view.getElementsByClassName("ag-paging-panel ag-unselectable"),i=this.grid.webix.config.id;if(!(t.length<=0)){t[0].className="ag-paging-panel ag-unselectable",t[0].innerHTML='<div id="wwww" role="group">    <table class="ui-pg-table" style="width:100%;table-layout:fixed;height:100%;">        <tbody><tr>            <td id="gridpager_left_'+i+'" style="display: none"></td>            <td id="gridpager_center_'+i+'">                <table style="table-layout:auto;white-space: pre;margin-left:0;margin-right:auto;">                    <tbody><tr>                        <td role="button" tabindex="0" class="ctl-grid-page ui-pg-button" title="First Page" style="cursor: default;"><span id="first_'+i+'" class="ctl-grid-page ui-icon fa fa-angle-double-left"></span></td>                        <td role="button" tabindex="0" class="ctl-grid-page ui-pg-button" title="Previous Page" style="cursor: default;"><span id="prev_'+i+'" class="ctl-grid-page ui-icon fa fa-angle-left"></span></td>                        <td><span style="color: #c0c0c0">|</span></td>\n                        <td dir="ltr"><input aria-label="Page No." id="currenpage_'+i+'" type="text" size="2" maxlength="7" value="0"> 共 <span id="gridpager_'+i+'">219</span> 页 </td>                        <td><span style="color: #c0c0c0">|</span></td>\n                        <td role="button" tabindex="0" class="ctl-grid-page ui-pg-button" title="Next Page" style="cursor: default;"><span id="next_'+i+'" class="ctl-grid-page ui-icon fa fa-angle-right"></span></td>                        <td role="button" tabindex="0" class="ctl-grid-page ui-pg-button" title="Last Page" style="cursor: default;"><span id="last_'+i+'" class="ctl-grid-page ui-icon fa fa-angle-double-right"></span></td>                        <td dir="ltr"><select id="pagesize_'+i+'" title="Records per Page"><option value="20" selected="selected">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option><option value="500">500</option><option value="1000">1000</option></select></td>                    </tr></tbody>                </table>            </td>            <td id="gridpager_right_'+i+'" style="text-align:right;">               <span dir="ltr" style="text-align:right" id="itemcount_'+i+'">41 - 60　共 4,367 条</span>            </td>        </tr></tbody>    </table></div>',this.firstButtomDom=document.getElementById("first_"+i),this.prevButtomDom=document.getElementById("prev_"+i),this.nextButtomDom=document.getElementById("next_"+i),this.lastButtomDom=document.getElementById("last_"+i),this.currenpageDom=document.getElementById("currenpage_"+i),this.gridpagerDom=document.getElementById("gridpager_"+i),this.itemcountDom=document.getElementById("itemcount_"+i),this.pageSizeDom=document.getElementById("pagesize_"+i),this.gridpagerCenter=document.getElementById("gridpager_center_"+i),this.gridpagerLeft=document.getElementById("gridpager_left_"+i),this.gridpagerRight=document.getElementById("gridpager_right_"+i),this.grid.pagination?this.gridpagerCenter.style.display="":this.gridpagerCenter.style.display="none",this.refreshPageViewInfo();var n=this;this.currenpageDom.onkeydown=function(e){if(13===e.keyCode){var t=parseInt(e.srcElement.value);t>n.pageCount&&(t=n.pageCount),t<=0&&(t=1),n.getPageData(t,n.pageSize)}else if(8!==e.keyCode&&(e.keyCode<48||e.keyCode>57))return!1},this.pageSizeDom.onchange=function(e){n.pageSize=e.srcElement.value,n.grid.paginationSetPageSize(n.pageSize),"function"==typeof n.getPageData&&n.getPageData(1,n.pageSize)};var o=t[0].getElementsByClassName("ctl-grid-page ui-icon"),r=t[0].getElementsByClassName("ctl-grid-page ui-icon-disable");o=_.union(o,r),_.each(o,(function(e){e.onclick=function(e){for(var t=0;t<e.srcElement.classList.length;t++)if("ui-icon-disable"===e.srcElement.classList[t])return;var i=_.split(e.srcElement.id,"_"+n.grid.webix.config.id),o=n.currentPage;switch(i[0]){case"first":o=1;break;case"prev":o>1&&(o-=1);break;case"next":o<n.pageCount&&(o+=1);break;case"last":o=n.pageCount,n.disableButton(e.srcElement)}"function"==typeof n.getPageData&&n.getPageData(o,n.pageSize)}}))}}return Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage},set:function(e){this._currentPage=e,this._currentPage>this._pageCount&&(this._currentPage=this._pageCount),this._currentPage<=0&&this._pageCount>0&&(this._currentPage=1),this.refreshPageViewInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSize",{get:function(){return this._pageSize},set:function(e){e<=0||(this._pageSize=e,this.refreshPageViewInfo())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCount",{get:function(){return this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._itemCount},set:function(e){this._itemCount=e,this.refreshPageViewInfo()},enumerable:!0,configurable:!0}),e.prototype.refreshGrid=function(){this.getPageData(1,this.pageSize)},e.prototype.disableButton=function(e){e.className.includes("ui-icon-disable")||(e.className=_.replace(e.className,"ui-icon","ui-icon-disable"))},e.prototype.activeButton=function(e){!e.className.includes("ui-icon-disable")&&e.className.includes("ui-icon")||(e.className=_.replace(e.className,"ui-icon-disable","ui-icon"))},e.prototype.refreshPageViewInfo=function(){if(this.grid.pagination){if(this._itemCount>0&&this._pageSize>0&&(this._pageCount=Math.ceil(this._itemCount/this._pageSize)),this.pageSizeDom.value=this._pageSize,this.currenpageDom.value=this._currentPage,this.gridpagerDom.innerText=this._pageCount,this.currentPage<=0)this.itemcountDom.innerText="0 - 0　共 0 条";else{var e=(this.currentPage-1)*this.pageSize+1,t=this.currentPage*this.pageSize;e>this._itemCount&&(e=this._itemCount),t>this._itemCount&&(t=this._itemCount),this.itemcountDom.innerText=e+" - "+t+"  共 "+this.itemCount+" 条"}this.currentPage>1?(this.activeButton(this.firstButtomDom),this.activeButton(this.prevButtomDom)):(this.disableButton(this.firstButtomDom),this.disableButton(this.prevButtomDom)),this.currentPage<this.pageCount?(this.activeButton(this.nextButtomDom),this.activeButton(this.lastButtomDom)):(this.disableButton(this.nextButtomDom),this.disableButton(this.lastButtomDom))}else this.itemcountDom.innerText="共 "+this.itemCount+" 条"},e}();function CtlGridIdRender(e,t){if(e.node.cstate){if("validate"===e.node.cstate||"pending"===e.node.cstate)return'<i class="fa fa-spinner fa-spin"></i>';if("editing"===e.node.cstate)return'<i class="fa fa-edit"></i>';if("ok"===e.node.cstate)return'<i class="fa fa-check" style="color: green;"></i>';if("error"===e.node.cstate)return'<i class="fa fa-exclamation-circle" style="color: red;"></i>'}return"top"===e.node.rowPinned?"+":_.size(e.data)<=0?'<i class="fa fa-spinner fa-spin"></i>':t&&t.pagination&&t.gridPage?1+e.node.rowIndex+t.gridPage.pageSize*(t.gridPage.currentPage-1):1+e.node.rowIndex}var YvGridProp={editable:!1,checkbox:!1,editSingleClick:!0,allowNewRow:!0,filterable:!0,loading:!1,showRowNumber:!0,autoSizeColumns:!1,allowCellSelection:!1,allowRowSelection:!0,idField:void 0,valueSep:!0,saveOn:"rowChanged",newRowData:void 0,stopEditingWhenGridLosesFocus:!1,columns:[],columnGroup:[],data:void 0},YvGridColumnProp={hidden:!1,field:"",title:"",width:void 0,maxwidth:800,minwidth:0,sortable:!1,resizable:!0,editable:!1,filterable:!1,calcExpr:void 0,editMode:"text"},YvGridColumnEditProp={widget:void 0,bind:[],on:!0,off:!1,precision:0,idField:"id",textField:"text",maxlength:void 0,dateformat:"yyyy-MM-dd",datetimeformat:"yyyy-MM-dd HH:mm:ss",data:[]},CtlGridCellCheckbox=function(){function e(){}return e.prototype.checkedToggle=function(e,t,i){return function(){if(t.classList.contains("checked")){var n=e.checkedIds.indexOf(i);n>=0&&e.checkedIds.splice(n,1),t.classList.remove("checked")}else e.checkedIds.push(i),t.classList.add("checked");e.allCheckedBoxStateChanged&&e.allCheckedBoxStateChanged()}},e.prototype.innerRefresh=function(e){var t=e.api.vue,i=e.data,n=t._getIdByRow(i),o=this.$el.querySelectorAll(".yvan-checkbox-switch")[0];o&&(e.isCheckedIds?(t.checkedIds.indexOf(n)>=0?o.classList.add("checked"):o.classList.remove("checked"),t.allCheckedBoxStateChanged&&t.allCheckedBoxStateChanged()):(o.classList.add("disabled"),"string"==typeof e.on?e.on===""+e.value&&o.classList.add("checked"):"function"==typeof e.on&&e.on.call(t,e.value,i)&&o.classList.add("checked")))},e.prototype.init=function(e){if(this.$el=document.createElement("div"),!e.node.rowPinned){this.$el.classList.add("yvan-checkbox"),this.$el.innerHTML='<span class="yvan-checkbox-switch"><span class="yvan-checkbox-status"></span></span>',this.innerRefresh(e);var t=e.api.vue,i=this.$el.querySelectorAll(".yvan-checkbox-switch")[0],n=e.data,o=t._getIdByRow(n);this.$el.addEventListener("click",this.checkedToggle(t,i,o))}},e.prototype.getGui=function(){return this.$el},e.prototype.destroy=function(){},e.prototype.refresh=function(e){this.innerRefresh(e)},e}(),CtlGridHeadCheckbox=function(){function e(){}return e.prototype.checkedToggle=function(e,t){var i=this;return function(){if(e.idField){var t=$(i.$el).find(".yvan-checkbox-switch").is(".checked"),n=_.map(e.getData(),(function(t){return _.get(t,e.idField)}));if(t)for(var o=0;o<n.length;o++){var r=n[o],a=e.checkedIds.indexOf(r);a>=0&&e.checkedIds.splice(a,1)}else for(o=0;o<n.length;o++){r=n[o];_.includes(e.checkedIds,r)||e.checkedIds.push(r)}e.gridApi.refreshCells({columns:["__CB__"],force:!0})}}},e.prototype.innerRefresh=function(e){var t=e.api.vue,i=$(this.$el).find(".yvan-checkbox-switch");t.idField&&(t.allCheckedBoxStateChanged=function(){for(var e=_.map(t.getData(),(function(e){return _.get(e,t.idField)})),n=!0,o=0;o<e.length;o++){var r=e[o];if(!_.includes(t.checkedIds,r)){n=!1;break}}i.is(".checked")?n||i.removeClass("checked"):n&&i.addClass("checked")})},e.prototype.init=function(e){var t=this;this.$el=document.createElement("div"),this.$el.classList.add("yvan-checkbox"),this.$el.innerHTML='<span class="yvan-checkbox-switch"><span class="yvan-checkbox-status"></span></span>',_.defer((function(){var i=e.api.vue;t.$el.addEventListener("click",t.checkedToggle(i,e)),t.innerRefresh(e)}))},e.prototype.getGui=function(){return this.$el},e.prototype.destroy=function(){},e.prototype.refresh=function(e){this.innerRefresh(e)},e}(),YvanDataSourceGrid=function(){function e(e,t){var i=this;if(this.watches=[],this.isFirstAutoLoad=!0,this.serverQuery=_.debounce((function(e,t,n){var o=i;o.ctl.loading=!0;var r=!1;void 0===o.rowCount?(r=!0,o.lastFilterModel=_.cloneDeep(n.filterModel)):_.isEqual(o.lastFilterModel,n.filterModel)||(r=!0,o.lastFilterModel=_.cloneDeep(n.filterModel));var a=__assign({},"function"==typeof t?t():void 0);dbs[e.db].query({params:a,limit:n.startRow,limitOffset:n.endRow-n.startRow,needCount:r,orderByModel:n.sortModel,filterModel:n.filterModel,sqlId:e.sqlId}).then((function(e){var t=e.data,i=e.totalCount;e.params;r&&(o.rowCount=i),n.successCallback(t,o.rowCount),o.ctl.pagination||(o.ctl.gridPage.itemCount=o.rowCount),o.ctl._bindingComplete(),o.ctl.entityName&&_.set(o.module,o.ctl.entityName+".selectedRow",o.ctl.getSelectedRow())})).catch((function(e){n.failCallback()})).finally((function(){i.ctl.loading=!1}))})),!isDesignMode())if(this.ctl=e,this.option=t,this.module=e._webix.$scope,t)if(_.isArray(t))this.setCodeArrayMode(t);else if("function"!=typeof t){_.forOwn(t.params,(function(e){if(_.has(e,"$watch")){var t=e;i.module.$watch(t.$watch,(function(){i.reload&&i.reload()}))}}));var n=function(){var e={};return _.forOwn(t.params,(function(t,n){if(_.has(t,"$get")){var o=t;e[n]=_.get(i.module,o.$get)}else if(_.has(t,"$watch")){var r=t;e[n]=_.get(i.module,r.$watch)}else e[n]=t})),e};if("function"!==t.type)"SQL"!==t.type?console.error("其他方式没有实现"):this.setSqlMode(t,n);else if("function"==typeof t.bind)this.setCustomFunctionMode(t.bind,n);else{var o=_.get(this.module,t.bind);if(!o)return void console.error("没有找到名称为 "+t.bind+" 的方法");this.setCustomFunctionMode(o,n)}}else this.setCustomFunctionMode(t,void 0);else this.reload=void 0}return e.prototype.setSqlMode=function(e,t){var i=this,n=this;this.reload=function(){i.ctl.loading=!0,n.clearRowCount(),n.ctl.entityName&&_.set(n.module,n.ctl.entityName+".selectedRow",void 0),n.ctl.gridApi.hasDataSource=!0,n.ctl.pagination?(n.ctl.gridPage.getPageData=function(i,o){var r={successCallback:function(e,t){e.length>0&&(n.ctl.setData(e),n.ctl.gridPage.itemCount=t,n.ctl.gridPage.currentPage=i)},failCallback:function(){console.error("error")}};r.startRow=(i-1)*o,r.endRow=i*o,n.serverQuery(e,t,r)},n.ctl.gridPage.getPageData(1,n.ctl.gridPage.pageSize)):n.ctl.gridApi.setDatasource({getRows:function(i){if(n.isFirstAutoLoad&&!1===n.ctl.autoLoad)return n.rowCount=0,i.successCallback([],n.rowCount),n.ctl.loading=!1,void(n.isFirstAutoLoad=!1);n.serverQuery(e,t,i)}})},this.reload()},e.prototype.setCustomFunctionMode=function(e,t){var i=this;this.reload=function(){i.clearRowCount(),i.ctl.entityName&&_.set(i.module,i.ctl.entityName+".selectedRow",void 0),i.ctl.loading=!0,i.ctl.gridApi.setDatasource({getRows:function(n){if(i.ctl.loading=!0,i.isFirstAutoLoad&&!1===i.ctl.autoLoad)return i.rowCount=0,n.successCallback([],i.rowCount),i.ctl.loading=!1,void(i.isFirstAutoLoad=!1);e.call(i.module,i.ctl,{param:"function"==typeof t?t():void 0,failCallback:function(){n.failCallback()},successCallback:function(e,t){n.successCallback(e,t),i.ctl.loading=!1,i.ctl._bindingComplete(),i.ctl.entityName&&_.set(i.module,i.ctl.entityName+".selectedRow",i.ctl.getSelectedRow())}})}})},this.reload()},e.prototype.setCodeArrayMode=function(e){var t=this,i=this,n=e.length;this.reload=function(){t.ctl.loading=!0,i.clearRowCount(),i.ctl.entityName&&_.set(i.module,i.ctl.entityName+".selectedRow",void 0),i.ctl.gridApi.hasDataSource=!0,i.ctl.pagination?(i.ctl.gridPage.getPageData=function(t,o){var r=[],a=t*o;a=a>n?n:a;for(var s=(t-1)*o;s<a;s++)r.push(e[s]);i.ctl.setData(r),i.ctl.gridPage.itemCount=n,i.ctl.gridPage.currentPage=t},i.ctl.gridPage.getPageData(1,i.ctl.gridPage.pageSize)):(i.ctl.setData(e),i.ctl.gridPage.itemCount=n)},this.reload()},e.prototype.destory=function(){_.each(this.watches,(function(e){e()})),this.reload=void 0},e.prototype.clearRowCount=function(){delete this.rowCount},e.prototype.updateSupport=function(){return!1},e.prototype._updateRow=function(e){throw new Error("not implements")},e}(),CtlGridCellButton=function(){function e(){}return e.prototype.init=function(e){this.$el=document.createElement("div"),this._buildHTML.call(this,e)},e.prototype.getGui=function(){return this.$el},e.prototype.destroy=function(){for(var e=0;e<this.$btns.length;e++){this.$btns[e].removeEventListener("click",this.func[e])}},e.prototype.refresh=function(e){this._buildHTML.call(this,e)},e.prototype._buildHTML=function(e){var t=this,i=[],n=[],o=e.buttons,r=e.rowIndex,a=e.data,s=e.api,l=e.column;"object"==typeof o&&o.constructor===Array&&_.each(o,(function(e){if("function"==typeof e.render){if(!0!==e.render.call(t,r,a))return}else if("boolean"==typeof e.render&&!e.render)return;i.push('<a class="yv-grid-button '+e.cssType+'">'+("string"==typeof e.iconCls?'<i class="'+e.iconCls+'"></i>':"")+e.text+"</a>"),n.push(e.onClick)})),this.$el.innerHTML='<div class="yv-grid-buttons">'+i.join("")+"</div>";for(var c=this.$el.querySelectorAll(".yv-grid-button"),d=function(e){var t=c[e],i=n[e];t.addEventListener("click",(function(){var e=s.vue,t=s.vue._webix.$scope;YvEventDispatch(i,e,{data:a,rowIndex:r,colId:l.colId},t)}))},u=0;u<c.length;u++)d(u);this.$btns=c,this.func=n},e}(),CtlGridFilterSet=function(){function e(){}return e.prototype.init=function(e){var t=this;this.setupDOM(e);var i=this,n=e.data,o=$(this.$el).find('[ref="eSelectAll"]');o.on("click",(function(){t.checkedData.length>=t.data.length?t.checkedData=[]:t.checkedData=_.clone(t.data),t.refreshState()})),this.$selectAll=o;var r=$(this.$el).find('[ref="eClearButton"]'),a=$(this.$el).find('[ref="eApplyButton"]');r.on("click",(function(){i.checkedData=_.clone(i.data),i.refreshState(),e.filterChangedCallback(),"function"==typeof i.hidePopup&&i.hidePopup()})),a.on("click",(function(){e.filterChangedCallback(),"function"==typeof i.hidePopup&&i.hidePopup()})),this.$clear=r,this.$apply=a;var s=$(this.$el).find(".ag-virtual-list-container");s.css("height",20*n.length+2+"px");var l=0;_.each(n,(function(e){s.append('<div class="ag-virtual-list-item" style="top: '+l+'px;" RefDataValue="'+e.id+'">  <label class="ag-set-filter-item">\n    <div class="ag-filter-checkbox"><span class="ag-icon ag-icon-checkbox-checked" unselectable="on"></span></div>\n    <span class="ag-filter-value">'+e.text+"</span>\n  </label></div>"),l+=20})),s.on("click",".ag-virtual-list-item",(function(){var e=$(this).attr("RefDataValue");if(_.find(i.checkedData,(function(t){return _.toString(t.id)===e})))_.remove(i.checkedData,(function(t){return _.toString(t.id)===e}));else{var t=_.find(i.data,(function(t){return _.toString(t.id)===e}));i.checkedData.push(__assign({},t))}i.refreshState()})),this.data=n,this.checkedData=_.clone(this.data),this.$container=s},e.prototype.refreshState=function(){var e=this.$selectAll.find("span.ag-icon");if(this.checkedData.length>=this.data.length)e.attr("class","ag-icon ag-icon-checkbox-checked"),this.$container.find("[RefDataValue]").find("span.ag-icon").attr("class","ag-icon ag-icon-checkbox-checked");else if(0===this.checkedData.length)e.attr("class","ag-icon ag-icon-checkbox-unchecked"),this.$container.find("[RefDataValue]").find("span.ag-icon").attr("class","ag-icon ag-icon-checkbox-unchecked");else{e.attr("class","ag-icon ag-icon-checkbox-indeterminate");var t=this;this.$container.find("[RefDataValue]").each((function(){var e=$(this),i=e.attr("RefDataValue");_.find(t.checkedData,(function(e){return e.id===i}))?e.find("span.ag-icon").attr("class","ag-icon ag-icon-checkbox-checked"):e.find("span.ag-icon").attr("class","ag-icon ag-icon-checkbox-unchecked")}))}},e.prototype.getGui=function(){return this.$el},e.prototype.isFilterActive=function(){return this.checkedData.length<this.data.length},e.prototype.doesFilterPass=function(){},e.prototype.getModel=function(){if(!(this.checkedData.length>=this.data.length))return{filterType:"set",filter:this.checkedData}},e.prototype.setModel=function(e){e||(this.checkedData=_.clone(this.data))},e.prototype.afterGuiAttached=function(e){this.hidePopup=e.hidePopup,this.refreshState()},e.prototype.destroy=function(){this.$selectAll.off(),this.$container.off(),this.$clear.off(),this.$apply.off()},e.prototype.getModelAsString=function(){console.log("getModelAsString")},e.prototype.setupDOM=function(e){this.$el=document.createElement("div");this.$el.innerHTML='<div class="ag-filter-body-wrapper">\n  <div>\n    <div class="ag-filter-header-container" role="presentation" style="width: 200px;">\n      <label ref="eSelectAll" class="ag-set-filter-item">\n        <div class="ag-filter-checkbox">\n          <span class="ag-icon ag-icon-checkbox-checked" unselectable="on"></span>\n        </div>\n        <span class="ag-filter-value">全选</span>\n      </label>\n    </div>\n    <div class="ag-set-filter-list" role="presentation">\n      <div class="ag-virtual-list-viewport">\n\n\n        <div class="ag-virtual-list-container" style="height: 180px;">        </div>\n\n\n      </div>\n    </div>\n  </div>\n</div>\n<div class="ag-filter-apply-panel" ref="eButtonsPanel">\n  <button type="button" ref="eClearButton">清空</button>\n  <button type="button" ref="eApplyButton">确定</button>\n</div>'},e}(),CtlGridEditor=function(){function e(){}return e.prototype.init=function(e){this.data=e.data,this.colDef=e.colDef,this.column=e.column;var t=e.type,i=e.data,n=e.colDef,o=e.column,r=e.cellStartedEdit,a=e.value,s=e.editParams;_.assign(this,{type:t,value:a,data:i,colDef:n,column:o,editParams:s}),this.focusAfterAttached=r,this.field=n.field,this.valid=e.valid,this.origin=a,this.vue=e.api.vue},e.prototype.getGui=function(){},e.prototype.afterGuiAttached=function(){},e.prototype.getValue=function(){},e.prototype.setValue=function(e){console.error("不支持 setValue:"+e)},e.prototype.destroy=function(){if(void 0!==this.valid){var e=this.valid(this.getValue(),this.vue.getEditRow());this.vue.currentEditValidMsg[this.field]=e||void 0}},e.prototype.isPopup=function(){return!1},e.prototype.isCancelBeforeStart=function(){},e.prototype.isCancelAfterEnd=function(){},e.prototype.focusIn=function(){},e.prototype.focusOut=function(){},e}(),isInput=!1,CtlGridEditorText=function(_super){function CtlGridEditorText(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(CtlGridEditorText,_super),CtlGridEditorText.prototype.init=function(e){_super.prototype.init.call(this,e),e.node.rowPinned&&(this.isPinned=!0),this.$el=document.createElement("div"),this.$el.classList.add("ag-input-wrapper"),this.$el.setAttribute("role","presentation"),this.$el.innerHTML='<input class="ag-cell-edit-input" type="text" autocomplete="off">',this.$input=this.$el.querySelectorAll("input")[0],this.$input.value=_.toString(e.value),this.$input.addEventListener("keydown",this._onKeyDown.bind(this)),this.$input.addEventListener("input",this._onInput.bind(this)),this.$input.addEventListener("change",this._onChange.bind(this)),this.$input.addEventListener("compositionstart",this._onCompositionstart.bind(this)),this.$input.addEventListener("compositionend",this._onCompositionend.bind(this))},CtlGridEditorText.prototype._onCompositionstart=function(){isInput=!0},CtlGridEditorText.prototype._onCompositionend=function(e){isInput=!1,this._dealWithString(e)},CtlGridEditorText.prototype._onKeyDown=function(e){if("Tab"===e.code||"Enter"===e.code){if(e.stopPropagation(),e.preventDefault(),this.value=e.target.value,"function"==typeof this.editParams.onValidate)if(this.editParams.onValidate(this.value))return;this.leaveReason=e.code,this.vue.gridApi.stopEditing()}},CtlGridEditorText.prototype._onInput=function(e){isInput||this._dealWithString(e)},CtlGridEditorText.prototype._dealWithString=function(e){var value=e.target.value;if("number"===this.type)if(this.editParams.precision>0){if(value=value.replace(/[^\d.-]/g,""),value.length>1&&value.indexOf(".")>1)for(var t=void 0;t=value,value=value.replace(/^0/g,""),t.length!==value.length;);value=value.replace(/^\./g,""),value=value.replace(/\.{2,}/g,"."),value=value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");var r=eval("/^(\\-)*(\\d+)\\.(\\d{0,"+this.editParams.precision+"}).*$/");value=value.replace(r,"$1$2.$3")}else value=value.replace(/[^\d-]/g,""),value.length>1&&(value=value.replace(/^0/g,"")),value=value.startsWith("-")?"-"+value.substr(1).replace(/[^\d]/g,""):value.replace(/[^\d]/g,"");if(e.target.value=value,this.value!==value&&(this.value=value,"custom"!==e.detail&&"function"==typeof this.editParams.onInput)){var r=this.editParams.onInput(this.value,e);void 0!==r&&(this.value=r,e.target.value=r),"function"==typeof this.editParams.onValidate&&this.editParams.onValidate(value)}},CtlGridEditorText.prototype._onChange=function(e){this.value=e.target.value,"function"==typeof this.editParams.onChange&&this.editParams.onChange(this.value,e)},CtlGridEditorText.prototype.destroy=function(){_super.prototype.destroy.call(this),this.$input.removeEventListener("keydown",this._onKeyDown.bind(this)),this.$input.removeEventListener("input",this._onInput.bind(this)),this.$input.removeEventListener("change",this._onChange.bind(this)),this.$input.removeEventListener("compositionstart",this._onCompositionstart.bind(this)),this.$input.removeEventListener("compositionend",this._onCompositionend.bind(this))},CtlGridEditorText.prototype.getGui=function(){return this.$el},CtlGridEditorText.prototype.afterGuiAttached=function(){_super.prototype.afterGuiAttached.call(this),this.$input.dispatchEvent(new CustomEvent("input",{detail:"custom"})),this.focusAfterAttached&&this.$input.focus()},CtlGridEditorText.prototype.getValue=function(){if(void 0===this.leaveReason&&("function"==typeof this.editParams.onValidate&&this.editParams.onValidate(this.value)))return this.origin;return"function"==typeof this.editParams.onCommit&&this.editParams.onCommit({data:this.data,colDef:this.colDef,column:this.column,newValue:this.value,isPinned:this.isPinned,vue:this.vue,leaveReason:this.leaveReason}),this.value},CtlGridEditorText.prototype.focusIn=function(){_super.prototype.focusIn.call(this),this.$input.focus(),this.$input.select()},CtlGridEditorText.prototype.focusOut=function(){_super.prototype.focusOut.call(this)},CtlGridEditorText}(CtlGridEditor),CtlGridEditorCombo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this.options=t.options,t.node.rowPinned&&(this.isPinned=!0);var i=$('<input class="tmp-combo" />');this.$el=i[0]},t.prototype.getGui=function(){return this.$el},t.prototype.afterGuiAttached=function(){},t.prototype.getValue=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.focusIn=function(){e.prototype.focusIn.call(this)},t.prototype.focusOut=function(){e.prototype.focusOut.call(this)},t}(CtlGridEditor),CtlGrid=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoLoad=!0,t.pagination=!1,t.pageSize=100,t.checkedIds=[],t.isGridReadReady=!1,t.dataSourceBind=void 0,t}return __extends(t,e),t.create=function(e){var i=new t(_.cloneDeep(e));e.hasOwnProperty("debugger");var n=parseYvanPropChangeVJson(e,[]);return _.assign(i,n),_.forOwn(e,(function(t,i){delete e[i]})),_.merge(e,{view:"grid",template:'<div role="yvGrid" class="ag-theme-blue"></div>',on:{onAfterRender:function(){i.attachHandle(this),i._resetGrid()},onDestruct:function(){i.gridApi&&(i.gridApi.destroy(),i.gridApi=void 0),i.removeHandle()}}}),i.vjson.id&&(e.id=i.vjson.id),i},Object.defineProperty(t.prototype,"webix",{get:function(){return this._webix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this.vjson.dataSource},set:function(e){this.vjson.dataSource=e},enumerable:!0,configurable:!0}),t.prototype.selectRow=function(e){var t=this._findNode(e);return!!t&&(this.gridApi.setFocusedCell(t.rowIndex,"__ID__"),t.setSelected(!0),!0)},t.prototype.flashRow=function(e){var t=this._findNode(e);return!!t&&(this.gridApi.flashCells({rowNodes:[t]}),!0)},t.prototype.flashCell=function(e,t){var i=this._findNode(t);return!!i&&(this.gridApi.flashCells({columns:e,rowNodes:[i]}),!0)},t.prototype.getData=function(){var e=[];return this.gridApi.forEachNode((function(t){e.push(t.data)})),e},t.prototype.setData=function(e){this.gridApi.setRowData(e)},t.prototype.reload=function(e){this.loading=!0,this._clearCache(),this.dataSourceBind&&this.dataSourceBind.clearRowCount(),this.entityName&&_.set(this.getModule(),this.entityName+".selectedRow",void 0),e&&!0===e.clearFilter?this.gridApi.setFilterModel(null):this.pagination?this.gridPage.refreshGrid():this.gridApi.refreshInfiniteCache()},t.prototype.getSelectedId=function(){var e=this.getSelectedRow();if(e)return this._getIdByRow(e)},t.prototype.setCheckedIds=function(e){this.checkedIds=e,this.gridApi.refreshCells({columns:["__CB__"],force:!0})},t.prototype.getCheckedRows=function(){var e=this,t=[];return this._findNode((function(i){return _.indexOf(e.checkedIds,e._getIdByRow(i.data))>=0&&t.push(i.data),!1})),t},t.prototype.getSelectedRow=function(){var e=this.getSelectedRows();return e.length>0?e[0]:void 0},t.prototype.getSelectedRows=function(){var e=[];return this._findNode((function(t){return t.selected&&e.push(t.data),!1})),e},Object.defineProperty(t.prototype,"loading",{set:function(e){this.isGridReadReady&&(e?this.gridApi.showLoadingOverlay():this.gridApi.hideOverlay())},enumerable:!0,configurable:!0}),t.prototype.paginationSetPageSize=function(e){this.gridApi.paginationSetPageSize(e)},t.prototype.setRowId=function(e){return CtlGridIdRender(e,this)},t.prototype._gridOptions=function(){_.assign(this,__assign(__assign({},_.clone(YvGridProp)),this.vjson));var e=[];this.showRowNumber&&e.push({field:"__ID__",headerName:CtlGridLocale.rownumber,width:52,maxWidth:160,pinned:"left",resizable:!0,sortable:!1,cellRenderer:"CtlGridIdRender"}),this.checkbox&&e.push({field:"__CB__",headerName:"",width:40,minWidth:40,maxWidth:40,pinned:"left",resizable:!1,sortable:!1,cellRenderer:"CtlGridCellCheckbox",headerComponent:"CtlGridHeadCheckbox",cellRendererParams:{isCheckedIds:!0}}),this._gridCols(e);var t=e;if(!this.columnGroup||_.size(this.columnGroup)<=0)t=e;else{t=[];for(var i=0,n=void 0,o=-1,r=0;r<e.length;r++){var a=this.columnGroup[i],s=a.from,l=a.title,c=a.span,d=a.width,u=e[r];this.columnGroup[i]||t.push(u),o>0?(n.children.push(u),--o<=0&&i++):u.field===s?(n={width:d,headerName:l,children:[u]},o=c-1,t.push(n)):t.push(u)}}var p={headerHeight:35,rowHeight:33,suppressRowHoverHighlight:!0,columnDefs:t,animateRows:!1,suppressCellSelection:!this.allowCellSelection,suppressRowClickSelection:!this.allowRowSelection,suppressColumnMoveAnimation:!0,pagination:this.pagination,paginationPageSize:this.pageSize,localeText:CtlGridLocale,rowModelType:"infinite",infiniteInitialRowCount:200,maxBlocksInCache:5,rowSelection:"single",enableBrowserTooltips:!0,singleClickEdit:this.editSingleClick,floatingFilter:!1,stopEditingWhenGridLosesFocus:this.stopEditingWhenGridLosesFocus,onFirstDataRendered:this._firstDataRendered.bind(this),onGridReady:this._gridReady.bind(this),tabToNextCell:this._tabToNextCell.bind(this),navigateToNextCell:this._navigateToNextCell.bind(this),onCellKeyDown:this._cellKeyDown.bind(this),onRowDoubleClicked:this._rowDoubleClicked.bind(this),onCellEditingStarted:this._cellEditingStarted.bind(this),onCellEditingStopped:this._cellEditingStopped.bind(this),onRowSelected:this._rowSelected.bind(this),onModelUpdated:this._modelUpdated.bind(this),onCellFocused:this._cellFocused.bind(this),onCellClicked:this._cellClicked.bind(this),enterMovesDown:!1,enterMovesDownAfterEdit:!1,components:{CtlGridCellButton:CtlGridCellButton,CtlGridCellCheckbox:CtlGridCellCheckbox,CtlGridHeadCheckbox:CtlGridHeadCheckbox,CtlGridEditorText:CtlGridEditorText,CtlGridEditorCombo:CtlGridEditorCombo,CtlGridFilterSet:CtlGridFilterSet,CtlGridIdRender:this.setRowId.bind(this)}};return _.isArray(this.dataSource)&&_.assign(p,{rowModelType:"clientSide",rowData:this.data,data:[]}),this.pagination&&_.assign(p,{rowModelType:"clientSide",rowData:[],data:[]}),p},t.prototype._gridReady=function(){this.isGridReadReady=!0,this.gridPage=new CtlGridPage(this),this._rebindDataSource()},t.prototype._resetGrid=function(){this.isGridReadReady=!1;var e=this._gridOptions(),t=$(this._webix._viewobj).find('[role="yvGrid"]')[0],i=new agGrid.Grid(t,e);i.gridOptions.api.vue=this,this.gridApi=i.gridOptions.api,this.columnApi=i.gridOptions.columnApi,t&&$(t).find(".ag-root.ag-unselectable").removeClass("ag-unselectable")},t.prototype._rowDoubleClicked=function(e){YvEventDispatch(this.onRowDblClick,this,e.data)},t.prototype._getComboFilterData=function(e){if("combo"===e.editMode)if("string"==typeof e.editParams.data){if(dict.hasOwnProperty(e.editParams.data))return dict[e.editParams.data];if(formatter.hasOwnProperty(e.editParams.data))return formatter[e.editParams.data];console.error("没有发现全局函数 YvanUI.formatter[dict]."+e.editParams.data)}else if(e.editParams.data.constructor===Array){var t=e.editParams;return _.map(t.data,(function(e){return{id:e[t.idField],text:e[t.textField]}}))}var i=e.formatter;if("string"==typeof e.formatter&&(dict.hasOwnProperty(e.formatter)?i=dict[e.formatter]:formatter.hasOwnProperty(e.formatter)?e.formatter=formatter[e.formatter]:console.error("没有发现全局函数 YvanUI.formatter[dict]."+e.editParams.data)),i&&i.constructor===Array)return i},t.prototype._firstDataRendered=function(){YvEventDispatch(this.onFirstDataRendered,this,void 0)},t.prototype._acceptChanges=function(e){e.origin&&(e.cstate="ok",delete e.origin,this.flashRow(e),e.setDataValue("__ID__",_.uniqueId()))},t.prototype._clearCache=function(){this.checkedIds=[],this.gridApi.forEachNode((function(e){delete e.cstate,delete e.origin}))},t.prototype._getIdByRow=function(e){if(e)return this.idField?this.idField.constructor===Array?_.map(this.idField,(function(t){return _.toString(e[t])})).join(this.valueSep):e[this.idField]:void console.error("表格没有设置主键！！")},t.prototype._rebindDataSource=function(){this.dataSourceBind&&(this.dataSourceBind.destory(),this.dataSourceBind=void 0),this.dataSourceBind=new YvanDataSourceGrid(this,this.dataSource)},t.prototype._bindingComplete=function(){YvEventDispatch(this.onBindingComplete,this,void 0)},t.prototype._findNode=function(e){var t=this;if(e){if("string"==typeof e){var i=e;e=function(e){return t._getIdByRow(e.data)===i}}else if("object"==typeof e)return e}else e=function(){return!0};var n=this,o=void 0;try{this.gridApi.forEachNode((function(t){if(e.call(n,t))throw o=t,Error()}))}catch(e){}return o},t.prototype._cellKeyDown=function(e){if(!0!==YvEventDispatch(this.onKeyDown,this,e)){if(13===e.event.keyCode)return e.event.stopPropagation(),void e.event.preventDefault();if(27===e.event.keyCode&&e.node.origin){e.event.stopPropagation(),e.event.preventDefault();var t=__assign(__assign({},e.data),e.node.origin);delete e.node.cstate,delete e.node.origin,e.node.updateData(t),e.node.setDataValue("__ID__",_.uniqueId())}}},t.prototype._modelUpdated=function(){this.autoSizeColumns&&this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype._cellFocused=function(e){YvEventDispatch(this.onCellFocused,this,e)},t.prototype._cellClicked=function(e){YvEventDispatch(this.onCellClicked,this,e)},t.prototype._rowSelected=function(e){var t=e.node,i=t.selected,n=t.id;i?(_.size(this.entityName)>0&&_.set(this.getModule(),this.entityName+".selectedRow",e.data),YvEventDispatch(this.onRowSelect,this,e.data)):this._rowEditingStopped(n,e)},t.prototype._cellEditingStarted=function(e){var t;"top"===e.node.rowPinned?t=-1:e.node.rowPinned||(t=e.node.id),this._rowEditingStarted(t,e)},t.prototype._cellEditingStopped=function(e){if("editFinish"===this.saveOn){var t=e.node.origin;if(t){var i=_.cloneDeep(e.data);delete i.__ID__,delete i.__CB__,_.forOwn(t,(function(e,i){"number"==typeof e&&(t[i]=_.toString(e))})),_.forOwn(i,(function(e,t){"number"==typeof e&&(i[t]=_.toString(e))})),_.isEqual(t,i)?e.node.cstate="same":(e.node.cstate="validate",this.dataSourceBind&&this.dataSourceBind.updateSupport()&&this.dataSourceBind._updateRow(e)),e.node.setDataValue("__ID__",_.uniqueId())}}},t.prototype._rowEditingStarted=function(e,t){if(!t.node.origin){var i=_.cloneDeep(t.data);delete i.__ID__,delete i.__CB__,t.node.origin=i}t.node.cstate="editing",t.node.setDataValue("__ID__",_.uniqueId())},t.prototype._rowEditingStopped=function(e,t){if("rowChanged"===this.saveOn){var i=t.node.origin;if(i){var n=_.cloneDeep(t.data);delete n.__ID__,delete n.__CB__,_.forOwn(i,(function(e,t){"number"==typeof e&&(i[t]=_.toString(e))})),_.forOwn(n,(function(e,t){"number"==typeof e&&(n[t]=_.toString(e))})),_.isEqual(i,n)?t.node.cstate="same":(t.node.cstate="validate",this.dataSourceBind&&this.dataSourceBind._updateRow(t)),t.node.setDataValue("__ID__",_.uniqueId())}}},t.prototype._tabToNextCell=function(e){var t=e.previousCellPosition,i=e.nextCellPosition;return __assign(__assign({},i),{rowIndex:t.rowIndex})},t.prototype._navigateToNextCell=function(e){var t=e.previousCellPosition,i=e.nextCellPosition;switch(e.key){case 38:var n=t.rowIndex-1;return n<0?null:(this.selectRow((function(e){return e.rowIndex===n})),{rowIndex:n,column:t.column,floating:t.floating});case 40:var o=t.rowIndex+1,r=this.gridApi.getModel().getRowCount();return o>=r?null:(this.selectRow((function(e){return e.rowIndex===o})),{rowIndex:o,column:t.column,floating:t.floating});case 37:case 39:return i;default:throw"this will never happen, navigation is always one of the 4 keys above"}},t.prototype._gridCols=function(e){var t=this;_.each(this.columns,(function(i){var n=_.merge(__assign(__assign({},_.clone(YvGridColumnProp)),{editParams:__assign({},_.clone(YvGridColumnEditProp))}),i),o={suppressMovable:!0,field:n.field,headerName:n.title,resizable:n.resizable,filter:!1,editable:!1,sortable:n.sortable,hide:n.hidden};void 0!==n.width&&(o.width=n.width),void 0!==n.minwidth&&(o.minWidth=n.minwidth),void 0!==n.maxwidth&&(o.maxWidth=n.maxwidth),void 0!==n.align&&(o.cellClass=function(e){return["yv-align-"+n.align]}),_.size(n.field)>0&&(o.tooltipField=n.field),n.buttons&&(o.cellRenderer="CtlGridCellButton",o.cellRendererParams={buttons:n.buttons});var r=n.editParams,a=!1;if(n.editable)if("checkbox"===n.editMode)a=!1,o.cellRenderer="CtlGridCellCheckbox",o.cellRendererParams={editParams:n.editParams,on:r.on,off:r.off,onChange:function(e){YvEventDispatch(r.onValidate,t,{value:e})},onValidate:function(e){YvEventDispatch(r.onValidate,t,{value:e})}},n.editable&&_.assign(o,{editable:!0,cellEditor:"CtlGridEditorCombo",cellEditorParams:{editParams:n.editParams,options:[{id:r.on,text:"勾选"},{id:r.off,text:"不勾"}],onChange:function(e){YvEventDispatch(r.onValidate,t,{value:e})},onValidate:function(e){YvEventDispatch(r.onValidate,t,{value:e})}}});else if("combo"===n.editMode){a=!1,_.assign(o,{editable:!0,cellEditor:"CtlGridEditorCombo",cellEditorParams:{editParams:n.editParams,options:t._getComboFilterData(n),onChange:function(e){YvEventDispatch(r.onValidate,t,{value:e})},onValidate:function(e){YvEventDispatch(r.onValidate,t,{value:e})}}});var s=t._getComboFilterData(n);o.valueFormatter="function"==typeof s?function(e){return s(e.value)}:function(e){if(!(_.size(e.data)<=0)){var t=_.find(s,(function(t){var i=_.toString(t.id);return i&&i===_.toString(e.value)}));return t?t.text:e.value}}}else"area"===n.editMode?(a=!0,_.assign(o,{editable:!0,cellEditor:"agLargeTextCellEditor",cellEditorParams:{editParams:n.editParams,maxLength:r.maxlength}})):"text"===n.editMode||"number"===n.editMode?(a=!0,_.assign(o,{editable:!0,cellEditor:"CtlGridEditorText",cellEditorParams:{type:n.editMode,editParams:n.editParams,onChange:function(e){YvEventDispatch(r.onValidate,t,{value:e})},onValidate:function(e){YvEventDispatch(r.onValidate,t,{value:e})},onInput:function(e){YvEventDispatch(r.onInput,t,t,{event:e})}}})):"date"!==n.editMode&&"datetime"!==n.editMode||(a=!0,console.error("not support date editor"));else a=!0;if(a){var l=t._getComboFilterData(n);if(l)o.valueFormatter=function(e){if(!(_.size(e.data)<=0)){var t=_.find(l,(function(t){var i=_.toString(t.id);return i&&i===_.toString(e.value)}));return t?t.text:e.value}};else{var c=n.formatter;"string"==typeof n.formatter&&(formatter.hasOwnProperty(n.formatter)?c=formatter[n.formatter]:console.error("没有发现全局函数 YvanUI.formatter."+n.formatter)),"function"==typeof c&&(o.valueFormatter=function(e){if(!(_.size(e.data)<=0))return c.call(t,e.data[n.field],t,e.data)})}}if(t.filterable&&n.filterable&&!n.hidden){var d=t._getComboFilterData(n);"object"==typeof d?_.assign(o,{filter:"CtlGridFilterSet",filterParams:{data:d}}):"number"===n.editMode?_.assign(o,{filter:"agNumberColumnFilter",filterParams:{applyButton:!0,clearButton:!0,suppressAndOrCondition:!0}}):"date"===n.editMode||"datetime"===n.editMode?_.assign(o,{filter:"agDateColumnFilter",filterParams:{applyButton:!0,clearButton:!0,filterOptions:["inRange"],suppressAndOrCondition:!0,comparator:function(e,t){if(null==t)return 0;var i=t.split("/"),n=Number(i[2]),o=Number(i[1])-1,r=Number(i[0]),a=new Date(n,o,r);return a<e?-1:a>e?1:0}}}):_.assign(o,{filter:"agTextColumnFilter",filterParams:{applyButton:!0,clearButton:!0,filterOptions:["startsWith","equals","contains"],suppressAndOrCondition:!0,textFormatter:function(e){return null==e?null:e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("[àáâãäå]","g"),"a")).replace(new RegExp("æ","g"),"ae")).replace(new RegExp("ç","g"),"c")).replace(new RegExp("[èéêë]","g"),"e")).replace(new RegExp("[ìíîï]","g"),"i")).replace(new RegExp("ñ","g"),"n")).replace(new RegExp("[òóôõøö]","g"),"o")).replace(new RegExp("œ","g"),"oe")).replace(new RegExp("[ùúûü]","g"),"u")).replace(new RegExp("[ýÿ]","g"),"y")}}})}"function"==typeof n.onStyle&&_.assign(o,{cellStyle:function(e){return n.onStyle.call(t,e)}}),e.push(o)}))},t}(CtlBase),CtlSwitch=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlSwitchDefault),i._create(e,i);var n=parseYvanPropChangeVJson(e,["value"]);return _.assign(i,n),_.merge(e,i._webixConfig,{view:"switch",on:{}}),i},t.prototype.toggle=function(){this._webix.toggle()},Object.defineProperty(t.prototype,"value",{get:function(){return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){this._webix?this._webix.setValueHere(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),t}(CtlInput),CtlNumber=function(_super){function CtlNumber(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(CtlNumber,_super),CtlNumber.create=function(e){var t=new CtlNumber(e);_.defaultsDeep(e,CtlNumberDefault),t._create(e,t);var i=parseYvanPropChangeVJson(e,["precision"]);return _.assign(t,i),_.merge(e,t._webixConfig,{view:"text",type:"number"}),t},CtlNumber.prototype._testNumber=function(value){if(this.precision&&this.precision>0){if(value=value.replace(/[^\d.-]/g,""),value.length>1&&value.indexOf(".")>1)for(var t=void 0;t=value,value=value.replace(/^0/g,""),t.length!==value.length;);value=value.replace(/^\./g,""),value=value.replace(/\.{2,}/g,"."),value=value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");var r=eval("/^(\\-)*(\\d+)\\.(\\d{0,"+this.precision+"}).*$/");value=value.replace(r,"$1$2.$3")}else value=value.replace(/[^\d-]/g,""),value.length>1&&(value=value.replace(/^0/g,"")),value=value.startsWith("-")?"-"+value.substr(1).replace(/[^\d]/g,""):value.replace(/[^\d]/g,"");return value},CtlNumber.prototype.onInputEvent=function(e){var t=e.target.value;e.target.value=this._testNumber(t),_super.prototype.onInputEvent.call(this,e)},Object.defineProperty(CtlNumber.prototype,"value",{get:function(){return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){e=this._testNumber(e),this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),CtlNumber}(CtlInput),CtlRadio=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlRadioDefault),i._create(e,i);var n=parseYvanPropChangeVJson(e,["options"]);return _.assign(i,n),_.merge(e,i._webixConfig,{view:"radio",on:{}}),i},Object.defineProperty(t.prototype,"options",{set:function(e){var t=e.map((function(e){return{id:e.id,value:e.text}}));this._webix?(this._webix.define("options",t),this._webix.refresh()):_.merge(this._webixConfig,{options:t})},enumerable:!0,configurable:!0}),t}(CtlInput);webix.protoUI({name:"codemirror-editor",defaults:{},$init:function(e){this.$view.innerHTML="<textarea style='width:100%;height:100%;'></textarea>",this._waitEditor=webix.promise.defer(),this.$ready.push(this._render_cm_editor),_.extend(this.config,e),e.on&&"function"==typeof e.on.onInited&&e.on.onInited.call(this)},_render_cm_editor:function(){this._render_when_ready()},_render_when_ready:function(){var e=_.get(window,"CodeMirror");this._editor=e.fromTextArea(this.$view.firstChild,__assign({},this.config)),this._waitEditor.resolve(this._editor),this.setValue(this.config.value),this._focus_await&&this.focus()},_set_inner_size:function(){this._editor&&this.$width&&(this._updateScrollSize(),this._editor.scrollTo(0,0))},_updateScrollSize:function(){var e=this._editor.getWrapperElement(),t=(this.$height||0)+"px";e.style.height=t,e.style.width=(this.$width||0)+"px";var i=this._editor.getScrollerElement();i.style.height!==t&&(i.style.height=t,this._editor.refresh())},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&this._set_inner_size()},setValue:function(e){e||0===e||(e=""),this.config.value=e,this._editor&&(this._editor.setValue(e),this.config.preserveUndoHistory||this._editor.clearHistory(),this._updateScrollSize())},getValue:function(){return this._editor?this._editor.getValue():this.config.value},focus:function(){this._focus_await=!0,this._editor&&this._editor.focus()},getEditor:function(e){return e?this._waitEditor:this._editor},undoLength:function(){return this._editor.historySize().undo}},webix.ui.view);var CtlCodeMirror=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.create=function(e){var i=new t(e);_.defaultsDeep(e,CtlCodeMirrorDefault);var n=parseYvanPropChangeVJson(e,["value"]);return i._webixConfig=e,_.assign(i,n),_.merge(e,i._webixConfig,{on:{onInited:function(){i.attachHandle(this)},onAfterDelete:function(){i.removeHandle()}}}),i},t.prototype.undo=function(){this._webix.getEditor().undo()},t.prototype.redo=function(){this._webix.getEditor().redo()},Object.defineProperty(t.prototype,"value",{get:function(){return this._webix?this._webix.getValue():this._webixConfig.value},set:function(e){this._webix?this._webix.setValue(e):this._webixConfig.value=e},enumerable:!0,configurable:!0}),t}(CtlBase);function deepTravVJson(e,t){var i=[];return deepTrav1(e,t,i),i}function deepTrav1(e,t,i){var n=t(e);if(i&&!0===n&&i.unshift({id:0,keyName:"",object:e}),"yvDesignCanvas"!==e.xtype&&"yvDesignProperty"!==e.xtype&&"yvDesignToolbox"!==e.xtype)return _.forOwn(e,(function(o,r){if("object"==typeof o){if(_.has(e,"view")&&"toolbar"===e.view){if("dataSource"===r||"suggest"===r||"options"===r)return}else if("data"===r||"dataSource"===r||"suggest"===r||"options"===r)return;if(!("on"===r&&_.isObject(o)||_.startsWith(r,"on")&&_.size(r)>2)){var a=deepTrav1(o,t,i);i&&!0===a&&(n=!0,i.unshift({id:e.id,keyName:r,object:o}))}}})),n}function deepTravFindSuper(e,t){if("yvDesignCanvas"!==e.xtype&&"yvDesignProperty"!==e.xtype&&"yvDesignToolbox"!==e.xtype){var i=null;return _.forOwn(e,(function(n,o){i||"object"==typeof n&&"data"!==o&&"dataSource"!==o&&"suggest"!==o&&"options"!==o&&("on"===o&&_.isObject(n)||o.startsWith("on")&&_.size(o)>2||(i=n.id!==t?deepTravFindSuper(n,t):e))})),i}}function getSuperVjson(e,t){return deepTravFindSuper(e,t)}function deepTravFindCurrent(e,t){if("yvDesignCanvas"!==e.xtype&&"yvDesignProperty"!==e.xtype&&"yvDesignToolbox"!==e.xtype){var i=null;return _.forOwn(e,(function(e,n){i||"object"==typeof e&&"data"!==n&&"dataSource"!==n&&"suggest"!==n&&"options"!==n&&("on"===n&&_.isObject(e)||n.startsWith("on")&&_.size(n)>2||(i=e.id!==t?deepTravFindCurrent(e,t):e))})),i}}function getCurrentVjson(e,t){return deepTravFindCurrent(e,t)}function deepTravDeleteVjson(e,t){var i=!1;return"yvDesignCanvas"===e.xtype||"yvDesignProperty"===e.xtype||"yvDesignToolbox"===e.xtype||_.forOwn(e,(function(n,o){if(!i&&"object"==typeof n&&"data"!==o&&"dataSource"!==o&&"suggest"!==o&&"options"!==o&&!("on"===o&&_.isObject(n)||o.startsWith("on")&&_.size(o)>2)){if(n.id===t)return i=!0,void(webix.isArray(e)?e.splice(o,1):delete e[o]);(i=deepTravDeleteVjson(n,t))&&(webix.isArray(n)&&n.length<=0||Object.keys(n).length<=0||1===Object.keys(n).length&&n.id>0||null==n)&&(webix.isArray(e)?e.splice(o,1):delete e[o])}})),i}function deletVjsonById(e,t){var i=deepTravDeleteVjson(e,t);if(webix.isArray(e)&&e.length<=0){var n={view:"template",template:"拖动任何组件到此处",role:"placeholder",id:webix.uid()};e.push(n)}return i}function viewExtend(e,t){var i={};return deepTravVJson(e,(function(e){e.ctlName&&_.set(i,e.ctlName,e)})),_.forOwn(t,(function(e,t){_.has(i,t)&&_.merge(_.get(i,t),e)})),e}webix.i18n.setLocale("zh-CN"),_.set(window,"webix",webix);var $internalHooks=["data","destory","watches","computed"],Db,Client;function collectDataFromConstructor(e,t){var i=t.prototype._init;t.prototype._init=function(){var t=this,i=Object.getOwnPropertyNames(e);if(e.$options.props)for(var n in e.$options.props)e.hasOwnProperty(n)||i.push(n);i.forEach((function(i){"_"!==i.charAt(0)&&Object.defineProperty(t,i,{get:function(){return _.get(e,i)},set:function(t){_.set(e,i,t)},configurable:!0})}))};var n=new t;t.prototype._init=i;var o={};return Object.keys(n).forEach((function(e){void 0!==n[e]&&_.set(o,e,n[e])})),o}function collectMethods(e,t){Object.getOwnPropertyNames(e).forEach((function(i){if("constructor"!==i)if("viewExtend"!==i)if("viewIntercept"!==i)if("onLoad"!==i)if("onShow"===i&&t.onShows.push(e[i]),$internalHooks.indexOf(i)>-1)t[i]=e[i];else{var n=Object.getOwnPropertyDescriptor(e,i);void 0!==n.value?"function"==typeof n.value?_.has(t.methods,i)||(t.methods[i]=n.value):t.mixins.push({data:function(){var e;return(e={})[i]=n.value,e}}):(n.get||n.set)&&((t.computed||(t.computed={}))[i]={get:n.get,set:n.set})}else t.onLoads.push(e[i]);else console.error("不支持使用 viewIntercept, 请考虑使用 super.viewResolver()");else console.error("不支持使用 viewExtend, 请考虑使用 YvanUI.viewExtend(super.viewResolver(),{})")}))}function createCommonMix(){return{}}function wrapperWebixConfig(e,t){deepTravVJson(t,(function(t){if("iframe"!==t.view&&(e&&_.has(t,"id")&&"MainWindowFirstPage"!==t.id&&console.error("禁用 ID 属性",t),"string"==typeof t.placeId&&(t.id=e.instanceId+"$"+t.placeId),"string"==typeof t.view))switch(t.view){case"button":CtlButton.create(t);break;case"text":CtlText.create(t);break;case"number":case"counter":CtlNumber.create(t);break;case"datepicker":case"date":case"datetime":CtlDatePicker.create(t);break;case"codemirror-editor":CtlCodeMirror.create(t);break;case"dataview":CtlDataview.create(t);break;case"echarts":CtlECharts.create(t);break;case"daterangepicker":case"daterange":case"datetimerange":CtlDateRangePicker.create(t);break;case"combo":case"combobox":CtlCombo.create(t);break;case"multicombo":CtlMultiCombo.create(t);break;case"search":case"searchbox":CtlSearch.create(t);break;case"check":case"checkbox":CtlCheckBox.create(t);break;case"switch":case"switchbox":CtlSwitch.create(t);break;case"radio":case"radiobox":CtlRadio.create(t);break;case"tree":CtlTree.create(t);break;case"treetable":CtlTreeTable.create(t);break;case"tabview":CtlTab.create(t);break;case"grid":CtlGrid.create(t);break;case"form":CtlForm.create(t);break;case"carousel":CtlCarousel.create(t)}})),e&&(t.$scope=e)}function componentFactory(e,t){void 0===t&&(t={}),t.mixins||(t.mixins=[]),t.methods||(t.methods={}),t.viewExtends||(t.viewExtends=[]),t.viewIntercepts||(t.viewIntercepts=[]),t.onLoads||(t.onLoads=[]),t.onShows||(t.onShows=[]);for(var i=e.prototype;i.constructor!==Vue;i=Object.getPrototypeOf(i))collectMethods(i,t);t.mixins.push(createCommonMix());var n=e.prototype.watches;return delete e.prototype.watches,t.mixins.push({data:function(){return __assign({refs:{},dialog:void 0,inParamter:void 0,dialogParent:void 0,instanceId:_.uniqueId("_mins_id_")},collectDataFromConstructor(this,e))},created:function(){var e=this;_.isArray(n)&&_.each(n,(function(t){e.$watch(t.expr,t.handler,{deep:t.deep,immediate:t.immediate})}))},destroyed:function(){},methods:{onLoad:function(){var e=this;_.each(t.onLoads,(function(t){t.call(e)}))},onShow:function(){var e=this;_.each(t.onShows,(function(t){t.call(e)}))},buildView:function(){var e=this.viewResolver();return wrapperWebixConfig(this,e),e},closeDialog:function(){this.dialog.close()},showDialog:function(e,t,i){void 0===i&&(i=!1);var n=this;n.inParamter=e,n.dialogParent=t;var o=n.viewResolver();_.has(o,"body")||(o.body={template:"dialog 没有 body"}),wrapperWebixConfig(n,o.body),_.merge(o,{view:"window",close:void 0===o.close||o.close,move:void 0===o.move||o.move,modal:void 0===o.modal||o.modal,position:"center",resize:void 0===o.resize||o.resize,head:{view:"toolbar",margin:-4,cols:[{view:"label",label:o.title,css:"webix_header webix_win_title"},{view:"icon",icon:"wxi-plus-square",click:function(){r.config.fullscreen=!r.config.fullscreen,r.config.fullscreen?(r.config.oldtop=r.config.top,r.config.oldleft=r.config.left,r.config.left=0,r.config.top=0,this.define({icon:"wxi-minus-square"})):(r.config.top=r.config.oldtop,r.config.left=r.config.oldleft,this.define({icon:"wxi-plus-square"})),r.resize(),this.refresh()}},{view:"icon",icon:"wxi-close",click:function(){r.close()}}]},on:{onShow:function(){n.onLoad()},onDestruct:function(){n.onClose()}}});var r=webix.ui(o);n._webixId=this.dialog=r,this.dialog.show(),$(this.dialog.$view).keypress((function(e){return 27===e.keyCode?(n.onEsc(),e.stopPropagation(),void e.preventDefault()):13===e.keyCode?(n.onEnter(),i&&e.stopPropagation(),void e.preventDefault()):void 0}))}}}),Vue.extend(t)}function render(e,t){var i=_.get(window,"LastRenderHandler");i&&(i.destructor(),_.set(window,"LastRenderHandler",null));var n=t.buildView();return n.container=e,t._webixId=webix.ui(n),t.onLoad(),webix.event(window,"resize",(function(){t._webixId.resize()})),_.set(window,"LastRenderHandler",t._webixId),t._webixId}function renderPlace(e,t,i){wrapperWebixConfig(e,i),webix.ui(i,webix.$$(e.instanceId+"$"+t))}function invokeApi(e,t,i){return new Promise((function(n,o){for(var r=_.get(window,"YvanUI.ajax"),a=_.get(window,"_YvanUI_serverJSPrefix"),s=[],l=0;l<t.length;l++)s.push(t[l]);r({url:a+e,method:"POST-JSON",data:{p:s}}).then((function(e){_.extend(i,e.data),n(i)}))}))}function downLoad(e,t,i,n){var o=_.get(window,"YvanUI");o.loading();var r=i?Qs.stringify(i):"",a=new XMLHttpRequest;a.open("POST",e),a.responseType="blob",a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n&&_.forOwn(n,(function(e,t){a.setRequestHeader(t,e)})),a.onload=function(e){if(200===this.status){var i=this.response;if(_.has(window,"navigator.msSaveOrOpenBlob"))navigator.msSaveBlob(i,t),o.clearLoading();else{var n=document.createElement("a"),r=(a=i,window.URL?window.URL.createObjectURL(a):_.get(window,"webkitURL").createObjectURL(a));n.href=r,n.download=t,$("body").append(n),n.click(),$(n).remove(),window.URL.revokeObjectURL(r),o.clearLoading()}}var a},a.send(r)}function createAjax(e){return e.baseUrl&&(axios.defaults.baseURL=e.baseUrl),function(t){var i={url:t.url};if("DOWNLOAD"===t.method)return downLoad(e.baseUrl+t.url,t.fileName||"file",t.data,t.headers),new Promise((function(e,t){}));if("POST-JSON"===t.method)i.method="POST",i.headers=__assign({"Content-Type":"application/json"},t.headers),i.data=JSON.stringify(t.data);else if("POST-FILE"===t.method){var n=new FormData;i.headers=__assign({"Content-Type":"multipart/form-data"},t.headers),_.forOwn(t.data,(function(e,t){if("files"===t){var i=0;_.each(e,(function(e){n.append("file"+ ++i,e)}))}else n.append(t,e)})),i.data=n,i.method="POST"}else if("POST"===t.method)i.method="POST",i.headers=__assign({"Content-Type":"application/x-www-form-urlencoded"},t.headers),i.data=Qs.stringify(t.data);else{if("GET"!==t.method)throw new Error("not implements");i.method="GET",i.params=t.data,i.headers=__assign({},t.headers)}return new Promise((function(e,t){axios(i).then((function(t){e(t.data)})).catch((function(e){t(e)}))}))}}function createDb(e){return new exports.Db.Client(e)}function getQueryString(){var e=document.location.search,t={};if(e.indexOf("?")>=0)for(var i=e.substr(1).split("&"),n=0;n<i.length;n++){var o=i[n].split("=");t[o[0]]=unescape(o[1])}return t}function camelCase(e){if("string"==typeof e)return _.camelCase(e);if(_.isArray(e))return _.map(e,(function(e){return camelCase(e)}));if("object"==typeof e){var t={};return _.forOwn(e,(function(e,i){t[_.camelCase(i)]=e})),t}console.error("无法转换"+e)}function snakeCase(e){if("string"==typeof e)return _.snakeCase(e);if(_.isArray(e))return _.map(e,(function(e){return snakeCase(e)}));if("object"==typeof e){var t={};return _.forOwn(e,(function(e,i){t[_.snakeCase(i)]=e})),t}console.error("无法转换"+e)}function param(e){return $.param(e)}function unparam(e){var t={};"#"===e.slice(0,1)&&(e=e.slice(1));for(var i=e.split("&"),n=0;n<i.length;n++){var o=i[n].split("=");if(o[0]=decodeURIComponent(o[0]),o[1]=decodeURIComponent(o[1]),void 0===t[o[0]])t[o[0]]=o[1];else if("string"==typeof t[o[0]]){var r=[t[o[0]],o[1]];t[o[0]]=r}else t[o[0]].push(o[1])}return t}function loading(e){clearLoading(),e||(e="请稍后");var t=$("body");t.append('<div class="load-view" style="z-index: 19850224;"><div class="load-an-view"><div class="fading-circle">\n  <div class="sk-circle1 sk-circle"></div>\n  <div class="sk-circle2 sk-circle"></div>\n  <div class="sk-circle3 sk-circle"></div>\n  <div class="sk-circle4 sk-circle"></div>\n  <div class="sk-circle5 sk-circle"></div>\n  <div class="sk-circle6 sk-circle"></div>\n  <div class="sk-circle7 sk-circle"></div> \n  <div class="sk-circle8 sk-circle"></div>\n  <div class="sk-circle9 sk-circle"></div>\n  <div class="sk-circle10 sk-circle"></div>\n  <div class="sk-circle11 sk-circle"></div>\n  <div class="sk-circle12 sk-circle"></div>\n</div></div><div class="load-tip">'+e+"</div></div>"),t.append($('<div class="webix_modal load-view-masker" style="z-index: 19850223;"></div>'))}function clearLoading(){var e=$("body");e.find(".load-view").remove(),e.find(".load-view-masker").remove()}function msg(e){var t=$("body");t.find("[xtype=msg]").remove();var i=$('<div xtype="msg" class="yvan-msg yvan-anim yvan-anim-00">  <div class="yvan-msg-content">'+e+"</div></div>");t.append(i);var n=i.parent().width(),o=i.parent().height(),r=i.width(),a=i.height(),s=(n-r)/2,l=(o-a)/2;(o<a||l<0)&&(l=0),(n<r||s<0)&&(s=0),i.css({left:s,top:l}),setTimeout((function(){i.remove()}),3e3)}function prompt(e,t){void 0===e&&(e="请输入内容"),void 0===t&&(t="");var i=webix.uid(),n=void 0;return new Promise((function(o,r){function a(){var e=webix.$$(i.toString()).getValue();if(e)return o(e),void n.close();msg("请输入内容")}function s(){r(),n.close()}var l={view:"window",close:!1,move:!0,modal:!0,position:"center",resize:!0,fullscreen:!1,head:e,on:{onShow:function(){webix.$$(i).focus()}},body:{rows:[{view:"text",id:i,placeholder:"请输入",value:t},{cols:[{},{view:"button",value:"确定",width:100,css:"yvan_primary",click:a},{view:"button",value:"取消",width:100,css:"default",click:function(){s()}}]}]}};(n=webix.ui(l)).show(),$(webix.$$(i).$view).keydown((function(e){return 27===e.keyCode?(s(),void e.preventDefault()):13===e.keyCode?(a(),void e.preventDefault()):void 0}))}))}function alert(e){webix.alert({title:"提示",text:e})}function error(e){webix.modalbox({title:"错误",text:e,buttons:["确认"],type:"confirm-error"})}function confirm(e){return new Promise((function(t,i){webix.confirm({title:"提示",text:e,ok:"确认",cancel:"取消"}).then((function(){t()})).catch((function(){i()}))}))}function msgError(e){var t=_.get(window,"toastr");t?t.error(e,"错误"):webix.message({type:"error",text:e,expire:-1})}function msgSuccess(e){var t=_.get(window,"toastr");t?t.success(e,"成功"):webix.message({type:"success",text:e,expire:2e3})}function msgInfo(e){var t=_.get(window,"toastr");t?t.info(e):webix.message({type:"info",text:e,expire:2e3})}Db=exports.Db||(exports.Db={}),Client=function(){function e(e){this.baseUrl=e.baseUrl,this.ajax=e.ajax,this.defaultDb=e.defaultDb}return e.prototype.execute=function(e){var t=this;return new Promise((function(i,n){var o=_.uniqueId("SQL");console.time(o),t.ajax({url:t.baseUrl+"/execute",method:"POST-JSON",data:{db:t.defaultDb,sqlId:e.sqlId,params:e.params}}).then((function(e){if(e&&e.success){var t=e.data,o=t.sql,r=t.params,a=t.data;return o&&console.log("SQL-execute",{sql:o,resParams:r}),void i(a)}n(e.msg)})).catch((function(e){n(e)})).finally((function(){console.timeEnd(o)}))}))},e.prototype.query=function(e){var t=this;return new Promise((function(i,n){var o=_.uniqueId("SQL");console.time(o),t.ajax({url:t.baseUrl+"/query",method:"POST-JSON",data:{db:t.defaultDb,filterModel:e.filterModel,orderByModel:e.orderByModel,limit:e.limit,limitOffset:e.limitOffset,needCount:e.needCount,sqlId:e.sqlId,params:e.params}}).then((function(e){if(e&&e.success){var t=e.data,o=t.sql,r=t.params;return t.data,o&&console.log("SQL-query",{sql:o,resParams:r}),void i(e.data)}n(e.msg)})).catch((function(e){n(e)})).finally((function(){console.timeEnd(o)}))}))},e}(),Db.Client=Client,webix.protoUI({name:"grid"},webix.ui.template),webix.protoUI({name:"echarts"},webix.ui.template);var BaseModule=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.onShow=function(){},t.prototype.getPlace=function(e){return webix.$$(_.get(this,"instanceId")+"$"+e)},t}(Vue),BaseDialog=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEsc=function(){this.closeDialog()},t.prototype.onEnter=function(){},t.prototype.onClose=function(){},Object.defineProperty(t.prototype,"title",{get:function(){return $(this.layero).find(".layui-layer-title").html()},set:function(e){$(this.layero).find(".layui-layer-title").html(e)},enumerable:!0,configurable:!0}),t.prototype.showLoading=function(){webix.extend(this._webixId,webix.OverlayBox),this._webixId.showOverlay("Loading...")},t.prototype.closeLoading=function(){this._webixId.hideOverlay()},t}(BaseModule);function BizModule(e){return function(t){return componentFactory(t,e)}}function Watch(e,t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),function(n,o,r){void 0===n.watches&&(n.watches=[]);var a={expr:e,deep:t,immediate:i,handler:r.value};n.watches.push(a)}}function getTS(){return ts}function tsCodeGenerate(e){var t=ts.createSourceFile("someFileName.ts","",ts.ScriptTarget.ES2019,!1,ts.ScriptKind.TS);return ts.createPrinter({newLine:ts.NewLineKind.LineFeed}).printNode(ts.EmitHint.Unspecified,e,t)}function tsCodeParse(e){return ts.createSourceFile("someFileName.ts",e,ts.ScriptTarget.ES2019,!1,ts.ScriptKind.TS).statements}function getTSDemo2(){return ts.createSourceFile("someFileName.ts",contentText,ts.ScriptTarget.ES2019,!1,ts.ScriptKind.TS)}function getTSDemo(){var e,t,i,n,o,r,a,s,l=ts.createSourceFile("someFileName.ts","",ts.ScriptTarget.ES2019,!1,ts.ScriptKind.TS);return ts.createPrinter({newLine:ts.NewLineKind.LineFeed}).printNode(ts.EmitHint.Unspecified,(e=ts.createIdentifier("factorial"),t=ts.createIdentifier("n"),i=ts.createParameter(void 0,void 0,void 0,t),n=ts.createBinary(t,ts.SyntaxKind.LessThanEqualsToken,ts.createLiteral(1)),o=ts.createBlock([ts.createReturn(ts.createLiteral(1))],!0),r=ts.createBinary(t,ts.SyntaxKind.MinusToken,ts.createLiteral(1)),a=ts.createBinary(t,ts.SyntaxKind.AsteriskToken,ts.createCall(e,void 0,[r])),s=[ts.createEnumDeclaration(void 0,void 0,ts.createIdentifier("MyEnum"),[ts.createEnumMember(ts.createIdentifier("member"),void 0),ts.createEnumMember(ts.createIdentifier("user"),void 0)]),ts.createIf(n,o),ts.createReturn(a)],ts.createFunctionDeclaration(void 0,[ts.createToken(ts.SyntaxKind.ExportKeyword)],void 0,e,void 0,[i],ts.createKeywordTypeNode(ts.SyntaxKind.NumberKeyword),ts.createBlock(s,!0))),l)}var contentText="export type Refs = {\n};\n\nexport default abstract class<M, INP> extends YvanUI.BaseDialog<M, Refs, INP> {\n\n    main: {\n        FADMINID:string,\n        FADMINNAME: string,\n        FADMINPHONE: string,\n        FEMAIL: string\n    } = {\n        FADMINID:'',\n        FADMINNAME: '',\n        FADMINPHONE:'',\n        FEMAIL:''\n    };\n\n    viewResolver(): any {\n        console.log(this, this.inParamter);\n\n        return {\n            title: '联系方式维护',\n            modal: true,\n            width: 400,\n            height: 200,\n            body: {\n                rows: [\n                    {\n                        view: 'text',\n                        entityName: \"main.FADMINNAME\",\n                        label: \"管理员名称\",\n                        required: true,\n                        width: 320,\n                    },\n                    {\n                        view: 'text',\n                        entityName: 'main.FADMINPHONE',\n                        label: '管理员联系方式',\n                        width: 320,\n                        required: true,\n                    },\n                    {\n                        view: 'text',\n                        entityName: \"main.FEMAIL\",\n                        label: \"联系EMAIL\",\n                        width: 320,\n                        required: true,\n                    },\n                    {\n                        cols: [\n                            {width: 110},\n                            {\n                                view: \"button\", text: \"确定\", cssType: \"primary\", width: 0,\n                                onClick: {\n                                    type: 'function',\n                                    bind: 'ok'\n                                }\n                            },\n                            {\n                                view: \"button\", text: \"取消\", cssType: 'default', width: 0,\n                                onClick: {\n                                    type: 'function',\n                                    bind: 'cancel'\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }\n        }\n    }\n}",PropertyDescription=function(){function e(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.propertyes={props:[],events:[]},_.each(t,(function(t){e.merge(t)}))}return e.prototype.merge=function(e){this.propertyes.props=_.uniqBy(__spreadArrays(this.propertyes.props,e.props),"name"),e.events&&(this.propertyes.events?this.propertyes.events=_.uniqBy(__spreadArrays(this.propertyes.events,e.events),"name"):this.propertyes.events=_.uniqBy(__spreadArrays(e.events),"name"))},e.prototype.getPropsByGroup=function(e){return _.filter(this.propertyes.props,(function(t){return t.group===e}))},e.prototype.getEvents=function(){return this.propertyes.events},e}(),PropertyDescriptionTable=new Map;PropertyDescriptionTable.set("layout",new PropertyDescription({props:[{name:"borderless",default:!0,group:"css",desc:"有无边框",type:"boolean"},{name:"type",default:"",group:"css",desc:"布局类型",type:["line","clean","wide","space","form"]}]}));var YvBase={props:[{name:"entityName",default:"",group:"bind",desc:"实体类名",type:"string"},{name:"ctlName",default:"",group:"bind",desc:"控件名",type:"string"},{name:"css",default:"",group:"css",desc:"样式类名",type:"string"},{name:"attr",default:{},group:"css",desc:"HTML属性",type:"object"},{name:"render",default:!0,group:"common",desc:"是否显示",type:"boolean"},{name:"padding",default:void 0,group:"css",desc:"内边距",type:"object"},{name:"margin",default:void 0,group:"css",desc:"外边距",type:"object"},{name:"ff",default:0,group:"common",desc:"自动定焦时间",type:"number"}],events:[{name:"onRender",desc:"第一次控件被渲染时触发"}]},YvDataSource$1={props:[{name:"type",default:"",group:"data",desc:"数据源类型",type:"dataSource"}],events:[{name:"onDataComplete",desc:"数据绑定完成后触发"}]};function userComponentFactory(e,t){}function UserComponent(e){return function(e){return userComponentFactory()}}PropertyDescriptionTable.set("template",new PropertyDescription(YvBase,{props:[{name:"template",default:"",group:"common",desc:"HTML内容",type:"string"}]})),PropertyDescriptionTable.set("text",new PropertyDescription(YvBase,{props:[{name:"label",default:"",group:"common",desc:"文本描述",type:"string"},{name:"labelAlign",default:"",group:"common",desc:"描述对齐方式",type:["left","right","center"]},{name:"labelWidth",default:void 0,group:"common",desc:"文本宽度",type:"number"},{name:"gravity",default:1,group:"common",desc:"占位权重",type:"number"},{name:"readonly",default:!1,group:"common",desc:"只读",type:"boolean"},{name:"disabled",default:!1,group:"common",desc:"禁用",type:"boolean"},{name:"required",default:!1,group:"common",desc:"必填",type:"boolean"},{name:"value",default:"",group:"common",desc:"字段值",type:"string"},{name:"prompt",default:"请输入",group:"common",desc:"水印",type:"string"},{name:"validType",default:"",group:"common",desc:"校验类型",type:"valid"}]})),PropertyDescriptionTable.set("button",new PropertyDescription(YvBase,{props:[{name:"text",default:"",group:"common",desc:"按钮标题",type:"string"},{name:"icon",default:"",group:"common",desc:"图标样式",type:"string"},{name:"disabled",default:!1,group:"common",desc:"是否禁用",type:"boolean"},{name:"gravity",default:1,group:"css",desc:"占位权重",type:"number"},{name:"tooltip",default:"",group:"common",desc:"悬停提示",type:"string"},{name:"cssType",default:"default",group:"css",desc:"样式类型",type:["default","primary","danger","success"]}],events:[{name:"onClick",desc:"第一次控件被渲染时触发"}]})),PropertyDescriptionTable.set("label",new PropertyDescription(YvBase,{props:[{name:"label",default:"",group:"common",desc:"标签内容",type:"string"},{name:"align",default:"left",group:"common",desc:"对齐方式",type:["left","right","center"]},{name:"disabled",default:!1,group:"common",desc:"是否禁用",type:"boolean"},{name:"width",default:100,group:"css",desc:"宽度",type:"number"},{name:"gravity",default:1,group:"css",desc:"占位权重",type:"number"},{name:"tooltip",default:"",group:"common",desc:"悬停提示",type:"string"}]})),PropertyDescriptionTable.set("tree",new PropertyDescription(YvDataSource$1,YvBase,{props:[{name:"showCheckbox",default:!1,group:"common",desc:"显示勾选",type:"boolean"},{name:"showLeftIcon",default:!0,group:"common",desc:"显示左侧图标",type:"boolean"},{name:"showIcon",default:!0,group:"common",desc:"显示图标",type:"boolean"}],events:[{name:"onNodeClick",desc:"节点被点击后触发"},{name:"onNodeDblClick",desc:"节点被双击后触发"}]}));var UserComponentBase=function(){};exports.BaseDialog=BaseDialog,exports.BaseModule=BaseModule,exports.BizModule=BizModule,exports.CtlButton=CtlButton,exports.CtlCarousel=CtlCarousel,exports.CtlCheckBox=CtlCheckBox,exports.CtlCodeMirror=CtlCodeMirror,exports.CtlCombo=CtlCombo,exports.CtlDataview=CtlDataview,exports.CtlDatePicker=CtlDatePicker,exports.CtlDateRangePicker=CtlDateRangePicker,exports.CtlECharts=CtlECharts,exports.CtlForm=CtlForm,exports.CtlGrid=CtlGrid,exports.CtlMultiCombo=CtlMultiCombo,exports.CtlNumber=CtlNumber,exports.CtlRadio=CtlRadio,exports.CtlSearch=CtlSearch,exports.CtlSwitch=CtlSwitch,exports.CtlTab=CtlTab,exports.CtlText=CtlText,exports.CtlTree=CtlTree,exports.CtlTreeTable=CtlTreeTable,exports.PropertyDescription=PropertyDescription,exports.PropertyDescriptionTable=PropertyDescriptionTable,exports.UserComponent=UserComponent,exports.UserComponentBase=UserComponentBase,exports.Watch=Watch,exports.YvEventDispatch=YvEventDispatch,exports.alert=alert,exports.camelCase=camelCase,exports.clearLoading=clearLoading,exports.complexValid=complexValid,exports.componentFactory=componentFactory,exports.confirm=confirm,exports.createAjax=createAjax,exports.createDb=createDb,exports.dbs=dbs,exports.deepTravVJson=deepTravVJson,exports.deletVjsonById=deletVjsonById,exports.dict=dict,exports.downLoad=downLoad,exports.error=error,exports.extend=extend,exports.formatter=formatter,exports.getCurrentVjson=getCurrentVjson,exports.getQueryString=getQueryString,exports.getSuperVjson=getSuperVjson,exports.getTS=getTS,exports.getTSDemo=getTSDemo,exports.getTSDemo2=getTSDemo2,exports.initDesign=initDesign,exports.invokeApi=invokeApi,exports.isDesignMode=isDesignMode,exports.loading=loading,exports.msg=msg,exports.msgError=msgError,exports.msgInfo=msgInfo,exports.msgSuccess=msgSuccess,exports.param=param,exports.prompt=prompt,exports.render=render,exports.renderPlace=renderPlace,exports.snakeCase=snakeCase,exports.tsCodeGenerate=tsCodeGenerate,exports.tsCodeParse=tsCodeParse,exports.unparam=unparam,exports.validType=validType,exports.version=version,exports.viewExtend=viewExtend,exports.wrapperWebixConfig=wrapperWebixConfig,Object.defineProperty(exports,"__esModule",{value:!0})}));
//# sourceMappingURL=yvan-ui.min.js.map
