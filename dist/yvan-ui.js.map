{"version":3,"file":"yvan-ui.js","sources":["../src/YvanEvent.ts","../src/DesignHelper.ts","../src/CtlBase.ts","../src/CtlUtils.ts","../src/YvanUIExtend.ts","../src/Service.ts","../src/YvanDataSourceImp.ts","../src/CtlDefaultValue.ts","../src/Utils.ts","../src/CtlTree.ts","../src/CtlTreeTable.ts","../src/CtlContextMenu.ts","../src/CtlTab.ts","../src/CtlDataview.ts","../src/CtlButton.ts","../src/YvanUIMessage.ts","../src/form/input/CtlInput.ts","../src/form/input/CtlText.ts","../src/form/other/CtlCheckBox.ts","../src/form/select/CtlCombo.ts","../src/form/input/CtlDatePicker.ts","../src/form/input/CtlDateRangePicker.ts","../src/form/CtlForm.ts","../src/form/select/CtlMultiCombo.ts","../src/form/input/CtlSearch.ts","../src/CtlCarousel.ts","../src/CtlGridLocale.ts","../src/CtlGridPage.ts","../src/CtlGridIdRender.ts","../src/CtlGridDefault.ts","../src/CtlGridCellCheckbox.ts","../src/CtlGridHeadCheckbox.ts","../src/YvanDataSourceGridImp.ts","../src/CtlGridCellButton.ts","../src/CtlGridFilterSet.ts","../src/CtlGridEditor.ts","../src/CtlGridEditorText.ts","../src/CtlGridEditorCombo.ts","../src/CtlGrid.ts","../src/form/other/CtlSwitch.ts","../src/form/input/CtlNumber.ts","../src/form/other/CtlRadio.ts","../src/CtlCodeMirror.ts","../src/CtlSidebar.ts","../src/CtlXterm.ts","../src/CtlConsoleLog.ts","../src/YvanRender.ts","../src/YvanUIAjax.ts","../src/YvanUIDb.ts","../src/YvanUIUtils.ts","../src/YvanUIModule.ts","../src/YvanUICode.ts","../src/PropertyDescription.ts","../src/PropertyDescriptionTable.ts","../src/CtlECharts.ts","../src/UserComponent.ts"],"sourcesContent":["export type YvEvent<SENDER, T> =\r\n  | EventBindFunction\r\n  | EventBindCommon\r\n  | EventBindSystem\r\n  | EventBindDialog\r\n  | EventFunction<SENDER, T>\r\n\r\nexport interface EventBindFunction {\r\n  type: 'function'\r\n  bind: string\r\n}\r\n\r\nexport interface EventBindCommon {\r\n  type: 'common'\r\n  bind: string\r\n}\r\n\r\nexport interface EventBindSystem {\r\n  type: 'system'\r\n  bind: string\r\n}\r\n\r\nexport interface EventBindDialog {\r\n  type: 'dialog'\r\n  dialogId: string\r\n}\r\n\r\nexport type EventFunction<SENDER, ARGS> = (sender: SENDER, args: ARGS) => void\r\n\r\nexport function YvEventDispatch<T, ARGS>(\r\n  event: YvEvent<T, any> | undefined,\r\n  sender: T,\r\n  args: ARGS,\r\n  scope?: any\r\n) {\r\n  if (!event) {\r\n    // 事件没定义\r\n    return\r\n  }\r\n\r\n  const ctl: any = sender\r\n  const vue = _.isUndefined(scope) ? ctl._webix.$scope : scope\r\n\r\n  if (typeof event === 'function') {\r\n    // 事件本身就是方法\r\n    return event.call(vue, sender, args)\r\n  }\r\n\r\n  if (event.type === 'function') {\r\n    const targetFunc = _.get(vue, event.bind)\r\n    if (typeof targetFunc !== 'function') {\r\n      console.error(`模块没有 ${event.bind} 函数`)\r\n      return\r\n    }\r\n\r\n    return targetFunc.apply(vue, [sender, args])\r\n  }\r\n}\r\n","let designMode = false;\r\n\r\nexport function initDesign(): void {\r\n    designMode = true;\r\n}\r\n\r\nexport function isDesignMode(): boolean {\r\n    return designMode;\r\n}\r\n","import { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { BaseModule } from './YvanUIModule'\r\nimport { isDesignMode } from './DesignHelper'\r\nimport webix from 'webix'\r\n\r\nexport abstract class CtlBase<T> {\r\n  /**\r\n   * 渲染时触发\r\n   */\r\n  public onRender?: YvEvent<CtlBase<T>, void>\r\n\r\n  /**\r\n   * 实体类属性\r\n   */\r\n  public entityName?: string\r\n\r\n  /**\r\n   * 控件名\r\n   */\r\n  public ctlName?: string\r\n\r\n  /**\r\n   * 最初始时候的 json\r\n   */\r\n  public vjson: any\r\n\r\n  /**\r\n   * 定焦时间\r\n   */\r\n  public ff: number = 0\r\n\r\n  /**\r\n   * webix API\r\n   * webix.ui 渲染完毕之后，webix对象就存放在这里\r\n   */\r\n  protected _webix: any\r\n\r\n  /**\r\n   * 控件所在的用户模块\r\n   */\r\n  protected _module!: BaseModule<any, any, any>\r\n\r\n  /**\r\n   * 为 entityName 进行 watch 的解绑函数\r\n   */\r\n  private _entityWatch?: Function\r\n\r\n  /**\r\n   * 在 webix 还没有初始化 (webix.ui) 的时候\r\n   * 设置的属性就临时存放在这里. 最终会作为 webix 的属性来渲染\r\n   */\r\n  protected _webixConfig: any\r\n\r\n  constructor(vjson: any) {\r\n    this.vjson = _.cloneDeep(vjson)\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 强制组件获得焦点\r\n   */\r\n  public focus(): void {\r\n    if (!this._webix) {\r\n      return\r\n    }\r\n    this._webix.focus()\r\n  }\r\n\r\n  /**\r\n   * 设置正在读取中的状态\r\n   */\r\n  set loading(nv: boolean) {\r\n    if (nv) {\r\n      webix.extend(this._webix, webix.OverlayBox)\r\n      //this._webix.showOverlay(\"<div style='...'>There is no data</div>\");\r\n      this._webix.showOverlay('Loading...')\r\n    } else {\r\n      this._webix.hideOverlay()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取模块\r\n   */\r\n  public getModule() {\r\n    return this._module\r\n  }\r\n\r\n  /**\r\n   * 组件被渲染后触发\r\n   */\r\n  protected attachHandle(webixHandler: any, vjson: any) {\r\n    this._webix = webixHandler\r\n    this._module = this._webix.$scope\r\n\r\n    YvEventDispatch(this.onRender, this, undefined)\r\n    this.refreshState()\r\n\r\n    if (_.has(vjson, 'entityName')) {\r\n      _.set(this._module, '_entityCtlMapping.' + vjson['entityName'], this)\r\n    }\r\n  }\r\n\r\n  protected getCtlElements(element: any) {\r\n    let entityArray: any[] = []\r\n    if (_.isArray(element)) {\r\n      element.forEach((item: any) => {\r\n        entityArray = _.union(entityArray, this.getCtlElements(item))\r\n      })\r\n    }\r\n    else if (_.isObject(element)) {\r\n      if (element.hasOwnProperty(\"view\")) {\r\n        let items = _.get(element, \"view\");\r\n        entityArray = _.union(entityArray, [items]);\r\n      }\r\n      if (element.hasOwnProperty(\"rows\")) {\r\n        let items = _.get(element, \"rows\");\r\n        items.forEach((item: any) => {\r\n          entityArray = _.union(entityArray, this.getCtlElements(item))\r\n        });\r\n      }\r\n      else if (element.hasOwnProperty(\"cols\")) {\r\n        let items = _.get(element, \"cols\");\r\n        items.forEach((item: any) => {\r\n          entityArray = _.union(entityArray, this.getCtlElements(item))\r\n        });\r\n      }\r\n      else if (element.hasOwnProperty(\"elements\")) {\r\n        let items = _.get(element, \"elements\");\r\n        items.forEach((item: any) => {\r\n          entityArray = _.union(entityArray, this.getCtlElements(item))\r\n        });\r\n      }\r\n      else if (element.hasOwnProperty(\"body\")) {\r\n        let item = _.get(element, \"body\");\r\n        entityArray = _.union(entityArray, this.getCtlElements(item))\r\n      }\r\n    }\r\n    return entityArray;\r\n  }\r\n\r\n  /**\r\n   * 组件被移除后触发\r\n   */\r\n  protected removeHandle() {\r\n    const d = this._webix\r\n    if (!d) {\r\n      return\r\n    }\r\n\r\n    this._webix = undefined\r\n    if (d) {\r\n      d.destructor()\r\n    }\r\n    this.refreshState()\r\n  }\r\n\r\n  /**\r\n   * 控件 value 值发生变化后，设置 entityName 对应的值\r\n   */\r\n  protected changeToEntity(value: any) {\r\n    if (this.entityName) {\r\n      // 带 entityName 实体绑定\r\n      _.set(this._module, this.entityName, value)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * vue 或 webix 组件被设置后触发\r\n   */\r\n  protected refreshState() {\r\n    if (isDesignMode()) {\r\n      return\r\n    }\r\n    if (this._webix) {\r\n      /* ================================ 安装 ================================ */\r\n      if (this.ctlName) {\r\n        // 带 ctlName 控件属性\r\n        this._module.refs[this.ctlName] = this\r\n      }\r\n\r\n      if (this.entityName) {\r\n        // 带 entityName 实体绑定\r\n        this._entityWatch = this._module.$watch(\r\n          this.entityName,\r\n          (nv: any, ov: any) => {\r\n            _.set(this, 'value', nv)\r\n          },\r\n          { immediate: true }\r\n        )\r\n      }\r\n\r\n      return\r\n    }\r\n\r\n    /* ================================ 卸载 ================================ */\r\n    if (this.ctlName) {\r\n      // 删除控件\r\n      if (this._module) {\r\n        delete this._module.refs[this.ctlName]\r\n      }\r\n    }\r\n\r\n    if (this._entityWatch) {\r\n      // 解除绑定\r\n      this._entityWatch()\r\n      delete this._entityWatch\r\n    }\r\n\r\n    delete this._module\r\n  }\r\n\r\n  /**\r\n   * 设置隐藏\r\n   */\r\n  set hidden(nv: boolean) {\r\n    this._webixConfig.hidden = nv\r\n    if (!this._webix) {\r\n      return\r\n    }\r\n\r\n    if (nv) {\r\n      this._webix.hide()\r\n    } else {\r\n      this._webix.show()\r\n    }\r\n  }\r\n\r\n  get hidden(): boolean {\r\n    return this._webixConfig.hidden\r\n  }\r\n}\r\n","/**\r\n * 内部函数\r\n * 将 vjson 中，属于 yvanui 的属性从 vjson 中删掉。\r\n * 并返回 yvanProp 属性\r\n */\r\nexport function parseYvanPropChangeVJson(vjson: any, names: string[]): any {\r\n\r\n    const yvanProp: any = {};\r\n\r\n    _.forEach([\r\n        ...names,\r\n        'debugger',\r\n        'ctlName',\r\n        'entityName',\r\n        'onRender'\r\n\r\n    ], name => {\r\n        if (_.has(vjson, name)) {\r\n            yvanProp[name] = vjson[name];\r\n            delete vjson[name]\r\n        }\r\n    });\r\n\r\n    return yvanProp\r\n}\r\n","import { Ajax } from './YvanUIAjax';\r\nimport { Db } from './YvanUIDb';\r\n\r\nexport type FormatterFunction = (id: string) => string;\r\n\r\nexport type ValidFunction = (value: string) => string | ValidFunction | undefined;\r\n\r\nexport type ComplexValidFunction = (valid: string, value: string) => string | undefined;\r\n\r\nexport interface DictItem {\r\n    id: string;\r\n    text: string;\r\n\r\n    [id: string]: string;\r\n}\r\n\r\nexport type Dict = DictItem[];\r\n\r\n/**\r\n * YvanUI 全局扩展配置\r\n */\r\nexport interface ExtendOption {\r\n    /**\r\n     * 扩展自定义的 ajax 方法\r\n     */\r\n    ajax: Ajax.Function;\r\n\r\n    /**\r\n     * serverJS 请求前缀\r\n     */\r\n    serverJsPrefix: string;\r\n\r\n    /**\r\n     * 扩展自定义的数据库\r\n     */\r\n    dbs: { [db: string]: Db.Client };\r\n\r\n    /**\r\n     * 扩展全局 formatter 函数\r\n     */\r\n    formatter: { [db: string]: FormatterFunction };\r\n\r\n    /**\r\n     * 扩展全局 dict 字典\r\n     */\r\n    dict: { [dictName: string]: Dict };\r\n\r\n    /**\r\n     * 扩展全局 校验方法\r\n     */\r\n    validType: { [validName: string]: ValidFunction };\r\n\r\n    /**\r\n     * 复杂校验通用方法\r\n     */\r\n    complexValid: { [validName: string]: ComplexValidFunction };\r\n\r\n    /**\r\n     * 组件渲染过滤器, 如果方法返回 false 代表该组件不需要被渲染.\r\n     * 可以修改 vjson 的内容，但不能删除他\r\n     */\r\n    componentRenderFilter: (vjson: any) => undefined | boolean\r\n}\r\n\r\nexport const version = \"3.0.2\"\r\n\r\n/**\r\n * 全局 ajax 方法\r\n */\r\nexport let ajax: Ajax.Function;\r\n\r\n/**\r\n * 全局 数据库连接\r\n */\r\nexport const dbs: { [db: string]: Db.Client } = {};\r\n\r\n/**\r\n * 全局 formatter 函数\r\n */\r\nexport const formatter: { [db: string]: FormatterFunction } = {};\r\n\r\n/**\r\n * 全局 dict 字典\r\n */\r\nexport const dict: { [dictName: string]: Dict } = {};\r\n\r\n/**\r\n * 全局 校验方法\r\n */\r\nexport const validType: { [validName: string]: ValidFunction } = {};\r\n\r\n/**\r\n * 复杂校验通用方法\r\n */\r\nexport const complexValid: { [validName: string]: ComplexValidFunction } = {};\r\n\r\n/**\r\n * 组件渲染过滤器, 如果方法返回 false 代表该组件不需要被渲染.\r\n * 可以修改 vjson 的内容，但不能删除他\r\n */\r\nexport let componentRenderFilter: (undefined | ((vjson: any) => undefined | boolean)) = undefined;\r\n\r\nexport function getServerPrefix(url: string) {\r\n    return _.get(window, '_YvanUI_serverJSPrefix') + url;\r\n}\r\n\r\n/**\r\n * YvanUI 全局扩展配置\r\n * @param option 配置信息\r\n */\r\nexport function extend(option: Partial<ExtendOption>) {\r\n    if (option.ajax) {\r\n        ajax = option.ajax\r\n    }\r\n\r\n    if (option.serverJsPrefix) {\r\n        _.extend(window, { _YvanUI_serverJSPrefix: option.serverJsPrefix });\r\n    }\r\n\r\n    if (option.dbs) {\r\n        _.extend(dbs, option.dbs);\r\n    }\r\n\r\n    if (option.dict) {\r\n        _.extend(dict, option.dict);\r\n    }\r\n\r\n    if (option.validType) {\r\n        _.extend(validType, option.validType);\r\n    }\r\n\r\n    if (option.formatter) {\r\n        _.extend(formatter, option.formatter);\r\n    }\r\n\r\n    if (option.complexValid) {\r\n        _.extend(complexValid, option.complexValid);\r\n    }\r\n\r\n    if (option.componentRenderFilter) {\r\n        componentRenderFilter = option.componentRenderFilter\r\n    }\r\n}\r\n","import 'reflect-metadata';\r\nimport { Ajax } from './YvanUIAjax';\r\n\r\n/**\r\n * 提取返回值类型\r\n */\r\nexport type RType<T> = T extends (...args: any[]) => infer R ? R : any\r\n\r\n/**\r\n * 提取返回值\r\n */\r\nexport type PType<T> = T extends (...args: infer P) => any ? P : never\r\n\r\n/**\r\n * 服务代理包装类型\r\n */\r\nexport type Broker<T> = {\r\n    [KEY in keyof T]: T[KEY] extends Function ? (...args: PType<T[KEY]>) => Promise<RType<T[KEY]>> : never\r\n}\r\n\r\n/**\r\n * 服务调用\r\n */\r\nexport function brokerInvoke(serverUrl: string, method: string, args: any): Promise<any> {\r\n    return new Promise((resolve,reject) => {\r\n        const ajax: Ajax.Function = _.get(window, 'YvanUI.ajax');\r\n\r\n        ajax({\r\n            url: serverUrl + '@' + method,\r\n            method: 'POST-JSON',\r\n            data: args\r\n\r\n        }).then(res => {\r\n            resolve(res);\r\n            \r\n        }).catch(e=>{\r\n            reject(e);\r\n        });\r\n    })\r\n}\r\n\r\n/**\r\n * 创建服务代理\r\n */\r\nexport function createBroker<T extends new (...args: any) => any>(serviceType: T): Broker<InstanceType<T>> {\r\n\r\n    const serviceProxy: any = serviceType;\r\n    const result = {};\r\n    // 具体参见 com.yvan.serverless.ServerLessServlet@doGet\r\n    _.each(serviceProxy.funcs, fun => {\r\n        _.set(result, fun, function () {\r\n            return brokerInvoke(serviceProxy.invokeUrl, fun, {\r\n                args: Array.prototype.slice.call(arguments)\r\n            });\r\n        });\r\n    });\r\n\r\n    return <Broker<InstanceType<T>>>result;\r\n}","import { DataSource, DataSourceStaticFunction, DataSourceDb, DataSourceServer, DataSourceProcessFunction } from './YvanDataSource'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport * as YvanUI from './YvanUIExtend'\r\nimport { isDesignMode } from './DesignHelper'\r\nimport { brokerInvoke } from './Service'\r\nimport { Db } from './YvanUIDb'\r\n\r\nexport class YvDataSource<T> {\r\n  private readonly module: any\r\n  private option: DataSource<T>\r\n  private dataSourceProcess?: DataSourceProcessFunction\r\n  private ctl: any\r\n  private watches: Function[] = []\r\n  public reload: undefined | (() => void)\r\n\r\n  customFunctionModeDebounce = _.debounce((option: DataSourceStaticFunction<T>) => {\r\n    const that = this\r\n\r\n    that.ctl.loading = true\r\n    option.call(that.module, that.ctl, {\r\n      successCallback(data: any[]) {\r\n        if (that.dataSourceProcess) {\r\n          //自定义的数据处理过程\r\n          that.ctl.dataReal = that.dataSourceProcess(data)\r\n        } else {\r\n          that.ctl.dataReal = data\r\n        }\r\n\r\n        that.ctl.loading = false\r\n        YvEventDispatch(that.ctl.onDataComplete, that.ctl, undefined)\r\n\r\n      },\r\n      failCallback() {\r\n        that.ctl.dataReal = []\r\n        that.ctl.loading = false\r\n        YvEventDispatch(that.ctl.onDataComplete, that.ctl, undefined)\r\n      }\r\n    })\r\n  });\r\n\r\n  sqlModeDebounce = _.debounce((option: DataSourceDb<T> | DataSourceServer<T>) => {\r\n    const that = this\r\n\r\n    let ajaxPromise: Promise<Db.Response>;\r\n    if (option.type === 'SQL') {\r\n      const ajaxParam = {\r\n        params: option.params,\r\n        needCount: false,\r\n        sqlId: option.sqlId\r\n      }\r\n      const allow = YvEventDispatch(option.onBefore, that.ctl, ajaxParam)\r\n      if (allow === false) {\r\n        // 不允许请求\r\n        return;\r\n      }\r\n      ajaxPromise = YvanUI.dbs[option.db].query(ajaxParam)\r\n\r\n    } else if (option.type === 'Server') {\r\n      const [serverUrl, method] = _.split(option.method, '@');\r\n      const ajaxParam = {\r\n        params: option.params,\r\n        needCount: false,\r\n      }\r\n      const allow = YvEventDispatch(option.onBefore, that.ctl, ajaxParam)\r\n      if (allow === false) {\r\n        // 不允许请求\r\n        return;\r\n      }\r\n      ajaxPromise = <Promise<Db.Response>>brokerInvoke(YvanUI.getServerPrefix(serverUrl), method, ajaxParam)\r\n\r\n    } else {\r\n      console.error('unSupport dataSource mode:', option);\r\n      that.ctl.dataReal = []\r\n      that.ctl.loading = false\r\n      return;\r\n    }\r\n\r\n    //异步请求数据内容\r\n    that.ctl.loading = true\r\n    ajaxPromise.then(res => {\r\n      YvEventDispatch(option.onAfter, that.ctl, res)\r\n      const { data: resultData, params: resParams } = res\r\n\r\n      if (this.dataSourceProcess) {\r\n        //自定义的数据处理过程\r\n        that.ctl.dataReal = this.dataSourceProcess(resultData)\r\n      } else {\r\n        that.ctl.dataReal = resultData\r\n      }\r\n      YvEventDispatch(that.ctl.onDataComplete, that.ctl, undefined)\r\n\r\n    }).catch(r => {\r\n      that.ctl.dataReal = []\r\n\r\n    }).finally(() => {\r\n      that.ctl.loading = false\r\n\r\n    })\r\n  });\r\n\r\n  /**\r\n   * 自定义函数式取值\r\n   */\r\n  setCustomFunctionMode(option: DataSourceStaticFunction<T>) {\r\n    const that = this\r\n    this.reload = () => {\r\n      that.customFunctionModeDebounce(option)\r\n    }\r\n    this.reload()\r\n  }\r\n\r\n  /**\r\n   * SQL取值\r\n   */\r\n  setSqlMode(option: DataSourceDb<T> | DataSourceServer<T>) {\r\n    const that = this\r\n    this.reload = () => {\r\n      that.sqlModeDebounce(option)\r\n    }\r\n    this.reload()\r\n  }\r\n\r\n  constructor(ctl: any, option: DataSource<T>, dataSourceProcess?: DataSourceProcessFunction) {\r\n    if (isDesignMode()) {\r\n      return\r\n    }\r\n    this.ctl = ctl\r\n    this.option = option\r\n    this.dataSourceProcess = dataSourceProcess\r\n    this.module = ctl._webix.$scope\r\n  }\r\n\r\n  public init() {\r\n    if (!this.option) {\r\n      //没有设值，退出\r\n      this.reload = undefined\r\n      return\r\n    }\r\n\r\n    if (typeof this.option === 'function') {\r\n      //以 function 方式运行\r\n      this.setCustomFunctionMode(this.option)\r\n      return\r\n    }\r\n\r\n    if (_.isArray(this.option)) {\r\n      //结果就是数组\r\n      this.reload = () => {\r\n        this.ctl.dataReal = this.option\r\n        this.ctl.$yvDispatch(this.ctl.onDataComplete)\r\n      }\r\n      this.reload()\r\n      return\r\n    }\r\n\r\n    // 使 watch 生效\r\n    _.each(this.option.watch, watchExp => {\r\n      const unwatch = this.module.$watch(watchExp, () => {\r\n        if (this.reload) {\r\n          this.reload()\r\n        }\r\n      })\r\n      this.watches.push(unwatch)\r\n    })\r\n\r\n    if (this.option.type === 'function') {\r\n      // 取 bind 函数\r\n      if (typeof this.option.bind === 'function') {\r\n        this.setCustomFunctionMode(this.option.bind)\r\n      } else {\r\n        const bindFunction: DataSourceStaticFunction<T> = _.get(\r\n          this.module,\r\n          this.option.bind\r\n        ) as DataSourceStaticFunction<T>\r\n        if (!bindFunction) {\r\n          console.error(`没有找到名称为 ${this.option.bind} 的方法`)\r\n          return\r\n        }\r\n        this.setCustomFunctionMode(bindFunction)\r\n      }\r\n    } else if (this.option.type === 'SQL' || this.option.type === 'Server') {\r\n      this.setSqlMode(this.option)\r\n    } else {\r\n      console.error(`其他方式没有实现`)\r\n    }\r\n  }\r\n\r\n  destory() {\r\n    // 解除全部 watch\r\n    _.each(this.watches, unwatch => {\r\n      unwatch()\r\n    })\r\n    this.reload = undefined\r\n    this.ctl.dataReal = []\r\n  }\r\n}\r\n","export const CtlButtonDefault: any = {\r\n    text: '',\r\n    icon: '',\r\n    // width: 120,\r\n    type: 'text',\r\n    autowidth: true,\r\n    // cssType: 'primary'\r\n};\r\n\r\nexport const CtlDataviewDefault: any = {};\r\n\r\nexport const CtlTreeDefault: any = {\r\n    showCheckbox: false,\r\n    showLeftIcon: true,\r\n    showIcon: true,\r\n};\r\n\r\nexport const CtlSidebarDefault: any = {\r\n\r\n}\r\n\r\nexport const CtlXtermDefault: any = {\r\n\r\n}\r\n\r\nexport const CtlConsoleLogDefault: any = {\r\n\r\n}\r\n\r\nexport const CtlCodeMirrorDefault = {\r\n    mode: 'sql',\r\n    indentWithTabs: true,\r\n    smartIndent: true,\r\n    lineNumbers: true,\r\n    matchBrackets: true,\r\n    autofocus: true,\r\n    extraKeys: { \"Ctrl-Space\": \"autocomplete\" },\r\n    hintOptions: {\r\n        tables: {\r\n            users: [\"name\", \"score\", \"birthDate\"],\r\n            countries: [\"name\", \"population\", \"size\"]\r\n        }\r\n    }\r\n};\r\n\r\nconst CtlInputDefault: any = {\r\n    labelWidth: 110,\r\n    labelAlign: 'right',\r\n    // width: 250,\r\n    prompt: '请输入'\r\n};\r\n\r\nexport const CtlTextDefault: any = {\r\n    ...CtlInputDefault\r\n};\r\n\r\nexport const CtlNumberDefault: any = {\r\n    ...CtlInputDefault,\r\n    precision: 0,\r\n};\r\n\r\nexport const CtlDateDefault: any = {\r\n    ...CtlInputDefault,\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlDateTimeDefault: any = {\r\n    ...CtlInputDefault,\r\n    //width: 300,\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlDateRangeDefault: any = {\r\n    ...CtlInputDefault,\r\n    //width: 430,\r\n    separator: ' 至 ',\r\n    prompt: '请选择日期范围'\r\n};\r\n\r\nexport const CtlDateTimeRangeDefault: any = {\r\n    ...CtlInputDefault,\r\n    //width: 430,\r\n    separator: ' 至 ',\r\n    prompt: '请选择时间范围'\r\n};\r\n\r\nexport const CtlComboDefault: any = {\r\n    ...CtlInputDefault,\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlMultiComboDefault: any = {\r\n    ...CtlInputDefault,\r\n    separator: ',',\r\n    prompt: '请选择'\r\n};\r\n\r\nexport const CtlSearchDefault: any = {\r\n    ...CtlInputDefault,\r\n    prompt: '回车键查询'\r\n};\r\n\r\n\r\nexport const CtlCheckboxDefault: any = {\r\n    // labelWidth: 110,\r\n    labelAlign: 'right',\r\n    checkValue: 'T',\r\n    uncheckValue: 'F'\r\n};\r\n\r\nexport const CtlSwitchDefault: any = {\r\n    // labelWidth: 110,\r\n    labelAlign: 'right',\r\n    checkValue: 'T',\r\n    uncheckValue: 'F'\r\n};\r\n\r\nexport const CtlRadioDefault: any = {\r\n    labelWidth: 110,\r\n    labelAlign: 'right',\r\n};\r\n","export function getFirstPinyin(msg: string): string {\r\n    return _.get(window, 'getFirstPinyin')(msg);\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvDataSource } from './YvanDataSourceImp'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { DataSource } from './YvanDataSource'\r\nimport { CtlTreeDefault } from './CtlDefaultValue'\r\nimport { getFirstPinyin } from './Utils'\r\n\r\nexport class CtlTree extends CtlBase<CtlTree> {\r\n  static create(module: any, vjson: any): CtlTree {\r\n    const that = new CtlTree(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlTreeDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      // 'data',\r\n      'dataSource',\r\n      'onNodeClick',\r\n      'onNodeDblClick',\r\n      'onDataComplete',\r\n      'showCheckbox',\r\n      'showLeftIcon',\r\n      'showIcon'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      select: true,\r\n      filterMode: {\r\n        showSubItems: false\r\n      },\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeClick, that, item)\r\n        },\r\n        onItemDblClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeDblClick, that, item)\r\n        }\r\n      },\r\n      template: function (obj: any, common: any) {\r\n        let t = ''\r\n        if (that.showCheckbox) {\r\n          t += common.checkbox(obj, common)\r\n        }\r\n        if (that.showIcon) {\r\n          t += common.folder(obj, common)\r\n        }\r\n        if (that.showLeftIcon) {\r\n          t += common.icon(obj, common)\r\n        }\r\n        t += obj.value\r\n        return t\r\n      },\r\n      // 树的左侧图标\r\n      type: {\r\n        folder: function (obj: any) {\r\n          if (obj.icon) {\r\n            return (\r\n              \"<span style='padding-left: 5px; padding-right: 5px; color: #5fa2dd; font-size: 16px' class='\" +\r\n              obj.icon +\r\n              \"'></span>\"\r\n            )\r\n          }\r\n          return ''\r\n        }\r\n      }\r\n    })\r\n\r\n    if (vjson.threeState !== false && that.showCheckbox) {\r\n      vjson.threeState = true;\r\n    } else {\r\n      vjson.threeState = false;\r\n    }\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 拼音方式过滤查找树\r\n   */\r\n  filter(nv: string) {\r\n    if (!nv) {\r\n      this._webix.filter('')\r\n      return\r\n    }\r\n\r\n    this._webix.filter((node: any) => {\r\n      const value = node.value\r\n      const nodePy = getFirstPinyin(value).toLowerCase()\r\n      return nodePy.indexOf(nv.toLowerCase()) >= 0 || value.toLowerCase().indexOf(nv) >= 0\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 树上的数据\r\n   */\r\n  data?: any[]\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onNodeClick?: YvEvent<CtlTree, any>\r\n\r\n  /**\r\n   * 树节点被双击后触发\r\n   */\r\n  onNodeDblClick?: YvEvent<CtlTree, any>\r\n\r\n  /**\r\n   * 数据绑定完成后触发\r\n   */\r\n  onDataComplete?: YvEvent<CtlTree, any>\r\n\r\n  /**\r\n   * 显示勾选框\r\n   */\r\n  showCheckbox: boolean = false\r\n\r\n  /**\r\n   * 显示左侧展开图标\r\n   */\r\n  showLeftIcon: boolean = true\r\n\r\n  /**\r\n   * 显示图标\r\n   */\r\n  showIcon: boolean = true\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 设置数据\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    // dataSource call back\r\n    this._webix.clearAll()\r\n    this._webix.parse(nv)\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlTree> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlTree>) {\r\n    this._dataSource = nv\r\n    if (this._module.loadFinished) {\r\n      // onLoad 之后会触发 view.onInited -> attachHandle -> refreshState -> _rebindDataSource\r\n      // onLoad 之前都不需要主动触发 _rebindDataSource\r\n      this._rebindDataSource()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取第一个节点\r\n   */\r\n  public getFirstId(): any {\r\n    return this._webix.getFirstId()\r\n  }\r\n\r\n  /**\r\n   * 展开某个节点\r\n   */\r\n  public open(id: any) {\r\n    this._webix.open(id)\r\n  }\r\n\r\n  /**\r\n   * 清空所有数据\r\n   */\r\n  public clear() {\r\n    this._webix.clearAll()\r\n  }\r\n\r\n  /**\r\n   * 选择所有节点\r\n   */\r\n  public checkAll() {\r\n    this._webix.checkAll()\r\n  }\r\n\r\n  /**\r\n   * 取消选择所有节点\r\n   */\r\n  public uncheckAll() {\r\n    this._webix.uncheckAll()\r\n  }\r\n\r\n  /**\r\n   * 根据id获取一行数据\r\n   */\r\n  public getItem(id: any) {\r\n    return this._webix.getItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取某 id 下树节点所有的子节点\r\n   */\r\n  public getChildItems(id: any): any[] {\r\n    const ret = []\r\n    let c = this._webix.getFirstChildId(id)\r\n    while (c) {\r\n      ret.push(this._webix.getItem(c))\r\n      c = this._webix.getNextSiblingId(c)\r\n    }\r\n    return ret\r\n  }\r\n\r\n  /**\r\n   * 获取某 id 下树节点所有的子节点的编号\r\n   */\r\n  public getChildIds(id: any): any[] {\r\n    const ret = []\r\n    let c = this._webix.getFirstChildId(id)\r\n    while (c) {\r\n      ret.push(c)\r\n      c = this._webix.getNextSiblingId(c)\r\n    }\r\n    return ret\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的一行编号\r\n   */\r\n  public getSelectedId(): any {\r\n    return this._webix.getSelectedId()\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的一行\r\n   */\r\n  public getSelectedItem(): any {\r\n    return this._webix.getSelectedItem()\r\n  }\r\n\r\n  /**\r\n   * 勾选选中一行\r\n   */\r\n  public checkItem(id: any) {\r\n    this._webix.checkItem(id)\r\n  }\r\n\r\n  /**\r\n   * 选中一行\r\n   * @param id\r\n   */\r\n  public select(id: any) {\r\n    // this._webix.showItem(id);\r\n    let pid = id\r\n    while (pid) {\r\n      this._webix.open(pid)\r\n      pid = this._webix.getParentId(pid)\r\n    }\r\n\r\n    this._webix.select(id)\r\n  }\r\n\r\n  /**\r\n   * 选中多行\r\n   */\r\n  public checkItems(ids: any[]) {\r\n    for (let id of ids) {\r\n      this._webix.checkItem(id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消选中一行\r\n   */\r\n  public uncheckItem(id: any) {\r\n    this._webix.uncheckItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取选中的ID 数组\r\n   */\r\n  public getCheckedIds() {\r\n    return this._webix.getChecked()\r\n  }\r\n\r\n  /**\r\n   * 获取选中的行数组\r\n   */\r\n  public getCheckedItems() {\r\n    return _.map(this._webix.getChecked(), v => this._webix.getItem(v))\r\n  }\r\n\r\n  /**\r\n   * 查看是否被选中\r\n   */\r\n  public isChecked(id: any) {\r\n    return this._webix.isChecked(id)\r\n  }\r\n\r\n  /**\r\n   * 展开全部节点\r\n   */\r\n  public expandAll() {\r\n    this._webix.openAll()\r\n  }\r\n\r\n  /**\r\n   * 收起所有节点\r\n   */\r\n  public collapseAll() {\r\n    this._webix.closeAll()\r\n  }\r\n\r\n  /**\r\n   * 递归查找每个节点, 直到寻找到想要的节点\r\n   */\r\n  public find(condition: (node: any) => boolean) {\r\n    return this._webix.find(condition);\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlTree>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlTree>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    const innerMethod = () => {\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind.destory()\r\n        this.dataSourceBind = undefined\r\n      }\r\n\r\n      if (this._webix && this._module) {\r\n        this.dataSourceBind = new YvDataSource(this, this.dataSource, this._dataSourceProcess.bind(this))\r\n        this.dataSourceBind.init()\r\n      }\r\n    }\r\n\r\n    if (!this._module.loadFinished) {\r\n      // onload 函数还没有执行（模块还没加载完）, 延迟调用 rebind\r\n      _.defer(innerMethod)\r\n\r\n    } else {\r\n      // 否则实时调用 rebind\r\n      innerMethod()\r\n    }\r\n  }\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (\r\n      !this.dataSource ||\r\n      _.isArray(this.dataSource) ||\r\n      _.isFunction(this.dataSource)\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL' && this.dataSource.type !== 'function') {\r\n      return data\r\n    }\r\n\r\n    if (\r\n      !this.dataSource.parentField ||\r\n      !this.dataSource.displayField ||\r\n      !this.dataSource.valueField\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    const idField = this.dataSource.valueField\r\n    const textField = this.dataSource.displayField\r\n    const parentField = this.dataSource.parentField\r\n\r\n    data = _.cloneDeep(data)\r\n\r\n    // 第一遍扫描, 建立映射关系\r\n    const nodeMap: any = {}\r\n    const rootNode = []\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      nodeMap[row[idField]] = {\r\n        icon: row['icon'],\r\n        value: row[textField],\r\n        id: row[idField],\r\n        disabled: _.get(row, 'disabled'),\r\n        row: row\r\n      }\r\n    }\r\n\r\n    // 第二遍扫描，建立父子关系\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      const parent = row[parentField]\r\n      const id = row[idField]\r\n\r\n      if (!parent || parent === '0') {\r\n        // 没有父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n      } else if (nodeMap.hasOwnProperty(parent)) {\r\n        //找到父亲\r\n        const parentNode = nodeMap[parent]\r\n        if (parentNode.hasOwnProperty('data')) {\r\n          parentNode.data.push(nodeMap[id])\r\n        } else {\r\n          parentNode.data = [nodeMap[id]]\r\n        }\r\n      } else {\r\n        // 没有找到父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n      }\r\n    }\r\n\r\n    return rootNode\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvDataSource } from './YvanDataSourceImp'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { DataSource } from './YvanDataSource'\r\n\r\nexport class CtlTreeTable extends CtlBase<CtlTreeTable> {\r\n  static create(module: any, vjson: any): CtlTreeTable {\r\n    const that = new CtlTreeTable(vjson)\r\n    that._module = module\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'data',\r\n      'dataSource',\r\n      'onNodeClick',\r\n      'onNodeDblClick',\r\n      'showCheckbox',\r\n      'showLeftIcon',\r\n      'showIcon'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeClick, that, item)\r\n        },\r\n        onItemDblClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeDblClick, that, item)\r\n        }\r\n      },\r\n      template: function (obj: any, common: any) {\r\n        let t = ''\r\n        if (that.showCheckbox) {\r\n          t += common.checkbox(obj, common)\r\n        }\r\n        if (that.showIcon) {\r\n          t += common.folder(obj, common)\r\n        }\r\n        if (that.showLeftIcon) {\r\n          t += common.icon(obj, common)\r\n        }\r\n        t += obj.value\r\n        return t\r\n      },\r\n      threeState: that.showCheckbox,\r\n      // 树的左侧图标\r\n      type: {\r\n        folder: function (obj: any) {\r\n          if (obj.icon) {\r\n            return (\r\n              \"<span style='padding-left: 5px; padding-right: 5px; color: #063978; font-size: 16px' class='\" +\r\n              obj.icon +\r\n              \"'></span>\"\r\n            )\r\n          }\r\n          return ''\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 树上的数据\r\n   */\r\n  data?: any[]\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onNodeClick?: YvEvent<CtlTreeTable, any>\r\n\r\n  /**\r\n   * 树节点被双击后触发\r\n   */\r\n  onNodeDblClick?: YvEvent<CtlTreeTable, any>\r\n\r\n  /**\r\n   * 显示勾选框\r\n   */\r\n  showCheckbox: boolean = false\r\n\r\n  /**\r\n   * 显示左侧展开图标\r\n   */\r\n  showLeftIcon: boolean = true\r\n\r\n  /**\r\n   * 显示图标\r\n   */\r\n  showIcon: boolean = true\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 设置数据\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    this._webix.clearAll()\r\n    this._webix.parse(nv)\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlTreeTable> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlTreeTable>) {\r\n    this._dataSource = nv\r\n    if (this._module.loadFinished) {\r\n      // onLoad 之后会触发 view.onInited -> attachHandle -> refreshState -> _rebindDataSource\r\n      // onLoad 之前都不需要主动触发 _rebindDataSource\r\n      this._rebindDataSource()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 清空所有数据\r\n   */\r\n  public clear() {\r\n    this._webix.clearAll()\r\n  }\r\n\r\n  /**\r\n   * 取消选择所有节点\r\n   */\r\n  public uncheckAll() {\r\n    this._webix.uncheckAll()\r\n  }\r\n\r\n  /**\r\n   * 根据id获取一行数据\r\n   */\r\n  public getItem(id: any) {\r\n    return this._webix.getItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取某 id 下树节点所有的子节点\r\n   */\r\n  public getChildItems(id: any): any[] {\r\n    const ret = []\r\n    let c = this._webix.getFirstChildId(id)\r\n    while (c) {\r\n      ret.push(this._webix.getItem(c))\r\n      c = this._webix.getNextSiblingId(c)\r\n    }\r\n    return ret\r\n  }\r\n\r\n  /**\r\n   * 获取某 id 下树节点所有的子节点的编号\r\n   */\r\n  public getChildIds(id: any): any[] {\r\n    const ret = []\r\n    let c = this._webix.getFirstChildId(id)\r\n    while (c) {\r\n      ret.push(c)\r\n      c = this._webix.getNextSiblingId(c)\r\n    }\r\n    return ret\r\n  }\r\n\r\n  /**\r\n   * 勾选选中一行\r\n   */\r\n  public checkItem(id: any) {\r\n    this._webix.checkItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的一行编号\r\n   */\r\n  public getSelectedId(): any {\r\n    return this._webix.getSelectedId()\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的一行\r\n   */\r\n  public getSelectedItem(): any {\r\n    return this._webix.getSelectedItem()\r\n  }\r\n\r\n  /**\r\n   * 选中一行\r\n   * @param id\r\n   */\r\n  public select(id: any) {\r\n    this._webix.showItem(id)\r\n    this._webix.select(id)\r\n  }\r\n\r\n  /**\r\n   * 选中多行\r\n   */\r\n  public checkItems(ids: any[]) {\r\n    for (let id of ids) {\r\n      this._webix.checkItem(id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消选中一行\r\n   */\r\n  public uncheckItem(id: any) {\r\n    this._webix.uncheckItem(id)\r\n  }\r\n\r\n  /**\r\n   * 获取选中的行\r\n   */\r\n  public getChecked() {\r\n    return this._webix.getChecked()\r\n  }\r\n\r\n  /**\r\n   * 查看是否被选中\r\n   */\r\n  public isChecked(id: any) {\r\n    return this._webix.isChecked(id)\r\n  }\r\n\r\n  /**\r\n   * 展开全部节点\r\n   */\r\n  public expandAll() {\r\n    this._webix.openAll()\r\n  }\r\n\r\n  /**\r\n   * 收起所有节点\r\n   */\r\n  public collapseAll() {\r\n    this._webix.closeAll()\r\n  }\r\n\r\n  /**\r\n   * 过滤, 如果不设置 condition 代表不过滤，否则带入过滤函数\r\n   */\r\n  public filter(condition?: (v: any) => boolean) {\r\n    this._webix.filter(condition)\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlTreeTable>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlTreeTable>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    const innerMethod = () => {\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind.destory()\r\n        this.dataSourceBind = undefined\r\n      }\r\n\r\n      if (this._webix && this._module) {\r\n        this.dataSourceBind = new YvDataSource(this, this.dataSource, this._dataSourceProcess.bind(this))\r\n        this.dataSourceBind.init()\r\n      }\r\n    }\r\n\r\n    if (!this._module.loadFinished) {\r\n      // onload 函数还没有执行（模块还没加载完）, 延迟调用 rebind\r\n      _.defer(innerMethod)\r\n\r\n    } else {\r\n      // 否则实时调用 rebind\r\n      innerMethod()\r\n    }\r\n  }\r\n\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (!this.dataSource || _.isArray(this.dataSource) || _.isFunction(this.dataSource)) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL' && this.dataSource.type !== 'function') {\r\n      return data\r\n    }\r\n\r\n    if (!this.dataSource.parentField || !this.dataSource.valueField) {\r\n      return data\r\n    }\r\n\r\n    const idField = this.dataSource.valueField\r\n    const parentField = this.dataSource.parentField\r\n\r\n    data = _.cloneDeep(data)\r\n\r\n    // 第一遍扫描, 建立映射关系\r\n    const nodeMap: any = {}\r\n    const rootNode = []\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      nodeMap[row[idField]] = row\r\n    }\r\n\r\n    // 第二遍扫描，建立父子关系\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      const parent = row[parentField]\r\n      const id = row[idField]\r\n\r\n      if (!parent || parent === '0') {\r\n        // 没有父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n\r\n      } else if (nodeMap.hasOwnProperty(parent)) {\r\n        //找到父亲\r\n        const parentNode = nodeMap[parent]\r\n        if (parentNode.hasOwnProperty('data')) {\r\n          parentNode.data.push(nodeMap[id])\r\n        } else {\r\n          parentNode.data = [nodeMap[id]]\r\n        }\r\n      } else {\r\n        // 没有找到父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n      }\r\n    }\r\n\r\n    return rootNode\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { YvEventDispatch } from './YvanEvent'\r\nimport webix from 'webix'\r\n\r\n/**\r\n * 创建快捷菜单\r\n * <pre>\r\n *     {\r\n            text: '菜单1',\r\n            onClick: {\r\n                type: 'function',\r\n                bind: 'tabBar1'\r\n            }\r\n        },\r\n {\r\n            text: '菜单2',\r\n            children: [\r\n                {\r\n                    text: '菜单2.1',\r\n                    onClick: {\r\n                        type: 'function',\r\n                        bind: 'tabBar21'\r\n                    }\r\n                },\r\n                {\r\n                    text: '菜单2.2',\r\n                    onClick: {\r\n                        type: 'function',\r\n                        bind: 'tabBar22'\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n {\r\n            text: '菜单3',\r\n            onClick: {\r\n                type: 'function',\r\n                bind: 'tabBar3'\r\n            }\r\n        }\r\n * </pre>\r\n */\r\nexport function createContextMenu(config: any, scope: any): any {\r\n  const methodMap = new Map<String, any>()\r\n\r\n  function buildMenu(configArray: any): any {\r\n    const ret = new Array<any>()\r\n    _.each(configArray, menu => {\r\n      if (!menu) return\r\n      if (menu === '-' || menu.text === '-') {\r\n        ret.push({ $template: 'Separator' })\r\n      }\r\n      if (menu.text) {\r\n        const id = _.uniqueId('_cxm_')\r\n        methodMap.set(id, menu.onClick)\r\n\r\n        if (_.isArray(menu.children)) {\r\n          ret.push({ value: menu.text, submenu: buildMenu(menu.children) })\r\n        } else {\r\n          ret.push({ value: menu.text, id })\r\n        }\r\n      }\r\n    })\r\n    return ret\r\n  }\r\n\r\n  const handler = webix.ui({\r\n    view: 'contextmenu',\r\n    data: buildMenu(config),\r\n    on: {\r\n      onMenuItemClick: function(this: any, id: any) {\r\n        if (methodMap.has(id)) {\r\n          YvEventDispatch(\r\n            methodMap.get(id),\r\n            this,\r\n            this.getContext(),\r\n            this.$scope\r\n          )\r\n        }\r\n      }\r\n    },\r\n    $scope: scope\r\n  })\r\n  return handler\r\n\r\n  // return webix.ui({\r\n  //     view: \"contextmenu\",\r\n  //     data: [\r\n  //         {value: \"a\", id: 'UU_A'},\r\n  //         {value: \"b\", id: 'UU_B'},\r\n  //         // {$template: \"Spacer\"},\r\n  //         {$template: \"Separator\"},\r\n  //         {\r\n  //             value: \"Translate...\",\r\n  //             submenu: [\r\n  //                 {\r\n  //                     value: \"罗\", id: 'AAA', on: {\r\n  //                         onClick: function (id: any) {\r\n  //                             debugger\r\n  //                         }\r\n  //                     }\r\n  //                 },\r\n  //                 {value: \"三\", id: 'BBB'},\r\n  //             ]\r\n  //         }\r\n  //     ],\r\n  //     on: {\r\n  //         onMenuItemClick: function (id: any) {\r\n  //             debugger\r\n  //         }\r\n  //     }\r\n  // });\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { wrapperWebixConfig } from './YvanRender'\r\nimport { createContextMenu } from './CtlContextMenu'\r\nimport webix from 'webix'\r\n\r\nexport class CtlTab extends CtlBase<CtlTab> {\r\n  static create(module: any, vjson: any): CtlTab {\r\n    const that = new CtlTab(vjson)\r\n    that._module = module\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'tabbarContextMenu',\r\n      'defaultTabIndex',\r\n      'onTabChanged',\r\n      'onTabClosed'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n          _.defer(() => {\r\n            if (yvanProp.defaultTabIndex > 0) {\r\n              // 默认打开的 tab 序号\r\n              that._webix.getMultiview()._cells[yvanProp.defaultTabIndex].show()\r\n            }\r\n\r\n            if (that._menuConfig) {\r\n              const menuHandler = createContextMenu(\r\n                that._menuConfig,\r\n                that.getModule()\r\n              )\r\n              menuHandler.attachTo(that._webix.getTabbar().$view)\r\n            }\r\n          })\r\n        }\r\n      },\r\n      tabbar: {\r\n        // close: true,\r\n        on: {\r\n          onAfterDelete() {\r\n            that.removeHandle()\r\n          },\r\n          onChange(newBodyId: string) {\r\n            YvEventDispatch(that.onTabChanged, that, newBodyId)\r\n          },\r\n          onOptionRemove(newBodyId: string) {\r\n            YvEventDispatch(that.onTabClosed, that, newBodyId)\r\n          }\r\n        }\r\n      },\r\n      multiview: {\r\n        keepViews: true // 没有显示的选项卡也要渲染DOM, 否则 aggrid 会出问题\r\n        // fitBiggest: true,    //始终以最大的 tab 页签为大小\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  defaultTabIndex = 0\r\n\r\n  /**\r\n   * 当前选项卡发生变化时触发\r\n   */\r\n  onTabChanged?: YvEvent<CtlTab, any>\r\n\r\n  /**\r\n   * 当前选项卡关闭时触发\r\n   */\r\n  onTabClosed?: YvEvent<CtlTab, any>\r\n\r\n  /**\r\n   * tabbar 上的快捷菜单\r\n   */\r\n  set tabbarContextMenu(config: any) {\r\n    this._menuConfig = config\r\n  }\r\n\r\n  /**\r\n   * 关闭所有允许关闭的标签\r\n   */\r\n  closeAll(butIds: Array<any>) {\r\n    const cellId = new Array<any>()\r\n    _.each(this._webix.getMultiview()._cells, cell => {\r\n      if (!_.includes(butIds, cell.config.id)) {\r\n        cellId.push(cell.config.id)\r\n      }\r\n    })\r\n\r\n    _.each(cellId, id => {\r\n      this._webix.removeView(id)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 添加一个模块到标签页执行\r\n   * @param text 标签标题\r\n   * @param id 标签id\r\n   * @param vue 模块(Class)\r\n   */\r\n  addModule(text: string, id: string, vue: any) {\r\n    const that = this\r\n    const cfg = vue.buildView()\r\n\r\n    const tabId = this._webix.addView({\r\n      header: text,\r\n      close: true,\r\n      body: _.merge(cfg, {\r\n        id: id,\r\n        on: {\r\n          onDestruct() {\r\n            if (vue.onClose) {\r\n              vue.onClose();\r\n            }\r\n            vue.$destroy()\r\n            delete vue._isLoadInvoked\r\n          },\r\n          onViewShow(this: any) {\r\n            if (!vue._isLoadInvoked) {\r\n              vue._webixId = tabId\r\n              vue._isLoadInvoked = true\r\n              // 标题栏不允许被选中\r\n              $(this.$view).parent().prev().addClass('ag-unselectable');\r\n              vue.onLoad()\r\n            }\r\n\r\n            vue.onShow()\r\n          }\r\n          // onViewShow: _.once(() => {\r\n          //     // 触发 onLoad 方法\r\n          //     // 注意这有个 bug, viewTab 的最后一个标签，千万不能删除\r\n          //     vue._webixId = tabId;\r\n          //     vue.onLoad();\r\n          // })\r\n        }\r\n      })\r\n    })\r\n\r\n    this._webix.setValue(tabId)\r\n    if (this.tabCount === 1) {\r\n      // 这里有个 bug\r\n      // 如果是第一个被打开的标签，会不触发 onTabChanged 事件\r\n      YvEventDispatch(that.onTabChanged, that, id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 添加一个 Vjson 到标签\r\n   * @param text 标签标题\r\n   * @param id 标签id\r\n   * @param vjson 界面描述片段\r\n   */\r\n  addContent(text: string, id: string, vjson: any, opts?: any) {\r\n    const that = this\r\n\r\n    if (this.selectTab(id)) {\r\n      // 已经打开了页面\r\n      return\r\n    }\r\n\r\n    let close = true\r\n    if (opts && opts.close === false) {\r\n      close = false\r\n    }\r\n\r\n    wrapperWebixConfig(this.getModule(), vjson)\r\n\r\n    const tabId = this._webix.addView({\r\n      header: text,\r\n      close,\r\n      body: _.merge(vjson, {\r\n        id: id\r\n      })\r\n    })\r\n\r\n    this._webix.setValue(tabId)\r\n    if (this.tabCount === 1) {\r\n      // 这里有个 bug\r\n      // 如果是第一个被打开的标签，会不触发 onTabChanged 事件\r\n      YvEventDispatch(that.onTabChanged, that, id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取 tab 标签数量\r\n   */\r\n  get tabCount(): number {\r\n    return this._webix.getMultiview()._cells.length\r\n  }\r\n\r\n  /**\r\n   * 选定某个标签\r\n   */\r\n  public selectTab(id: string): boolean {\r\n    if (webix.$$(id)) {\r\n      webix.$$(id).show()\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 判断标签是否存在\r\n   */\r\n  public tabExsit(id: string): boolean {\r\n    if (webix.$$(id)) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 获取当前选中的 tabId\r\n   */\r\n  public getSelectedTabId(): any {\r\n    return this._webix.getTabbar().getValue()\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  /**\r\n   * 快捷菜单句柄\r\n   */\r\n  _menuConfig: any = undefined\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvDataSource } from './YvanDataSourceImp'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { DataSource } from './YvanDataSource'\r\nimport { CtlDataviewDefault } from './CtlDefaultValue'\r\n\r\nexport class CtlDataview extends CtlBase<CtlDataview> {\r\n  static create(module: any, vjson: any): CtlDataview {\r\n    const that = new CtlDataview(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlDataviewDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      // 'data',\r\n      'dataSource',\r\n      'onItemSelect',\r\n      'onItemClick',\r\n      'onItemDblClick',\r\n      'onDataComplete'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      select: true,\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onItemClick, that, item)\r\n        },\r\n        onItemDblClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onItemDblClick, that, item)\r\n        },\r\n        onAfterSelect(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onItemSelect, that, item)\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 树上的数据\r\n   */\r\n  data?: any[]\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onItemSelect?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onItemClick?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 树节点被双击后触发\r\n   */\r\n  onItemDblClick?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 数据绑定完成后触发\r\n   */\r\n  onDataComplete?: YvEvent<CtlDataview, any>\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 设置数据\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    // dataSource call back\r\n    this._webix.clearAll()\r\n    this._webix.parse(nv)\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlDataview> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlDataview>) {\r\n    this._dataSource = nv\r\n    if (this._module.loadFinished) {\r\n      // onLoad 之后会触发 view.onInited -> attachHandle -> refreshState -> _rebindDataSource\r\n      // onLoad 之前都不需要主动触发 _rebindDataSource\r\n      this._rebindDataSource()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  public filter(func: Function) {\r\n    this._webix.filter(func);\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlDataview>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlDataview>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    const innerMethod = () => {\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind.destory()\r\n        this.dataSourceBind = undefined\r\n      }\r\n\r\n      if (this._webix && this._module) {\r\n        this.dataSourceBind = new YvDataSource(this, this.dataSource, this._dataSourceProcess.bind(this))\r\n        this.dataSourceBind.init()\r\n      }\r\n    }\r\n\r\n    if (!this._module.loadFinished) {\r\n      // onload 函数还没有执行（模块还没加载完）, 延迟调用 rebind\r\n      _.defer(innerMethod)\r\n\r\n    } else {\r\n      // 否则实时调用 rebind\r\n      innerMethod()\r\n    }\r\n  }\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (\r\n      !this.dataSource ||\r\n      _.isArray(this.dataSource) ||\r\n      _.isFunction(this.dataSource)\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL' && this.dataSource.type !== 'function') {\r\n      return data\r\n    }\r\n\r\n    if (!this.dataSource.idField) {\r\n      return data\r\n    }\r\n\r\n    const idField = this.dataSource.idField\r\n\r\n    data = _.cloneDeep(data)\r\n\r\n    // 第一遍扫描, 建立映射关系\r\n    _.each(data, item => {\r\n      item.id = item[idField]\r\n    })\r\n\r\n    return data\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { CtlButtonDefault } from './CtlDefaultValue'\r\nimport { isDesignMode } from './DesignHelper'\r\n\r\ntype CtlButtonType =\r\n  | 'default'\r\n  | 'primary'\r\n  | 'success'\r\n  | 'danger'\r\n  | string\r\n  | undefined\r\n\r\n/**\r\n * 按钮组件\r\n * @author yvan\r\n */\r\nexport class CtlButton extends CtlBase<CtlButton> {\r\n  static create(module: any, vjson: any): CtlButton {\r\n    const that = new CtlButton(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlButtonDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'onClick',\r\n      'cssType',\r\n      'icon',\r\n      'width',\r\n      'badge',\r\n      'text'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      type: 'text',\r\n      on: {\r\n        onInited: function (this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onDestruct() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick: function (this: any) {\r\n          if (isDesignMode()) {\r\n            return\r\n          }\r\n          YvEventDispatch(that.onClick, that, undefined)\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n\r\n  /**\r\n   * 按下按钮后触发\r\n   */\r\n  onClick?: YvEvent<CtlButton, void>\r\n\r\n  /**\r\n   * 设置标记\r\n   */\r\n  set badge(nv: number | string | undefined) {\r\n    if (!this._webix) {\r\n      if (nv) {\r\n        this._webixConfig.badge = nv\r\n      } else {\r\n        delete this._webixConfig.css\r\n      }\r\n      return\r\n    }\r\n\r\n    this._webix.define('badge', nv)\r\n    this._webix.render()\r\n  }\r\n\r\n  /**\r\n   * 设置宽度\r\n   */\r\n  set width(nv: number | undefined) {\r\n    if (!this._webix) {\r\n      if (nv) {\r\n        this._webixConfig.width = nv\r\n      } else {\r\n        delete this._webixConfig.width\r\n      }\r\n      return\r\n    }\r\n\r\n    this._webix.define('width', nv)\r\n    this._webix.resize()\r\n  }\r\n\r\n  /**\r\n   * 显示样式\r\n   */\r\n  set cssType(nv: CtlButtonType) {\r\n    let css = nv\r\n    switch (nv) {\r\n      case 'success':\r\n        css = 'yvan_success'\r\n        break\r\n\r\n      case 'danger':\r\n        css = 'yvan_danger'\r\n        break\r\n\r\n      case 'primary':\r\n        css = 'yvan_primary'\r\n        break\r\n\r\n      case 'default':\r\n        css = ''\r\n        break\r\n    }\r\n\r\n    if (!this._webix) {\r\n      if (css) {\r\n        this._webixConfig.css = css\r\n      } else {\r\n        delete this._webixConfig.css\r\n      }\r\n      return\r\n    }\r\n\r\n    $(this._webix.$view).removeClass('webix_danger webix_primary')\r\n    this._webix.define('css', css)\r\n  }\r\n\r\n  /**\r\n   * 设置按钮图标\r\n   */\r\n  set icon(nv: string) {\r\n    this._icon = nv\r\n    this._refreshText()\r\n  }\r\n\r\n  /**\r\n   * 获取按钮图标\r\n   */\r\n  get icon(): string {\r\n    return this._icon\r\n  }\r\n\r\n  /**\r\n   * 设置按钮文本\r\n   */\r\n  set text(nv: string) {\r\n    this._text = nv\r\n    this._refreshText()\r\n  }\r\n\r\n  /**\r\n   * 获取按钮文本\r\n   */\r\n  get text(): string {\r\n    return this._text\r\n  }\r\n\r\n  /**\r\n   * 是否允许\r\n   */\r\n  get enable(): boolean {\r\n    return this._webixConfig.disabled\r\n  }\r\n\r\n  set enable(nv: boolean) {\r\n    if (!this._webix) {\r\n      this._webixConfig.disabled = !nv\r\n      return\r\n    }\r\n    this._webix.define('disabled', !nv)\r\n  }\r\n\r\n  /*============================ 私有属性部分 ============================*/\r\n\r\n  private _text: string = ''\r\n  private _icon: string = ''\r\n\r\n  private _refreshText(): void {\r\n    const nv = `<i class=\"${this._icon}\"></i><span>${this._text}</span>`\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n      return\r\n    }\r\n    this._webix.setValue(nv)\r\n  }\r\n}\r\n","import webix, { $$ } from 'webix'\r\nimport { wrapperWebixConfig } from './YvanRender'\r\nimport { idText } from 'typescript'\r\n\r\n// eslint-disable-next-line\r\nconst baseKeyboardOption: any = {\r\n  success(layero: any, layerIndex: any) {\r\n    layer.setTop(layero)\r\n    layero\r\n      .find('a.layui-layer-btn0')\r\n      .attr('tabindex', 1)\r\n      .focus()\r\n    layero.on('keydown', (event: KeyboardEvent) => {\r\n      if (event.keyCode === 13 || event.keyCode === 27) {\r\n        layer.close(layerIndex)\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nconst escKeyboardOption: any = {\r\n  success(layero: any, layerIndex: any) {\r\n    layer.setTop(layero)\r\n    const $input = layero.find('input.layui-layer-input')\r\n\r\n    // 确定按钮获得焦点\r\n    const $btn0 = layero.find('a.layui-layer-btn0').attr('tabindex', 1)\r\n    // 取消按钮能获得焦点\r\n    const $btn1 = layero.find('a.layui-layer-btn1').attr('tabindex', 1)\r\n\r\n    if ($input.length <= 0) {\r\n      // 如果没有输入框存在，默认让\"确认按钮\"获得焦点\r\n      $btn0.focus()\r\n    }\r\n\r\n    layero.on('keydown', (event: KeyboardEvent) => {\r\n      if (event.keyCode === 13) {\r\n        layero.find('a.layui-layer-btn0').trigger('click')\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n      } else if (event.keyCode === 27) {\r\n        // 取消\r\n        layero.find('a.layui-layer-btn1').trigger('click')\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * 显示正在读取\r\n */\r\nexport function loading(msg?: string) {\r\n  clearLoading()\r\n  if (!msg) {\r\n    msg = '请稍后'\r\n  }\r\n  const $body = $('body')\r\n  $body.append(`<div class=\"load-view\" style=\"z-index: 119850224;\"><div class=\"load-an-view\"><div class=\"fading-circle\">\r\n  <div class=\"sk-circle1 sk-circle\"></div>\r\n  <div class=\"sk-circle2 sk-circle\"></div>\r\n  <div class=\"sk-circle3 sk-circle\"></div>\r\n  <div class=\"sk-circle4 sk-circle\"></div>\r\n  <div class=\"sk-circle5 sk-circle\"></div>\r\n  <div class=\"sk-circle6 sk-circle\"></div>\r\n  <div class=\"sk-circle7 sk-circle\"></div> \r\n  <div class=\"sk-circle8 sk-circle\"></div>\r\n  <div class=\"sk-circle9 sk-circle\"></div>\r\n  <div class=\"sk-circle10 sk-circle\"></div>\r\n  <div class=\"sk-circle11 sk-circle\"></div>\r\n  <div class=\"sk-circle12 sk-circle\"></div>\r\n</div></div><div class=\"load-tip\">${msg}</div></div>`)\r\n\r\n  $body.append($(`<div class=\"webix_modal load-view-masker\" style=\"z-index: 19850223;\"></div>`))\r\n}\r\n\r\n/**\r\n * 清空正在读取\r\n */\r\nexport function clearLoading() {\r\n  const $body = $('body')\r\n  $body.find('.load-view').remove()\r\n  $body.find('.load-view-masker').remove();\r\n}\r\n\r\n/**\r\n * 中间灰底白字提示\r\n */\r\nexport function msg(message: string): void {\r\n  const $body = $('body')\r\n\r\n  $body.find('[xtype=msg]').remove()\r\n  const $w = $(\r\n    '<div xtype=\"tooltip\" class=\"yvan-msg yvan-anim yvan-anim-00\">' +\r\n    '  <div class=\"yvan-msg-content\">' +\r\n    message +\r\n    '</div></div>'\r\n  )\r\n  $body.append($w)\r\n\r\n  const iframeWidth = $w.parent().width() as number\r\n  const iframeHeight = $w.parent().height() as number\r\n\r\n  const windowWidth = $w.width() as number\r\n  const windowHeight = $w.height() as number\r\n\r\n  let setWidth = (iframeWidth - windowWidth) / 2\r\n  let setHeight = (iframeHeight - windowHeight) / 2\r\n  if (iframeHeight < windowHeight || setHeight < 0) {\r\n    setHeight = 0\r\n  }\r\n  if (iframeWidth < windowWidth || setWidth < 0) {\r\n    setWidth = 0\r\n  }\r\n  $w.css({ left: setWidth, top: setHeight })\r\n  setTimeout(() => {\r\n    $w.remove()\r\n  }, 3000)\r\n}\r\n\r\n/**\r\n * 显示tooltip\r\n */\r\nexport function showTooltip(obj: any, message: string): void {\r\n  const $body = $('body')\r\n  const tooptipId = obj.id + '_tooltip';\r\n\r\n  if ($body.find(`#${tooptipId}`).length > 0) {\r\n    const ddiv = $body.find(`#${tooptipId}`)[0].children[1]\r\n    _.set(ddiv, 'innerText', message);\r\n    return;\r\n  }\r\n\r\n  const $w = $(\r\n    '<div xtype=\"tooltip\" class=\"yvan-tooltip\">' +\r\n    '<em></em><div class=\"yvan-tooltip-msg\">' +\r\n    message +\r\n    '</div></div>'\r\n  )\r\n  $w[0].id = tooptipId\r\n  $body.append($w)\r\n\r\n  const xxoffset: any = $(obj._webix.$view).offset()\r\n  const xxLeft: any = $(obj._webix.$view).width() + xxoffset.left + 10\r\n  $w.css({ left: xxLeft, top: xxoffset?.top })\r\n}\r\n\r\nexport function hideTooltip(obj: any): void {\r\n  const $body = $('body')\r\n  const tooptipId = obj.id + '_tooltip';\r\n  $body.find(`#${tooptipId}`).remove()\r\n}\r\n\r\n/**\r\n * 弹出输入框\r\n * @param title 输入框标题\r\n * @param defValue 默认值\r\n */\r\nexport function prompt(title: string = '请输入内容', defValue: string = ''): Promise<string> {\r\n  const tid: any = webix.uid()\r\n  let dialog: any = undefined;\r\n  return new Promise<string>((resolve, reject) => {\r\n\r\n    function onConfirm() {\r\n      const value = (<any>webix.$$(tid.toString())).getValue()\r\n      if (value) {\r\n        resolve(value);\r\n        dialog.close();\r\n        return;\r\n      }\r\n\r\n      msg('请输入内容');\r\n    }\r\n\r\n    function onCancel() {\r\n      reject();\r\n      dialog.close();\r\n    }\r\n\r\n    const vjson = {\r\n      view: 'window', close: false, move: true, modal: true, position: 'center', resize: true, fullscreen: false,\r\n      head: title,\r\n      on: {\r\n        onShow() {\r\n          // 进入后立刻获得焦点\r\n          (<any>webix.$$(tid)).focus();\r\n        }\r\n      },\r\n      body: {\r\n        rows: [\r\n          { view: 'text', id: tid, placeholder: '请输入', value: defValue },\r\n          {\r\n            cols: [\r\n              {},\r\n              {\r\n                view: 'button',\r\n                value: '确定',\r\n                width: 100,\r\n                css: 'yvan_primary',\r\n                click: onConfirm,\r\n              },\r\n              {\r\n                view: 'button',\r\n                value: '取消',\r\n                width: 100,\r\n                css: 'default',\r\n                click: () => {\r\n                  onCancel()\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n\r\n    };\r\n    dialog = webix.ui(vjson);\r\n    dialog.show();\r\n    $(webix.$$(tid).$view).keydown((e) => {\r\n      // 必须借助 jquery 拦截 keydown 事件\r\n      if (e.keyCode === 27) {\r\n        onCancel();\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n      if (e.keyCode === 13) {\r\n        onConfirm();\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n    })\r\n\r\n  });\r\n}\r\n\r\n/**\r\n * 弹出提示框\r\n * @param content 提示框内容\r\n */\r\nexport function alert(content: string): void {\r\n  webix.alert({ title: \"提示\", text: content, });\r\n}\r\n\r\n/**\r\n * 弹出错误框\r\n * @param content 错误的提示内容\r\n */\r\nexport function error(content: string): void {\r\n  webix.modalbox({ title: \"错误\", text: content, buttons: [\"确认\"], type: \"confirm-error\" });\r\n}\r\n\r\n/**\r\n * 弹出确认框\r\n * @param content 需要确认的文字内容\r\n */\r\nexport function confirm(content: string): Promise<void> {\r\n  return new Promise<void>((resolve, reject) => {\r\n    webix.confirm({\r\n      title: \"提示\",\r\n      text: content,\r\n      ok: \"确认\", cancel: \"取消\",\r\n\r\n    }).then(() => {\r\n      resolve();\r\n\r\n    }).catch(() => {\r\n      reject();\r\n    });\r\n  })\r\n}\r\n\r\n/**\r\n * 右上角弹出错误消息\r\n * @param content 消息内容\r\n */\r\nexport function msgError(content: string): void {\r\n  const toastr = _.get(window, 'toastr')\r\n  if (!toastr) {\r\n    webix.message({ type: 'error', text: content, expire: -1 })\r\n  } else {\r\n    toastr.options = {\r\n      \"closeButton\": true,\r\n      \"positionClass\": \"toast-bottom-left\",\r\n      \"showMethod\": \"fadeIn\",\r\n      \"hideMethod\": \"fadeOut\"\r\n    }\r\n    toastr.error(content, '错误')\r\n  }\r\n}\r\n\r\n/**\r\n * 右上角弹出成功消息\r\n * @param content 消息内容\r\n */\r\nexport function msgSuccess(content: string): void {\r\n  const toastr = _.get(window, 'toastr')\r\n  if (!toastr) {\r\n    webix.message({ type: 'success', text: content, expire: 2000 })\r\n  } else {\r\n    toastr.options = {\r\n      \"closeButton\": true,\r\n      \"positionClass\": \"toast-bottom-left\",\r\n      \"hideDuration\": \"3000\",\r\n      \"showMethod\": \"fadeIn\",\r\n      \"hideMethod\": \"fadeOut\"\r\n    }\r\n    toastr.success(content, '成功')\r\n  }\r\n}\r\n\r\n/**\r\n * 右上角弹出通知消息\r\n * @param content 消息内容\r\n */\r\nexport function msgInfo(content: string): void {\r\n  const toastr = _.get(window, 'toastr')\r\n  if (!toastr) {\r\n    webix.message({ type: 'info', text: content, expire: 2000 })\r\n  } else {\r\n    toastr.options = {\r\n      \"closeButton\": true,\r\n      \"positionClass\": \"toast-bottom-left\",\r\n      \"hideDuration\": \"3000\",\r\n      \"showMethod\": \"fadeIn\",\r\n      \"hideMethod\": \"fadeOut\"\r\n    }\r\n    toastr.info(content)\r\n  }\r\n  // https://docs.webix.com/desktop__message_boxes.html\r\n}\r\n","import { CtlBase } from '../../CtlBase'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport * as YvanUI from '../../YvanUIExtend'\r\nimport * as YvanMessage from '../../YvanUIMessage'\r\nimport { YvEvent, YvEventDispatch } from '../../YvanEvent'\r\n\r\ntype CtlInputWidth = number | undefined | 'auto'\r\n\r\nexport class CtlInput<M> extends CtlBase<M> {\r\n  protected _create<M extends CtlInput<M>>(vjson: any, me: M) {\r\n    const that: M = me\r\n\r\n    // 提取想要的属性\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'id',\r\n      'gravity',\r\n      'validate',\r\n      'onInput',\r\n      'onKeydown',\r\n      'onClick',\r\n      'onEnter',\r\n      'width',\r\n      'onFocus',\r\n      'onChange',\r\n      'onBlur',\r\n      'maxlength',\r\n      'changeValueImplete',\r\n      'ff',\r\n      'label',\r\n      'labelWidth',\r\n      'labelAlign',\r\n      'readonly',\r\n      'disabled',\r\n      'required',\r\n      'onValidate',\r\n      'value',\r\n      'prompt'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n    if (!vjson.id) {\r\n      that.id = _.uniqueId('input_')\r\n    }\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    function onKeydown(event: any) {\r\n      YvEventDispatch(that.onKeydown, that, event)\r\n    }\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited: function (this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onAfterRender: function (this: any) {\r\n          const $input = $(this.$view).find('input')\r\n          $input.on('input', that.onInputEvent.bind(that))\r\n          $input.on('keydown', onKeydown)\r\n          if (that.onValidate || that._required) {\r\n            that._addEnvent($input);\r\n          }\r\n          const result = that._resultToShowOrHide()\r\n          if (result) {\r\n            that._showValidateError()\r\n          } else {\r\n            that._hideValidateError()\r\n          }\r\n          if (that.constructor.name !== 'CtlSelect' && that._webixConfig.required) {\r\n            if (that.constructor.name === 'CtlDateRangePicker') {\r\n              that._showValidate(\r\n                !this.getValue().end || this.getValue().end.length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            } else {\r\n              that._showValidate(\r\n                !this.getValue() || this.getValue().length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            }\r\n          }\r\n          this.callEvent('onCtlRender', [])\r\n          if (that.ff > 0) {\r\n            setTimeout(() => {\r\n              that.focus()\r\n              that.ff = 0\r\n            }, that.ff)\r\n          }\r\n        },\r\n        onDestruct: function (this: any) {\r\n          this.callEvent('onCtlRemove', [])\r\n          const $input = $(this.$view).find('input')\r\n          $input.off('input')\r\n          $input.off('keydown')\r\n          that._removeEnvent($input)\r\n          that.removeHandle()\r\n          that._hideTootip()\r\n        },\r\n        onItemClick(this: any) {\r\n          YvEventDispatch(that.onClick, that, undefined)\r\n        },\r\n        onEnter(this: any) {\r\n          YvEventDispatch(that.onEnter, that, undefined)\r\n        },\r\n        onFocus(this: any) {\r\n          if (that.onValidate || that._required) {\r\n            const result = that._resultToShowOrHide();\r\n            if (result) {\r\n              that._showTootip(result)\r\n              that._showValidateError()\r\n            }\r\n            else {\r\n              that._hideTootip()\r\n              that._hideValidateError()\r\n            }\r\n          }\r\n          YvEventDispatch(that.onFocus, that, undefined)\r\n        },\r\n        onChange(this: any, newValue: any, oldValue: any) {\r\n          if (!that.valueValid(newValue)) {\r\n            // 不允许触发更改\r\n            return\r\n          }\r\n          if (that.onValueChange && typeof that.onValueChange === 'function') {\r\n            that.onValueChange(newValue, oldValue)\r\n          }\r\n          newValue = that.valueProcess(newValue)\r\n          that.changeToEntity(newValue)\r\n          if (that._webixConfig.required) {\r\n            if (that.constructor.name === 'CtlDateRangePicker') {\r\n              that._showValidate(\r\n                !this.getValue().end || this.getValue().end.length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            } else {\r\n              that._showValidate(\r\n                !this.getValue() || this.getValue().length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            }\r\n          }\r\n\r\n          YvEventDispatch(that.onChange, that, newValue)\r\n        },\r\n        onBlur(this: any) {\r\n          if (that.onValidate || that._required) {\r\n            const result = that._resultToShowOrHide();\r\n            if (result) {\r\n              that._showValidateError()\r\n            }\r\n            else {\r\n              that._hideValidateError()\r\n            }\r\n          }\r\n          that._hideTootip()\r\n          if (that._webixConfig.required) {\r\n            if (that.constructor.name === 'CtlDateRangePicker') {\r\n              that._showValidate(\r\n                !this.getValue().end || this.getValue().end.length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            } else {\r\n              that._showValidate(\r\n                !this.getValue() || this.getValue().length <= 0,\r\n                'requiredValidate'\r\n              )\r\n            }\r\n          }\r\n          YvEventDispatch(that.onBlur, that, undefined)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  //是否允许触发 onChange\r\n  protected valueValid(value: any): boolean {\r\n    return true\r\n  }\r\n\r\n  //更改 onChange 或实体时的值\r\n  protected valueProcess(value: any): any {\r\n    return value\r\n  }\r\n\r\n  inputCheck!: (newValue: any, oldValue: any) => boolean\r\n\r\n  onInputEvent(event: Event) {\r\n    if (this.onInputValue && typeof this.onInputValue === 'function') {\r\n      this.onInputValue((event.target as any).value)\r\n    }\r\n\r\n    if (\r\n      this.constructor.name === 'CtlText' &&\r\n      this.maxlength &&\r\n      _.size((event.target as any).value) > this.maxlength\r\n    ) {\r\n      ; (event.target as any).value = (event.target as any).value.substring(\r\n        0,\r\n        this.maxlength\r\n      )\r\n    }\r\n    if (this.changeValueImplete) {\r\n      // 改变后立刻提交值\r\n      this.value = (event.target as any).value\r\n    }\r\n\r\n    // @ts-ignore\r\n    YvEventDispatch(this.onInput, this, event)\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n\r\n  /**\r\n   * 更改任何内容时触发\r\n   */\r\n  onInput?: YvEvent<M, Event>\r\n\r\n  /**\r\n   * 离开焦点或按下回车键之后触发更改时触发\r\n   */\r\n  onChange?: YvEvent<M, string>\r\n\r\n  /**\r\n   * 鼠标点击后触发\r\n   */\r\n  onClick?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 按下回车键之后触发\r\n   */\r\n  onEnter?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 获取焦点后触发\r\n   */\r\n  onFocus?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 离开焦点后触发\r\n   */\r\n  onBlur?: YvEvent<M, void>\r\n\r\n  /**\r\n   * 校验事件\r\n   */\r\n  onValidate?: YvEvent<M, string>\r\n\r\n  /**\r\n   * 按下任何键之后触发事件\r\n   */\r\n  onKeydown?: YvEvent<M, Event>\r\n\r\n  /**\r\n   * 输入内容时是否立刻提交 value\r\n   */\r\n  changeValueImplete: boolean = false\r\n\r\n  _gravity: string = ''\r\n\r\n  set gravity(nv: any) {\r\n    this._gravity = nv\r\n\r\n    let v: any\r\n    if (!nv) {\r\n      v = undefined\r\n    } else {\r\n      v = _.parseInt(nv)\r\n    }\r\n\r\n    if (!this._webix) {\r\n      if (v) {\r\n        this._webixConfig.gravity = v\r\n      } else {\r\n        delete this._webixConfig.gravity\r\n      }\r\n    } else {\r\n      this._webix.define('gravity', v)\r\n      this._webix.resize()\r\n    }\r\n  }\r\n\r\n  get gravity(): any {\r\n    return this._gravity\r\n  }\r\n\r\n  set id(nv: any) {\r\n    this._id = nv\r\n    if (!this._webix) {\r\n      this._webixConfig.id = nv\r\n    } else {\r\n      // 运行后不允许修改 id\r\n      console.error('can\\'t set \"ID\" at runtime!')\r\n    }\r\n  }\r\n\r\n  get id(): any {\r\n    return this._id\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._validateResult) {\r\n      throw new Error('invalidate!')\r\n    }\r\n\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 定焦时间\r\n   */\r\n  ff: number = 0\r\n\r\n  /**\r\n   * 最大长度\r\n   */\r\n  maxlength?: number = undefined\r\n\r\n  // private _maxlength!:number;\r\n\r\n  /**\r\n   * 文本描述\r\n   */\r\n  set label(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.label = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('label', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 文本对齐方式\r\n   */\r\n  set labelAlign(nv: 'left' | 'right' | 'center') {\r\n    if (!this._webix) {\r\n      this._webixConfig.labelAlign = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('labelAlign', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 必填\r\n   */\r\n  set required(nv: boolean) {\r\n    this._required = nv\r\n    if (!this._webix) {\r\n      this._webixConfig.required = nv\r\n      return\r\n    }\r\n    this._webixConfig.required = nv\r\n    this._webix.define('required', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 文本宽度\r\n   */\r\n  set labelWidth(nv: number) {\r\n    if (!this._webix) {\r\n      this._webixConfig.labelWidth = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('labelWidth', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 禁用\r\n   */\r\n  set disabled(nv: boolean) {\r\n    if (!this._webix) {\r\n      this._webixConfig.disabled = nv\r\n      return\r\n    }\r\n\r\n    if (nv) {\r\n      this._webix.disable()\r\n    } else {\r\n      this._webix.enable()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 只读\r\n   */\r\n  set readonly(nv: boolean) {\r\n    if (!this._webix) {\r\n      this._webixConfig.readonly = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('readonly', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 水印\r\n   */\r\n  set prompt(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.placeholder = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('placeholder', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 宽度\r\n   */\r\n  set width(nv: CtlInputWidth) {\r\n    if (nv === 'auto' || typeof nv === 'undefined') {\r\n      nv = undefined\r\n    }\r\n\r\n    if (!this._webix) {\r\n      this._webixConfig.width = nv\r\n      return\r\n    }\r\n\r\n    this._webix.define('width', nv)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  onValueChange(newV: any, oldV: any) {\r\n    //validType[this.validType](newV);\r\n  }\r\n\r\n  onInputValue(value: any) {\r\n    if (this.onValidate && typeof this.onValidate === 'function') {\r\n      this._validateResult = YvEventDispatch(this.onValidate, <any>this, value);\r\n    }\r\n  }\r\n\r\n  /**================ 私有属性 ===================**/\r\n  _validateResult: boolean = true\r\n\r\n  _required: boolean | undefined\r\n\r\n  _id: any\r\n\r\n  _maxlength: any\r\n\r\n  anonymous_showTootip: any = () => {\r\n    const result = this._resultToShowOrHide();\r\n    if (result) {\r\n      this._showTootip(result)\r\n      this._showValidateError()\r\n    } else {\r\n      this._hideTootip()\r\n      this._hideValidateError()\r\n    }\r\n  }\r\n\r\n  anonymous_hideTootip: any = () => {\r\n    const $input = $(this._webix.$view).find('input')\r\n    if (document.activeElement !== $input[0]) {\r\n      this._hideTootip()\r\n    }\r\n  }\r\n\r\n  _addEnvent(input: any) {\r\n    input.context.addEventListener('mouseenter', this.anonymous_showTootip);\r\n    input.context.addEventListener('mouseleave', this.anonymous_hideTootip);\r\n  }\r\n\r\n  _removeEnvent(input: any) {\r\n    input.context.removeEventListener('mouseenter', this.anonymous_showTootip);\r\n    input.context.removeEventListener('mouseleave', this.anonymous_hideTootip);\r\n  }\r\n\r\n  _showValidateError() {\r\n    $(this._webix.$view).addClass('yvan-validate-error');\r\n  }\r\n\r\n  _hideValidateError() {\r\n    $(this._webix.$view).removeClass('yvan-validate-error');\r\n  }\r\n\r\n  _showTootip(msg: string) {\r\n    YvanMessage.showTooltip(this, msg);\r\n  }\r\n\r\n  _hideTootip() {\r\n    YvanMessage.hideTooltip(this);\r\n  }\r\n\r\n  _resultToShowOrHide(): any {\r\n    if (!this.value) {\r\n      if (this._required) {\r\n        return \"该项为必填项\";\r\n      }\r\n    }\r\n    else {\r\n      // 只有校验值\r\n      const that: M = <any>this;\r\n      const result = YvEventDispatch(this.onValidate, that, this.value);\r\n      if (result) {\r\n        return result\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  _showValidate(\r\n    msg: any,\r\n    type: 'inputValidate' | 'changedValidate' | 'requiredValidate'\r\n  ): boolean {\r\n    let $input!: any\r\n    if (\r\n      this.constructor.name === 'CtlText' ||\r\n      this.constructor.name === 'CtlSearch' ||\r\n      this.constructor.name === 'CtlCombo'\r\n    ) {\r\n      $input = $(this._webix.$view).find('input')\r\n    } else if (\r\n      this.constructor.name === 'CtlDatePicker' ||\r\n      this.constructor.name === 'CtlDateRangePicker' ||\r\n      this.constructor.name === 'CtlMultiCombo' ||\r\n      this.constructor.name === 'CtlMultiSelect'\r\n    ) {\r\n      $input = $(this._webix.$view).find('div.webix_inp_static')\r\n    } else if (this.constructor.name === 'CtlSelect') {\r\n      $input = $(this._webix.$view).find('select')\r\n    } else {\r\n      return true\r\n    }\r\n\r\n    switch (type) {\r\n      case 'inputValidate': {\r\n        if (msg) {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '#ffdedb',\r\n              'border-color': '#ff8d82'\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          $(this._webix.$view).append(\r\n            `<div id=\"${this.id}_validate\" style=\"position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;\">${msg}</div>`\r\n          )\r\n          return false\r\n        } else {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '',\r\n              'border-color': ''\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          return true\r\n        }\r\n      }\r\n      case 'changedValidate': {\r\n        if (msg) {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '#ffdedb',\r\n              'border-color': '#ff8d82'\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          $(this._webix.$view).append(\r\n            `<div id=\"${this.id}_validate\" style=\"position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;\">${msg}</div>`\r\n          )\r\n          return false\r\n        } else {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'background-color': '',\r\n              'border-color': ''\r\n            })\r\n          })\r\n          $(`#${this.id}_validate`).remove()\r\n          return true\r\n        }\r\n      }\r\n      case 'requiredValidate': {\r\n        if (msg) {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'border-color': '#ff8d82'\r\n            })\r\n          })\r\n          // $(`#${this.id}_validate`).remove();\r\n          // $(this._webix.$view).append(`<div id=\"${this.id}_validate\" style=\"position:relative; border: 1px #ff8d82; float:right; top:-38px; color: #FF5C4C;\">必填项</div>`);\r\n          return false\r\n        } else {\r\n          $input.each((index: any, item: any) => {\r\n            $(item).css({\r\n              'border-color': ''\r\n            })\r\n          })\r\n          // $(`#${this.id}_validate`).remove();\r\n          return true\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import * as YvanUI from '../../YvanUIExtend'\r\nimport { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlTextDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlText extends CtlInput<CtlText> {\r\n  static create(module: any, vjson: any): CtlText {\r\n    const that = new CtlText(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlTextDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['validate'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig)\r\n\r\n    return that\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlCheckboxDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlCheckBox extends CtlInput<CtlCheckBox> {\r\n  static create(module: any, vjson: any): CtlCheckBox {\r\n    const that = new CtlCheckBox(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlCheckboxDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['labelAtRight', 'value'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'checkbox',\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  private _labelAtRight: boolean = true\r\n  private _label: string = ''\r\n\r\n  /**\r\n   * label 是否在右边\r\n   */\r\n  get labelAtRight(): boolean {\r\n    return this._labelAtRight\r\n  }\r\n\r\n  set labelAtRight(nv: boolean) {\r\n    this._labelAtRight = nv\r\n    this._refreshLabel()\r\n  }\r\n\r\n  /**\r\n   * label 显示内容\r\n   */\r\n  get label(): string {\r\n    return this._label\r\n  }\r\n\r\n  set label(nv: string) {\r\n    this._label = nv\r\n    this._refreshLabel()\r\n  }\r\n\r\n  private _refreshLabel() {\r\n    const nv = this._label\r\n    if (!this._webix) {\r\n      if (this._labelAtRight) {\r\n        this._webixConfig.label = ''\r\n        this._webixConfig.labelRight = nv\r\n        this._webixConfig.labelWidth = 0\r\n      } else {\r\n        this._webixConfig.label = nv\r\n        this._webixConfig.labelRight = ''\r\n      }\r\n    } else {\r\n      if (this._labelAtRight) {\r\n        this._webix.define({\r\n          label: '',\r\n          labelRight: nv\r\n        })\r\n      } else {\r\n        this._webix.define({\r\n          label: nv,\r\n          labelRight: ''\r\n        })\r\n      }\r\n      this._webix.refresh()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 交换状态\r\n   */\r\n  toggle() {\r\n    this._webix.toggle()\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValueHere(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlComboDefault } from '../../CtlDefaultValue'\r\nimport { getFirstPinyin } from '../../Utils'\r\nimport { DataSource } from '../../YvanDataSource'\r\nimport { YvEvent } from '../../YvanEvent'\r\nimport { YvDataSource } from '../../YvanDataSourceImp'\r\n\r\n/**\r\n * 下拉框组件\r\n */\r\nexport class CtlCombo extends CtlInput<CtlCombo> {\r\n  static create(module: any, vjson: any): CtlCombo {\r\n    const that = new CtlCombo(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlComboDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['options', 'dataSource'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig)\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 数据绑定完成后触发\r\n   */\r\n  onDataComplete?: YvEvent<CtlCombo, any>\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set options(nv: any[]) {\r\n    const options: any = {\r\n      filter(item: any, filterWord: string) {\r\n        if (_.size(filterWord) <= 0) {\r\n          return true\r\n        }\r\n        const nodePy = getFirstPinyin(item.text).toLowerCase()\r\n        return (\r\n          nodePy.indexOf(filterWord.toLowerCase()) >= 0 ||\r\n          item.text.indexOf(filterWord) >= 0\r\n        )\r\n      },\r\n      body: {\r\n        template: '#text#',\r\n        type: {\r\n          height: 36\r\n        },\r\n        data: nv\r\n      }\r\n    }\r\n\r\n    if (!this._webix) {\r\n      _.merge(this._webixConfig, {\r\n        view: 'combo',\r\n        options\r\n      })\r\n      return\r\n    }\r\n    this._webix.define('options', options)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 获取显示的值\r\n   */\r\n  getText(): string {\r\n    return this._webix.getText()\r\n  }\r\n\r\n  /**\r\n   * 下拉选项\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    this.options = nv\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlCombo> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlCombo>) {\r\n    this._dataSource = nv\r\n    if (this._module.loadFinished) {\r\n      // onLoad 之后会触发 view.onInited -> attachHandle -> refreshState -> _rebindDataSource\r\n      // onLoad 之前都不需要主动触发 _rebindDataSource\r\n      this._rebindDataSource()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlCombo>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlCombo>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    if (!this._module) {\r\n      return;\r\n    }\r\n\r\n    const innerMethod = () => {\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind.destory()\r\n        this.dataSourceBind = undefined\r\n      }\r\n\r\n      if (this._webix && this._module) {\r\n        this.dataSourceBind = new YvDataSource(this, this.dataSource, this._dataSourceProcess.bind(this))\r\n        this.dataSourceBind.init()\r\n      }\r\n    }\r\n\r\n    if (!this._module.loadFinished) {\r\n      // onload 函数还没有执行（模块还没加载完）, 延迟调用 rebind\r\n      _.defer(innerMethod)\r\n\r\n    } else {\r\n      // 否则实时调用 rebind\r\n      innerMethod()\r\n    }\r\n  }\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (\r\n      !this.dataSource ||\r\n      _.isArray(this.dataSource) ||\r\n      _.isFunction(this.dataSource)\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL') {\r\n      return data\r\n    }\r\n\r\n    const displayField = this.dataSource.displayField || 'text'\r\n    const valueField = this.dataSource.valueField || 'id'\r\n    return _.map(data, item => {\r\n      return {\r\n        id: item[valueField],\r\n        text: item[displayField]\r\n      }\r\n    })\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n}\r\n","import { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlDateDefault, CtlDateTimeDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlDatePicker extends CtlInput<CtlDatePicker> {\r\n  static create(module: any, vjson: any): CtlDatePicker {\r\n    const that = new CtlDatePicker(vjson)\r\n    that._module = module\r\n\r\n    const baseConfig: any = {}\r\n    if (vjson.view === 'datetime') {\r\n      // 日期+时间输入\r\n      baseConfig.format = '%Y-%m-%d %H:%i:%s'\r\n      baseConfig.timepicker = true\r\n      _.defaultsDeep(vjson, CtlDateTimeDefault)\r\n    } else {\r\n      // 日期输入\r\n      baseConfig.format = '%Y-%m-%d'\r\n      baseConfig.timepicker = false\r\n      _.defaultsDeep(vjson, CtlDateDefault)\r\n    }\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      editable: true,\r\n      stringResult: true,\r\n      view: 'datepicker',\r\n      ...baseConfig,\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  /**\r\n   * 设置值 (如果不符合规定的格式 会清空)\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    const value = this._webix ? this._webix.getValue() : this._webixConfig.value\r\n    if (this.vjson.view === 'datetime') {\r\n      // 日期+时间输入\r\n      return _.toString(value).substr(0, 19)\r\n    } else {\r\n      // 日期输入\r\n      return _.toString(value).substr(0, 10)\r\n    }\r\n  }\r\n\r\n  /*============================ 私有部分 ============================*/\r\n\r\n  //更改 onChange 或实体时的值\r\n  protected valueProcess(value: any): any {\r\n    const moment: any = _.get(window, 'moment')\r\n    if (_.isDate(value)) {\r\n      value = moment(value)\r\n\r\n      if (this.vjson.view === 'datetime') {\r\n        // 日期+时间输入\r\n        value = value.isValid() ? value.format('YYYY-MM-DD HH:mm:ss') : ''\r\n      } else {\r\n        // 日期输入\r\n        value = value.isValid() ? value.format('YYYY-MM-DD') : ''\r\n      }\r\n\r\n      return value\r\n    }\r\n    return value\r\n  }\r\n}\r\n","import { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport {\r\n  CtlDateRangeDefault,\r\n  CtlDateTimeRangeDefault\r\n} from '../../CtlDefaultValue'\r\n\r\nexport class CtlDateRangePicker extends CtlInput<CtlDateRangePicker> {\r\n  static create(module: any, vjson: any): CtlDateRangePicker {\r\n    const that = new CtlDateRangePicker(vjson)\r\n    that._module = module\r\n\r\n    const baseConfig: any = {}\r\n    if (vjson.view === 'datetimerange') {\r\n      // 日期+时间输入\r\n      baseConfig.format = '%Y-%m-%d %H:%i:%s'\r\n      baseConfig.timepicker = true\r\n      _.defaultsDeep(vjson, CtlDateTimeRangeDefault)\r\n    } else {\r\n      // 日期输入\r\n      baseConfig.format = '%Y-%m-%d'\r\n      baseConfig.timepicker = false\r\n      _.defaultsDeep(vjson, CtlDateRangeDefault)\r\n    }\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      'value',\r\n      'separator',\r\n      'entityNameStart',\r\n      'entityNameEnd'\r\n    ])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      editable: true,\r\n      stringResult: true,\r\n      view: 'daterangepicker',\r\n      ...baseConfig,\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共部分 ============================*/\r\n  entityNameStart: string = ''\r\n  entityNameEnd: string = ''\r\n\r\n  get separator(): string {\r\n    if (!this._webix) {\r\n      return this._webixConfig.separator\r\n    }\r\n    return this._webix.config['separator']\r\n  }\r\n\r\n  set separator(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.separator = nv\r\n    } else {\r\n      this._webix.define('separator', nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置值 (如果不符合规定的格式 会清空)\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      if (typeof nv === 'string') {\r\n        const [start, end] = nv.split(this.separator)\r\n        this._webixConfig.value = { start, end }\r\n      } else {\r\n        this._webixConfig.value = nv\r\n      }\r\n    } else {\r\n      let value: any = nv\r\n      if (typeof nv === 'string') {\r\n        const [start, end] = nv.split(this.separator)\r\n        value = { start, end }\r\n      }\r\n      this._webix.setValue(value)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    const value = this._webix ? this._webix.getValue() : this._webixConfig.value\r\n    if (!value) {\r\n      return ''\r\n    }\r\n    const { start, end } = value\r\n    return start + this.separator + end\r\n  }\r\n\r\n  /*============================ 私有部分 ============================*/\r\n\r\n  //是否允许触发 onChange\r\n  protected valueValid(value: any): boolean {\r\n    const moment: any = _.get(window, 'moment')\r\n\r\n    if (_.isPlainObject(value)) {\r\n      let { start, end } = value\r\n      if (!moment(start).isValid() || !moment(end).isValid()) {\r\n        return true\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  //更改 onChange 或实体时的值\r\n  protected valueProcess(value: any): any {\r\n    const moment: any = _.get(window, 'moment')\r\n    if (_.isPlainObject(value)) {\r\n      let { start, end } = value\r\n      start = moment(start)\r\n      end = moment(end)\r\n\r\n      if (this.vjson.view === 'datetimerange') {\r\n        // 日期+时间输入\r\n        start = start.isValid() ? start.format('YYYY-MM-DD HH:mm:ss') : ''\r\n        end = end.isValid() ? end.format('YYYY-MM-DD HH:mm:ss') : ''\r\n      } else {\r\n        // 日期输入\r\n        start = start.isValid() ? start.format('YYYY-MM-DD') : ''\r\n        end = end.isValid() ? end.format('YYYY-MM-DD') : ''\r\n      }\r\n\r\n      if (this.entityNameStart) {\r\n        // 带 entityNameStart 实体绑定\r\n        _.set(this._module, this.entityNameStart, start)\r\n      }\r\n\r\n      if (this.entityNameEnd) {\r\n        // 带 entityNameEnd 实体绑定\r\n        _.set(this._module, this.entityNameEnd, end)\r\n      }\r\n\r\n      return start + this.separator + end\r\n    }\r\n    return value\r\n  }\r\n}\r\n","import { CtlBase } from '../CtlBase'\r\nimport { parseYvanPropChangeVJson } from '../CtlUtils'\r\n\r\nexport class CtlForm extends CtlBase<CtlForm> {\r\n  static create(module: any, vjson: any): CtlForm {\r\n    const that = new CtlForm(vjson)\r\n    that._module = module\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 vjson 存至 _webix (此时 _webix 还只是 vjson 代理对象)\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 yvanProxy 版的 _webix 合并至 webixProp, 最终合并至 vjson\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited: function (this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        // onAfterLoad: function (this: any) {\r\n        //   that.attachHandle(this)\r\n        // },\r\n        // onBeforeLoad: function (this: any) {\r\n        //   that.attachHandle(this)\r\n        // },\r\n        // onChange: function (this: any) {\r\n        //   that.attachHandle(this)\r\n        // },\r\n        // onViewShow: function (this: any) {\r\n        //   that.attachHandle(this)\r\n        // },\r\n        onDestruct: function () {\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  setValues(data: any) {\r\n    this._webix.setValues(data)\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlMultiComboDefault } from '../../CtlDefaultValue'\r\nimport { getFirstPinyin } from '../../Utils'\r\n\r\nexport class CtlMultiCombo extends CtlInput<CtlMultiCombo> {\r\n  static create(module: any, vjson: any): CtlMultiCombo {\r\n    const that = new CtlMultiCombo(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlMultiComboDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['options'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig)\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set options(nv: any[]) {\r\n    const options: any = {\r\n      filter(item: any, filterWord: string) {\r\n        if (_.size(filterWord) <= 0) {\r\n          return true\r\n        }\r\n        const nodePy = getFirstPinyin(item.text).toLowerCase()\r\n        return (\r\n          nodePy.indexOf(filterWord.toLowerCase()) >= 0 ||\r\n          item.text.indexOf(filterWord) >= 0\r\n        )\r\n      },\r\n      body: {\r\n        template: '#text#',\r\n        type: {\r\n          height: 36\r\n        },\r\n        data: nv\r\n      }\r\n    }\r\n\r\n    if (!this._webix) {\r\n      _.merge(this._webixConfig, {\r\n        view: 'multicombo',\r\n        options\r\n      })\r\n      return\r\n    }\r\n    this._webix.define('options', options)\r\n    this._webix.refresh()\r\n  }\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    this.options = nv\r\n  }\r\n\r\n  /**\r\n   * 值分隔符\r\n   */\r\n  get separator(): string {\r\n    if (!this._webix) {\r\n      return this._webixConfig.separator\r\n    }\r\n    return this._webix.config['separator']\r\n  }\r\n\r\n  /**\r\n   * 值分隔符\r\n   */\r\n  set separator(nv: string) {\r\n    if (!this._webix) {\r\n      this._webixConfig.separator = nv\r\n    } else {\r\n      this._webix.define('separator', nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置值 (如果不符合规定的格式 会清空)\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { YvEventDispatch, YvEvent } from '../../YvanEvent'\r\nimport { BaseDialog } from '../../YvanUIModule'\r\nimport { CtlSearchDefault } from '../../CtlDefaultValue'\r\nimport { CtlInput } from './CtlInput'\r\n\r\n/**\r\n * search widget 接口配置\r\n */\r\ninterface WidgetOption {\r\n  /**\r\n   * 要弹出的 widget 窗口实例\r\n   */\r\n  content: any\r\n\r\n  /**\r\n   * 默认要 子对话框带的参数\r\n   */\r\n  params: any\r\n\r\n  /**\r\n   * 写会数据时所带的映射关系\r\n   */\r\n  bind?: {\r\n    /**\r\n     * 本模块的实体对象+属性名 = 弹出框附属的属性名\r\n     */\r\n    [name: string]: string\r\n  }\r\n\r\n  /**\r\n   * 读取数据时的回调\r\n   */\r\n  onLoadData?: YvEvent<CtlSearch, void>\r\n  /**\r\n   * 回写时的回调\r\n   */\r\n  onConfirm?: YvEvent<CtlSearch, any>\r\n  /**\r\n   * 清空时的回调\r\n   */\r\n  onClear?: YvEvent<CtlSearch, void>\r\n}\r\n\r\nexport class CtlSearch extends CtlInput<CtlSearch> {\r\n  static create(module: any, vjson: any): CtlSearch {\r\n    const that = new CtlSearch(vjson)\r\n    that._module = module\r\n\r\n    const vvjson = _.cloneDeep(vjson);\r\n\r\n    _.defaultsDeep(vjson, CtlSearchDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['widget', 'value'])\r\n\r\n    // 将 vjson 存至 _webix (此时 _webix 还只是 vjson 代理对象)\r\n    that._webixConfig = vjson\r\n\r\n    if (!vjson.id) {\r\n      that.id = _.uniqueId('input_')\r\n    }\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, vvjson)\r\n          that._refreshIcon()\r\n        },\r\n        // onAfterRender(this: any) {\r\n        //     const $dom: any = $(this.$view);\r\n        //     $dom.on('keydown', (event: KeyboardEvent) => {\r\n        //         if (event.keyCode === 13) {\r\n        //             // 从键盘响应查询\r\n        //             event.stopPropagation();\r\n        //             event.preventDefault();\r\n        //\r\n        //             that.suppressRestore = true;\r\n        //             that._searchRequest(that._webix.getValue(), that.valueOrigin);\r\n        //             return;\r\n        //         }\r\n        //\r\n        //         YvEventDispatch(this.onKeydown, this, event);\r\n        //     });\r\n        // },\r\n        onEnter() {\r\n          // 从键盘响应查询\r\n          that._searchRequest(that._webix.getValue(), that.valueEdit)\r\n        },\r\n        onFocus(this: any) {\r\n          //进入焦点时，用户输入的值既为有效值\r\n          that.valueReal = that._webix.getValue()\r\n          YvEventDispatch(that.onFocus, that, undefined)\r\n        },\r\n        onBlur(this: any) {\r\n          if (that.onValidate || that._required) {\r\n            const result = that._resultToShowOrHide();\r\n            if (result) {\r\n              that._showValidateError()\r\n            }\r\n            else {\r\n              that._hideValidateError()\r\n            }\r\n          }\r\n          that._hideTootip()\r\n          //离开焦点时，用户输入的置为无效\r\n          that._webix.setValue(that.valueReal)\r\n          YvEventDispatch(that.onBlur, that, undefined)\r\n        },\r\n        // onDestruct(this: any) {\r\n        //     const $dom: any = $(this.$view);\r\n        //     $dom.off('keydown');\r\n        // },\r\n        onSearchIconClick(e: Event) {\r\n          // 从鼠标响应查询\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n\r\n          const $span = $(e.target as any)\r\n          if ($span.hasClass('wxi-close')) {\r\n            // 清空\r\n            that.clear()\r\n          } else {\r\n            // 查询\r\n            that._searchRequest(that._webix.getValue(), that.valueEdit)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n\r\n  /**\r\n   * 弹框配置\r\n   */\r\n  widget?: WidgetOption\r\n\r\n  /**\r\n   * 清空值\r\n   */\r\n  clear() {\r\n    if (!this.widget) {\r\n      return\r\n    }\r\n\r\n    this.supportChangeValue = true\r\n\r\n    // 发出 onClear 事件，如果事件返回 true，代表不用再清空\r\n    const hasHandle = YvEventDispatch(this.widget.onClear, this, undefined)\r\n    if (!hasHandle) {\r\n      //清空\r\n      _.forOwn(this.widget.bind, (value, key) => {\r\n        _.set(this._module, key, '')\r\n      })\r\n    }\r\n  }\r\n\r\n  get value(): string | undefined {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this.valueReal\r\n  }\r\n\r\n  set value(nv: string | undefined) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n      this.valueEdit = nv\r\n    }\r\n\r\n    if (this.supportChangeValue) {\r\n      this.valueReal = nv\r\n      this.supportChangeValue = false\r\n    }\r\n\r\n    YvEventDispatch(this.onChange, this, nv)\r\n    this._refreshIcon()\r\n  }\r\n\r\n  _refreshIcon() {\r\n    const value = this._webix ? this._webix.getValue() : this._webixConfig.value\r\n    const icon = value ? 'wxi-close' : 'wxi-search'\r\n    let $span: any = this._webix ? $(this._webix.$view).find('span') : undefined\r\n\r\n    if (!$span || $span.length <= 0) {\r\n      if (this._webix) {\r\n        this._webix.define('icon', icon)\r\n      } else {\r\n        this._webixConfig.icon = icon\r\n      }\r\n    } else {\r\n      $span\r\n        .removeClass('wxi-close')\r\n        .removeClass('wxi-search')\r\n        .addClass(icon)\r\n    }\r\n  }\r\n\r\n  /*============================ 私有部分 ============================*/\r\n  // 编辑值\r\n  private valueEdit?: string = undefined\r\n  // 是否设置真实值\r\n  private supportChangeValue: boolean = false\r\n  // 真实值\r\n  private valueReal?: string = undefined\r\n\r\n  /**\r\n   * 进入查询框\r\n   */\r\n  _searchRequest(queryValue: any, restoreValue: any) {\r\n    queryValue = _.toString(queryValue)\r\n    const searchCtl = this\r\n\r\n    if (!searchCtl.widget) {\r\n      console.error('没有设置 widget 属性')\r\n      return\r\n    }\r\n\r\n    const widgetParamter: any = {\r\n      query: queryValue,\r\n      params: searchCtl.widget.params\r\n    }\r\n\r\n    //构造查询的对象\r\n    //从 bind 获取\r\n    const queryObj = {}\r\n    _.forOwn(searchCtl.widget.bind, (value, key) => {\r\n      _.set(queryObj, value, _.get(this._module, key))\r\n    })\r\n\r\n    widgetParamter.existObject = queryObj\r\n\r\n    widgetParamter.onWidgetConfirm = function (data: any) {\r\n      if (!searchCtl.widget) {\r\n        console.error('没有设置 widget 属性')\r\n        return\r\n      }\r\n      searchCtl.supportChangeValue = true\r\n\r\n      YvEventDispatch(searchCtl.widget.onConfirm, searchCtl, undefined)\r\n\r\n      //写回\r\n      _.forOwn(searchCtl.widget.bind, (value, key) => {\r\n        if (_.has(data, value)) {\r\n          _.set(searchCtl._module, key, _.get(data, value))\r\n        }\r\n      })\r\n\r\n      this.closeDialog()\r\n      searchCtl.focus()\r\n    }\r\n    widgetParamter.onClose = function () {\r\n      //弹窗关闭后恢复原值，并开启还原\r\n      searchCtl.value = restoreValue\r\n      searchCtl.supportChangeValue = false\r\n      searchCtl.focus()\r\n    }\r\n    const dlg: BaseDialog<any, any, any> = new searchCtl.widget.content()\r\n    dlg.showDialog(widgetParamter, searchCtl._module, true)\r\n    // YvanUI.showDialogWidget(this, new searchCtl.widget.content(), widgetParamter);\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\n\r\nexport class CtlCarousel extends CtlBase<CtlCarousel> {\r\n  onShow?: YvEvent<CtlCarousel, string>\r\n\r\n  static create(module: any, vjson: any): CtlCarousel {\r\n    const that = new CtlCarousel(vjson)\r\n    that._module = module\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['onShow'])\r\n\r\n    // 将 vjson 存至 _webix (此时 _webix 还只是 vjson 代理对象)\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited() {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onDestruct: function () {\r\n          that.removeHandle()\r\n        },\r\n        onShow: function (this: any) {\r\n          const value = this.getActiveIndex()\r\n          YvEventDispatch(that.onShow, that, value)\r\n        }\r\n      }\r\n    })\r\n    return that\r\n  }\r\n}\r\n","const CtlGridLocale: any = {\r\n    rownumber: \" \",\r\n    page: \"页\",\r\n    more: \"更多\",\r\n    to: \"到\",\r\n    of: \"of\",\r\n    next: \"下一页\",\r\n    last: \"上一页\",\r\n    first: \"首页\",\r\n    previous: \"上一页\",\r\n    loadingOoo: `<i class=\"fa fa-spinner fa-pulse\"></i>`,\r\n    selectAll: \"查询全部\",\r\n    searchOoo: \"查询...\",\r\n    blanks: \"空白\",\r\n    filterOoo: \"过滤...\",\r\n    applyFilter: \"确定\",\r\n    clearFilter: \"清空\",\r\n    equals: \"相等\",\r\n    notEqual: \"不相等\",\r\n    lessThan: \"小于\",\r\n    greaterThan: \"大于\",\r\n    lessThanOrEqual: \"小于等于\",\r\n    greaterThanOrEqual: \"大于等于\",\r\n    inRange: \"范围查询\",\r\n    contains: \"包含\",\r\n    notContains: \"不包含\",\r\n    startsWith: \"开始于\",\r\n    endsWith: \"结束于\",\r\n    group: \"组\",\r\n    columns: \"列\",\r\n    filters: \"筛选\",\r\n    rowGroupColumns: \"laPivot Cols\",\r\n    rowGroupColumnsEmptyMessage: \"la drag cols to group\",\r\n    valueColumns: \"laValue Cols\",\r\n    pivotMode: \"laPivot-Mode\",\r\n    groups: \"laGroups\",\r\n    values: \"值\",\r\n    pivots: \"laPivots\",\r\n    valueColumnsEmptyMessage: \"la drag cols to aggregate\",\r\n    pivotColumnsEmptyMessage: \"la drag here to pivot\",\r\n    toolPanelButton: \"la tool panel\",\r\n    noRowsToShow: \"数据为空\",\r\n    pinColumn: \"laPin Column\",\r\n    valueAggregation: \"laValue Agg\",\r\n    autosizeThiscolumn: \"laAutosize Diz\",\r\n    autosizeAllColumns: \"laAutsoie em All\",\r\n    groupBy: \"排序\",\r\n    ungroupBy: \"不排序\",\r\n    resetColumns: \"重置列\",\r\n    expandAll: \"展开全部\",\r\n    collapseAll: \"关闭\",\r\n    toolPanel: \"工具面板\",\r\n    export: \"导出\",\r\n    csvExport: \"导出为CSV格式文件\",\r\n    excelExport: \"导出到Excel\",\r\n    pinLeft: \"laPin &lt;&lt;\",\r\n    pinRight: \"laPin &gt;&gt;\",\r\n    noPin: \"laDontPin &lt;&gt;\",\r\n    sum: \"总数\",\r\n    min: \"最小值\",\r\n    max: \"最大值\",\r\n    none: \"无\",\r\n    count: \"总\",\r\n    average: \"平均值\",\r\n    copy: \"复制\",\r\n    copyWithHeaders: \"携带表头复制\",\r\n    ctrlC: \"ctrl + C\",\r\n    paste: \"粘贴\",\r\n    ctrlV: \"ctrl + V\"\r\n};\r\n\r\nexport default CtlGridLocale\r\n","import {CtlGrid, GridRefreshMode} from './CtlGrid'\r\n\r\nexport class CtlGridPage {\r\n  public grid: CtlGrid\r\n\r\n  public getPageData!: (currentPage: number, pageSize: number) => {}\r\n\r\n  private _currentPage: number = 1\r\n\r\n  private _pageSize: number = 100\r\n\r\n  private _pageCount: number = 0\r\n\r\n  private _itemCount: number = 0\r\n\r\n  get currentPage() {\r\n    return this._currentPage\r\n  }\r\n  set currentPage(cp: number) {\r\n    this._currentPage = cp\r\n    if (this._currentPage > this._pageCount) {\r\n      this._currentPage = this._pageCount\r\n    }\r\n    if (this._currentPage <= 0 && this._pageCount > 0) {\r\n      this._currentPage = 1\r\n    }\r\n    this.refreshPageViewInfo()\r\n  }\r\n\r\n  get pageSize() {\r\n    return this._pageSize\r\n  }\r\n  set pageSize(ps: number) {\r\n    if (ps <= 0) {\r\n      return\r\n    }\r\n\r\n    this._pageSize = ps\r\n    this.refreshPageViewInfo()\r\n  }\r\n\r\n  get pageCount() {\r\n    return this._pageCount\r\n  }\r\n\r\n  get itemCount() {\r\n    return this._itemCount\r\n  }\r\n\r\n  set itemCount(ic: number) {\r\n    this._itemCount = ic\r\n    this.refreshPageViewInfo()\r\n  }\r\n\r\n  public refreshGrid() {\r\n    this.getPageData(1, this.pageSize)\r\n  }\r\n\r\n  private firstButtomDom: any\r\n  private prevButtomDom: any\r\n  private nextButtomDom: any\r\n  private lastButtomDom: any\r\n  private currenpageDom: any\r\n  private gridpagerDom: any\r\n  private itemcountDom: any\r\n  private pageSizeDom: any\r\n  private gridpagerLeft: any\r\n  private gridpagerRight: any\r\n  private gridpagerCenter: any\r\n\r\n  constructor(grid: CtlGrid) {\r\n    this.grid = grid\r\n    this._pageSize = this.grid.pageSize\r\n\r\n    /** 找到aggrid 自带的pageview 替换子dom节点 **/\r\n\r\n    var dom = this.grid.webix.$view.getElementsByClassName(\r\n      'ag-paging-panel ag-unselectable'\r\n    )\r\n    var su_id = this.grid.webix.config.id\r\n    if (dom.length <= 0) {\r\n      return\r\n    }\r\n    /** 显示底部分页栏 **/\r\n    dom[0].className = 'ag-paging-panel ag-unselectable'\r\n\r\n    dom[0].innerHTML =\r\n      '<div id=\"wwww\" role=\"group\">' +\r\n      '    <table class=\"ui-pg-table\" style=\"width:100%;table-layout:fixed;height:100%;\">' +\r\n      '        <tbody><tr>' +\r\n      '            <td id=\"gridpager_left_' +\r\n      su_id +\r\n      '\" style=\"display: none\"></td>' +\r\n      '            <td id=\"gridpager_center_' +\r\n      su_id +\r\n      '\">' +\r\n      '                <table style=\"table-layout:auto;white-space: pre;margin-left:0;margin-right:auto;\">' +\r\n      '                    <tbody><tr>' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"First Page\" style=\"cursor: default;\"><span id=\"first_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-double-left\"></span></td>' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"Previous Page\" style=\"cursor: default;\"><span id=\"prev_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-left\"></span></td>' +\r\n      '                        <td><span style=\"color: #c0c0c0\">|</span></td>\\n' +\r\n      '                        <td dir=\"ltr\"><input aria-label=\"Page No.\" id=\"currenpage_' +\r\n      su_id +\r\n      '\" type=\"text\" size=\"2\" maxlength=\"7\" value=\"0\"> 共 <span id=\"gridpager_' +\r\n      su_id +\r\n      '\">219</span> 页 </td>' +\r\n      '                        <td><span style=\"color: #c0c0c0\">|</span></td>\\n' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"Next Page\" style=\"cursor: default;\"><span id=\"next_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-right\"></span></td>' +\r\n      '                        <td role=\"button\" tabindex=\"0\" class=\"ctl-grid-page ui-pg-button\" title=\"Last Page\" style=\"cursor: default;\"><span id=\"last_' +\r\n      su_id +\r\n      '\" class=\"ctl-grid-page ui-icon fa fa-angle-double-right\"></span></td>' +\r\n      '                        <td dir=\"ltr\"><select id=\"pagesize_' +\r\n      su_id +\r\n      '\" title=\"Records per Page\"><option value=\"20\" selected=\"selected\">20</option><option value=\"50\">50</option><option value=\"100\">100</option><option value=\"200\">200</option><option value=\"500\">500</option><option value=\"1000\">1000</option></select></td>' +\r\n      '                    </tr></tbody>' +\r\n      '                </table>' +\r\n      '            </td>' +\r\n      '            <td id=\"gridpager_right_' +\r\n      su_id +\r\n      '\" style=\"text-align:right;\">' +\r\n      '               <span dir=\"ltr\" style=\"text-align:right\" id=\"itemcount_' +\r\n      su_id +\r\n      '\">41 - 60　共 4,367 条</span>' +\r\n      '            </td>' +\r\n      '        </tr></tbody>' +\r\n      '    </table>' +\r\n      '</div>'\r\n\r\n    this.firstButtomDom = document.getElementById('first_' + su_id)\r\n    this.prevButtomDom = document.getElementById('prev_' + su_id)\r\n    this.nextButtomDom = document.getElementById('next_' + su_id)\r\n    this.lastButtomDom = document.getElementById('last_' + su_id)\r\n    this.currenpageDom = document.getElementById('currenpage_' + su_id)\r\n    this.gridpagerDom = document.getElementById('gridpager_' + su_id)\r\n    this.itemcountDom = document.getElementById('itemcount_' + su_id)\r\n    this.pageSizeDom = document.getElementById('pagesize_' + su_id)\r\n    this.gridpagerCenter = document.getElementById('gridpager_center_' + su_id)\r\n    this.gridpagerLeft = document.getElementById('gridpager_left_' + su_id)\r\n    this.gridpagerRight = document.getElementById('gridpager_right_' + su_id)\r\n\r\n    if (this.grid.pagination) {\r\n      this.gridpagerCenter.style.display = ''\r\n    } else {\r\n      this.gridpagerCenter.style.display = 'none'\r\n    }\r\n\r\n    this.refreshPageViewInfo()\r\n\r\n    var me = this\r\n\r\n    this.currenpageDom.onkeydown = function(event: any) {\r\n      if (event.keyCode === 13) {\r\n        // enter键\r\n        let cp = parseInt(event.srcElement.value)\r\n        if (cp > me.pageCount) {\r\n          cp = me.pageCount\r\n        }\r\n        if (cp <= 0) {\r\n          cp = 1\r\n        }\r\n        me.grid.refreshMode = GridRefreshMode.refreshWithFilter;\r\n        me.getPageData(cp, me.pageSize)\r\n      } else {\r\n        if (event.keyCode !== 8 && (event.keyCode < 48 || event.keyCode > 57)) {\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    this.pageSizeDom.onchange = function(v: any) {\r\n      me.pageSize = v.srcElement.value\r\n      me.grid.paginationSetPageSize(me.pageSize)\r\n      if (typeof me.getPageData === 'function') {\r\n        me.grid.refreshMode = GridRefreshMode.refreshWithFilter;\r\n        me.getPageData(1, me.pageSize)\r\n      }\r\n    }\r\n\r\n    var buttons = dom[0].getElementsByClassName('ctl-grid-page ui-icon')\r\n    var buttons1 = dom[0].getElementsByClassName(\r\n      'ctl-grid-page ui-icon-disable'\r\n    )\r\n    buttons = _.union(buttons, buttons1)\r\n    _.each(buttons, button => {\r\n      button.onclick = function(q: any) {\r\n        for (let i = 0; i < q.srcElement.classList.length; i++) {\r\n          if (q.srcElement.classList[i] === 'ui-icon-disable') {\r\n            return\r\n          }\r\n        }\r\n        const pre = _.split(q.srcElement.id, '_' + me.grid.webix.config.id)\r\n\r\n        let cp = me.currentPage\r\n        switch (pre[0]) {\r\n          case 'first': {\r\n            cp = 1\r\n            break\r\n          }\r\n          case 'prev': {\r\n            if (cp > 1) {\r\n              cp -= 1\r\n            }\r\n            break\r\n          }\r\n          case 'next': {\r\n            if (cp < me.pageCount) {\r\n              cp += 1\r\n            }\r\n            break\r\n          }\r\n          case 'last': {\r\n            cp = me.pageCount\r\n            me.disableButton(q.srcElement)\r\n            break\r\n          }\r\n        }\r\n\r\n        if (typeof me.getPageData === 'function') {\r\n          me.grid.refreshMode = GridRefreshMode.refreshWithFilter;\r\n          me.getPageData(cp, me.pageSize)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  private disableButton(element: any) {\r\n    if (element.className.includes('ui-icon-disable')) {\r\n      return\r\n    }\r\n    element.className = _.replace(\r\n      element.className,\r\n      'ui-icon',\r\n      'ui-icon-disable'\r\n    )\r\n  }\r\n\r\n  private activeButton(element: any) {\r\n    if (\r\n      !element.className.includes('ui-icon-disable') &&\r\n      element.className.includes('ui-icon')\r\n    ) {\r\n      return\r\n    }\r\n    element.className = _.replace(\r\n      element.className,\r\n      'ui-icon-disable',\r\n      'ui-icon'\r\n    )\r\n  }\r\n\r\n  private refreshPageViewInfo() {\r\n    if (this.grid.pagination) {\r\n      if (this._itemCount > 0 && this._pageSize > 0) {\r\n        this._pageCount = Math.ceil(this._itemCount / this._pageSize)\r\n      }\r\n\r\n      this.pageSizeDom.value = this._pageSize\r\n      this.currenpageDom.value = this._currentPage\r\n      this.gridpagerDom.innerText = this._pageCount\r\n\r\n      if (this.currentPage <= 0) {\r\n        this.itemcountDom.innerText = '0 - 0　共 0 条'\r\n      } else {\r\n        let min = (this.currentPage - 1) * this.pageSize + 1\r\n        let max = this.currentPage * this.pageSize\r\n\r\n        if (min > this._itemCount) {\r\n          min = this._itemCount\r\n        }\r\n        if (max > this._itemCount) {\r\n          max = this._itemCount\r\n        }\r\n        this.itemcountDom.innerText =\r\n          min + ' - ' + max + '  共 ' + this.itemCount + ' 条'\r\n      }\r\n\r\n      if (this.currentPage > 1) {\r\n        this.activeButton(this.firstButtomDom)\r\n        this.activeButton(this.prevButtomDom)\r\n      } else {\r\n        this.disableButton(this.firstButtomDom)\r\n        this.disableButton(this.prevButtomDom)\r\n      }\r\n\r\n      if (this.currentPage < this.pageCount) {\r\n        this.activeButton(this.nextButtomDom)\r\n        this.activeButton(this.lastButtomDom)\r\n      } else {\r\n        this.disableButton(this.nextButtomDom)\r\n        this.disableButton(this.lastButtomDom)\r\n      }\r\n    } else {\r\n      this.itemcountDom.innerText = '共 ' + this.itemCount + ' 条'\r\n    }\r\n  }\r\n}\r\n","export default function (params: any, grid?: any) {\r\n    if (params.node.cstate) {\r\n        if (params.node.cstate === 'validate' || params.node.cstate === 'pending') {\r\n            return '<i class=\"fa fa-spinner fa-spin\"></i>'\r\n        }\r\n\r\n        if (params.node.cstate === 'editing') {\r\n            return '<i class=\"fa fa-edit\"></i>'\r\n        }\r\n\r\n        if (params.node.cstate === 'ok') {\r\n            return '<i class=\"fa fa-check\" style=\"color: green;\"></i>'\r\n        }\r\n\r\n        if (params.node.cstate === 'error') {\r\n            return '<i class=\"fa fa-exclamation-circle\" style=\"color: red;\"></i>'\r\n        }\r\n    }\r\n\r\n    if (params.node.rowPinned === 'top') {\r\n        return '+'\r\n    }\r\n\r\n    if (_.size(params.data) <= 0) {\r\n        //数据还没刷出来\r\n        return '<i class=\"fa fa-spinner fa-spin\"></i>'\r\n    }\r\n    if (grid && grid.pagination && grid.gridPage) {\r\n        return 1 + params.node.rowIndex + grid.gridPage.pageSize * (grid.gridPage.currentPage - 1);\r\n    }\r\n    return 1 + params.node.rowIndex\r\n}\r\n","export const YvGridProp: any = {\r\n    editable: false,\r\n    checkbox: false,\r\n    editSingleClick: true,\r\n    allowNewRow: true,\r\n    filterable: true,\r\n    loading: false,\r\n    showRowNumber: true,\r\n    autoSizeColumns: false,\r\n    allowCellSelection: false,\r\n    allowRowSelection: true,\r\n    idField: undefined,\r\n    valueSep: true,\r\n    saveOn: 'rowChanged',\r\n    newRowData: undefined,\r\n    stopEditingWhenGridLosesFocus: false,\r\n    columns: [],\r\n    columnGroup: [],\r\n    data: undefined\r\n};\r\n\r\nexport const YvGridColumnProp: any = {\r\n    hidden: false,\r\n    field: '',\r\n    title: '',\r\n    width: undefined,\r\n    maxwidth: 800,\r\n    minwidth: 0,\r\n    sortable: false,\r\n    resizable: true,\r\n    editable: false,\r\n    filterable: false,\r\n    calcExpr: undefined,\r\n    editMode: 'text'\r\n};\r\n\r\nexport const YvGridColumnEditProp: any = {\r\n    widget: undefined,\r\n    bind: [],\r\n    on: true,\r\n    off: false,\r\n    precision: 0,\r\n    idField: 'id',\r\n    textField: 'text',\r\n    maxlength: undefined,\r\n    dateformat: 'yyyy-MM-dd',\r\n    datetimeformat: 'yyyy-MM-dd HH:mm:ss',\r\n    data: []\r\n};\r\n","export default class CtlGridCellCheckbox {\r\n\r\n    checkedToggle(vue: any, childSpan: any, id: any) {\r\n        return function () {\r\n            if (childSpan.classList.contains('checked')) {\r\n                const index = vue.checkedIds.indexOf(id)\r\n                if (index >= 0) {\r\n                    vue.checkedIds.splice(index, 1)\r\n                }\r\n                childSpan.classList.remove('checked')\r\n\r\n            } else {\r\n                vue.checkedIds.push(id)\r\n                childSpan.classList.add('checked')\r\n            }\r\n\r\n            // 观测，是否显示\"全选\"框的函数\r\n            if (vue.allCheckedBoxStateChanged) {\r\n                vue.allCheckedBoxStateChanged();\r\n            }\r\n        }\r\n    }\r\n\r\n    innerRefresh(this: any, gridOptions: any) {\r\n        const vue = gridOptions.api.vue\r\n        const data = gridOptions.data\r\n        const id = vue._getIdByRow(data)\r\n        const childSpan = this.$el.querySelectorAll('.yvan-checkbox-switch')[0]\r\n        if (!childSpan) {\r\n            return\r\n        }\r\n\r\n        if (gridOptions.isCheckedIds) {\r\n            //用来做勾选数据行用 checkedIds\r\n            if (vue.checkedIds.indexOf(id) >= 0) {\r\n                childSpan.classList.add('checked')\r\n            } else {\r\n                childSpan.classList.remove('checked')\r\n            }\r\n\r\n            // 观测，是否显示\"全选\"框的函数\r\n            if (vue.allCheckedBoxStateChanged) {\r\n                vue.allCheckedBoxStateChanged();\r\n            }\r\n\r\n        } else {\r\n            //用来做数据展示用\r\n            childSpan.classList.add('disabled')\r\n            if (typeof gridOptions.on === 'string') {\r\n                //on 是个字符串\r\n                if (gridOptions.on === '' + gridOptions.value) {\r\n                    childSpan.classList.add('checked')\r\n                }\r\n\r\n            } else if (typeof gridOptions.on === 'function') {\r\n                //on 是个函数\r\n                if (gridOptions.on.call(vue, gridOptions.value, data)) {\r\n                    childSpan.classList.add('checked')\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    init(this: any, gridOptions: any) {\r\n        this.$el = document.createElement('div')\r\n        if (gridOptions.node.rowPinned) {\r\n            //这是在添加行或结尾行的数据，不用任何展示\r\n            return\r\n        }\r\n\r\n        this.$el.classList.add('yvan-checkbox')\r\n        this.$el.innerHTML =\r\n            '<span class=\"yvan-checkbox-switch\"><span class=\"yvan-checkbox-status\"></span></span>'\r\n\r\n        this.innerRefresh(gridOptions)\r\n\r\n        const vue = gridOptions.api.vue;\r\n        const childSpan = this.$el.querySelectorAll('.yvan-checkbox-switch')[0];\r\n        const data = gridOptions.data\r\n        const id = vue._getIdByRow(data)\r\n        this.$el.addEventListener('click', this.checkedToggle(vue, childSpan, id))\r\n    }\r\n\r\n    getGui(this: any) {\r\n        return this.$el\r\n    }\r\n\r\n    destroy() {\r\n    }\r\n\r\n    refresh(gridOptions: any) {\r\n        this.innerRefresh(gridOptions)\r\n    }\r\n}\r\n","export default class CtlGridHeadCheckbox {\r\n\r\n    checkedToggle(ctlGrid: any, gridOptions: any) {\r\n        const that: any = this;\r\n        return function () {\r\n            if (ctlGrid.idField) {\r\n\r\n                const domSpan = $(that.$el).find('.yvan-checkbox-switch');\r\n                const isChecked = domSpan.is('.checked');\r\n                // 当前表格的 全部行ID\r\n                const dataIds = _.map(ctlGrid.getData(), v => _.get(v, ctlGrid.idField));\r\n\r\n                if (isChecked) {\r\n                    // 取消全选\r\n                    for (let i = 0; i < dataIds.length; i++) {\r\n                        const id = dataIds[i];\r\n                        const index = ctlGrid.checkedIds.indexOf(id)\r\n                        if (index >= 0) {\r\n                            ctlGrid.checkedIds.splice(index, 1)\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    // 全选\r\n                    for (let i = 0; i < dataIds.length; i++) {\r\n                        const id = dataIds[i];\r\n                        if (!_.includes(ctlGrid.checkedIds, id)) {\r\n                            ctlGrid.checkedIds.push(id);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // 刷新\r\n                ctlGrid.gridApi.refreshCells({\r\n                    columns: ['__CB__'],\r\n                    force: true\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    innerRefresh(this: any, gridOptions: any) {\r\n        const ctlGrid = gridOptions.api.vue\r\n        const domSpan = $(this.$el).find('.yvan-checkbox-switch');\r\n\r\n        if (ctlGrid.idField) {\r\n            ctlGrid.allCheckedBoxStateChanged = () => {\r\n                // 当前表格的 全部行ID\r\n                const dataIds = _.map(ctlGrid.getData(), v => _.get(v, ctlGrid.idField));\r\n\r\n                let allIn = true;\r\n                for (let i = 0; i < dataIds.length; i++) {\r\n                    const id = dataIds[i];\r\n                    if (!_.includes(ctlGrid.checkedIds, id)) {\r\n                        // 不是全部都包含\r\n                        allIn = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                const isChecked = domSpan.is('.checked');\r\n                if (isChecked) {\r\n                    if (!allIn) {\r\n                        domSpan.removeClass('checked');\r\n                    }\r\n                } else {\r\n                    if (allIn) {\r\n                        domSpan.addClass('checked');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    init(this: any, gridOptions: any) {\r\n        this.$el = document.createElement('div')\r\n\r\n        this.$el.classList.add('yvan-checkbox')\r\n        this.$el.innerHTML =\r\n            '<span class=\"yvan-checkbox-switch\"><span class=\"yvan-checkbox-status\"></span></span>'\r\n\r\n        _.defer(() => {\r\n            const ctlGrid = gridOptions.api.vue\r\n            this.$el.addEventListener('click', this.checkedToggle(ctlGrid, gridOptions))\r\n            this.innerRefresh(gridOptions)\r\n        });\r\n\r\n        // clearInterval(this.intervalHandle)\r\n    }\r\n\r\n    getGui(this: any) {\r\n        return this.$el\r\n    }\r\n\r\n    destroy() {\r\n    }\r\n\r\n    refresh(gridOptions: any) {\r\n        this.innerRefresh(gridOptions)\r\n    }\r\n}","import * as YvanUI from './YvanUIExtend'\r\nimport { Ajax } from './YvanUIAjax'\r\nimport { GridDataSource, GridDataSourceSql, GridDataSourceServer, GridDataSourceAjax, GridDataSourceStaticFunction, WatchParam, GetParam } from './YvanDataSourceGrid'\r\nimport { isDesignMode } from './DesignHelper'\r\nimport { brokerInvoke } from './Service'\r\nimport { Db } from './YvanUIDb'\r\nimport { GridRefreshMode } from \"./CtlGrid\";\r\nimport { YvEventDispatch } from './YvanEvent'\r\n\r\nexport class YvanDataSourceGrid {\r\n  private option: GridDataSource\r\n  private ctl: any\r\n  private readonly module: any\r\n  private watches: Function[] = []\r\n  private isFirstAutoLoad: boolean = true //是否为第一次自动读取\r\n\r\n  private reload: undefined | (() => void)\r\n  private rowCount: number | undefined\r\n  public lastFilterModel: any\r\n  public lastSortModel: any\r\n\r\n  serverQuery = _.debounce((option: GridDataSourceSql | GridDataSourceServer | GridDataSourceAjax, paramFunction: undefined | (() => any), params: any) => {\r\n    const that = this\r\n\r\n    let needCount = false\r\n    if (typeof that.rowCount === 'undefined') {\r\n      //从来没有统计过 rowCount(记录数)\r\n      needCount = true\r\n      that.lastFilterModel = _.cloneDeep(params.filterModel)\r\n      that.lastSortModel = _.cloneDeep(params.sortModel)\r\n    } else {\r\n      if (!_.isEqual(that.lastFilterModel, params.filterModel)) {\r\n        //深度对比，如果 filter 模型更改了，需要重新统计 rowCount(记录数)\r\n        needCount = true\r\n        that.lastFilterModel = _.cloneDeep(params.filterModel)\r\n        that.lastSortModel = _.cloneDeep(params.sortModel)\r\n      }\r\n    }\r\n\r\n    // 获取所有参数\r\n    const queryParams = {\r\n      ...(typeof paramFunction === 'function' ? paramFunction() : undefined)\r\n    }\r\n\r\n    let ajaxPromise: Promise<Db.Response>;\r\n    if (option.type === 'SQL') {\r\n      const ajaxParam = {\r\n        params: queryParams,\r\n        limit: params.endRow - params.startRow,\r\n        limitOffset: params.startRow,\r\n        needCount,\r\n        sortModel: params.sortModel,\r\n        filterModel: params.filterModel,\r\n        sqlId: option.sqlId\r\n      };\r\n      const allow = YvEventDispatch(option.onBefore, that.ctl, ajaxParam)\r\n      if (allow === false) {\r\n        // 不允许请求\r\n        return;\r\n      }\r\n      ajaxPromise = YvanUI.dbs[option.db].query(ajaxParam)\r\n\r\n    } else if (option.type === 'Server') {\r\n      const [serverUrl, method] = _.split(option.method, '@');\r\n      const ajaxParam = {\r\n        params: queryParams,\r\n        limit: params.endRow - params.startRow,\r\n        limitOffset: params.startRow,\r\n        needCount,\r\n        sortModel: params.sortModel,\r\n        filterModel: params.filterModel,\r\n      }\r\n      const allow = YvEventDispatch(option.onBefore, that.ctl, ajaxParam)\r\n      if (allow === false) {\r\n        // 不允许请求\r\n        return;\r\n      }\r\n      ajaxPromise = <Promise<Db.Response>>brokerInvoke(YvanUI.getServerPrefix(serverUrl), method, ajaxParam)\r\n\r\n    } else if (option.type === 'Ajax') {\r\n      const ajax: Ajax.Function = _.get(window, 'YvanUI.ajax');\r\n      const ajaxParam: Ajax.Option = {\r\n        url: option.url,\r\n        method: 'POST-JSON',\r\n        data: {\r\n          params: queryParams,\r\n          limit: params.endRow - params.startRow,\r\n          limitOffset: params.startRow,\r\n          needCount,\r\n          sortModel: params.sortModel,\r\n          filterModel: params.filterModel,\r\n        }\r\n      }\r\n      const allow = YvEventDispatch(option.onBefore, that.ctl, ajaxParam)\r\n      if (allow === false) {\r\n        // 不允许请求\r\n        return;\r\n      }\r\n      ajaxPromise = <Promise<Db.Response>>ajax(ajaxParam);\r\n\r\n    } else {\r\n      console.error('unSupport dataSource mode:', option);\r\n      params.failCallback();\r\n      return;\r\n    }\r\n\r\n    //异步请求数据内容\r\n    that.ctl.loading = true\r\n    ajaxPromise.then(res => {\r\n      YvEventDispatch(option.onAfter, that.ctl, res)\r\n\r\n      const { data: resultData, pagination, params: resParams } = res\r\n      if (needCount) {\r\n        if (_.has(res, 'totalCount')) {\r\n          // 兼容老模式\r\n          that.rowCount = _.get(res, 'totalCount');\r\n\r\n        } else {\r\n          that.rowCount = pagination.total\r\n        }\r\n      }\r\n      params.successCallback(resultData, that.rowCount)\r\n      /** 如果不分页就在这里设置总条目数量，避免多次刷新分页栏 **/\r\n      if (!that.ctl.pagination) {\r\n        that.ctl.gridPage.itemCount = that.rowCount\r\n      }\r\n      that.ctl._bindingComplete()\r\n      if (that.ctl.entityName) {\r\n        _.set(that.module, that.ctl.entityName + '.selectedRow', that.ctl.getSelectedRow())\r\n      }\r\n\r\n    }).catch(r => {\r\n      params.failCallback()\r\n\r\n    }).finally(() => {\r\n      this.ctl.loading = false\r\n    })\r\n  })\r\n\r\n  /**\r\n   * SQL取值\r\n   */\r\n  setSqlMode(option: GridDataSourceSql | GridDataSourceServer | GridDataSourceAjax, paramFunction: undefined | (() => any)) {\r\n    const that = this\r\n    this.reload = () => {\r\n      this.ctl.loading = true\r\n      that.clearRowCount()\r\n      if (that.ctl.entityName) {\r\n        _.set(that.module, that.ctl.entityName + '.selectedRow', undefined)\r\n      }\r\n      that.ctl.gridApi.hasDataSource = true\r\n\r\n      if (that.ctl.pagination) {\r\n        /** 分页模式 **/\r\n        that.ctl.gridPage.getPageData = (currentPage: number, pageSize: number) => {\r\n          let params: any = {}\r\n          params.successCallback = (data: [], rowCount: number) => {\r\n\r\n            // if (needClearRefresh) {\r\n            //   that.ctl.setData(data)\r\n\r\n            // } else {\r\n            // 不能直接用 setData, 会造成 filter 被置空\r\n            // 使用 _transactionUpdate 也有 bug ，如果查询条件被改变，也不会分页回顶端\r\n            that.ctl._transactionUpdate(data)\r\n            // }\r\n            // that.ctl.setData(data)\r\n            that.ctl.gridPage.itemCount = rowCount\r\n            that.ctl.gridPage.currentPage = currentPage\r\n          }\r\n          params.failCallback = () => {\r\n            console.error('error')\r\n          }\r\n          params.startRow = (currentPage - 1) * pageSize\r\n          params.endRow = currentPage * pageSize\r\n          params.filterModel = that.ctl.gridApi.getFilterModel()\r\n          params.sortModel = that.ctl.gridApi.getSortModel()\r\n\r\n          if (that.isFirstAutoLoad && that.ctl.autoLoad === false) {\r\n            that.rowCount = 0\r\n            params.successCallback([], that.rowCount)\r\n            that.ctl.loading = false\r\n            that.isFirstAutoLoad = false\r\n\r\n          } else {\r\n            that.serverQuery(option, paramFunction, params)\r\n          }\r\n        }\r\n        that.ctl.gridPage.getPageData(1, that.ctl.gridPage.pageSize);\r\n      } else {\r\n        /** 无限滚动模式 **/\r\n        that.ctl.gridApi.setDatasource({\r\n          getRows: (params: any) => {\r\n            if (that.isFirstAutoLoad && that.ctl.autoLoad === false) {\r\n              that.rowCount = 0\r\n              params.successCallback([], that.rowCount)\r\n              that.ctl.loading = false\r\n              that.isFirstAutoLoad = false\r\n              return\r\n            }\r\n\r\n            that.serverQuery(option, paramFunction, params)\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    this.reload()\r\n  }\r\n\r\n  /**\r\n   * 自定义函数式取值\r\n   */\r\n  setCustomFunctionMode(option: GridDataSourceStaticFunction, paramFunction: undefined | (() => any)) {\r\n    const that = this\r\n    this.reload = () => {\r\n      that.clearRowCount()\r\n      if (that.ctl.entityName) {\r\n        _.set(that.module, that.ctl.entityName + '.selectedRow', undefined)\r\n      }\r\n      that.ctl.loading = true\r\n\r\n      // rowModelType = infinite\r\n      that.ctl.gridApi.setDatasource({\r\n        getRows: (params: any) => {\r\n          that.ctl.loading = true\r\n\r\n          if (that.isFirstAutoLoad && that.ctl.autoLoad === false) {\r\n            that.rowCount = 0\r\n            params.successCallback([], that.rowCount)\r\n            that.ctl.loading = false\r\n            that.isFirstAutoLoad = false\r\n            return\r\n          }\r\n\r\n          option.call(that.module, that.ctl, {\r\n            param:\r\n              typeof paramFunction === 'function' ? paramFunction() : undefined,\r\n\r\n            failCallback: () => {\r\n              params.failCallback()\r\n            },\r\n\r\n            successCallback: (data: any[], dataLength: number | undefined) => {\r\n              params.successCallback(data, dataLength)\r\n\r\n              that.ctl.loading = false\r\n              that.ctl.gridPage.itemCount = dataLength\r\n              that.ctl._bindingComplete()\r\n              if (that.ctl.entityName) {\r\n                _.set(\r\n                  that.module,\r\n                  that.ctl.entityName + '.selectedRow',\r\n                  that.ctl.getSelectedRow()\r\n                )\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n    this.reload()\r\n  }\r\n\r\n  setCodeArrayMode(option: Array<any>) {\r\n    const that = this\r\n    const rowCount = option.length\r\n    this.reload = () => {\r\n      this.ctl.loading = true\r\n      that.clearRowCount()\r\n      if (that.ctl.entityName) {\r\n        _.set(that.module, that.ctl.entityName + '.selectedRow', undefined)\r\n      }\r\n      that.ctl.gridApi.hasDataSource = true\r\n\r\n      if (that.ctl.pagination) {\r\n        /** 分页模式 **/\r\n\r\n        that.ctl.gridPage.getPageData = (currentPage: number, pageSize: number) => {\r\n          let d = []\r\n          const startRow = (currentPage - 1) * pageSize\r\n          let endRow = currentPage * pageSize\r\n          endRow = endRow > rowCount ? rowCount : endRow\r\n\r\n          for (let i = startRow; i < endRow; i++) {\r\n            d.push(option[i])\r\n          }\r\n          that.ctl.setData(d)\r\n          that.ctl.gridPage.itemCount = rowCount\r\n          that.ctl.gridPage.currentPage = currentPage\r\n        }\r\n\r\n        that.ctl.gridPage.getPageData(1, that.ctl.gridPage.pageSize)\r\n      } else {\r\n        /** 不分页模式 **/\r\n        that.ctl.setData(option)\r\n        that.ctl.gridPage.itemCount = rowCount\r\n      }\r\n    }\r\n\r\n    this.reload()\r\n  }\r\n\r\n  constructor(ctl: any, option: GridDataSource) {\r\n    if (isDesignMode()) {\r\n      return\r\n    }\r\n    this.ctl = ctl\r\n    this.option = option\r\n    this.module = ctl._webix.$scope\r\n\r\n    if (!option) {\r\n      //没有设值，退出\r\n      this.reload = undefined\r\n      return\r\n    }\r\n\r\n    if (_.isArray(option)) {\r\n      this.setCodeArrayMode(option)\r\n      return\r\n    }\r\n\r\n    if (typeof option === 'function') {\r\n      //以 function 方式运行\r\n      this.setCustomFunctionMode(option, undefined)\r\n      return\r\n    }\r\n\r\n    // 使 watch 生效\r\n    _.forOwn(option.params, value => {\r\n      if (!_.has(value, '$watch')) {\r\n        return\r\n      }\r\n      const watchOption: WatchParam = value\r\n      this.module.$watch(watchOption.$watch, () => {\r\n        if (this.reload) {\r\n          this.reload()\r\n        }\r\n      })\r\n    })\r\n\r\n    // params 函数\r\n    let paramFunction = () => {\r\n      const result: any = {}\r\n      _.forOwn(option.params, (value, key) => {\r\n        if (_.has(value, '$get')) {\r\n          const getOption: GetParam = value\r\n          result[key] = _.get(this.module, getOption.$get)\r\n        } else if (_.has(value, '$watch')) {\r\n          const watchOption: WatchParam = value\r\n          result[key] = _.get(this.module, watchOption.$watch)\r\n        } else {\r\n          result[key] = value\r\n        }\r\n      })\r\n      return result\r\n    }\r\n\r\n    if (option.type === 'function') {\r\n      if (typeof option.bind === 'function') {\r\n        this.setCustomFunctionMode(option.bind, paramFunction)\r\n      } else {\r\n        // 取 bind 函数\r\n        const bindFunction: GridDataSourceStaticFunction = _.get(this.module, option.bind) as GridDataSourceStaticFunction\r\n        if (!bindFunction) {\r\n          console.error(`没有找到名称为 ${option.bind} 的方法`)\r\n          return\r\n        }\r\n        this.setCustomFunctionMode(bindFunction, paramFunction)\r\n      }\r\n      return\r\n    }\r\n\r\n    if (option.type === 'SQL' || option.type === 'Server' || option.type === 'Ajax') {\r\n      this.setSqlMode(option, paramFunction)\r\n      return\r\n    }\r\n\r\n    console.error(`其他方式没有实现`)\r\n  }\r\n\r\n  /**\r\n   * 释放与 YvGrid 的绑定\r\n   */\r\n  destory() {\r\n    // 解除全部 watch\r\n    _.each(this.watches, unwatch => {\r\n      unwatch()\r\n    })\r\n    this.reload = undefined\r\n  }\r\n\r\n  /**\r\n   * 清空 rowCount, 下次重新统计总行数\r\n   */\r\n  clearRowCount() {\r\n    delete this.rowCount\r\n  }\r\n\r\n  updateSupport(): boolean {\r\n    return false\r\n  }\r\n\r\n  _updateRow(param: any) {\r\n    throw new Error('not implements')\r\n  }\r\n}\r\n","import { YvEventDispatch } from './YvanEvent'\r\n\r\nexport default class CtlGridCellButton {\r\n  $el: any\r\n  $btns!: any[]\r\n  func!: any[]\r\n\r\n  init(params: any) {\r\n    this.$el = document.createElement('div')\r\n    this._buildHTML.call(this, params)\r\n  }\r\n\r\n  getGui() {\r\n    return this.$el\r\n  }\r\n\r\n  destroy() {\r\n    for (let i = 0; i < this.$btns.length; i++) {\r\n      const btn = this.$btns[i]\r\n      btn.removeEventListener('click', this.func[i])\r\n    }\r\n  }\r\n\r\n  refresh(params: any) {\r\n    this._buildHTML.call(this, params)\r\n  }\r\n\r\n  private _buildHTML(this: any, params: any) {\r\n    const arr: Array<any> = []\r\n    const func: Array<any> = []\r\n\r\n    const { buttons, rowIndex, data, api, column } = params\r\n\r\n    if (typeof buttons === 'object' && buttons.constructor === Array) {\r\n      _.each(buttons, btn => {\r\n        if (typeof btn.render === 'function') {\r\n          const r = btn.render.call(this, rowIndex, data)\r\n          if (r !== true) {\r\n            return\r\n          }\r\n        } else if (typeof btn.render === 'boolean' && !btn.render) {\r\n          return\r\n        }\r\n\r\n        arr.push(\r\n          `<a class=\"yv-grid-button ${btn.cssType}\">` +\r\n            (typeof btn.iconCls === 'string'\r\n              ? '<i class=\"' + btn.iconCls + '\"></i>'\r\n              : '') +\r\n            btn.text +\r\n            '</a>'\r\n        )\r\n        func.push(btn.onClick)\r\n      })\r\n    }\r\n\r\n    this.$el.innerHTML =\r\n      '<div class=\"yv-grid-buttons\">' + arr.join('') + '</div>'\r\n\r\n    const $btns = this.$el.querySelectorAll('.yv-grid-button')\r\n    for (let i = 0; i < $btns.length; i++) {\r\n      const btn = $btns[i]\r\n      const fun = func[i]\r\n      btn.addEventListener('click', () => {\r\n        const ctl = api.vue\r\n        const module = api.vue._webix.$scope\r\n        YvEventDispatch(\r\n          fun,\r\n          ctl,\r\n          { data, rowIndex, colId: column.colId },\r\n          module\r\n        )\r\n      })\r\n    }\r\n    this.$btns = $btns\r\n    this.func = func\r\n  }\r\n}\r\n","export default class CtlGridFilterSet {\r\n\r\n    $el: any;\r\n    $selectAll: any;\r\n    data!: any[];\r\n    checkedData!: any[];\r\n    $container: any;\r\n    $clear: any;\r\n    $apply: any;\r\n    hidePopup: any;\r\n\r\n    // The init(params) method is called on the filter once. See below for details on the\r\n    // parameters.\r\n    init(params: any) {\r\n        this.setupDOM(params);\r\n        const that = this;\r\n        const data = params.data;\r\n\r\n        //======================= 全选按钮 =======================\r\n        const $selectAll = $(this.$el).find('[ref=\"eSelectAll\"]')\r\n        $selectAll.on('click', () => {\r\n            if (this.checkedData.length >= this.data.length) {\r\n                //全选状态，点击后属于全不选\r\n                this.checkedData = []\r\n            } else {\r\n                //其他情况，都是全选\r\n                this.checkedData = _.clone(this.data)\r\n            }\r\n            this.refreshState()\r\n        });\r\n        this.$selectAll = $selectAll;\r\n\r\n        //======================= 确定/清空 =======================\r\n        const $clear = $(this.$el).find('[ref=\"eClearButton\"]');\r\n        const $apply = $(this.$el).find('[ref=\"eApplyButton\"]');\r\n        $clear.on('click', () => {\r\n            //清空就是全选\r\n            that.checkedData = _.clone(that.data);\r\n            that.refreshState();\r\n            params.filterChangedCallback();\r\n            if (typeof that.hidePopup === 'function') {\r\n                that.hidePopup()\r\n            }\r\n        });\r\n        $apply.on('click', () => {\r\n            //确定\r\n            params.filterChangedCallback();\r\n            if (typeof that.hidePopup === 'function') {\r\n                that.hidePopup()\r\n            }\r\n        });\r\n        this.$clear = $clear;\r\n        this.$apply = $apply;\r\n\r\n        //======================= 构建数据 =======================\r\n        const $container = $(this.$el).find('.ag-virtual-list-container');\r\n        $container.css('height', (data.length * 20 + 2) + 'px');\r\n\r\n        let h = 0;\r\n        _.each(data, item => {\r\n            $container.append(\r\n                '<div class=\"ag-virtual-list-item\" style=\"top: ' + h + 'px;\" RefDataValue=\"' + item.id + '\">' +\r\n                '  <label class=\"ag-set-filter-item\">\\n' +\r\n                '    <div class=\"ag-filter-checkbox\"><span class=\"ag-icon ag-icon-checkbox-checked\" unselectable=\"on\"></span></div>\\n' +\r\n                '    <span class=\"ag-filter-value\">' + item.text + '</span>\\n' +\r\n                '  </label>' +\r\n                '</div>'\r\n            );\r\n            h += 20\r\n        });\r\n\r\n        //ag-icon-checkbox-indeterminate\r\n        $container.on('click', '.ag-virtual-list-item', function () {\r\n            //const $cb = $(this).find('span.ag-icon');\r\n            const cv = $(this).attr('RefDataValue')\r\n            const fi = _.find(that.checkedData, item => _.toString(item.id) === cv);\r\n            if (fi) {\r\n                //已经勾选了，要删掉他\r\n                _.remove(that.checkedData, item => _.toString(item.id) === cv)\r\n\r\n            } else {\r\n                //没有勾选，要加上他\r\n                const af = _.find(that.data, item => _.toString(item.id) === cv);\r\n                that.checkedData.push({ ...af })\r\n            }\r\n\r\n            //刷新状态\r\n            that.refreshState()\r\n        });\r\n\r\n        this.data = data;\r\n        this.checkedData = _.clone(this.data);\r\n        this.$container = $container\r\n    }\r\n\r\n    refreshState() {\r\n        const $cb = this.$selectAll.find('span.ag-icon');\r\n\r\n        if (this.checkedData.length >= this.data.length) {\r\n            //已经全选\r\n            $cb.attr('class', 'ag-icon ag-icon-checkbox-checked');\r\n            this.$container.find('[RefDataValue]').find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-checked')\r\n\r\n        } else if (this.checkedData.length === 0) {\r\n            //一个没选\r\n            $cb.attr('class', 'ag-icon ag-icon-checkbox-unchecked');\r\n            this.$container.find('[RefDataValue]').find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-unchecked')\r\n\r\n        } else {\r\n            //其他情况\r\n            $cb.attr('class', 'ag-icon ag-icon-checkbox-indeterminate');\r\n\r\n            const that = this;\r\n            this.$container.find('[RefDataValue]').each(function (this: any) {\r\n                const $dom = $(this);\r\n                const v = $dom.attr('RefDataValue');\r\n                const fi = _.find(that.checkedData, item => item.id === v);\r\n                if (fi) {\r\n                    //有属性，加上钩\r\n                    $dom.find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-checked')\r\n\r\n                } else {\r\n                    //没属性，不打勾\r\n                    $dom.find('span.ag-icon').attr('class', 'ag-icon ag-icon-checkbox-unchecked')\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    // Returns the GUI for this filter. The GUI can be a) a string of html or b) a DOM element or\r\n    // node.\r\n    getGui() {\r\n        return this.$el\r\n    }\r\n\r\n    // Return true if the filter is active. If active than 1) the grid will show the filter icon in the column\r\n    // header and 2) the filter will be included in the filtering of the data.\r\n    isFilterActive() {\r\n        //如果不是全选，就是没激活\r\n        return (this.checkedData.length < this.data.length)\r\n    }\r\n\r\n    // The grid will ask each active filter, in turn, whether each row in the grid passes. If any\r\n    // filter fails, then the row will be excluded from the final set. A params object is supplied\r\n    // with attributes node (the rowNode the grid creates that wraps the data) and data (the data\r\n    // object that you provided to the grid for that row).\r\n    doesFilterPass() {\r\n        // 服务器已经设置条件，浏览器不进行实际比对\r\n        return true\r\n    }\r\n\r\n    // Gets the filter state. If filter is not active, then should return null/undefined.\r\n    // The grid calls getModel() on all active filters when gridApi.getFilterModel() is called.\r\n    getModel() {\r\n        if (this.checkedData.length >= this.data.length) {\r\n            //全选，不需要带任何条件\r\n            return\r\n        }\r\n        return {\r\n            filterType: 'set',\r\n            filter: this.checkedData,\r\n        }\r\n    }\r\n\r\n    // Restores the filter state. Called by the grid after gridApi.setFilterModel(model) is called.\r\n    // The grid will pass undefined/null to clear the filter.\r\n    setModel(model: any) {\r\n        if (!model) {\r\n            //清空筛选\r\n            this.checkedData = _.clone(this.data)\r\n        } else {\r\n            //设置筛选条件\r\n        }\r\n    }\r\n\r\n    // Gets called every time the popup is shown, after the gui returned in\r\n    // getGui is attached to the DOM. If the filter popup is closed and reopened, this method is\r\n    // called each time the filter is shown. This is useful for any logic that requires attachment\r\n    // before executing, such as putting focus on a particular DOM element. The params has one\r\n    // callback method 'hidePopup', which you can call at any later point to hide the popup - good\r\n    // if you have an 'Apply' button and you want to hide the popup after it is pressed.\r\n    afterGuiAttached(param: any) {\r\n        this.hidePopup = param.hidePopup;\r\n        this.refreshState()\r\n    }\r\n\r\n    // Gets called when the Column is destroyed. If your custom filter needs to do\r\n    // any resource cleaning up, do it here. A filter is NOT destroyed when it is\r\n    // made 'not visible', as the gui is kept to be shown again if the user selects\r\n    // that filter again. The filter is destroyed when the column it is associated with is\r\n    // destroyed, either new columns are set into the grid, or the grid itself is destroyed.\r\n    destroy() {\r\n        this.$selectAll.off();\r\n        this.$container.off();\r\n        this.$clear.off();\r\n        this.$apply.off()\r\n    }\r\n\r\n    // If floating filters are turned on for the grid, but you have no floating filter\r\n    // configured for this column, then the grid will check for this method. If this\r\n    // method exists, then the grid will provide a read only floating filter for you\r\n    // and display the results of this method. For example, if your filter is a simple\r\n    // filter with one string input value, you could just return the simple string\r\n    // value here.\r\n    getModelAsString() {\r\n        console.log('getModelAsString')\r\n    }\r\n\r\n    setupDOM(params: any) {\r\n\r\n        this.$el = document.createElement('div');\r\n        const html =\r\n            '<div class=\"ag-filter-body-wrapper\">\\n' +\r\n            '  <div>\\n' +\r\n            '    <div class=\"ag-filter-header-container\" role=\"presentation\" style=\"width: 200px;\">\\n' +\r\n            '      <label ref=\"eSelectAll\" class=\"ag-set-filter-item\">\\n' +\r\n            '        <div class=\"ag-filter-checkbox\">\\n' +\r\n            '          <span class=\"ag-icon ag-icon-checkbox-checked\" unselectable=\"on\"></span>\\n' +\r\n            '        </div>\\n' +\r\n            '        <span class=\"ag-filter-value\">全选</span>\\n' +\r\n            '      </label>\\n' +\r\n            '    </div>\\n' +\r\n            '    <div class=\"ag-set-filter-list\" role=\"presentation\">\\n' +\r\n            '      <div class=\"ag-virtual-list-viewport\">\\n' +\r\n            '\\n' +\r\n            '\\n' +\r\n            '        <div class=\"ag-virtual-list-container\" style=\"height: 180px;\">' +\r\n            '        </div>\\n' +\r\n            '\\n' +\r\n            '\\n' +\r\n            '      </div>\\n' +\r\n            '    </div>\\n' +\r\n            '  </div>\\n' +\r\n            '</div>\\n' +\r\n            '<div class=\"ag-filter-apply-panel\" ref=\"eButtonsPanel\">\\n' +\r\n            '  <button type=\"button\" ref=\"eClearButton\">清空</button>\\n' +\r\n            '  <button type=\"button\" ref=\"eApplyButton\">确定</button>\\n' +\r\n            '</div>';\r\n        this.$el.innerHTML = html\r\n    }\r\n}\r\n","export default class CtlGridEditor {\r\n    data: any;\r\n    colDef: any;\r\n    column: any;\r\n    focusAfterAttached: any;\r\n    field: any;\r\n    valid: any;\r\n    origin: any;\r\n    vue: any;\r\n\r\n    // gets called once after the editor is created\r\n    init(params: any): void {\r\n        this.data = params.data;\r\n        this.colDef = params.colDef;\r\n        this.column = params.column;\r\n        const {type, data, colDef, column, cellStartedEdit, value, editParams} = params;\r\n\r\n        _.assign(this, {\r\n            type, value, data, colDef, column, editParams\r\n        });\r\n\r\n        this.focusAfterAttached = cellStartedEdit;\r\n\r\n        this.field = colDef.field;\r\n        this.valid = params.valid;\r\n        this.origin = value;\r\n        this.vue = params.api.vue;\r\n    }\r\n\r\n    // Return the DOM element of your editor, this is what the grid puts into the DOM\r\n    getGui() {\r\n    }\r\n\r\n    // Gets called once after GUI is attached to DOM.\r\n    // Useful if you want to focus or highlight a component\r\n    // (this is not possible when the element is not attached)\r\n    afterGuiAttached() {\r\n    }\r\n\r\n    // Should return the final value to the grid, the result of the editing\r\n    getValue() {\r\n    }\r\n\r\n    setValue(newValue: any) {\r\n        console.error('不支持 setValue:' + newValue)\r\n    }\r\n\r\n    // Gets called once by grid after editing is finished\r\n    // if your editor needs to do any cleanup, do it here\r\n    destroy() {\r\n        if (typeof this.valid === 'undefined') {\r\n            return\r\n        }\r\n        const validMsg = this.valid(this.getValue(), this.vue.getEditRow());\r\n        if (validMsg) {\r\n            this.vue.currentEditValidMsg[this.field] = validMsg\r\n\r\n        } else {\r\n            this.vue.currentEditValidMsg[this.field] = undefined\r\n        }\r\n    }\r\n\r\n    // Gets called once after initialised.\r\n    // If you return true, the editor will appear in a popup\r\n    isPopup() {\r\n        return false\r\n    }\r\n\r\n    // Gets called once before editing starts, to give editor a chance to\r\n    // cancel the editing before it even starts.\r\n    isCancelBeforeStart() {\r\n        //如果这里返回 true, 就会取消编辑\r\n    }\r\n\r\n    // Gets called once when editing is finished (eg if enter is pressed).\r\n    // If you return true, then the result of the edit will be ignored.\r\n    isCancelAfterEnd() {\r\n        //这里返回 true, 就会取消该单元格编辑，还原其内容\r\n    }\r\n\r\n    // If doing full row edit, then gets called when tabbing into the cell.\r\n    focusIn() {\r\n    }\r\n\r\n    // If doing full row edit, then gets called when tabbing out of the cell.\r\n    focusOut() {\r\n    }\r\n}\r\n","import CtlGridEditor from './CtlGridEditor'\r\n\r\nvar isInput = false\r\n\r\nexport default class CtlGridEditorText extends CtlGridEditor {\r\n  isPinned: any\r\n  $el: any\r\n  $input: any\r\n  value: any\r\n  editParams: any\r\n  leaveReason: any\r\n  type: any\r\n\r\n  init(params: any) {\r\n    super.init(params)\r\n\r\n    if (params.node.rowPinned) {\r\n      this.isPinned = true\r\n    }\r\n    this.$el = document.createElement('div')\r\n    this.$el.classList.add('ag-input-wrapper')\r\n    this.$el.setAttribute('role', 'presentation')\r\n\r\n    this.$el.innerHTML =\r\n      '<input class=\"ag-cell-edit-input\" type=\"text\" autocomplete=\"off\">'\r\n\r\n    this.$input = this.$el.querySelectorAll('input')[0]\r\n    this.$input.value = _.toString(params.value)\r\n\r\n    this.$input.addEventListener('keydown', this._onKeyDown.bind(this))\r\n    this.$input.addEventListener('input', this._onInput.bind(this))\r\n    this.$input.addEventListener('change', this._onChange.bind(this))\r\n    this.$input.addEventListener(\r\n      'compositionstart',\r\n      this._onCompositionstart.bind(this)\r\n    )\r\n    this.$input.addEventListener(\r\n      'compositionend',\r\n      this._onCompositionend.bind(this)\r\n    )\r\n  }\r\n\r\n  _onCompositionstart() {\r\n    isInput = true\r\n  }\r\n\r\n  _onCompositionend(e: any) {\r\n    isInput = false\r\n    this._dealWithString(e)\r\n  }\r\n\r\n  _onKeyDown(e: any) {\r\n    if (e.code === 'Tab' || e.code === 'Enter') {\r\n      // Tab键/回车键, 完全拦截，跑下一个焦点控件\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      this.value = e.target.value\r\n\r\n      if (typeof this.editParams.onValidate === 'function') {\r\n        const r = this.editParams.onValidate(this.value)\r\n        if (r) {\r\n          //有校验错误，不让跳转\r\n          return\r\n        }\r\n      }\r\n\r\n      //写入离开原因的 code 编码\r\n      this.leaveReason = e.code\r\n      //这里会触发 this.getValue() 方法\r\n      this.vue.gridApi.stopEditing()\r\n    }\r\n  }\r\n\r\n  _onInput(e: any) {\r\n    if (isInput) {\r\n      return\r\n    }\r\n    this._dealWithString(e)\r\n  }\r\n\r\n  _dealWithString(e: any) {\r\n    let value = e.target.value\r\n    if (this.type === 'number') {\r\n      if (this.editParams.precision > 0) {\r\n        value = value.replace(/[^\\d.-]/g, '') //清除\"数字\"和\".\"以外的字符\r\n        if (value.length > 1 && value.indexOf('.') > 1) {\r\n          let t\r\n          while (1) {\r\n            t = value\r\n            value = value.replace(/^0/g, '')\r\n            if (t.length === value.length) {\r\n              break\r\n            }\r\n          }\r\n          //value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n        }\r\n        value = value.replace(/^\\./g, '') //验证第一个字符是数字而不是.\r\n        value = value.replace(/\\.{2,}/g, '.') //只保留第一个. 清除多余的.\r\n        value = value\r\n          .replace('.', '$#$')\r\n          .replace(/\\./g, '')\r\n          .replace('$#$', '.') //只允许输入一个小数点\r\n\r\n        const r = eval(\r\n          '/^(\\\\-)*(\\\\d+)\\\\.(\\\\d{0,' + this.editParams.precision + '}).*$/'\r\n        )\r\n        value = value.replace(r, '$1$2.$3') //只能输入固定位数的小数\r\n      } else {\r\n        value = value.replace(/[^\\d-]/g, '') //清除\"数字\"和\"-\"以外的字符\r\n        if (value.length > 1) {\r\n          value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n        }\r\n        if (value.startsWith('-')) {\r\n          value = '-' + value.substr(1).replace(/[^\\d]/g, '')\r\n        } else {\r\n          value = value.replace(/[^\\d]/g, '')\r\n        }\r\n      }\r\n    }\r\n\r\n    e.target.value = value\r\n    if (this.value === value) {\r\n      //完全相等，不用通知更改\r\n      return\r\n    }\r\n    this.value = value\r\n\r\n    if (e.detail !== 'custom') {\r\n      if (typeof this.editParams.onInput === 'function') {\r\n        const r = this.editParams.onInput(this.value, e)\r\n        if (typeof r !== 'undefined') {\r\n          this.value = r\r\n          e.target.value = r\r\n        }\r\n\r\n        if (typeof this.editParams.onValidate === 'function') {\r\n          this.editParams.onValidate(value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _onChange(e: any) {\r\n    this.value = e.target.value\r\n\r\n    if (typeof this.editParams.onChange === 'function') {\r\n      this.editParams.onChange(this.value, e)\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n    this.$input.removeEventListener('keydown', this._onKeyDown.bind(this))\r\n    this.$input.removeEventListener('input', this._onInput.bind(this))\r\n    this.$input.removeEventListener('change', this._onChange.bind(this))\r\n    this.$input.removeEventListener(\r\n      'compositionstart',\r\n      this._onCompositionstart.bind(this)\r\n    )\r\n    this.$input.removeEventListener(\r\n      'compositionend',\r\n      this._onCompositionend.bind(this)\r\n    )\r\n  }\r\n\r\n  getGui() {\r\n    return this.$el\r\n  }\r\n\r\n  afterGuiAttached() {\r\n    super.afterGuiAttached()\r\n    this.$input.dispatchEvent(new CustomEvent('input', { detail: 'custom' }))\r\n\r\n    if (this.focusAfterAttached) {\r\n      this.$input.focus()\r\n    }\r\n  }\r\n\r\n  getValue() {\r\n    if (typeof this.leaveReason === 'undefined') {\r\n      //不是按导航键移动的\r\n      if (typeof this.editParams.onValidate === 'function') {\r\n        const r = this.editParams.onValidate(this.value)\r\n        if (r) {\r\n          //有校验错误，还原内容\r\n          return this.origin\r\n        }\r\n      }\r\n    }\r\n\r\n    if (typeof this.editParams.onCommit === 'function') {\r\n      this.editParams.onCommit({\r\n        data: this.data,\r\n        colDef: this.colDef,\r\n        column: this.column,\r\n        newValue: this.value,\r\n        isPinned: this.isPinned,\r\n        vue: this.vue,\r\n        leaveReason: this.leaveReason\r\n      })\r\n    }\r\n    return this.value\r\n  }\r\n\r\n  focusIn() {\r\n    super.focusIn()\r\n    this.$input.focus()\r\n    this.$input.select()\r\n  }\r\n\r\n  focusOut() {\r\n    super.focusOut()\r\n  }\r\n}\r\n","import CtlGridEditor from './CtlGridEditor'\r\n\r\nexport default class CtlGridEditorCombo extends CtlGridEditor {\r\n  isPinned: any\r\n  options: any\r\n  $el: any\r\n\r\n  init(params: any) {\r\n    super.init(params)\r\n    this.options = params.options\r\n    if (params.node.rowPinned) {\r\n      this.isPinned = true\r\n    }\r\n\r\n    const $dom = $('<input class=\"tmp-combo\" />')\r\n\r\n    this.$el = $dom[0]\r\n    const that = this\r\n  }\r\n\r\n  getGui() {\r\n    return this.$el\r\n  }\r\n\r\n  afterGuiAttached() {\r\n    // YvGridEditor.afterGuiAttached.apply(this, arguments)\r\n    // this.vv.focus()\r\n    //setTimeout(() => {\r\n    //    this.vv.open()\r\n    //    this.vv.$nextTick(() => {\r\n    //        debugger\r\n    //    })\r\n    //}, 1000)\r\n  }\r\n\r\n  getValue() {\r\n    // if (typeof this.leaveReason === 'undefined') {\r\n    //     //不是按导航键移动的, 需要触发校验\r\n    //     if (typeof this.editParams.onValidate === 'function') {\r\n    //         const r = this.editParams.onValidate(value)\r\n    //         if (r) {\r\n    //             //有校验错误，还原内容\r\n    //             return this.origin\r\n    //         }\r\n    //     }\r\n    // }\r\n    //\r\n    // //校验通过，调用 commit 并返回选定的新值\r\n    // if (typeof this.editParams.onCommit === 'function') {\r\n    //     this.editParams.onCommit({\r\n    //         data: this.data,\r\n    //         colDef: this.colDef,\r\n    //         column: this.column,\r\n    //         newValue: this.value,\r\n    //         leaveReason: this.leaveReason,\r\n    //     })\r\n    // }\r\n    // return this.value\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n    // this.vv.$destroy()\r\n  }\r\n\r\n  focusIn() {\r\n    super.focusIn()\r\n    // this.vv.focus()\r\n  }\r\n\r\n  focusOut() {\r\n    super.focusOut()\r\n  }\r\n}\r\n","import * as YvanUI from './YvanUIExtend'\r\nimport CtlGridLocale from './CtlGridLocale'\r\nimport { CtlGridPage } from './CtlGridPage'\r\nimport agGrid from 'ag-grid'\r\nimport CtlGridIdRender from './CtlGridIdRender'\r\nimport {\r\n  YvGridColumnEditProp,\r\n  YvGridColumnProp,\r\n  YvGridProp\r\n} from './CtlGridDefault'\r\nimport CtlGridCellCheckbox from './CtlGridCellCheckbox'\r\nimport CtlGridHeadCheckbox from './CtlGridHeadCheckbox'\r\nimport { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { GridDataSource } from './YvanDataSourceGrid'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { YvanDataSourceGrid } from './YvanDataSourceGridImp'\r\nimport CtlGridCellButton from './CtlGridCellButton'\r\nimport CtlGridFilterSet from './CtlGridFilterSet'\r\nimport CtlGridEditorText from './CtlGridEditorText'\r\nimport CtlGridEditorCombo from './CtlGridEditorCombo'\r\nimport webix from 'webix'\r\n\r\n/** 在CtlGridPage.ts 里面有关于点击分页按钮时候设置 GridRefreshMode **/\r\nexport enum GridRefreshMode {\r\n  refreshRows,\r\n  refreshWithFilter,\r\n  refreshAndClearFilter\r\n}\r\n\r\n/**\r\n * 表格中的行按钮被点击后触发的事件参数\r\n */\r\nexport interface CtlGridRowButtonClickArgs {\r\n  /**\r\n   * 行数据\r\n   */\r\n  data: any\r\n\r\n  /**\r\n   * 行序号\r\n   */\r\n  rowIndex: number\r\n\r\n  /**\r\n   * 列名称\r\n   */\r\n  colId: string\r\n}\r\n\r\n/**\r\n * 扩展 grid 组件\r\n */\r\nwebix.protoUI(\r\n  {\r\n    name: 'grid',\r\n    $init: function (config: any) {\r\n      this._domid = webix.uid();\r\n      this.$view.innerHTML = `<div id='${this._domid}' role=\"yvGrid\" class=\"ag-theme-blue\"></div>`\r\n      _.extend(this.config, config)\r\n      if (config.on && typeof config.on.onMyRender === 'function') {\r\n        config.on.onMyRender.call(this)\r\n      }\r\n    }\r\n  },\r\n  webix.ui.view\r\n)\r\n\r\nexport class CtlGrid extends CtlBase<CtlGrid> {\r\n  static create(module: any, vjson: any): CtlGrid {\r\n    const that = new CtlGrid(_.cloneDeep(vjson))\r\n    that._module = module\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    // 提取基础属性 onRender / ctlName / entityName 等等\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 yvanProp 合并至当前 CtlBase 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 删除 vjson 所有数据, 替换为 template 语法\r\n    _.forOwn(vjson, (value, key) => {\r\n      delete vjson[key]\r\n    })\r\n    _.merge(vjson, {\r\n      view: 'grid',\r\n      // template: `<div role=\"yvGrid\" class=\"ag-theme-blue\"></div>`,\r\n      on: {\r\n        onMyRender: function (this: any) {\r\n          _.defer(() => {\r\n            that.attachHandle(this, { ...vjson, ...yvanProp })\r\n            that._resetGrid()\r\n          });\r\n        },\r\n        onDestruct(this: any) {\r\n          if (that.gridApi) {\r\n            that.gridApi.destroy()\r\n            that.gridApi = undefined\r\n          }\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n    if (that.vjson.id) {\r\n      vjson.id = that.vjson.id\r\n    }\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  gridApi: any\r\n  columnApi: any\r\n  refreshMode: GridRefreshMode = GridRefreshMode.refreshRows;\r\n  private paginationDefaultSelectRow: number | undefined;\r\n  get webix() {\r\n    return this._webix\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: GridDataSource) {\r\n    this.vjson.dataSource = nv\r\n    // if (this._module.loadFinished) {\r\n    //   throw new Error('Grid 不允许动态设置数据源')\r\n    // }\r\n  }\r\n\r\n  /**\r\n   * 获取数据源\r\n   */\r\n  get dataSource(): GridDataSource {\r\n    return this.vjson.dataSource\r\n  }\r\n\r\n  /**\r\n   * 初始化时的数据\r\n   */\r\n  readonly data?: any[]\r\n\r\n  /**\r\n   * 是否允许编辑\r\n   */\r\n  readonly editable!: boolean\r\n\r\n  /**\r\n   * 允许勾选\r\n   */\r\n  readonly checkbox!: boolean\r\n\r\n  /**\r\n   * 单击后立刻进入编辑\r\n   */\r\n  readonly editSingleClick!: boolean\r\n\r\n  /**\r\n   * 允许添加\r\n   */\r\n  readonly allowNewRow!: boolean\r\n\r\n  /**\r\n   * 允许过滤\r\n   */\r\n  readonly filterable!: boolean\r\n\r\n  /**\r\n   * 显示序号\r\n   */\r\n  readonly showRowNumber!: boolean\r\n\r\n  /**\r\n   * 自动调整列宽\r\n   */\r\n  readonly autoSizeColumns!: boolean\r\n\r\n  /**\r\n   * 单元格选中模式\r\n   */\r\n  readonly allowCellSelection!: boolean\r\n\r\n  /**\r\n   * 行选中模式\r\n   */\r\n  readonly allowRowSelection!: boolean\r\n\r\n  /**\r\n   * ID字段\r\n   */\r\n  readonly idField!: string\r\n\r\n  /**\r\n   * 值分隔符\r\n   */\r\n  readonly valueSep!: string\r\n\r\n  /**\r\n   * 保存时机(换行时/编辑完后)\r\n   */\r\n  readonly saveOn!: 'editFinish' | 'rowChanged'\r\n\r\n  /**\r\n   * 新添加行时，初始化的数据\r\n   */\r\n  readonly newRowData!: any\r\n\r\n  /**\r\n   * 失去焦点后立刻结束编辑\r\n   */\r\n  readonly stopEditingWhenGridLosesFocus!: boolean\r\n\r\n  /**\r\n   * 列定义\r\n   */\r\n  readonly columns!: any[] | undefined\r\n\r\n  /**\r\n   * 二纬表头\r\n   */\r\n  readonly columnGroup!: any[] | undefined\r\n\r\n  /**\r\n   * 是否自动读取数据\r\n   */\r\n  readonly autoLoad: boolean = true\r\n\r\n  /**\r\n   * 是否分页\r\n   */\r\n  readonly pagination: boolean = false\r\n\r\n  /**\r\n   * 分页大小\r\n   */\r\n  readonly pageSize: number = 100\r\n\r\n  public gridPage!: CtlGridPage\r\n\r\n  /**\r\n   * 行被选中后触发\r\n   */\r\n  onRowSelect?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 行被双击后触发\r\n   */\r\n  onRowDblClick?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 勾选项改变后触发\r\n   */\r\n  onCheckedChange?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 数据绑定完毕后触发\r\n   */\r\n  onBindingComplete?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 焦点单元格发生变化后触发\r\n   */\r\n  onCellFocused?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 单元格被点击后触发\r\n   */\r\n  onCellClicked?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 第一行有效数据被渲染后触发\r\n   */\r\n  onFirstDataRendered?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 按下键后触发\r\n   */\r\n  onKeyDown?: YvEvent<CtlGrid, any>\r\n\r\n  /**\r\n   * 获取被勾选的行ID集合\r\n   */\r\n  checkedIds: any[] = []\r\n\r\n  /**\r\n   * 选择一个指定行\r\n   * @param condition 可以是 key(主键), 也可以是 function 条件, 匹配到符合 condition 的第一条记录\r\n   */\r\n  selectRow(condition: GridSelectCondition) {\r\n    const node: any = this._findNode(condition)\r\n    if (node) {\r\n      this.gridApi.setFocusedCell(node.rowIndex, '__ID__')\r\n      node.setSelected(true)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 闪烁指定行\r\n   * @param condition 可以是 key(主键), 也可以是 function 条件, 匹配到符合 condition 的第一条记录\r\n   */\r\n  flashRow(condition: any) {\r\n    const node = this._findNode(condition)\r\n    if (node) {\r\n      this.gridApi.flashCells({ rowNodes: [node] })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 闪烁指定单元格\r\n   * @param cols 列数组\r\n   * @param condition 可以是 key(主键), 也可以是 function 条件, 匹配到符合 condition 的第一条记录\r\n   */\r\n  flashCell(cols: any, condition: any) {\r\n    const node = this._findNode(condition)\r\n    if (node) {\r\n      this.gridApi.flashCells({ columns: cols, rowNodes: [node] })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n\r\n  /**\r\n   * 无感知刷新\r\n   */\r\n  _transactionUpdate(targetDataList: any[]) {\r\n\r\n    if (this.refreshMode === GridRefreshMode.refreshWithFilter || this.refreshMode === GridRefreshMode.refreshAndClearFilter) {\r\n\r\n      /** 更改当前的刷新模式， 避免重复刷新 **/\r\n      this.refreshMode = GridRefreshMode.refreshRows\r\n      this.setData(targetDataList);\r\n      if (this.dataSourceBind) {\r\n        this.gridApi.setFilterModel(this.dataSourceBind.lastFilterModel)\r\n      }\r\n    } else {\r\n      /** 更改当前的刷新模式， 避免重复刷新 **/\r\n      this.refreshMode = GridRefreshMode.refreshRows\r\n      const transaction: any = {\r\n        add: [],\r\n        remove: [],\r\n        update: []\r\n      }\r\n      let i = 0\r\n      this.gridApi.forEachNode((node: any) => {\r\n        if (i === targetDataList.length) {\r\n          //已经越位\r\n          transaction.remove.push(node.data)\r\n        } else {\r\n          const newData = targetDataList[i++]\r\n          node.setData(newData)\r\n          transaction.update.push(node.data)\r\n        }\r\n      })\r\n      for (; i < targetDataList.length; i++) {\r\n        transaction.add.push(targetDataList[i])\r\n      }\r\n      this.gridApi.updateRowData(transaction)\r\n    }\r\n    if (this.paginationDefaultSelectRow != undefined && targetDataList && targetDataList.length > 0) {\r\n      if (this.paginationDefaultSelectRow >=0) {\r\n        if (targetDataList.length <= this.paginationDefaultSelectRow) {\r\n          this.selectRow(node => node.rowIndex === targetDataList.length-1);\r\n        } else {\r\n          this.selectRow(node => node.rowIndex === this.paginationDefaultSelectRow);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取全部数据\r\n   */\r\n  getData(): any[] | undefined {\r\n    const result: any[] = []\r\n    this.gridApi.forEachNode((node: any) => {\r\n      result.push(node.data)\r\n    })\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * 为表格设置数据\r\n   * 注意，调用此方法，必须在初始化时，给一个空的 data: [] 属性\r\n   * 确保表格 rowModelType:clientSide 模式\r\n   */\r\n  setData(nv: any[] | undefined) {\r\n    this.gridApi.setRowData(nv)\r\n  }\r\n\r\n  /**\r\n   * 无感刷新\r\n   * 清空缓存，从后台重新拉取数据，表格上临时修改的内容都会被清空\r\n   *\r\n   * option:\r\n   *   clearFilter=true 是否清空筛选\r\n   */\r\n  // reload(option?: any) {\r\n  //   this.loading = true\r\n  //\r\n  //   //无感刷新之前，清空所有状态\r\n  //   this._clearCache()\r\n  //\r\n  //   //需要重新请求 rowCount(总数据行)\r\n  //   if (this.dataSourceBind) {\r\n  //     this.dataSourceBind.clearRowCount()\r\n  //   }\r\n  //\r\n  //   if (this.entityName) {\r\n  //     _.set(this.getModule(), this.entityName + '.selectedRow', undefined)\r\n  //   }\r\n  //\r\n  //   /** 有clearFilter 参数的时候 一定刷新数据 **/\r\n  //   if (option && option.clearFilter === true) {\r\n  //     this.pageAbleDataRefreshMode = \"refreshAndReset\"\r\n  //     this.gridApi.setFilterModel(null)\r\n  //     if (this.dataSourceBind) {\r\n  //       /** 表头筛选数据没有变化也要重新加载数据 **/\r\n  //       if (_.isEqual(this.gridApi.getFilterModel(), this.dataSourceBind.lastFilterModel)) {\r\n  //         this._filterChanged();\r\n  //       }\r\n  //     }\r\n  //   } else {\r\n  //     if (this.pagination) {\r\n  //       this.pageAbleDataRefreshMode = \"refreshWithFilter\"\r\n  //       this.gridPage.refreshGrid()\r\n  //     } else {\r\n  //       this.pageAbleDataRefreshMode = \"refreshRows\"\r\n  //       this.gridApi.refreshInfiniteCache()\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  /**\r\n   * 无感刷新\r\n   * 清空缓存，从后台重新拉取数据，表格上临时修改的内容都会被清空\r\n   *\r\n   * option:\r\n   *   clearFilter=true 是否清空筛选\r\n   */\r\n  reload(refreshMode: GridRefreshMode = GridRefreshMode.refreshRows) {\r\n    this.loading = true\r\n    this.refreshMode = refreshMode\r\n    //无感刷新之前，清空所有状态\r\n    this._clearCache()\r\n\r\n    //需要重新请求 rowCount(总数据行)\r\n    if (this.dataSourceBind) {\r\n      this.dataSourceBind.clearRowCount()\r\n    }\r\n\r\n    if (this.entityName) {\r\n      _.set(this.getModule(), this.entityName + '.selectedRow', undefined)\r\n    }\r\n\r\n    /** 有clearFilter 参数的时候 一定刷新数据 **/\r\n    if (refreshMode === GridRefreshMode.refreshAndClearFilter) {\r\n      this.gridApi.setFilterModel(null)\r\n      if (this.dataSourceBind) {\r\n        /** 表头筛选数据没有变化也要重新加载数据 **/\r\n        if (_.isEqual(this.gridApi.getFilterModel(), this.dataSourceBind.lastFilterModel)) {\r\n          this._filterChanged();\r\n        }\r\n      }\r\n    } else {\r\n      if (this.pagination) {\r\n        this.gridPage.refreshGrid()\r\n      } else {\r\n        this.gridApi.refreshInfiniteCache()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的行主键\r\n   */\r\n  getSelectedId() {\r\n    const row = this.getSelectedRow()\r\n    if (row) {\r\n      return this._getIdByRow(row)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置勾选的数据行集合\r\n   */\r\n  setCheckedIds(ids: Array<any>) {\r\n    // 清空所有元素\r\n    this.checkedIds = ids;\r\n\r\n    // 刷新勾选单元格\r\n    this.gridApi.refreshCells({\r\n      columns: ['__CB__'],\r\n      force: true\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 获取被勾选的所有行\r\n   */\r\n  getCheckedRows() {\r\n    const selected: any[] = []\r\n    this._findNode((node: any) => {\r\n      if (_.indexOf(this.checkedIds, this._getIdByRow(node.data)) >= 0) {\r\n        selected.push(node.data)\r\n      }\r\n      return false\r\n    })\r\n    return selected\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的行数据\r\n   */\r\n  getSelectedRow() {\r\n    const rows = this.getSelectedRows()\r\n    return rows.length > 0 ? rows[0] : undefined\r\n  }\r\n\r\n  /**\r\n   * 获取被选中的行数据(多选情况下回返回多行数据)\r\n   */\r\n  getSelectedRows() {\r\n    // 调用原生 getSelectedRows 方法有 bug\r\n    // return this.gridApi.getSelectedRows();\r\n    const selected: any[] = []\r\n    this._findNode((node: any) => {\r\n      if (node.selected) {\r\n        selected.push(node.data)\r\n      }\r\n      return false\r\n    })\r\n    return selected\r\n  }\r\n\r\n  /**\r\n   * 显示正在读取的状态\r\n   */\r\n  set loading(newValue: boolean) {\r\n    if (!this.isGridReadReady) {\r\n      return\r\n    }\r\n    if (newValue) {\r\n      // 盖着\r\n      this.gridApi.showLoadingOverlay()\r\n      $($(this._webix.$view).find('.ag-paging-panel')[0]).append(`<div class=\"maskBox\"></div>`);\r\n    } else {\r\n      // 放开\r\n      $(this._webix.$view).find('.maskBox').remove()\r\n      this.gridApi.hideOverlay()\r\n    }\r\n  }\r\n\r\n  paginationSetPageSize(size: number) {\r\n    this.gridApi.paginationSetPageSize(size)\r\n  }\r\n\r\n  /** 设置行号, 兼容分页 **/\r\n  private setRowId(p: any) {\r\n    return CtlGridIdRender(p, this)\r\n  }\r\n\r\n  /*============================ 私有属性部分 ============================*/\r\n  private isGridReadReady: boolean = false\r\n  private dataSourceBind?: YvanDataSourceGrid = undefined\r\n\r\n  private _gridOptions(): any {\r\n    _.assign(this, {\r\n      ..._.clone(YvGridProp),\r\n      ...this.vjson\r\n    })\r\n    const resultCols = []\r\n\r\n    //显示序号列\r\n    if (this.showRowNumber) {\r\n      resultCols.push({\r\n        field: '__ID__',\r\n        headerName: CtlGridLocale.rownumber,\r\n        width: 52,\r\n        //minWidth: 52,\r\n        maxWidth: 160,\r\n        pinned: 'left',\r\n        resizable: true,\r\n        sortable: false,\r\n        cellRenderer: 'CtlGridIdRender'\r\n      })\r\n    }\r\n\r\n    //显示勾选框\r\n    if (this.checkbox) {\r\n      resultCols.push({\r\n        field: '__CB__',\r\n        headerName: '',\r\n        width: 40,\r\n        minWidth: 40,\r\n        maxWidth: 40,\r\n        pinned: 'left',\r\n        resizable: false,\r\n        sortable: false,\r\n        cellRenderer: 'CtlGridCellCheckbox',\r\n        headerComponent: 'CtlGridHeadCheckbox',\r\n        cellRendererParams: {\r\n          isCheckedIds: true\r\n        }\r\n      })\r\n    }\r\n\r\n    //添加自定义列\r\n    this._gridCols(resultCols)\r\n\r\n    let columnDefs = resultCols\r\n    if (!this.columnGroup || _.size(this.columnGroup) <= 0) {\r\n      //没有多级表头\r\n      columnDefs = resultCols\r\n    } else {\r\n      //二级表头\r\n      columnDefs = []\r\n      let j = 0\r\n      let currentGroup: any\r\n      let currentGroupSpan = -1\r\n\r\n      for (let i = 0; i < resultCols.length; i++) {\r\n        const { from, title, span, width } = this.columnGroup[j]\r\n        const f = resultCols[i]\r\n        if (!this.columnGroup[j]) {\r\n          columnDefs.push(f)\r\n        }\r\n\r\n        if (currentGroupSpan > 0) {\r\n          currentGroup.children.push(f)\r\n          currentGroupSpan--\r\n          if (currentGroupSpan <= 0) {\r\n            j++\r\n          }\r\n        } else if (f.field === from) {\r\n          currentGroup = {\r\n            width: width,\r\n            headerName: title,\r\n            children: [f]\r\n          }\r\n          currentGroupSpan = span - 1\r\n          columnDefs.push(currentGroup)\r\n        } else {\r\n          columnDefs.push(f)\r\n        }\r\n      }\r\n    }\r\n\r\n    const gridOptions = {\r\n      headerHeight: 35,\r\n      rowHeight: 33,\r\n      suppressRowHoverHighlight: true,\r\n      columnDefs,\r\n      animateRows: false,\r\n      suppressCellSelection: !this.allowCellSelection,\r\n      suppressRowClickSelection: !this.allowRowSelection,\r\n      suppressColumnMoveAnimation: true,\r\n      pagination: this.pagination,\r\n      paginationPageSize: this.pageSize,\r\n      localeText: CtlGridLocale,\r\n      rowModelType: 'infinite',\r\n      infiniteInitialRowCount: 200,\r\n      //maxConcurrentDatasourceRequests: 2,\r\n      maxBlocksInCache: 5,\r\n      //cacheOverflowSize\r\n      rowSelection: 'single',\r\n      enableBrowserTooltips: true,\r\n      //enableCellChangeFlash: true,\r\n      singleClickEdit: this.editSingleClick,\r\n      floatingFilter: false,\r\n      stopEditingWhenGridLosesFocus: this.stopEditingWhenGridLosesFocus,\r\n\r\n      onFirstDataRendered: this._firstDataRendered.bind(this),\r\n\r\n      onGridReady: this._gridReady.bind(this),\r\n      tabToNextCell: this._tabToNextCell.bind(this),\r\n      navigateToNextCell: this._navigateToNextCell.bind(this),\r\n      onCellKeyDown: this._cellKeyDown.bind(this),\r\n      onRowDoubleClicked: this._rowDoubleClicked.bind(this),\r\n      onCellEditingStarted: this._cellEditingStarted.bind(this),\r\n      onCellEditingStopped: this._cellEditingStopped.bind(this),\r\n      onRowSelected: this._rowSelected.bind(this),\r\n      onModelUpdated: this._modelUpdated.bind(this),\r\n      onCellFocused: this._cellFocused.bind(this),\r\n      onCellClicked: this._cellClicked.bind(this),\r\n      onFilterChanged: this._filterChanged.bind(this),\r\n      onSortChanged: this._sortChanged.bind(this),\r\n      enterMovesDown: false,\r\n      enterMovesDownAfterEdit: false,\r\n      accentedSort: true,\r\n\r\n      components: {\r\n        CtlGridCellButton: CtlGridCellButton,\r\n        CtlGridCellCheckbox: CtlGridCellCheckbox,\r\n        CtlGridHeadCheckbox: CtlGridHeadCheckbox,\r\n        CtlGridEditorText: CtlGridEditorText,\r\n        CtlGridEditorCombo: CtlGridEditorCombo,\r\n        // // YvGridEditorDate: YvGridEditorDate,\r\n        CtlGridFilterSet: CtlGridFilterSet,\r\n        CtlGridIdRender: this.setRowId.bind(this) //CtlGridIdRender.bind(this)\r\n      }\r\n    }\r\n\r\n    if (_.isArray(this.dataSource)) {\r\n      //有数据，按 client 模式加载数据\r\n      _.assign(gridOptions, {\r\n        rowModelType: 'clientSide',\r\n        rowData: this.data,\r\n        data: []\r\n      })\r\n    }\r\n\r\n    if (this.pagination) {\r\n      _.assign(gridOptions, {\r\n        rowModelType: 'clientSide',\r\n        rowData: [],\r\n        data: []\r\n      })\r\n    }\r\n\r\n    return gridOptions\r\n  }\r\n\r\n  private _filterChanged() {\r\n    if (this.dataSourceBind) {\r\n      if ((!_.isEqual(this.gridApi.getFilterModel(), this.dataSourceBind.lastFilterModel)) || this.refreshMode == GridRefreshMode.refreshAndClearFilter) {\r\n        const reload = _.get(this.dataSourceBind, 'reload')\r\n        if (typeof reload === 'function') {\r\n          reload.call(this.dataSourceBind);\r\n        }\r\n      }\r\n      // console.log('_filterChanged', this.gridApi.getFilterModel());\r\n    }\r\n  }\r\n\r\n  private _sortChanged() {\r\n    if (this.dataSourceBind) {\r\n      if ((!_.isEqual(this.gridApi.getSortModel(), this.dataSourceBind.lastSortModel)) || this.refreshMode == GridRefreshMode.refreshAndClearFilter) {\r\n        const reload = _.get(this.dataSourceBind, 'reload')\r\n        if (typeof reload === 'function') {\r\n          reload.call(this.dataSourceBind);\r\n        }\r\n      }\r\n      // console.log('_sortChanged', this.gridApi.getSortModel());\r\n    }\r\n  }\r\n\r\n  private _gridReady() {\r\n    this.isGridReadReady = true\r\n    /** 分页视图 **/\r\n    this.gridPage = new CtlGridPage(this)\r\n    this._rebindDataSource()\r\n  }\r\n\r\n  private _resetGrid() {\r\n    this.isGridReadReady = false\r\n    const gridOptions = this._gridOptions()\r\n    const $el = $(this._webix._viewobj).find('[role=\"yvGrid\"]')[0]\r\n    const grid: any = new agGrid.Grid($el, gridOptions)\r\n    grid.gridOptions.api.vue = this\r\n    this.gridApi = grid.gridOptions.api\r\n    this.columnApi = grid.gridOptions.columnApi\r\n\r\n    //去掉 ag-unselectable 使表格允许被选定\r\n    if ($el) {\r\n      $($el)\r\n        .find('.ag-root.ag-unselectable')\r\n        .removeClass('ag-unselectable')\r\n    }\r\n  }\r\n\r\n  _rowDoubleClicked(e: any) {\r\n    YvEventDispatch(this.onRowDblClick, this, e.data)\r\n  }\r\n\r\n  /**\r\n   * 获取下拉框的数据选项\r\n   */\r\n  _getComboFilterData(easyuiCol: any) {\r\n    if (easyuiCol.editMode === 'combo') {\r\n      if (typeof easyuiCol.editParams.data === 'string') {\r\n        if (YvanUI.dict.hasOwnProperty(easyuiCol.editParams.data)) {\r\n          return YvanUI.dict[easyuiCol.editParams.data]\r\n        } else if (YvanUI.formatter.hasOwnProperty(easyuiCol.editParams.data)) {\r\n          return YvanUI.formatter[easyuiCol.editParams.data]\r\n        } else {\r\n          console.error(\r\n            '没有发现全局函数 YvanUI.formatter[dict].' +\r\n            easyuiCol.editParams.data\r\n          )\r\n        }\r\n      } else if (easyuiCol.editParams.data.constructor === Array) {\r\n        const editParams = easyuiCol.editParams\r\n        return _.map(editParams.data, item => {\r\n          return {\r\n            id: item[editParams.idField],\r\n            text: item[editParams.textField]\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    let formatter = easyuiCol.formatter\r\n    if (typeof easyuiCol.formatter === 'string') {\r\n      // formatter 是字符串，从全局 YvanUI.formatter 找方法\r\n      if (YvanUI.dict.hasOwnProperty(easyuiCol.formatter)) {\r\n        formatter = YvanUI.dict[easyuiCol.formatter]\r\n      } else if (YvanUI.formatter.hasOwnProperty(easyuiCol.formatter)) {\r\n        easyuiCol.formatter = YvanUI.formatter[easyuiCol.formatter]\r\n      } else {\r\n        console.error(\r\n          '没有发现全局函数 YvanUI.formatter[dict].' + easyuiCol.editParams.data\r\n        )\r\n      }\r\n    }\r\n\r\n    if (formatter && formatter.constructor === Array) {\r\n      // formatter 是数组，就是下拉数据本身\r\n      return formatter\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 第一次数据被渲染之后\r\n   */\r\n  _firstDataRendered() {\r\n    YvEventDispatch(this.onFirstDataRendered, this, undefined)\r\n  }\r\n\r\n  /**\r\n   * 接受更新\r\n   * 状态位显示 OK, 删除 origin 数据, 并闪烁当前行\r\n   */\r\n  _acceptChanges(node: any) {\r\n    if (node.origin) {\r\n      node.cstate = 'ok'\r\n      delete node.origin\r\n      this.flashRow(node)\r\n      node.setDataValue('__ID__', _.uniqueId())\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 清空所有状态，准备获取新数据\r\n   * 当前编辑都应该清空, 勾选也应该清空\r\n   */\r\n  _clearCache() {\r\n    this.checkedIds = []\r\n    this.gridApi.forEachNode((node: any) => {\r\n      delete node.cstate\r\n      delete node.origin\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 根据行，获取主键 ID, 当主键不存在时 返回 undefined\r\n   */\r\n  _getIdByRow(row: any) {\r\n    if (!row) return\r\n    if (this.idField) {\r\n      if (this.idField.constructor === Array) {\r\n        //联合组件，用valueSep分割\r\n        return _.map(this.idField, f => _.toString(row[f])).join(this.valueSep)\r\n      }\r\n\r\n      return row[this.idField]\r\n    }\r\n    console.error('表格没有设置主键！！')\r\n    return undefined\r\n  }\r\n\r\n  /**\r\n   * 重新绑定数据源\r\n   */\r\n  _rebindDataSource() {\r\n    const innerMethod = () => {\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind.destory()\r\n        this.dataSourceBind = undefined\r\n      }\r\n\r\n      if (this._webix && this._module) {\r\n        this.dataSourceBind = new YvanDataSourceGrid(this, this.dataSource)\r\n      }\r\n    }\r\n\r\n    if (!this._module.loadFinished) {\r\n      // onload 函数还没有执行（模块还没加载完）, 延迟调用 rebind\r\n      _.defer(innerMethod)\r\n\r\n    } else {\r\n      // 否则实时调用 rebind\r\n      innerMethod()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 每次 AJAX 请求完毕之后会回调这里\r\n   */\r\n  _bindingComplete() {\r\n    YvEventDispatch(this.onBindingComplete, this, undefined)\r\n  }\r\n\r\n  /**\r\n   * 找到某行的 node, （一旦匹配到 condition 就停止）\r\n   */\r\n  _findNode(condition: GridSelectCondition) {\r\n    if (!condition) {\r\n      //返回第一条被找到的数据\r\n      condition = () => true\r\n    } else if (typeof condition === 'string') {\r\n      //以主键查找的方式\r\n      const key = condition\r\n      condition = (n: any) => {\r\n        return this._getIdByRow(n.data) === key\r\n      }\r\n    } else if (typeof condition === 'object') {\r\n      //就是 node 对象, 直接返回\r\n      return condition\r\n    }\r\n\r\n    const me = this\r\n    let findNode = undefined\r\n    try {\r\n      this.gridApi.forEachNode((node: any) => {\r\n        if ((condition as any).call(me, node)) {\r\n          findNode = node\r\n          throw Error()\r\n        }\r\n      })\r\n    } catch (e) { }\r\n    return findNode\r\n  }\r\n\r\n  _cellKeyDown(param: any) {\r\n    //event.stopPropagation();\r\n    //event.preventDefault();\r\n\r\n    //通知外部\r\n    const r = YvEventDispatch(this.onKeyDown, this, param)\r\n    if (r === true) {\r\n      //已经被自定义函数处理掉\r\n      return\r\n    }\r\n\r\n    if (param.event.keyCode === 13) {\r\n      param.event.stopPropagation()\r\n      param.event.preventDefault()\r\n      return\r\n    }\r\n\r\n    if (param.event.keyCode === 27) {\r\n      //按下 ESC 还原数据到 origin 状态, 并删除所有编辑形式\r\n      if (param.node.origin) {\r\n        param.event.stopPropagation()\r\n        param.event.preventDefault()\r\n\r\n        const data = {\r\n          ...param.data,\r\n          ...param.node.origin\r\n        }\r\n        delete param.node.cstate\r\n        delete param.node.origin\r\n        param.node.updateData(data)\r\n        param.node.setDataValue('__ID__', _.uniqueId())\r\n      }\r\n    }\r\n    //console.log('cellKeyDown', param);\r\n  }\r\n\r\n  _modelUpdated() {\r\n    if (this.autoSizeColumns && this.gridApi) {\r\n      this.gridApi.sizeColumnsToFit()\r\n    }\r\n  }\r\n\r\n  _cellFocused(param: any) {\r\n    YvEventDispatch(this.onCellFocused, this, param)\r\n  }\r\n\r\n  _cellClicked(param: any) {\r\n    YvEventDispatch(this.onCellClicked, this, param)\r\n  }\r\n\r\n  _rowSelected(param: any) {\r\n    const { node } = param\r\n    const { selected, id } = node\r\n\r\n    if (!selected) {\r\n      //行离开事件,查看是否有数据正在编辑，提交校验\r\n      this._rowEditingStopped(id, param)\r\n      return\r\n    }\r\n\r\n    //触发 entity 改变\r\n    if (_.size(this.entityName) > 0) {\r\n      _.set(this.getModule(), this.entityName + '.selectedRow', param.data)\r\n      //this.vcxt.module.$set(this.vcxt.module[this.entityName], \"selectedRow\", param.data);\r\n    }\r\n\r\n    //触发 onRowSelect 事件\r\n    YvEventDispatch(this.onRowSelect, this, param.data)\r\n  }\r\n\r\n  _cellEditingStarted(param: any) {\r\n    let rowId\r\n    if (param.node.rowPinned === 'top') {\r\n      //在添加行上\r\n      rowId = -1\r\n    } else if (!param.node.rowPinned) {\r\n      //在数据行上\r\n      rowId = param.node.id\r\n    }\r\n    this._rowEditingStarted(rowId, param)\r\n  }\r\n\r\n  _cellEditingStopped(param: any) {\r\n    //触发单元格校验事件\r\n    if (this.saveOn !== 'editFinish') {\r\n      //保存时机，是不是结束编辑后立刻保存\r\n      return\r\n    }\r\n\r\n    const origin = param.node.origin\r\n    if (!origin) {\r\n      // 这一行没有进入过编辑模式\r\n      return\r\n    }\r\n\r\n    const data = _.cloneDeep(param.data)\r\n    delete data['__ID__']\r\n    delete data['__CB__']\r\n\r\n    _.forOwn(origin, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        origin[key] = _.toString(value)\r\n      }\r\n    })\r\n    _.forOwn(data, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        data[key] = _.toString(value)\r\n      }\r\n    })\r\n\r\n    if (_.isEqual(origin, data)) {\r\n      //相同，改变状态位 same\r\n      param.node.cstate = 'same'\r\n    } else {\r\n      //不相同, 提交校验\r\n      param.node.cstate = 'validate'\r\n\r\n      if (this.dataSourceBind) {\r\n        if (this.dataSourceBind.updateSupport()) {\r\n          this.dataSourceBind._updateRow(param)\r\n        }\r\n      }\r\n      //console.log(this.dataSource, param.node)\r\n      //setTimeout(() => {\r\n      //    this._acceptChanges(param.node)\r\n      //}, 2000)\r\n    }\r\n    param.node.setDataValue('__ID__', _.uniqueId())\r\n  }\r\n\r\n  _rowEditingStarted(rowId: any, param: any) {\r\n    if (!param.node.origin) {\r\n      // 以前从来没有编辑过这一行, 记录 origin\r\n      const data = _.cloneDeep(param.data)\r\n      delete data['__ID__']\r\n      delete data['__CB__']\r\n      param.node.origin = data\r\n    }\r\n\r\n    param.node.cstate = 'editing'\r\n    param.node.setDataValue('__ID__', _.uniqueId())\r\n  }\r\n\r\n  _rowEditingStopped(rowId: any, param: any) {\r\n    if (this.saveOn !== 'rowChanged') {\r\n      //保存时机，是不是行更改后立刻保存\r\n      return\r\n    }\r\n\r\n    const origin = param.node.origin\r\n    if (!origin) {\r\n      // 这一行没有进入过编辑模式\r\n      return\r\n    }\r\n\r\n    const data = _.cloneDeep(param.data)\r\n    delete data['__ID__']\r\n    delete data['__CB__']\r\n\r\n    _.forOwn(origin, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        origin[key] = _.toString(value)\r\n      }\r\n    })\r\n    _.forOwn(data, (value, key) => {\r\n      if (typeof value === 'number') {\r\n        data[key] = _.toString(value)\r\n      }\r\n    })\r\n\r\n    if (_.isEqual(origin, data)) {\r\n      //相同，改变状态位 same\r\n      param.node.cstate = 'same'\r\n    } else {\r\n      //不相同, 提交校验\r\n      param.node.cstate = 'validate'\r\n\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind._updateRow(param)\r\n      }\r\n      //console.log(this.dataSource, param.node)\r\n      //setTimeout(() => {\r\n      //    this._acceptChanges(param.node)\r\n      //}, 2000)\r\n    }\r\n    param.node.setDataValue('__ID__', _.uniqueId())\r\n  }\r\n\r\n  /**\r\n   * Tab键导航\r\n   */\r\n  _tabToNextCell(params: any) {\r\n    const previousCell = params.previousCellPosition\r\n    const nextCellPosition = params.nextCellPosition\r\n\r\n    //tab 永不换行\r\n    return {\r\n      ...nextCellPosition,\r\n      rowIndex: previousCell.rowIndex\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 上下左右键导航\r\n   */\r\n  _navigateToNextCell(params: any) {\r\n    const KEY_LEFT = 37\r\n    const KEY_UP = 38\r\n    const KEY_RIGHT = 39\r\n    const KEY_DOWN = 40\r\n\r\n    const previousCell = params.previousCellPosition\r\n    const suggestedNextCell = params.nextCellPosition\r\n    switch (params.key) {\r\n      case KEY_UP: {\r\n        const nextRowIndex = previousCell.rowIndex - 1\r\n        if (nextRowIndex < 0) {\r\n          // returning null means don't navigate\r\n          return null\r\n        }\r\n        this.selectRow(node => node.rowIndex === nextRowIndex)\r\n        return {\r\n          rowIndex: nextRowIndex,\r\n          column: previousCell.column,\r\n          floating: previousCell.floating\r\n        }\r\n      }\r\n\r\n      case KEY_DOWN: {\r\n        // return the cell below\r\n        const rowIndex = previousCell.rowIndex + 1\r\n        const renderedRowCount = this.gridApi.getModel().getRowCount()\r\n        if (rowIndex >= renderedRowCount) {\r\n          // returning null means don't navigate\r\n          return null\r\n        }\r\n        this.selectRow(node => node.rowIndex === rowIndex)\r\n        return {\r\n          rowIndex: rowIndex,\r\n          column: previousCell.column,\r\n          floating: previousCell.floating\r\n        }\r\n      }\r\n\r\n      case KEY_LEFT:\r\n      case KEY_RIGHT:\r\n        return suggestedNextCell\r\n      default:\r\n        throw 'this will never happen, navigation is always one of the 4 keys above'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 列设置计算\r\n   */\r\n  _gridCols(resultCols: any[]): void {\r\n    _.each(this.columns, column => {\r\n      const easyuiCol = _.merge(\r\n        {\r\n          ..._.clone(YvGridColumnProp),\r\n          editParams: {\r\n            ..._.clone(YvGridColumnEditProp)\r\n          }\r\n        },\r\n        column\r\n      )\r\n\r\n      //=========================== 设计模式属性 ===========================\r\n      // if (this._isDesignMode) {\r\n      //     resultCols.push({\r\n      //         suppressMovable: true,\r\n      //         field: easyuiCol.field,\r\n      //         headerName: easyuiCol.title,\r\n      //         resizable: true,\r\n      //         filter: false,\r\n      //         editable: false,\r\n      //         sortable: false,\r\n      //         //unSortIcon: true,\r\n      //         hide: false,\r\n      //         width: easyuiCol.width,\r\n      //         minWidth: easyuiCol.minwidth,\r\n      //         maxWidth: easyuiCol.maxwidth\r\n      //     });\r\n      //     return;\r\n      // }\r\n\r\n      //=========================== 基本属性 ===========================\r\n      const col: any = {\r\n        suppressMovable: true,\r\n        field: easyuiCol.field,\r\n        headerName: easyuiCol.title,\r\n        resizable: easyuiCol.resizable,\r\n        filter: false,\r\n        editable: false,\r\n        sortable: easyuiCol.sortable,\r\n        //unSortIcon: true,\r\n        hide: easyuiCol.hidden\r\n      }\r\n\r\n      if (easyuiCol.sortable) {\r\n        // 走服务端排序，客户端排序可以让其无效\r\n        col.comparator = () => {\r\n          return 0;\r\n        }\r\n      }\r\n\r\n      if (typeof easyuiCol.width !== 'undefined') col.width = easyuiCol.width\r\n      if (typeof easyuiCol.minwidth !== 'undefined')\r\n        col.minWidth = easyuiCol.minwidth\r\n      if (typeof easyuiCol.maxwidth !== 'undefined')\r\n        col.maxWidth = easyuiCol.maxwidth\r\n\r\n      if (typeof easyuiCol.align !== 'undefined') {\r\n        col.cellClass = function (params: any) {\r\n          return ['yv-align-' + easyuiCol.align]\r\n        }\r\n      }\r\n\r\n      if (_.size(easyuiCol.field) > 0) {\r\n        col.tooltipField = easyuiCol.field\r\n      }\r\n\r\n      //=========================== buttons 属性 ===========================\r\n      if (easyuiCol.buttons) {\r\n        //col.cellRendererFramework = 'yvGridButton'\r\n        col.cellRenderer = 'CtlGridCellButton'\r\n        col.cellRendererParams = {\r\n          buttons: easyuiCol.buttons\r\n        }\r\n      }\r\n\r\n      //=========================== 编辑与formatter属性 ===========================\r\n      const { editParams } = easyuiCol\r\n      let formatable = false\r\n      if (easyuiCol.editable) {\r\n        if (easyuiCol.editMode === 'checkbox') {\r\n          //勾选框编辑\r\n          formatable = false\r\n          col.cellRenderer = 'CtlGridCellCheckbox'\r\n          col.cellRendererParams = {\r\n            editParams: easyuiCol.editParams,\r\n            on: editParams.on,\r\n            off: editParams.off,\r\n            onChange: (newValue: any) => {\r\n              YvEventDispatch(editParams.onValidate, this, {\r\n                value: newValue\r\n              })\r\n            },\r\n            onValidate: (value: any) => {\r\n              YvEventDispatch(editParams.onValidate, this, {\r\n                value: value\r\n              })\r\n            }\r\n          }\r\n\r\n          if (easyuiCol.editable) {\r\n            //允许编辑\r\n            _.assign(col, {\r\n              editable: true,\r\n              cellEditor: 'CtlGridEditorCombo',\r\n              cellEditorParams: {\r\n                editParams: easyuiCol.editParams,\r\n                options: [\r\n                  { id: editParams.on, text: '勾选' },\r\n                  { id: editParams.off, text: '不勾' }\r\n                ],\r\n                onChange: (newValue: any) => {\r\n                  YvEventDispatch(editParams.onValidate, this, {\r\n                    value: newValue\r\n                  })\r\n                },\r\n                onValidate: (value: any) => {\r\n                  YvEventDispatch(editParams.onValidate, this, {\r\n                    value: value\r\n                  })\r\n                }\r\n              }\r\n            })\r\n          }\r\n        } else if (easyuiCol.editMode === 'combo') {\r\n          //下拉框编辑\r\n          formatable = false\r\n          _.assign(col, {\r\n            editable: true,\r\n            cellEditor: 'CtlGridEditorCombo',\r\n            cellEditorParams: {\r\n              editParams: easyuiCol.editParams,\r\n              options: this._getComboFilterData(easyuiCol),\r\n              onChange: (newValue: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: newValue\r\n                })\r\n              },\r\n              onValidate: (value: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: value\r\n                })\r\n              }\r\n            }\r\n          })\r\n          //下拉框的 formatter 逻辑是固定的\r\n          const data = this._getComboFilterData(easyuiCol)\r\n          if (typeof data === 'function') {\r\n            col.valueFormatter = (params: any) => {\r\n              return data(params.value)\r\n            }\r\n          } else {\r\n            col.valueFormatter = (params: any) => {\r\n              if (_.size(params.data) <= 0) return\r\n\r\n              const optionItem = _.find(data, item => {\r\n                const id = _.toString(item['id'])\r\n                return id && id === _.toString(params.value)\r\n              })\r\n\r\n              if (optionItem) {\r\n                //找到text属性值\r\n                return optionItem['text']\r\n              }\r\n              return params.value\r\n            }\r\n          }\r\n\r\n        } else if (easyuiCol.editMode === 'area') {\r\n          //大型富文本框编辑\r\n          formatable = true\r\n          _.assign(col, {\r\n            editable: true,\r\n            cellEditor: 'agLargeTextCellEditor',\r\n            cellEditorParams: {\r\n              editParams: easyuiCol.editParams,\r\n              maxLength: editParams.maxlength\r\n            }\r\n          })\r\n\r\n        } else if (easyuiCol.editMode === 'text' || easyuiCol.editMode === 'number') {\r\n          //普通文本框编辑\r\n          formatable = true\r\n          _.assign(col, {\r\n            editable: true,\r\n            cellEditor: 'CtlGridEditorText',\r\n            cellEditorParams: {\r\n              type: easyuiCol.editMode,\r\n              editParams: easyuiCol.editParams,\r\n              onChange: (newValue: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: newValue\r\n                })\r\n              },\r\n              onValidate: (value: any) => {\r\n                YvEventDispatch(editParams.onValidate, this, {\r\n                  value: value\r\n                })\r\n              },\r\n              onInput: (e: any) => {\r\n                YvEventDispatch(editParams.onInput, this, this, {\r\n                  event: e\r\n                })\r\n              }\r\n            }\r\n          })\r\n\r\n        } else if (easyuiCol.editMode === 'date' || easyuiCol.editMode === 'datetime') {\r\n          formatable = true\r\n          // _.assign(col, {\r\n          //     editable: true,\r\n          //     cellEditor: \"YvGridEditorDate\",\r\n          //     cellEditorParams: {\r\n          //         type: easyuiCol.editMode,\r\n          //         editParams: easyuiCol.editParams,\r\n          //         onChange: newValue => {\r\n          //             this.$yvDispatch(editParams.onValidate, newValue, this.getEditRow());\r\n          //         },\r\n          //         onValidate: value => {\r\n          //             this.$yvDispatch(editParams.onValidate, value, this.getEditRow());\r\n          //         },\r\n          //         onInput: e => {\r\n          //             this.$yvDispatch(editParams.onInput, e, this.getEditRow());\r\n          //         }\r\n          //     }\r\n          // });\r\n          console.error('not support date editor')\r\n        }\r\n      } else {\r\n        //不允许编辑的情况，全都允许格式化\r\n        formatable = true\r\n      }\r\n\r\n      //=========================== formatter属性 ===========================\r\n      if (formatable) {\r\n        const data = this._getComboFilterData(easyuiCol)\r\n        if (data) {\r\n          //从下拉框逻辑中找到了固定映射关系\r\n          col.valueFormatter = (params: any) => {\r\n            if (_.size(params.data) <= 0) return undefined\r\n            const optionItem = _.find(data, item => {\r\n              const id = _.toString(item['id'])\r\n              return id && id === _.toString(params.value)\r\n            })\r\n\r\n            if (optionItem) {\r\n              //找到text属性值\r\n              return optionItem['text']\r\n            }\r\n            return params.value\r\n          }\r\n        } else {\r\n          //以 function 方式获得显示逻辑\r\n          let formatter = easyuiCol.formatter\r\n          if (typeof easyuiCol.formatter === 'string') {\r\n            // formatter 是字符串，从全局 YvanUI.formatter 找方法\r\n            if (!YvanUI.formatter.hasOwnProperty(easyuiCol.formatter)) {\r\n              console.error(\r\n                '没有发现全局函数 YvanUI.formatter.' + easyuiCol.formatter\r\n              )\r\n            } else {\r\n              formatter = YvanUI.formatter[easyuiCol.formatter]\r\n            }\r\n          }\r\n\r\n          if (typeof formatter === 'function') {\r\n            //formatter 是函数，调用函数来显示\r\n            col.valueFormatter = (params: any) => {\r\n              if (_.size(params.data) <= 0) return undefined\r\n              return formatter.call(\r\n                this,\r\n                params.data[easyuiCol.field],\r\n                this,\r\n                params.data\r\n              )\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      //=========================== 过滤属性 ===========================\r\n      if (this.filterable && easyuiCol.filterable && !easyuiCol.hidden) {\r\n        const datas = this._getComboFilterData(easyuiCol)\r\n        if (typeof datas === 'object') {\r\n          //下拉框过滤\r\n          _.assign(col, {\r\n            filter: 'CtlGridFilterSet',\r\n            //suppressMenu: true,\r\n            filterParams: {\r\n              data: datas,\r\n            },\r\n          })\r\n        } else if (easyuiCol.editMode === 'number') {\r\n          //数字过滤\r\n          _.assign(col, {\r\n            filter: 'agNumberColumnFilter', //NumberFilter = 26850\r\n            //suppressMenu: true,\r\n            filterParams: {\r\n              applyButton: true,\r\n              clearButton: true,\r\n              suppressAndOrCondition: true,\r\n              filterOptions: [\r\n                // 服务器已经设置条件，浏览器不进行实际比对\r\n                { displayKey: 'equals', displayName: '等于', test() { return true; } },\r\n                { displayKey: 'notEqual', displayName: '不等于', test() { return true; } },\r\n                { displayKey: 'lessThan', displayName: '小于', test() { return true; } },\r\n                { displayKey: 'greaterThan', displayName: '大于', test() { return true; } },\r\n                { displayKey: 'lessThanOrEqual', displayName: '小于等于', test() { return true; } },\r\n                { displayKey: 'greaterThanOrEqual', displayName: '大于等于', test() { return true; } },\r\n                { displayKey: 'inRange', displayName: '范围', test() { return true; } },\r\n              ]\r\n            }\r\n          })\r\n\r\n        } else if (easyuiCol.editMode === 'date' || easyuiCol.editMode === 'datetime') {\r\n          //日期筛选\r\n          _.assign(col, {\r\n            filter: 'agDateColumnFilter',\r\n            filterParams: {\r\n              applyButton: true,\r\n              clearButton: true,\r\n              filterOptions: ['inRange'],\r\n              suppressAndOrCondition: true,\r\n              inRangeInclusive: true,\r\n              comparator(v1: any, v2: any) {\r\n                // 服务器已经设置条件，浏览器不进行实际比对\r\n                // 0 的情况，一定要包含 inRangeInclusive 条件\r\n                return 0\r\n              }\r\n            }\r\n          })\r\n        } else {\r\n          //其他情况都是字符串筛选\r\n          _.assign(col, {\r\n            filter: 'agTextColumnFilter',\r\n            filterParams: {\r\n              applyButton: true,\r\n              clearButton: true,\r\n              filterOptions: ['startsWith', 'equals', 'contains'],\r\n              suppressAndOrCondition: true,\r\n              textCustomComparator() {\r\n                // 服务器已经设置条件，浏览器不进行实际比对\r\n                return true;\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      //=========================== 渲染属性 ===========================\r\n      if (typeof easyuiCol.onStyle === 'function') {\r\n        _.assign(col, {\r\n          cellStyle: (param: any) => {\r\n            return easyuiCol.onStyle.call(this, param)\r\n          }\r\n        })\r\n      }\r\n\r\n      resultCols.push(col)\r\n    })\r\n  }\r\n}\r\n\r\nexport type GridSelectCondition = ((row: any) => boolean) | string\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlSwitchDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlSwitch extends CtlInput<CtlSwitch> {\r\n  static create(module: any, vjson: any): CtlSwitch {\r\n    const that = new CtlSwitch(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlSwitchDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['value'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'switch',\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 交换状态\r\n   */\r\n  toggle() {\r\n    this._webix.toggle()\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValueHere(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { CtlInput } from './CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlNumberDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlNumber extends CtlInput<CtlNumber> {\r\n  static create(module: any, vjson: any): CtlNumber {\r\n    const that = new CtlNumber(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlNumberDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['precision'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'text',\r\n      type: 'number'\r\n      // attr: {\r\n      //     min: \"0.00\",\r\n      //     step: \"0.01\"\r\n      // }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  public precision?: number\r\n\r\n  private _testNumber(value: any) {\r\n    if (this.precision && this.precision > 0) {\r\n      value = value.replace(/[^\\d.-]/g, '') //清除\"数字\"和\".\"以外的字符\r\n      if (value.length > 1 && value.indexOf('.') > 1) {\r\n        let t\r\n        while (1) {\r\n          t = value\r\n          value = value.replace(/^0/g, '')\r\n          if (t.length === value.length) {\r\n            break\r\n          }\r\n        }\r\n        //value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n      }\r\n      value = value.replace(/^\\./g, '') //验证第一个字符是数字而不是.\r\n      value = value.replace(/\\.{2,}/g, '.') //只保留第一个. 清除多余的.\r\n      value = value\r\n        .replace('.', '$#$')\r\n        .replace(/\\./g, '')\r\n        .replace('$#$', '.') //只允许输入一个小数点\r\n\r\n      const r = eval('/^(\\\\-)*(\\\\d+)\\\\.(\\\\d{0,' + this.precision + '}).*$/')\r\n      value = value.replace(r, '$1$2.$3') //只能输入固定位数的小数\r\n    } else {\r\n      value = value.replace(/[^\\d-]/g, '') //清除\"数字\"和\"-\"以外的字符\r\n      if (value.length > 1) {\r\n        value = value.replace(/^0/g, '') //验证第一个字符不是0.\r\n      }\r\n      if (value.startsWith('-')) {\r\n        value = '-' + value.substr(1).replace(/[^\\d]/g, '')\r\n      } else {\r\n        value = value.replace(/[^\\d]/g, '')\r\n      }\r\n    }\r\n    return value\r\n  }\r\n\r\n  onInputEvent(e: Event) {\r\n    let value = (e.target as any).value\r\n      ; (e.target as any).value = this._testNumber(value)\r\n    super.onInputEvent(e)\r\n  }\r\n\r\n  /**\r\n   * 设置值 (如果不符合数字或小数位数格式，会被清空)\r\n   */\r\n  set value(nv: any) {\r\n    nv = this._testNumber(nv)\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值(可能取到空值)\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { CtlInput } from '../input/CtlInput'\r\nimport { parseYvanPropChangeVJson } from '../../CtlUtils'\r\nimport { CtlRadioDefault } from '../../CtlDefaultValue'\r\n\r\nexport class CtlRadio extends CtlInput<CtlRadio> {\r\n  static create(module: any, vjson: any): CtlRadio {\r\n    const that = new CtlRadio(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlRadioDefault)\r\n\r\n    // 基础属性先执行\r\n    that._create(vjson, that)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['options'])\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 _webixConfig 合并至 vjson, 最终合交给 webix 做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      view: 'radio',\r\n      on: {}\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 修改下拉选项\r\n   */\r\n  set options(nv: any[]) {\r\n    const value = nv.map(item => {\r\n      return { id: item.id, value: item.text }\r\n    })\r\n\r\n    if (!this._webix) {\r\n      _.merge(this._webixConfig, {\r\n        options: value\r\n      })\r\n      return\r\n    }\r\n    this._webix.define('options', value)\r\n    this._webix.refresh()\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { CtlCodeMirrorDefault } from './CtlDefaultValue'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport webix from 'webix'\r\n\r\nwebix.protoUI(\r\n  {\r\n    name: 'codemirror-editor',\r\n    defaults: {},\r\n    $init: function (config: any) {\r\n      this.$view.innerHTML =\r\n        \"<textarea style='width:100%;height:100%;'></textarea>\"\r\n      this._waitEditor = webix.promise.defer()\r\n      this.$ready.push(this._render_cm_editor)\r\n      _.extend(this.config, config)\r\n      if (config.on && typeof config.on.onInited === 'function') {\r\n        config.on.onInited.call(this)\r\n      }\r\n    },\r\n    _render_cm_editor: function () {\r\n      this._render_when_ready()\r\n      // if (this.config.cdn === false) {\r\n      //     this._render_when_ready;\r\n      //     return;\r\n      // }\r\n      //\r\n      // var cdn = this.config.cdn || \"//cdn.bootcss.com/codemirror/5.38.0/\";\r\n      // // basic\r\n      // var sources = [\r\n      //     cdn + \"/codemirror.css\",\r\n      //     cdn + \"/codemirror.js\"\r\n      // ];\r\n      //\r\n      // // mode\r\n      // if (this.config.mode === \"htmlmixed\") {\r\n      //     sources.push(cdn + \"/mode/xml/xml.js\");\r\n      //     sources.push(cdn + \"/mode/css/css.js\");\r\n      //     sources.push(cdn + \"/mode/javascript/javascript.js\");\r\n      //\r\n      // } else {\r\n      //     var mode = this.config.mode ? this.config.mode : \"javascript\";\r\n      //     sources.push(cdn + \"/mode/\" + mode + \"/\" + mode + \".js\");\r\n      // }\r\n      //\r\n      // // theme\r\n      // if (this.config.theme && this.config.theme !== \"default\") {\r\n      //     sources.push(cdn + \"/theme/\" + this.config.theme + \".css\")\r\n      // }\r\n      //\r\n      // // matchbrackets add-on\r\n      // if (this.config.matchBrackets) {\r\n      //     sources.push(cdn + \"/addon/edit/matchbrackets.js\")\r\n      // }\r\n      //\r\n      // webix.require(sources)\r\n      //     .then(webix.bind(this._render_when_ready, this))\r\n      //     .catch((e: any) => {\r\n      //         console.log(e);\r\n      //     });\r\n    },\r\n    _render_when_ready: function (this: any) {\r\n      const CodeMirror: any = _.get(window, 'CodeMirror')\r\n      this._editor = CodeMirror.fromTextArea(this.$view.firstChild, {\r\n        // mode: this.config.mode,\r\n        // lineNumbers: this.config.lineNumbers,\r\n        // matchBrackets: this.config.matchBrackets,\r\n        // theme: this.config.theme\r\n        ...this.config\r\n      })\r\n\r\n      this._waitEditor.resolve(this._editor)\r\n\r\n      this.setValue(this.config.value)\r\n      if (this._focus_await) {\r\n        this.focus()\r\n      }\r\n    },\r\n    _set_inner_size: function () {\r\n      if (!this._editor || !this.$width) return\r\n\r\n      this._updateScrollSize()\r\n      this._editor.scrollTo(0, 0) //force repaint, mandatory for IE\r\n    },\r\n    _updateScrollSize: function () {\r\n      var box = this._editor.getWrapperElement()\r\n      var height = (this.$height || 0) + 'px'\r\n\r\n      box.style.height = height\r\n      box.style.width = (this.$width || 0) + 'px'\r\n\r\n      var scroll = this._editor.getScrollerElement()\r\n      if (scroll.style.height !== height) {\r\n        scroll.style.height = height\r\n        this._editor.refresh()\r\n      }\r\n    },\r\n    $setSize: function (x: any, y: any) {\r\n      if (webix.ui.view.prototype.$setSize.call(this, x, y)) {\r\n        this._set_inner_size()\r\n      }\r\n    },\r\n    setValue: function (value: any) {\r\n      if (!value && value !== 0) {\r\n        value = ''\r\n      }\r\n\r\n      this.config.value = value\r\n      if (this._editor) {\r\n        this._editor.setValue(value)\r\n        //by default - clear editor's undo history when setting new value\r\n        if (!this.config.preserveUndoHistory) {\r\n          this._editor.clearHistory()\r\n        }\r\n        this._updateScrollSize()\r\n      }\r\n    },\r\n    getValue: function () {\r\n      return this._editor ? this._editor.getValue() : this.config.value\r\n    },\r\n    focus: function () {\r\n      this._focus_await = true\r\n      if (this._editor) {\r\n        this._editor.focus()\r\n      }\r\n    },\r\n    getEditor: function (waitEditor: any) {\r\n      return waitEditor ? this._waitEditor : this._editor\r\n    },\r\n    // //undo, redo, etc\r\n    // undo: function () {\r\n    //     this._editor.undo();\r\n    // },\r\n    // redo: function () {\r\n    //     this._editor.redo();\r\n    // },\r\n    undoLength: function () {\r\n      return this._editor.historySize().undo\r\n    }\r\n  },\r\n  webix.ui.view\r\n)\r\n\r\nexport class CtlCodeMirror extends CtlBase<CtlCodeMirror> {\r\n  static create(module: any, vjson: any): CtlCodeMirror {\r\n    const that = new CtlCodeMirror(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlCodeMirrorDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['value'])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 撤销\r\n   */\r\n  undo() {\r\n    this._webix.getEditor().undo()\r\n  }\r\n\r\n  /**\r\n   * 重做\r\n   */\r\n  redo() {\r\n    this._webix.getEditor().redo()\r\n  }\r\n\r\n  /**\r\n   * 添加内容\r\n   */\r\n  append(msg: string) {\r\n    const editor = this._webix.getEditor();\r\n    const CodeMirror = _.get(window, 'CodeMirror');\r\n    editor.replaceRange(msg, CodeMirror.Pos(editor.lastLine()));\r\n  }\r\n\r\n  /**\r\n   * 移动光标到文档开始处\r\n   */\r\n  goDocStart() {\r\n    this._webix.getEditor().execCommand('goDocStart');\r\n  }\r\n\r\n  /**\r\n   * 移动光标到文档结束处\r\n   */\r\n  goDocEnd() {\r\n    this.execCommand('goDocEnd');\r\n  }\r\n\r\n  /**\r\n   * 移动光标到行开始处\r\n   */\r\n  goLineStart() {\r\n    this.execCommand('goLineStart');\r\n  }\r\n\r\n  /**\r\n   * 移动光标到行结束处\r\n   */\r\n  goLineEnd() {\r\n    this.execCommand('goLineEnd');\r\n  }\r\n\r\n  /**\r\n   * 移动光标到上一行\r\n   */\r\n  goLineUp() {\r\n    this.execCommand('goLineUp');\r\n  }\r\n\r\n  /**\r\n   * 移动光标到下一行\r\n   */\r\n  goLineDown() {\r\n    this.execCommand('goLineDown');\r\n  }\r\n\r\n  /**\r\n   * 获取对应行的内容\r\n   */\r\n  getLine(n: number): string {\r\n    return this._webix.getEditor().getLine(n)\r\n  }\r\n\r\n  /**\r\n   * 设置scroll到position位置\r\n   */\r\n  scrollTo(x: any, y: any) {\r\n    this._webix.getEditor().scrollTo(x, y);\r\n  }\r\n\r\n  clear() {\r\n    this.value = '';\r\n  }\r\n\r\n  /**\r\n   * 执行命令\r\n   */\r\n  execCommand(cmd: any) {\r\n    return this._webix.getEditor().execCommand(cmd);\r\n  }\r\n\r\n  /**\r\n   * 刷新编辑器\r\n   */\r\n  refresh() {\r\n    this._webix.getEditor().refresh();\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n\r\n    return this._webix.getValue()\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvDataSource } from './YvanDataSourceImp'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { DataSource } from './YvanDataSource'\r\nimport { CtlSidebarDefault } from './CtlDefaultValue'\r\nimport { getFirstPinyin } from './Utils'\r\n\r\nexport class CtlSidebar extends CtlBase<CtlSidebar> {\r\n  static create(module: any, vjson: any): CtlSidebar {\r\n    const that = new CtlSidebar(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlSidebarDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n      // 'data',\r\n      'dataSource',\r\n      'onNodeClick',\r\n      'onDataComplete'\r\n    ])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      select: true,\r\n      filterMode: {\r\n        showSubItems: false\r\n      },\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        },\r\n        onItemClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeClick, that, item)\r\n        },\r\n        onItemDblClick(this: any, id: any) {\r\n          const item = this.getItem(id)\r\n          YvEventDispatch(that.onNodeDblClick, that, item)\r\n        }\r\n      }\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * 拼音方式过滤查找树\r\n   */\r\n  filter(nv: string) {\r\n    if (!nv) {\r\n      this._webix.filter('')\r\n      return\r\n    }\r\n\r\n    this._webix.filter((node: any) => {\r\n      const value = node.value\r\n      const nodePy = getFirstPinyin(value).toLowerCase()\r\n      return nodePy.indexOf(nv.toLowerCase()) >= 0 || value.toLowerCase().indexOf(nv) >= 0\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 树上的数据\r\n   */\r\n  data?: any[]\r\n\r\n  /**\r\n   * 树节点被点击后触发\r\n   */\r\n  onNodeClick?: YvEvent<CtlSidebar, any>\r\n\r\n  /**\r\n   * 树节点被双击后触发\r\n   */\r\n  onNodeDblClick?: YvEvent<CtlSidebar, any>\r\n\r\n  /**\r\n   * 数据绑定完成后触发\r\n   */\r\n  onDataComplete?: YvEvent<CtlSidebar, any>\r\n\r\n  /**\r\n   * 设置值\r\n   */\r\n  set value(nv: any) {\r\n    if (!this._webix) {\r\n      this._webixConfig.value = nv\r\n    } else {\r\n      this._webix.setValue(nv)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  get value(): any {\r\n    if (!this._webix) {\r\n      return this._webixConfig.value\r\n    }\r\n    return this._webix.getValue()\r\n  }\r\n\r\n  /**\r\n   * 设置数据\r\n   */\r\n  set dataReal(nv: any[]) {\r\n    // dataSource call back\r\n    this._webix.clearAll()\r\n    this._webix.parse(nv)\r\n  }\r\n\r\n  /**\r\n   * 获取数据源设置\r\n   */\r\n  get dataSource(): DataSource<CtlSidebar> {\r\n    return this._dataSource\r\n  }\r\n\r\n  /**\r\n   * 设置数据源\r\n   */\r\n  set dataSource(nv: DataSource<CtlSidebar>) {\r\n    this._dataSource = nv\r\n    if (this._module.loadFinished) {\r\n      // onLoad 之后会触发 view.onInited -> attachHandle -> refreshState -> _rebindDataSource\r\n      // onLoad 之前都不需要主动触发 _rebindDataSource\r\n      this._rebindDataSource()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 重新请求数据\r\n   */\r\n  public reload(): void {\r\n    if (this.dataSourceBind && this.dataSourceBind.reload) {\r\n      this.dataSourceBind.reload()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 展开或收起状态互换\r\n   */\r\n  public toggle(): void {\r\n    return this._webix.toggle();\r\n  }\r\n\r\n  /**\r\n   * 是否折叠状态\r\n   */\r\n  public isCollapsed(): boolean {\r\n    return this._webix.config.collapsed;\r\n  }\r\n\r\n  /* =============================================== 以下部分为私有函数 =============================================== */\r\n\r\n  //数据源设置\r\n  private _dataSource: DataSource<CtlSidebar>\r\n\r\n  //数据源管理器\r\n  private dataSourceBind?: YvDataSource<CtlSidebar>\r\n\r\n  //重新绑定数据源\r\n  private _rebindDataSource() {\r\n    const innerMethod = () => {\r\n      if (this.dataSourceBind) {\r\n        this.dataSourceBind.destory()\r\n        this.dataSourceBind = undefined\r\n      }\r\n\r\n      if (this._webix && this._module) {\r\n        this.dataSourceBind = new YvDataSource(this, this.dataSource, this._dataSourceProcess.bind(this))\r\n        this.dataSourceBind.init()\r\n      }\r\n    }\r\n\r\n    if (!this._module.loadFinished) {\r\n      // onload 函数还没有执行（模块还没加载完）, 延迟调用 rebind\r\n      _.defer(innerMethod)\r\n\r\n    } else {\r\n      // 否则实时调用 rebind\r\n      innerMethod()\r\n    }\r\n  }\r\n\r\n  private _dataSourceProcess(data: any[]) {\r\n    if (\r\n      !this.dataSource ||\r\n      _.isArray(this.dataSource) ||\r\n      _.isFunction(this.dataSource)\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    if (this.dataSource.type !== 'SQL' && this.dataSource.type !== 'function') {\r\n      return data\r\n    }\r\n\r\n    if (\r\n      !this.dataSource.parentField ||\r\n      !this.dataSource.displayField ||\r\n      !this.dataSource.valueField\r\n    ) {\r\n      return data\r\n    }\r\n\r\n    const idField = this.dataSource.valueField\r\n    const textField = this.dataSource.displayField\r\n    const parentField = this.dataSource.parentField\r\n\r\n    data = _.cloneDeep(data)\r\n\r\n    // 第一遍扫描, 建立映射关系\r\n    const nodeMap: any = {}\r\n    const rootNode = []\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      nodeMap[row[idField]] = {\r\n        value: row[textField],\r\n        id: row[idField],\r\n        row: row\r\n      }\r\n      if (row.icon) {\r\n        nodeMap[row[idField]].icon = row.icon\r\n      }\r\n    }\r\n\r\n    // 第二遍扫描，建立父子关系\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = data[i]\r\n      const parent = row[parentField]\r\n      const id = row[idField]\r\n\r\n      if (!parent || parent === '0') {\r\n        // 没有父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n      } else if (nodeMap.hasOwnProperty(parent)) {\r\n        //找到父亲\r\n        const parentNode = nodeMap[parent]\r\n        if (parentNode.hasOwnProperty('data')) {\r\n          parentNode.data.push(nodeMap[id])\r\n        } else {\r\n          parentNode.data = [nodeMap[id]]\r\n        }\r\n      } else {\r\n        // 没有找到父亲，作为根节点\r\n        rootNode.push(nodeMap[id])\r\n      }\r\n    }\r\n\r\n    return rootNode\r\n  }\r\n\r\n  //刷新状态时，自动重绑数据源\r\n  protected refreshState() {\r\n    super.refreshState()\r\n    this._rebindDataSource()\r\n  }\r\n\r\n  /**\r\n   * 根据id获取一行数据\r\n   */\r\n  public getItem(id: any) {\r\n    return this._webix.getItem(id)\r\n  }\r\n\r\n  /**\r\n   * 选中一行\r\n   * @param id\r\n   */\r\n  public select(id: any) {\r\n    // this._webix.showItem(id);\r\n    let pid = id\r\n    while (pid) {\r\n      this._webix.open(pid)\r\n      pid = this._webix.getParentId(pid)\r\n    }\r\n\r\n    this._webix.select(id)\r\n  }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { CtlXtermDefault } from './CtlDefaultValue'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport webix from 'webix'\r\nimport qs from \"qs\";\r\n\r\nwebix.protoUI(\r\n    {\r\n        name: 'xterm',\r\n        defaults: {},\r\n        $init: function (config: any) {\r\n            this._domid = webix.uid();\r\n            this.$view.innerHTML = `<div id='${this._domid}' style='width:100%;height:100%;'></div>`\r\n            this.$ready.push(this._ready)\r\n            _.extend(this.config, config)\r\n            if (config.on && typeof config.on.onInited === 'function') {\r\n                config.on.onInited.call(this)\r\n            }\r\n        },\r\n        _ready: function (this: any) {\r\n            this.isXtermLoad = false;\r\n        },\r\n        _set_inner_size: function () {\r\n            if (!this._term || !this.$width) return\r\n\r\n            this._updateScrollSize()\r\n            // this._editor.scrollTo(0, 0) //force repaint, mandatory for IE\r\n        },\r\n        destructor: function () {\r\n            if (this.$destructed) {\r\n                return;\r\n            }\r\n\r\n            this.$destructed = true;\r\n            if (this.config.on && typeof this.config.on.onDestruct === 'function') {\r\n                this.config.on.onDestruct.call(this)\r\n            }\r\n        },\r\n        _updateScrollSize: function () {\r\n            var box = this._term.element;\r\n            var height = (this.$height || 0) + 'px'\r\n\r\n            box.style.height = height\r\n            box.style.width = (this.$width || 0) + 'px'\r\n\r\n            if (this._fitAddon) {\r\n                this._fitAddon.fit();\r\n                this._updateXtermInfo()\r\n            }\r\n        },\r\n        _updateXtermInfo: function () {\r\n            const info = {\r\n                \"xtermCols\": this._term.cols,\r\n                \"xtermRows\": this._term.rows,\r\n                \"xtermWp\": this.$width,\r\n                \"xtermHp\": this.$height\r\n            }\r\n            this.wrapper.xtermInfo = info;\r\n            if (this.wrapper._connection) {\r\n                this.wrapper._resizeClientData(info);\r\n            }\r\n        },\r\n        $setSize: function (x: any, y: any) {\r\n            if (webix.ui.view.prototype.$setSize.call(this, x, y)) {\r\n                _.defer(() => {\r\n                    this._set_inner_size()\r\n                    if (this.isXtermLoad == false) {\r\n                        this.isXtermLoad = true\r\n                        //@ts-ignore\r\n                        require(['xterm', 'xterm-addon-fit'], (xterm: any, addon: any) => {\r\n                            const term = new xterm.Terminal(this.config.termConfig);\r\n                            if (this.wrapper.allowInput) {\r\n                                term.onData((data: any) => {\r\n                                    this.wrapper._sendClientData(data);\r\n                                });\r\n                            }\r\n                            const fitAddon = new addon.FitAddon();\r\n                            term.loadAddon(fitAddon);\r\n                            term.open(this.$view.firstChild);\r\n                            fitAddon.fit();\r\n                            this._term = term;\r\n                            this._fitAddon = fitAddon;\r\n                            this._updateXtermInfo()\r\n                            if (this.wrapper._shouldConnectUrl) {\r\n                                this.wrapper.connectHost(this.wrapper._shouldConnectUrl);\r\n                                delete this.wrapper._shouldConnectUrl\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    },\r\n    webix.ui.view\r\n)\r\n\r\nexport class CtlXterm extends CtlBase<CtlXterm> {\r\n    static create(module: any, vjson: any): CtlXterm {\r\n        const that = new CtlXterm(vjson)\r\n        that._module = module\r\n\r\n        _.defaultsDeep(vjson, CtlXtermDefault)\r\n\r\n        const yvanProp = parseYvanPropChangeVJson(vjson, [\r\n            'value',\r\n            'allowInput',\r\n            'onOpen',\r\n            'onClose',\r\n        ])\r\n\r\n        // 将 vjson 存至 _webixConfig\r\n        that._webixConfig = vjson\r\n\r\n        // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n        _.assign(that, yvanProp)\r\n\r\n        // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n        _.merge(vjson, that._webixConfig, {\r\n            on: {\r\n                onInited(this: any) {\r\n                    that.attachHandle(this, { ...vjson, ...yvanProp })\r\n                    this.wrapper = that\r\n                },\r\n                onDestruct(this: any) {\r\n                    that.connectionClose()\r\n                    that.removeHandle()\r\n                }\r\n            }\r\n        })\r\n\r\n        return that\r\n    }\r\n\r\n    /**\r\n     * xterm 信息\r\n     * cols          \r\n     * rows\r\n     * width\r\n     * height\r\n     */\r\n    xtermInfo?: any\r\n\r\n    /**\r\n     * 是否允许从 xterm 接收指令，给 websocket\r\n     */\r\n    allowInput?: boolean\r\n\r\n    /**\r\n     * socket打开时的事件\r\n     */\r\n    onOpen?: YvEvent<CtlXterm, any>\r\n\r\n    /**\r\n     * socket关闭时的事件\r\n     */\r\n    onClose?: YvEvent<CtlXterm, any>\r\n\r\n    /**\r\n     * 获取终端\r\n     */\r\n    get term(): any {\r\n        return this._webix._term\r\n    }\r\n\r\n    /**\r\n     * 获取填充插件\r\n     */\r\n    get fitAddon(): any {\r\n        return this._webix._fitAddon\r\n    }\r\n\r\n    clear() {\r\n        this.term.clear()\r\n    }\r\n\r\n    connectHost(host: string) {\r\n        if (!this.term) {\r\n            this._shouldConnectUrl = host\r\n            return;\r\n        }\r\n        if (!this._connection) {\r\n            let hostUrl = host;\r\n            if (hostUrl.indexOf(\"?\") === -1) {\r\n                hostUrl = hostUrl + \"?\" + qs.stringify(this.xtermInfo);\r\n            }\r\n            else {\r\n                const params = hostUrl.slice(hostUrl.indexOf(\"?\") + 1)\r\n                if (params.length > 0) {\r\n                    hostUrl = hostUrl + \"&\" + qs.stringify(this.xtermInfo);\r\n                }\r\n                hostUrl += qs.stringify(this.xtermInfo);\r\n            }\r\n            this._connection = new WebSocket(hostUrl)\r\n            this._connection.onopen = this._onSocketOpen.bind(this);\r\n            this._connection.onmessage = this._onSocketMessage.bind(this);\r\n            this._connection.onerror = this._onSocketError.bind(this);\r\n            this._connection.onclose = this._onSocketClose.bind(this);\r\n        }\r\n        else {\r\n            this.term.write('Error: WebSocket Not Supported\\r\\n');\r\n        }\r\n    }\r\n\r\n    sendMessage(msg: any) {\r\n        this._sendClientData(msg)\r\n    }\r\n\r\n    connectionClose() {\r\n        if (this._connection) {\r\n            console.log('WebSocket closed', this._connection)\r\n            this._connection.close();\r\n        }\r\n    }\r\n\r\n    /*********************** 私有变量 **********************/\r\n    private _connection?: WebSocket\r\n    private _shouldConnectUrl?: string\r\n\r\n    private _onSocketOpen() {\r\n        this.term.write('连接已建立，正在等待数据...\\r\\n');\r\n        if (this.onOpen) {\r\n            YvEventDispatch(this.onOpen, this, undefined);\r\n        }\r\n        this._sendInitData({ operate: 'connect' });\r\n    }\r\n\r\n    private _onSocketMessage(msg: any) {\r\n        const data = msg.data.toString();\r\n        this.term.write(data);\r\n    }\r\n\r\n    private _onSocketClose() {\r\n        if (this._webix) {\r\n            this.term.write(\"\\r\\n连接已关闭\\r\\n\");\r\n            if (this.onClose) {\r\n                YvEventDispatch(this.onClose, this, undefined);\r\n            }\r\n        }\r\n        this._connection = undefined;\r\n    }\r\n\r\n    private _onSocketError() {\r\n        this.term.write(\"\\r\\n连接发生异常\\r\\n\");\r\n    }\r\n\r\n    private _sendInitData(options: any) {\r\n        if (!this._connection) {\r\n            console.error('_connection 没有初始化')\r\n            return;\r\n        }\r\n        //连接参数\r\n        this._connection.send(JSON.stringify(options));\r\n    }\r\n\r\n    private _resizeClientData(data: any) {\r\n        if (!this._connection) {\r\n            console.error('_connection 没有初始化')\r\n            return;\r\n        }\r\n        //发送指令\r\n        this._connection.send(JSON.stringify({ \"operate\": \"resize\", ...data }))\r\n    }\r\n\r\n    private _sendClientData(data: any) {\r\n        if (!this._connection) {\r\n            console.error('_connection 没有初始化')\r\n            return;\r\n        }\r\n        //发送指令\r\n        this._connection.send(JSON.stringify({ \"operate\": \"command\", \"command\": data }))\r\n    }\r\n}\r\n","import { CtlBase } from './CtlBase'\r\nimport { CtlConsoleLogDefault } from './CtlDefaultValue'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport webix from 'webix'\r\n\r\nwebix.protoUI(\r\n  {\r\n    name: 'xconsolelog',\r\n    defaults: {},\r\n    $init: function (config: any) {\r\n      this._domid = webix.uid();\r\n      this.$view.innerHTML = `<div id='${this._domid}' class=\"vc-log\"></div>`\r\n      this.$ready.push(this._ready)\r\n      _.extend(this.config, config)\r\n      if (config.on && typeof config.on.onInited === 'function') {\r\n        config.on.onInited.call(this)\r\n      }\r\n    },\r\n    _ready: function (this: any) {\r\n\r\n    },\r\n    _set_inner_size: function () {\r\n      if (!this._term || !this.$width) return\r\n\r\n      this._updateScrollSize()\r\n      // this._editor.scrollTo(0, 0) //force repaint, mandatory for IE\r\n    },\r\n    _updateScrollSize: function () {\r\n      var box = this._term.element;\r\n      var height = (this.$height || 0) + 'px'\r\n\r\n      box.style.height = height\r\n      box.style.width = (this.$width || 0) + 'px'\r\n    },\r\n    $setSize: function (x: any, y: any) {\r\n      if (webix.ui.view.prototype.$setSize.call(this, x, y)) {\r\n        this._set_inner_size()\r\n      }\r\n    }\r\n  },\r\n  webix.ui.view\r\n)\r\n\r\nexport class CtlConsoleLog extends CtlBase<CtlConsoleLog> {\r\n  static create(module: any, vjson: any): CtlConsoleLog {\r\n    const that = new CtlConsoleLog(vjson)\r\n    that._module = module\r\n\r\n    _.defaultsDeep(vjson, CtlConsoleLogDefault)\r\n\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, ['value'])\r\n\r\n    // 将 vjson 存至 _webixConfig\r\n    that._webixConfig = vjson\r\n\r\n    // 将 yvanProp 合并至当前 Ctl 对象, 期间会操作 _webixConfig\r\n    _.assign(that, yvanProp)\r\n\r\n    // 将 事件与 _webixConfig 一起存至 vjson 交给 webix 框架做渲染\r\n    _.merge(vjson, that._webixConfig, {\r\n      on: {\r\n        onInited(this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n          _.defer(() => {\r\n            $(this.$view).on('click', '.vc-fold', function (e) {\r\n              that.vcfoldclick(this)\r\n            })\r\n          })\r\n        },\r\n        onAfterDelete() {\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n    return that\r\n  }\r\n  /**\r\n   * @param logs 需要打印的json\r\n   */\r\n  public printLog(logs: any): void {\r\n    var logHtml = '<div class=\"vc-item\">';\r\n    if (!logs) {\r\n      logHtml += '<div><i class=\"vc-code-string\">undefined</i></div>';\r\n    } else {\r\n      logHtml += this.log2html(logs)\r\n    }\r\n    logHtml += \"</div>\"\r\n    this.renderDom(logHtml);\r\n  }\r\n\r\n  public renderDom(domHtml: string) {\r\n    // console.log(domHtml)\r\n    // var originDom;\r\n    // for (let index = 0; index < this._webix.$view.children.length; index++) {\r\n    //   const element = this._webix.$view.children[index];\r\n    //   if (element.classList.contains(\"vc-log\")) {\r\n    //     originDom = element;\r\n    //   }\r\n    // }\r\n    // var originHtml = originDom.innerHTML;\r\n    // var newHtml = originHtml + domHtml;\r\n    // originDom.innerHTML = newHtml;\r\n    // const that = this;\r\n    this._realHtml.push(domHtml);\r\n    this.realRender();\r\n  }\r\n\r\n  _realHtml = new Array<string>();\r\n\r\n  public realRender = _.debounce(() => {\r\n    $(this._webix.$view).find('.vc-log').append(this._realHtml.join(''));\r\n    this._realHtml = []\r\n  })\r\n\r\n  /**\r\n    * 递归生成html\r\n    */\r\n  public log2html(params: any): String {\r\n    if (this.isArray(params) || this.isObject(params)) {\r\n      return this.obj2html(params);\r\n    } else if (this.isNumber(params) || this.isBoolean(params)) {\r\n      return '<div><i class=\"vc-code-number\">' + params + '</i></div>'\r\n    } else {\r\n      return '<div><i class=\"vc-code-string\">\"' + params.toString() + '\"</i></div>'\r\n    }\r\n  }\r\n\r\n  public obj2html(params: any, title?: any): String {\r\n    var outer = '';\r\n    var json = this.JSONStringify(params);\r\n    var preview = json.substr(0, 36);\r\n    outer = this.getObjName(params);\r\n    if (json.length > 36) {\r\n      preview += '...';\r\n    }\r\n    outer += ' ' + preview;\r\n    var obj2htmlContent;\r\n    if (title) {\r\n      obj2htmlContent = '<div class=\"vc-fold\">\\\r\n      <div><i class=\"vc-code-key\">' +\r\n        title + '</i>:' +\r\n        '<i class=\"vc-fold-outer\">' +\r\n        outer +\r\n        '</i></div>\\\r\n      </div> \\\r\n      <div class=\"vc-fold-content vc-hidden\">';\r\n    } else {\r\n      obj2htmlContent = '<div class=\"vc-fold\">\\\r\n      <i class=\"vc-fold-outer\">' +\r\n        outer +\r\n        '</i> \\\r\n      </div> \\\r\n      <div class=\"vc-fold-content vc-hidden\">';\r\n    }\r\n    if (this.isObject(params)) {\r\n      var objKeys = this.getObjAllKeys(params);\r\n      for (var i = 0; i < objKeys.length; i++) {\r\n        var val = params[objKeys[i]];\r\n        if (this.isObject(val) || this.isArray(val)) {\r\n          obj2htmlContent += '<div>' + this.obj2html(val, objKeys[i]) + '</div>';\r\n        } else if (this.isNumber(val) || this.isBoolean(val)) {\r\n          obj2htmlContent += '<div><i class=\"vc-code-key\">' + objKeys[i] + '</i>: <i class=\"vc-code-number\">' + val + '</i></div>';\r\n        } else {\r\n          obj2htmlContent += '<div><i class=\"vc-code-key\">' + objKeys[i] + '</i>: <i class=\"vc-code-string\">\"' + val + '\"</i></div>';\r\n        }\r\n      }\r\n    } else if (this.isArray(params)) {\r\n      for (var i = 0; i < params.length; i++) {\r\n        obj2htmlContent += '<div>' + this.obj2html(params[i]) + '</div>';\r\n      }\r\n    }\r\n    obj2htmlContent += '</div>'\r\n    return obj2htmlContent;\r\n  }\r\n\r\n  /**\r\n   * div打开关闭\r\n   */\r\n  public vcfoldclick(params: any) {\r\n    var vcFoldElements = params.parentElement.children;\r\n    var vcFoldContent = vcFoldElements[vcFoldElements.length - 1];\r\n    if (vcFoldContent.classList.contains(\"vc-hidden\")) {\r\n      vcFoldContent.classList.remove(\"vc-hidden\");\r\n    } else {\r\n      vcFoldContent.classList.add(\"vc-hidden\");\r\n    }\r\n  }\r\n\r\n  /**\r\n * 搜索并打开div\r\n */\r\n  public searchText(inputValue: string) {\r\n    var items;\r\n    for (let index = 0; index < this._webix.$view.children.length; index++) {\r\n      const element = this._webix.$view.children[index];\r\n      if (element.classList.contains(\"vc-log\")) {\r\n        items = element;\r\n      }\r\n    }\r\n    this.removeSelected(items);\r\n    if (!inputValue) {\r\n      return;\r\n    }\r\n    this.itemContainsText(items, inputValue);\r\n  }\r\n\r\n  public itemContainsText(params: any, inputValue: any) {\r\n    for (var i = 0; i < params.children.length; i++) {\r\n      var item = params.children[i];\r\n      if (item.innerHTML.indexOf(inputValue) !== -1) {\r\n        if (item.classList.contains(\"vc-fold-content\")) {\r\n          item.classList.remove(\"vc-hidden\");\r\n        }\r\n        if (item.classList.contains(\"vc-code-key\") ||\r\n          item.classList.contains(\"vc-code-string\") ||\r\n          item.classList.contains(\"vc-code-number\") ||\r\n          item.classList.contains(\"vc-code-boolean\")) {\r\n          item.classList.add(\"vc-code-string-selected\");\r\n        }\r\n        this.itemContainsText(item, inputValue)\r\n      }\r\n    }\r\n  }\r\n\r\n  public removeSelected(params: any) {\r\n    for (var i = 0; i < params.children.length; i++) {\r\n      var item = params.children[i];\r\n      item.classList.remove(\"vc-code-string-selected\");\r\n      this.removeSelected(item)\r\n    }\r\n  }\r\n\r\n  /**\r\n * 全部清空\r\n */\r\n  public vcClearAll() {\r\n    var vcLog = $('#' + this._webix._domid)[0];\r\n    vcLog.innerHTML = '';\r\n  }\r\n\r\n  /**\r\n * 全部收起\r\n */\r\n  public vcCloseAll() {\r\n    var vcLog = $('#' + this._webix._domid)[0];\r\n    this.closeOrOpen(vcLog, false)\r\n  }\r\n\r\n  /**\r\n   * 全部展开\r\n   */\r\n  public vcOpenAll() {\r\n    var vcLog = $('#' + this._webix._domid)[0];\r\n    this.closeOrOpen(vcLog, true)\r\n\r\n    // var vvv = _.cloneDeepWith(vcLog, function customizer(value) {\r\n    //   if (_.isElement(value)) {\r\n    //     return value.cloneNode(true);\r\n    //   }\r\n    // });\r\n    // this.closeOrOpen(vvv, true);\r\n\r\n    // vcLog.innerHTML = vvv.innerHTML;\r\n  }\r\n\r\n  public closeOrOpen(items: any, isOpen: boolean) {\r\n    for (var i = 0; i < items.children.length; i++) {\r\n      var item = items.children[i];\r\n      if (item.classList.contains(\"vc-fold-content\")) {\r\n        if (isOpen) {\r\n          item.classList.remove(\"vc-hidden\");\r\n        } else {\r\n          item.classList.add(\"vc-hidden\");\r\n        }\r\n      }\r\n      this.closeOrOpen(item, isOpen)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * tools\r\n   */\r\n  public isNumber(value: any): boolean {\r\n    return Object.prototype.toString.call(value) == '[object Number]';\r\n  }\r\n\r\n  public isString(value: any): boolean {\r\n    return Object.prototype.toString.call(value) == '[object String]';\r\n  }\r\n\r\n  public isArray(value: any): boolean {\r\n    return Object.prototype.toString.call(value) == '[object Array]';\r\n  }\r\n\r\n  public isBoolean(value: any): boolean {\r\n    return Object.prototype.toString.call(value) == '[object Boolean]';\r\n  }\r\n\r\n\r\n  public isUndefined(value: any): boolean {\r\n    return value === undefined;\r\n  }\r\n\r\n  public isNull(value: any): boolean {\r\n    return value === null;\r\n  }\r\n\r\n  public isSymbol(value: any): boolean {\r\n    return Object.prototype.toString.call(value) == '[object Symbol]';\r\n  }\r\n\r\n  public isFunction(value: any): boolean {\r\n    return Object.prototype.toString.call(value) == '[object Function]';\r\n  }\r\n\r\n  public isObject(value: any): boolean {\r\n    return (\r\n      Object.prototype.toString.call(value) == '[object Object]' ||\r\n      // if it isn't a primitive value, then it is a common object\r\n      (\r\n        !this.isNumber(value) &&\r\n        !this.isString(value) &&\r\n        !this.isBoolean(value) &&\r\n        !this.isArray(value) &&\r\n        !this.isNull(value) &&\r\n        !this.isFunction(value) &&\r\n        !this.isUndefined(value) &&\r\n        !this.isSymbol(value)\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n * Simple JSON stringify, stringify top level key-value\r\n */\r\n  public JSONStringify(stringObject: any): any {\r\n    if (!this.isObject(stringObject) && !this.isArray(stringObject)) {\r\n      return JSON.stringify(stringObject);\r\n    }\r\n\r\n    let prefix = '{',\r\n      suffix = '}';\r\n    if (this.isArray(stringObject)) {\r\n      prefix = '[';\r\n      suffix = ']'\r\n    }\r\n    let str = prefix;\r\n    const keys = this.getObjAllKeys(stringObject);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      const value = stringObject[key];\r\n      try {\r\n        // key\r\n        if (!this.isArray(stringObject)) {\r\n          if (this.isObject(key) || this.isArray(key) || this.isSymbol(key)) {\r\n            str += Object.prototype.toString.call(key);\r\n          } else {\r\n            str += key;\r\n          }\r\n          str += ': ';\r\n        }\r\n\r\n        // value\r\n        if (this.isArray(value)) {\r\n          str += 'Array[' + value.length + ']';\r\n        } else if (this.isObject(value) || this.isSymbol(value) || this.isFunction(value)) {\r\n          str += Object.prototype.toString.call(value);\r\n        } else {\r\n          str += JSON.stringify(value);\r\n        }\r\n        if (i < keys.length - 1) {\r\n          str += ', ';\r\n        }\r\n      } catch (e) {\r\n        continue;\r\n      }\r\n    }\r\n    str += suffix;\r\n    return str;\r\n  }\r\n\r\n  /**\r\n * get an object's all keys ignore whether they are not enumerable\r\n */\r\n  public getObjAllKeys(obj: any): any {\r\n    if (!this.isObject(obj) && !this.isArray(obj)) {\r\n      return [];\r\n    }\r\n    if (this.isArray(obj)) {\r\n      const m: any[] = [];\r\n      obj.forEach((_: any, index: any) => {\r\n        m.push(index)\r\n      });\r\n      return m;\r\n    }\r\n    return Object.getOwnPropertyNames(obj).sort();\r\n  }\r\n\r\n  /**\r\n   * get an object's prototype name\r\n   */\r\n  public getObjName(obj: any): any {\r\n    return Object.prototype.toString.call(obj).replace('[object ', '').replace(']', '');\r\n  }\r\n}\r\n","/* eslint-disable */\r\nimport Vue from 'vue'\r\nimport { BaseModule, BizWatch, VJson } from './YvanUIModule'\r\nimport { CtlTree } from './CtlTree'\r\nimport { CtlTreeTable } from './CtlTreeTable'\r\nimport { CtlTab } from './CtlTab'\r\nimport { CtlDataview } from './CtlDataview'\r\n// import { CtlECharts } from './CtlECharts'\r\nimport { CtlButton } from './CtlButton'\r\nimport { CtlText } from './form/input/CtlText'\r\nimport { CtlCheckBox } from './form/other/CtlCheckBox'\r\nimport { CtlCombo } from './form/select/CtlCombo'\r\nimport { CtlDatePicker } from './form/input/CtlDatePicker'\r\nimport { CtlDateRangePicker } from './form/input/CtlDateRangePicker'\r\nimport { CtlForm } from './form/CtlForm'\r\nimport { CtlMultiCombo } from './form/select/CtlMultiCombo'\r\nimport { CtlSearch } from './form/input/CtlSearch'\r\nimport { CtlCarousel } from './CtlCarousel'\r\nimport { CtlGrid } from './CtlGrid'\r\nimport { CtlSwitch } from './form/other/CtlSwitch'\r\nimport { CtlNumber } from './form/input/CtlNumber'\r\nimport { CtlRadio } from './form/other/CtlRadio'\r\nimport { CtlCodeMirror } from './CtlCodeMirror'\r\nimport { CtlSidebar } from './CtlSidebar'\r\nimport { CtlXterm } from './CtlXterm'\r\nimport { CtlConsoleLog } from './CtlConsoleLog'\r\nimport webix from 'webix'\r\n\r\n// export const webix = require(\"../webix/webix\");\r\nwebix.i18n.setLocale('zh-CN')\r\n_.set(window, 'webix', webix);\r\n\r\n/**\r\n * 深度遍历 vjson\r\n * @param vjson 视图JSON\r\n * @param resolver 分析函数\r\n * @return 记录 resolver 方法返回 true 时，对象的访问路径\r\n */\r\nexport function deepTravVJson(vjson: VJson, resolver: (child: VJson) => any): Array<PathMarker> {\r\n  const markerList: Array<PathMarker> = []\r\n  deepTrav1(vjson, resolver, markerList)\r\n  return markerList\r\n}\r\n\r\n/**\r\n * 深度遍历 vjson 后，所有 mark 对象及访问方法\r\n */\r\nexport interface PathMarker {\r\n  id: number\r\n  keyName: string\r\n  object: any\r\n}\r\n\r\nfunction deepTrav1(obj: VJson, resolver: (child: VJson) => any, marker?: Array<PathMarker>) {\r\n  let isMarker = resolver(obj)\r\n  if (marker && isMarker === true) {\r\n    marker.unshift({ id: 0, keyName: '', object: obj })\r\n  }\r\n\r\n  _.forOwn(obj, (value, key) => {\r\n    if (typeof value !== 'object') {\r\n      return\r\n    }\r\n    if (_.has(obj, 'view') && obj.view === 'toolbar') {\r\n      if (key === 'dataSource' || key === 'suggest' || key === 'options') {\r\n        return\r\n      }\r\n    } else {\r\n      // 模型、数据、数据源不扫描\r\n      if (\r\n        key === 'data' ||\r\n        key === 'dataSource' ||\r\n        key === 'suggest' ||\r\n        key === 'options'\r\n      ) {\r\n        return\r\n      }\r\n    }\r\n\r\n    //事件不扫描\r\n    if (key === 'on' && _.isObject(value)) {\r\n      return\r\n    }\r\n    if (_.startsWith(key, 'on') && _.size(key) > 2) {\r\n      return\r\n    }\r\n    const isMarkerChild = deepTrav1(value, resolver, marker)\r\n    if (marker && isMarkerChild === true) {\r\n      isMarker = true\r\n      marker.unshift({ id: obj.id, keyName: key, object: value })\r\n    }\r\n  })\r\n\r\n  // 删除作废对象\r\n  _.remove(obj, (v: any) => v && v.isFiltered);\r\n\r\n  return isMarker\r\n}\r\n\r\n/**\r\n * 根据 vjson 中的 ctlName, 合并属性\r\n * @param vjson 原始 vjson 视图\r\n * @param ctlOption 要被扩展的 ctlName 属性对\r\n */\r\nexport function viewExtend(vjson: VJson, ctlOption: any): VJson {\r\n  // 收集所有 ctlName 属性，放到收集器的 collector.ctls\r\n  // 收集所有 entityName 属性，放到收集器的 collector.entity\r\n  const collector = {\r\n    ctls: {}\r\n  }\r\n\r\n  deepTravVJson(vjson, obj => {\r\n    if (obj.ctlName) {\r\n      _.set(collector.ctls, obj.ctlName, obj)\r\n    }\r\n  })\r\n\r\n  _.forOwn(ctlOption, (extendVJson, ctlName) => {\r\n    if (_.has(collector.ctls, ctlName)) {\r\n      _.merge(_.get(collector.ctls, ctlName), extendVJson)\r\n    }\r\n  })\r\n\r\n  return vjson\r\n}\r\n\r\nconst $internalHooks = ['data', 'destory', 'watches', 'computed']\r\n\r\n/**\r\n * 收集成员变量\r\n */\r\nfunction collectDataFromConstructor(vm: Vue, Component: any) {\r\n  // override _init to prevent to init as Vue instance\r\n  const originalInit = Component.prototype._init\r\n  Component.prototype._init = function (this: Vue) {\r\n    // proxy to actual vm\r\n    const keys = Object.getOwnPropertyNames(vm)\r\n    // 2.2.0 compat (props are no longer exposed as self properties)\r\n    if (vm.$options.props) {\r\n      for (const key in vm.$options.props) {\r\n        if (!vm.hasOwnProperty(key)) {\r\n          keys.push(key)\r\n        }\r\n      }\r\n    }\r\n    keys.forEach(key => {\r\n      if (key.charAt(0) !== '_') {\r\n        Object.defineProperty(this, key, {\r\n          get: () => _.get(vm, key),\r\n          set: value => {\r\n            _.set(vm, key, value)\r\n          },\r\n          configurable: true\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  // should be acquired class property values\r\n  const data = new Component()\r\n\r\n  // restore original _init to avoid memory leak (#209)\r\n  Component.prototype._init = originalInit\r\n\r\n  // create plain data object\r\n  const plainData = {}\r\n  Object.keys(data).forEach(key => {\r\n    if (data[key] !== undefined) {\r\n      _.set(plainData, key, data[key])\r\n    }\r\n  })\r\n\r\n  return plainData\r\n}\r\n\r\n/**\r\n * 收集成员方法\r\n */\r\nfunction collectMethods(proto: any, options: any) {\r\n  Object.getOwnPropertyNames(proto).forEach(key => {\r\n    // 如果是constructor，则不处理。\r\n    if (key === 'constructor') {\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 viewExtend 方法\r\n    if (key === 'viewExtend') {\r\n      // options.viewExtends.push(proto[key]);\r\n      console.error(\r\n        '不支持使用 viewExtend, 请考虑使用 YvanUI.viewExtend(super.viewResolver(),{})'\r\n      )\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 viewIntercept 方法\r\n    if (key === 'viewIntercept') {\r\n      // options.viewIntercepts.push(proto[key]);\r\n      console.error('不支持使用 viewIntercept, 请考虑使用 super.viewResolver()')\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 onLoad 方法\r\n    if (key === 'onLoad') {\r\n      options.onLoads.push(proto[key])\r\n      return\r\n    }\r\n\r\n    // 记录下每级的 onShow 方法\r\n    if (key === 'onShow') {\r\n      options.onShows.push(proto[key])\r\n    }\r\n\r\n    // 如果原型属性(方法)名是vue生命周期钩子名，则直接作为钩子函数挂载在options最外层\r\n    if ($internalHooks.indexOf(key) > -1) {\r\n      options[key] = proto[key]\r\n      return\r\n    }\r\n\r\n    // 先获取到原型属性的descriptor。\r\n    // 在前文已提及，计算属性其实也是挂载在原型上的，所以需要对descriptor进行判断\r\n    const descriptor = Object.getOwnPropertyDescriptor(proto, key)!\r\n    if (descriptor.value !== void 0) {\r\n      // 如果属性值是一个function，则认为这是一个方法，挂载在methods下\r\n      if (typeof descriptor.value === 'function') {\r\n        if (!_.has(options.methods, key)) {\r\n          options.methods[key] = descriptor.value\r\n        }\r\n      } else {\r\n        // 如果不是，则认为是一个普通的data属性。\r\n        // 但是这是原型上，所以更类似mixins，因此挂在mixins下。\r\n        options.mixins.push({\r\n          data(this: Vue) {\r\n            return { [key]: descriptor.value }\r\n          }\r\n        })\r\n      }\r\n    } else if (descriptor.get || descriptor.set) {\r\n      // 如果value是undefined(ps：void 0 === undefined)。\r\n      // 且描述符具有get或者set方法，则认为是计算属性。不理解的参考我上面关于class转换成构造函数的例子\r\n      // 这里可能和普通的计算属性不太一样，因为一般计算属性只是用来获取值的，但这里却有setter。\r\n      // 不过如果不使用setter，与非class方式开发无异，但有这一步处理，在某些场景会有特效。\r\n      ; (options.computed || (options.computed = {}))[key] = {\r\n        get: descriptor.get,\r\n        set: descriptor.set\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 基础混入器\r\n */\r\nfunction createCommonMix<M, Refs, INP>() {\r\n  return {}\r\n}\r\n\r\n/**\r\n * 判断组件是否被删除后，是否需要预占宽度\r\n */\r\nfunction cmpNeedOccupied(code: any) {\r\n  switch (code.view) {\r\n    case 'text':\r\n    case 'combo':\r\n    case 'date':\r\n    case 'datetime':\r\n    case 'datepicker':\r\n    // case 'button': // button 按钮直接删除即可，不需要预占宽度\r\n    case 'checkbox':\r\n    case 'label':\r\n      return true;\r\n  }\r\n\r\n  // 高度和宽度可变的组件，不需要预占任何宽度\r\n  return false;\r\n}\r\n\r\n/**\r\n * 根据 vjson 格式，嵌入 yvan 组件, 生成能够为 webix 使用的 vjson\r\n */\r\nexport function wrapperWebixConfig<M, Refs, INP>(module: BaseModule<M, Refs, INP>, vjson: VJson) {\r\n  // 形成最终的 viewResolver 方法\r\n  deepTravVJson(vjson, obj => {\r\n\r\n    // 检查组件是否被过滤(不渲染)\r\n    let isFiltered = false;\r\n    const componentRenderFilter: Function = _.get(window, 'YvanUI.componentRenderFilter');\r\n    if (componentRenderFilter && componentRenderFilter(obj) === false) {\r\n      isFiltered = true;\r\n    }\r\n\r\n    if (isFiltered) {\r\n      // 组件不需要渲染\r\n      if (_.has(obj, 'hiddenPlaceholder')) {\r\n        // 如果有 hiddenPlaceholder 属性，最优先使用 hiddenPlaceholder, 替换现有的 vjson\r\n        const ph = obj.hiddenPlaceholder;\r\n        _.forOwn(obj, (v, k) => delete obj[k]);\r\n        _.assign(obj, ph);\r\n\r\n      } else if (cmpNeedOccupied(obj)) {\r\n        // 需要预占宽度的组件，变成 template\r\n        _.forOwn(obj, (v, k) => {\r\n          if (k !== 'height' && k !== 'width') {\r\n            delete obj[k]\r\n          }\r\n        });\r\n        obj.view = \"template\";\r\n        obj.borderless = true;\r\n        obj.template = \"\";\r\n\r\n      } else {\r\n        // 其他情况，直接告知外循环，删除本对象\r\n        obj.isFiltered = true;\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (obj.view === 'iframe') {\r\n      return\r\n    }\r\n\r\n    // if (module && _.has(obj, 'id')) {\r\n    //   if (obj.id !== 'MainWindowFirstPage') {\r\n    //     console.error('禁用 ID 属性', obj)\r\n    //   }\r\n    // }\r\n\r\n    if (typeof obj.placeId === 'string') {\r\n      obj.id = module.instanceId + '$' + obj.placeId\r\n    }\r\n\r\n    if (typeof obj.view === 'string') {\r\n      switch (obj.view) {\r\n        case 'button':\r\n          CtlButton.create(module, obj);\r\n          break\r\n\r\n        case 'text':\r\n          CtlText.create(module, obj);\r\n          break\r\n\r\n        case 'number':\r\n        case 'counter':\r\n          CtlNumber.create(module, obj);\r\n          break\r\n\r\n        case 'datepicker':\r\n        case 'date':\r\n        case 'datetime':\r\n          CtlDatePicker.create(module, obj);\r\n          break\r\n\r\n        case 'codemirror-editor':\r\n          CtlCodeMirror.create(module, obj);\r\n          break\r\n\r\n        case 'dataview':\r\n          CtlDataview.create(module, obj);\r\n          break\r\n\r\n        case 'xterm':\r\n          CtlXterm.create(module, obj);\r\n          break\r\n\r\n        case 'xconsolelog':\r\n          CtlConsoleLog.create(module, obj);\r\n          break\r\n\r\n        // case 'echarts':\r\n        //   CtlECharts.create(module, obj);\r\n        //   break\r\n\r\n        case 'sidebar':\r\n          CtlSidebar.create(module, obj);\r\n          break\r\n\r\n        case 'daterangepicker':\r\n        case 'daterange':\r\n        case 'datetimerange':\r\n          CtlDateRangePicker.create(module, obj);\r\n          break\r\n\r\n        case 'combo':\r\n        case 'combobox':\r\n          CtlCombo.create(module, obj);\r\n          break\r\n\r\n        case 'multicombo':\r\n          CtlMultiCombo.create(module, obj);\r\n          break\r\n\r\n        case 'search':\r\n        case 'searchbox':\r\n          CtlSearch.create(module, obj);\r\n          break\r\n\r\n        case 'check':\r\n        case 'checkbox':\r\n          CtlCheckBox.create(module, obj);\r\n          break\r\n\r\n        case 'switch':\r\n        case 'switchbox':\r\n          CtlSwitch.create(module, obj);\r\n          break\r\n\r\n        case 'radio':\r\n        case 'radiobox':\r\n          CtlRadio.create(module, obj);\r\n          break\r\n\r\n        case 'tree':\r\n          CtlTree.create(module, obj);\r\n          break\r\n\r\n        case 'treetable':\r\n          CtlTreeTable.create(module, obj);\r\n          break\r\n\r\n        case 'tabview':\r\n          CtlTab.create(module, obj);\r\n          break\r\n\r\n        case 'grid':\r\n          CtlGrid.create(module, obj);\r\n          break\r\n\r\n        case 'form':\r\n          CtlForm.create(module, obj);\r\n          break\r\n\r\n        case 'carousel':\r\n          CtlCarousel.create(module, obj);\r\n          break\r\n      }\r\n    }\r\n  })\r\n\r\n  if (module) {\r\n    vjson.$scope = module\r\n  }\r\n}\r\n\r\n/**\r\n * 将传统 ts Class 转换为 vue 对象.\r\n * 普通模块对象和 dialog 对象都要经过转换\r\n */\r\nexport function componentFactory<M, Refs, INP>(Component: BaseModule<M, Refs, INP> & any, options: any = {}): any {\r\n  //return VueComponent<BaseModule<M, Refs, INP>>(options)\r\n  if (!options.mixins) {\r\n    options.mixins = []\r\n  }\r\n\r\n  if (!options.methods) {\r\n    options.methods = {}\r\n  }\r\n\r\n  if (!options.viewExtends) {\r\n    options.viewExtends = []\r\n  }\r\n\r\n  if (!options.viewIntercepts) {\r\n    options.viewIntercepts = []\r\n  }\r\n\r\n  if (!options.onLoads) {\r\n    options.onLoads = []\r\n  }\r\n\r\n  if (!options.onShows) {\r\n    options.onShows = []\r\n  }\r\n\r\n  // 获取构造函数原型，这个原型上挂在了该类的method\r\n  for (\r\n    let proto = Component.prototype;\r\n    proto.constructor !== Vue;\r\n    proto = Object.getPrototypeOf(proto)\r\n  ) {\r\n    // 一直向上收集, 直到 Object 级\r\n    collectMethods(proto, options)\r\n  }\r\n\r\n  // 添加公共基础 MIX\r\n  options.mixins.push(createCommonMix<M, Refs, INP>())\r\n\r\n  // 解析 @Watch 装饰器方法，执行 watch\r\n  const watches = Component.prototype.watches\r\n  delete Component.prototype.watches\r\n\r\n  // 实例化Component构造函数，并收集其自身的(非原型上的)属性导出\r\n  options.mixins.push({\r\n    data(this: Vue) {\r\n      const data: any = {\r\n        refs: {},\r\n        dialog: undefined,\r\n        inParamter: undefined,\r\n        dialogParent: undefined,\r\n        instanceId: _.uniqueId('_mins_id_'),\r\n        loadFinished: false,\r\n        ...collectDataFromConstructor(this, Component)\r\n      }\r\n      return data\r\n    },\r\n    created(this: Vue & any) {\r\n      if (_.isArray(watches)) {\r\n        _.each(watches, (item: BizWatch) => {\r\n          this.$watch(item.expr, item.handler, {\r\n            deep: item.deep,\r\n            immediate: item.immediate\r\n          })\r\n          //console.log('$watch', item.expr, item.handler, { deep: item.deep, immediate: item.immediate })\r\n        })\r\n      }\r\n    },\r\n    destroyed() { },\r\n    methods: {\r\n      onLoad(this: Vue) {\r\n        _.each(options.onLoads, load => {\r\n          load.call(this)\r\n        })\r\n      },\r\n      onShow(this: Vue) {\r\n        _.each(options.onShows, load => {\r\n          load.call(this)\r\n        })\r\n      },\r\n      buildView<M, Refs, INP>(this: Vue & BaseModule<M, Refs, INP>) {\r\n        // 获取到 viewResolver 方法，拿到最原始的 vjson\r\n        const vjson: VJson = this.viewResolver()\r\n\r\n        // 与 yvan 组件进行交换，使 vjson 能被 webix 使用\r\n        wrapperWebixConfig(this, vjson)\r\n        return vjson\r\n      },\r\n      closeDialog(this: Vue & any) {\r\n        this.dialog.close()\r\n      },\r\n      setInParamter(this: Vue & BaseModule<M, Refs, INP> & any, inParamter: INP) {\r\n        this.inParamter = inParamter\r\n      },\r\n      showDialog(this: Vue & BaseModule<M, Refs, INP> & any, inParamter: INP, container: any, isFromSearchBox: boolean = false): void {\r\n        // 显示对话框\r\n        const module: any = this\r\n        module.inParamter = inParamter\r\n        module.dialogParent = container\r\n\r\n        // 获取到 viewResolver 方法，拿到最原始的 vjson\r\n        const vjson: any = module.viewResolver()\r\n        if (!_.has(vjson, 'body')) {\r\n          vjson.body = {\r\n            template: 'dialog 没有 body'\r\n          }\r\n        } else {\r\n          if (!_.has(vjson.body, 'padding')) {\r\n            vjson.body.padding = 10\r\n          }\r\n        }\r\n        // 与 yvan 组件进行交换，使 vjson 能被 webix 使用\r\n        wrapperWebixConfig(module, vjson.body)\r\n        // 构建 window\r\n        _.merge(vjson, {\r\n          view: 'window',\r\n          close: vjson.close === undefined ? true : vjson.close,\r\n          move: vjson.move === undefined ? true : vjson.move,\r\n          modal: vjson.modal === undefined ? true : vjson.modal,\r\n          position: 'center',\r\n          resize: vjson.resize === undefined ? true : vjson.resize,\r\n          head: {\r\n            view: \"toolbar\", margin: -4, cols: [\r\n              {\r\n                view: \"label\", label: vjson.title, css: 'webix_header webix_win_title',\r\n                on: {\r\n                  onAfterRender() {\r\n                    module._titleLabel = this;\r\n                  }\r\n                }\r\n              },\r\n              {\r\n                view: \"icon\", icon: \"fa fa-window-maximize\", click: function (this: any) {\r\n                  dialog.config.fullscreen = !dialog.config.fullscreen;\r\n                  if (dialog.config.fullscreen) {\r\n                    dialog.config.oldtop = dialog.config.top;\r\n                    dialog.config.oldleft = dialog.config.left;\r\n                    dialog.config.left = 0;\r\n                    dialog.config.top = 0;\r\n                    this.define({ icon: 'fa fa-window-restore' });\r\n                  } else {\r\n                    dialog.config.top = dialog.config.oldtop;\r\n                    dialog.config.left = dialog.config.oldleft;\r\n                    this.define({ icon: 'fa fa-window-maximize' });\r\n                  }\r\n                  dialog.resize();\r\n                  this.refresh();\r\n                }\r\n              },\r\n              {\r\n                view: \"icon\", icon: \"fa fa-times\", title: '关闭', tooltip: '关闭', click: function () {\r\n                  dialog.close();\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          on: {\r\n            onShow() {\r\n              module.onLoad()\r\n              module.loadFinished = true\r\n            },\r\n            onDestruct() {\r\n              module.onClose()\r\n            }\r\n          },\r\n        })\r\n        const dialog: any = webix.ui(vjson)\r\n        module._webixId = this.dialog = dialog\r\n        this.dialog.show();\r\n\r\n        $(this.dialog.$view).keypress((event) => {\r\n          if (event.keyCode === 27) {\r\n            module.onEsc()\r\n            event.stopPropagation()\r\n            event.preventDefault()\r\n            return;\r\n          }\r\n          if (event.keyCode === 13) {\r\n            module.onEnter()\r\n            if (isFromSearchBox) {\r\n              event.stopPropagation()\r\n            }\r\n            event.preventDefault()\r\n            return;\r\n          }\r\n        })\r\n      }\r\n    }\r\n  })\r\n\r\n  // 通过 vue.extend 生成一个 vue 类型的功能模块对象\r\n  const VueModule: any = Vue.extend(options)\r\n  return VueModule\r\n}\r\n\r\n/**\r\n * 在目标 DOM 选择器上渲染模块\r\n */\r\nexport function render<M, Refs, INP>(selector: string, baseModule: BaseModule<M, Refs, INP>) {\r\n  const lastHandle = _.get(window, 'LastRenderHandler')\r\n  if (lastHandle) {\r\n    lastHandle.destructor()\r\n    _.set(window, 'LastRenderHandler', null)\r\n  }\r\n\r\n  const cfg = (baseModule as any).buildView()\r\n  cfg.container = selector\r\n  baseModule._webixId = webix.ui(cfg)\r\n  baseModule.onLoad()\r\n\r\n  webix.event(<any>window, 'resize', () => {\r\n    // $$(baseModule._webixId).resize();\r\n    baseModule._webixId.resize()\r\n  })\r\n\r\n  _.set(window, 'LastRenderHandler', baseModule._webixId)\r\n  return baseModule._webixId\r\n}\r\n\r\n/**\r\n * 在占位空间 spaceId 上渲染 vjson\r\n * @param module 当前模块\r\n * @param spaceId 占位空间\r\n * @param vjson 界面描述\r\n */\r\nexport function renderPlace<M, Refs, INP>(\r\n  module: BaseModule<M, Refs, INP>,\r\n  spaceId: string,\r\n  vjson: VJson\r\n) {\r\n  wrapperWebixConfig(module, vjson)\r\n  webix.ui(vjson, webix.$$(module.instanceId + '$' + spaceId))\r\n}\r\n","import axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport Qs from 'qs'\r\n\r\nexport namespace Ajax {\r\n\r\n    export interface CreateAjaxOption {\r\n        baseUrl: string\r\n    }\r\n\r\n    export type MethodType = 'POST' | 'GET' | 'POST-JSON' | 'UPLOADEXCEL' | 'DOWNLOAD' | 'POST-FILE'\r\n\r\n    /**\r\n     * 请求参数\r\n     */\r\n    export interface Option {\r\n        /**\r\n         * url 地址\r\n         */\r\n        url: string,\r\n\r\n        /**\r\n         * 下载文件名\r\n         */\r\n        fileName?: string,\r\n\r\n        /**\r\n         * 请求方法\r\n         */\r\n        method: MethodType,\r\n\r\n        /**\r\n         * 上传文件（如果需要的话）\r\n         */\r\n        file?: any,\r\n\r\n        /**\r\n         * 请求参数\r\n         */\r\n        data?: any,\r\n\r\n        /**\r\n         * 请求头\r\n         */\r\n        headers?: any\r\n\r\n        /**\r\n         * 是否只传送 responseData\r\n         */\r\n        disableResponseData?: boolean\r\n    }\r\n\r\n    /**\r\n     * 数据响应\r\n     */\r\n    export interface Response<T> {\r\n        success: boolean\r\n        msg: string\r\n        data: T\r\n    }\r\n\r\n    export type Function = (option: Option) => Promise<Ajax.Response<any>>\r\n}\r\n\r\nexport function downLoad(downLoadUrl: string, filename: string, data: any, header: any) {\r\n    const YvanUI: any = _.get(window, 'YvanUI');\r\n    YvanUI.loading();\r\n    const createObjectURL = (object: any) => {\r\n        return (window.URL) ? window.URL.createObjectURL(object) : _.get(window, 'webkitURL').createObjectURL(object)\r\n    };\r\n\r\n    // const formData = new FormData();\r\n    // _.forOwn(data, (v, k) => {\r\n    //     formData.append(k, v);\r\n    // });\r\n    const formData = data ? Qs.stringify(data) : '';\r\n\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('POST', downLoadUrl);\r\n    xhr.responseType = 'blob';\r\n    //xhr.setRequestHeader('Authorization', $.cookie('auth'))\r\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n    if (header) {\r\n        _.forOwn(header, (v, k) => {\r\n            xhr.setRequestHeader(k, v);\r\n        })\r\n    }\r\n    xhr.onload = function (e: any) {\r\n        if (this.status === 200) {\r\n            const blob = this.response;\r\n            if (_.hasIn(window, 'navigator.msSaveOrOpenBlob')) {\r\n                navigator.msSaveBlob(blob, filename)\r\n                YvanUI.clearLoading();\r\n\r\n            } else {\r\n                const a = document.createElement('a');\r\n                const url = createObjectURL(blob);\r\n                a.href = url;\r\n                a.download = filename;\r\n                $('body').append(a);\r\n                a.click();\r\n                $(a).remove();\r\n                window.URL.revokeObjectURL(url)\r\n                YvanUI.clearLoading();\r\n            }\r\n        }\r\n    };\r\n    xhr.send(formData);\r\n}\r\n\r\n/**\r\n * 创建一个 Ajax 客户端\r\n */\r\nexport function createAjax(createOption: Ajax.CreateAjaxOption): Ajax.Function {\r\n\r\n    if (createOption.baseUrl) {\r\n        axios.defaults.baseURL = createOption.baseUrl;\r\n    }\r\n\r\n    return function (option: Ajax.Option) {\r\n\r\n        const ax: AxiosRequestConfig = {\r\n            url: option.url\r\n        };\r\n\r\n        if (option.method === 'DOWNLOAD') {\r\n            downLoad(createOption.baseUrl + option.url, option.fileName || 'file',\r\n                option.data, option.headers);\r\n            return new Promise<Ajax.Response<any>>((resolver, reject) => {\r\n            });\r\n        }\r\n\r\n        if (option.method === 'POST-JSON') {\r\n            ax.method = 'POST';\r\n            ax.headers = {\r\n                'Content-Type': 'application/json',\r\n                ...option.headers\r\n            };\r\n            ax.data = JSON.stringify(option.data)\r\n\r\n        } else if (option.method === 'POST-FILE') {\r\n            //TODO 刘壮. 上传文件\r\n            var forms = new FormData();\r\n            ax.headers = {\r\n                'Content-Type': 'multipart/form-data',\r\n                ...option.headers\r\n            };\r\n            _.forOwn(option.data, (value, key) => {\r\n                if (key === 'files') {\r\n                    let i = 0;\r\n                    _.each(value, f => {\r\n                        forms.append('file' + (++i), f)\r\n                    })\r\n                } else {\r\n                    forms.append(key, value)\r\n                }\r\n            });\r\n            ax.data = forms;\r\n            ax.method = 'POST'\r\n        } else if (option.method === 'POST') {\r\n            ax.method = 'POST';\r\n            ax.headers = {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n                ...option.headers\r\n            };\r\n            ax.data = Qs.stringify(option.data)\r\n\r\n        } else if (option.method === 'GET') {\r\n            ax.method = 'GET';\r\n            ax.params = option.data\r\n            ax.headers = {\r\n                ...option.headers\r\n            }\r\n\r\n        } else {\r\n            throw new Error('not implements')\r\n        }\r\n\r\n        return new Promise<Ajax.Response<any>>((resolver, reject) => {\r\n            axios(ax).then((resolverRaw: AxiosResponse<any>) => {\r\n                resolver(resolverRaw.data)\r\n\r\n            }).catch((reason: any) => {\r\n                reject(reason)\r\n            })\r\n        })\r\n    }\r\n}\r\n","import { Ajax } from './YvanUIAjax';\r\n\r\nexport namespace Db {\r\n\r\n    export interface CreateDbOption {\r\n        baseUrl: string,\r\n        defaultDb: string,\r\n        ajax: Ajax.Function\r\n    }\r\n\r\n    export interface CompileOption {\r\n        sqlId: string\r\n    }\r\n\r\n    export interface ExecuteOption extends CompileOption {\r\n        params?: any\r\n    }\r\n\r\n    export interface QueryOption extends ExecuteOption {\r\n        limit?: number\r\n        limitOffset?: number\r\n        needCount?: boolean\r\n        filterModel?: any\r\n        sortModel?: any\r\n    }\r\n\r\n    export interface Response extends Ajax.Response<any> {\r\n\r\n        /**\r\n         * 输出后台运行的实际 SQL (DEBUG 模式才会存在)\r\n         */\r\n        sql: string\r\n\r\n        /**\r\n         * 输出后台运行的实际 SQL参数 (DEBUG 模式才会存在)\r\n         */\r\n        params: any[]\r\n\r\n        pagination: {\r\n            /**\r\n             * 总行数\r\n             */\r\n            total?: number\r\n\r\n            /**\r\n             * 页大小\r\n             */\r\n            size?: number\r\n\r\n            /**\r\n             * 当前页\r\n             */\r\n            current?: number\r\n        }\r\n    }\r\n\r\n    export class Client {\r\n        private baseUrl: string;\r\n        private ajax: Ajax.Function;\r\n        private defaultDb: string;\r\n\r\n        constructor(createOption: Db.CreateDbOption) {\r\n            this.baseUrl = createOption.baseUrl\r\n            this.ajax = createOption.ajax\r\n            this.defaultDb = createOption.defaultDb\r\n        }\r\n\r\n        execute(option: Db.ExecuteOption): Promise<Db.Response> {\r\n            return new Promise(((resolve, reject) => {\r\n                const sqlTimeId = _.uniqueId('SQL')\r\n                console.time(sqlTimeId)\r\n\r\n                this.ajax({\r\n                    url: this.baseUrl + '/execute',\r\n                    method: 'POST-JSON',\r\n                    data: {\r\n                        db: this.defaultDb,\r\n                        sqlId: option.sqlId,\r\n                        params: option.params\r\n                    }\r\n\r\n                }).then((root) => {\r\n                    if (root && root.success) {\r\n                        const { sql, params: resParams, data } = root.data\r\n                        if (sql) {\r\n                            console.log('SQL-execute', { sql, resParams })\r\n                        }\r\n                        resolve(data)\r\n                        return\r\n                    }\r\n                    reject(root.msg)\r\n\r\n                }).catch((err) => {\r\n                    reject(err)\r\n\r\n                }).finally(() => {\r\n                    console.timeEnd(sqlTimeId)\r\n                })\r\n\r\n            }))\r\n        }\r\n\r\n        query(option: Db.QueryOption): Promise<Db.Response> {\r\n            return new Promise(((resolve, reject) => {\r\n                const sqlTimeId = _.uniqueId('SQL')\r\n                console.time(sqlTimeId)\r\n\r\n                this.ajax({\r\n                    url: this.baseUrl + '/query',\r\n                    method: 'POST-JSON',\r\n                    data: {\r\n                        db: this.defaultDb,\r\n                        filterModel: option.filterModel,\r\n                        sortModel: option.sortModel,\r\n                        limit: option.limit,\r\n                        limitOffset: option.limitOffset,\r\n                        needCount: option.needCount,\r\n                        sqlId: option.sqlId,\r\n                        params: option.params,\r\n                    }\r\n\r\n                }).then((root) => {\r\n                    if (root && root.success) {\r\n                        const { sql, params: resParams, data } = root.data\r\n                        if (sql) {\r\n                            console.log('SQL-query', { sql, resParams })\r\n                        }\r\n                        resolve(root.data)\r\n                        return\r\n                    }\r\n                    reject(root.msg)\r\n\r\n                }).catch((err) => {\r\n                    reject(err)\r\n\r\n                }).finally(() => {\r\n                    console.timeEnd(sqlTimeId)\r\n                })\r\n            }))\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 创建一个 db 客户端\r\n */\r\nexport function createDb(createOption: Db.CreateDbOption): Db.Client {\r\n    return new Db.Client(createOption)\r\n}\r\n","/**\r\n * 获取页面 URL 问号之后的参数\r\n */\r\nexport function getQueryString(): any {\r\n    const url = document.location.search;\r\n    const theRequest: any = {};\r\n    if (url.indexOf(\"?\") >= 0) {\r\n        let str = url.substr(1);\r\n        const strs = str.split(\"&\");\r\n        for (var i = 0; i < strs.length; i++) {\r\n            const vs = strs[i].split(\"=\");\r\n            theRequest[vs[0]] = unescape(vs[1]);\r\n        }\r\n    }\r\n    return theRequest;\r\n}\r\n\r\n/**\r\n * 统一吧下划线（字符串/对象/数组）变成驼峰命名\r\n */\r\nexport function camelCase(obj: any): any {\r\n    if (typeof obj === 'string') {\r\n        return _.camelCase(obj)\r\n    }\r\n    if (_.isArray(obj)) {\r\n        return _.map(obj, (item) => {\r\n            return camelCase(item)\r\n        })\r\n    }\r\n    if (typeof obj === 'object') {\r\n        const ret: any = {}\r\n        _.forOwn(obj, (value, key) => {\r\n            ret[_.camelCase(key)] = value\r\n        })\r\n        return ret\r\n    }\r\n    console.error('无法转换' + obj)\r\n}\r\n\r\n/**\r\n * 统一吧驼峰（字符串/对象/数组）变成下划线\r\n */\r\nexport function snakeCase(obj: any): any {\r\n    if (typeof obj === 'string') {\r\n        return _.snakeCase(obj)\r\n    }\r\n    if (_.isArray(obj)) {\r\n        return _.map(obj, (item) => {\r\n            return snakeCase(item)\r\n        })\r\n    }\r\n    if (typeof obj === 'object') {\r\n        const ret: any = {}\r\n        _.forOwn(obj, (value, key) => {\r\n            ret[_.snakeCase(key)] = value\r\n        })\r\n        return ret\r\n    }\r\n    console.error('无法转换' + obj)\r\n}\r\n\r\n\r\n/**\r\n * 将任意 planObject 对象，转换为 hash 描述\r\n */\r\nexport function param(obj: any): string {\r\n    return $.param(obj)\r\n}\r\n\r\n/**\r\n * 将 hash 描述转换为 planObject 对象\r\n * @param s\r\n */\r\nexport function unparam(query: string): any {\r\n    const queryString: any = {};\r\n    if (query.slice(0, 1) === \"#\") {\r\n        query = query.slice(1);\r\n    }\r\n    const vars = query.split(\"&\");\r\n    for (let i = 0; i < vars.length; i++) {\r\n        const pair = vars[i].split(\"=\");\r\n        pair[0] = decodeURIComponent(pair[0]);\r\n        pair[1] = decodeURIComponent(pair[1]);\r\n        // If first entry with this name\r\n        if (typeof queryString[pair[0]] === \"undefined\") {\r\n            queryString[pair[0]] = pair[1];\r\n        } else if (typeof queryString[pair[0]] === \"string\") {\r\n            const arr = [queryString[pair[0]], pair[1]];\r\n            queryString[pair[0]] = arr;\r\n        } else {\r\n            queryString[pair[0]].push(pair[1]);\r\n        }\r\n    }\r\n    return queryString;\r\n}\r\n","import Vue from 'vue'\r\nimport { componentFactory } from './YvanRender'\r\nimport webix from 'webix'\r\n\r\nexport type VJson = any\r\n\r\nexport type ViewExtendType<T> = {\r\n  [P in keyof T]?: Partial<T[P]>\r\n}\r\n\r\n/**\r\n * 业务模块接口\r\n */\r\nexport interface Module<M, Refs, INP> {\r\n  viewResolver(): VJson\r\n\r\n  viewIntercept?(vjson: VJson, inParamter?: INP): void\r\n\r\n  viewExtend?(inParamter?: INP): ViewExtendType<Refs>\r\n\r\n  onLoad?(): void\r\n}\r\n\r\nexport abstract class BaseModule<M, Refs, INP> extends Vue implements Module<M, Refs, INP> {\r\n  /**\r\n   * 组件对象引用\r\n   */\r\n  refs!: Refs\r\n\r\n  /**\r\n   * showDialog 带来的参数\r\n   */\r\n  inParamter!: INP\r\n\r\n  _webixId: any\r\n\r\n  /**\r\n   * 模块实例 ID (运行时自动创建)\r\n   */\r\n  instanceId!: string\r\n\r\n  /**\r\n * 模块是否加载完毕\r\n */\r\n  loadFinished!: boolean\r\n\r\n  /**\r\n   * 模块被渲染完成之后调用\r\n   */\r\n  onLoad(): void { }\r\n\r\n  /**\r\n   * 每次从隐藏状态换显出来后调用\r\n   */\r\n  onShow(): void { }\r\n\r\n  abstract viewResolver(): VJson\r\n\r\n  /**\r\n   * 根据名称，获取空白区域操作句柄\r\n   */\r\n  getPlace(placeId: string): any {\r\n    return webix.$$(_.get(this, 'instanceId') + '$' + placeId)\r\n  }\r\n\r\n  /**\r\n   * 从外部设置输入参数\r\n   */\r\n  setInParamter!: (inParamter: INP) => void\r\n\r\n  validate(entityName: string): Promise<any> {\r\n    return new Promise<any>((resolver, reject) => {\r\n      const ctlMappings: any = _.get(this, '_entityCtlMapping.' + entityName);\r\n\r\n      const result = {};\r\n      if (_.get(ctlMappings, '_required') === true || _.has(ctlMappings, 'onValidate')) {\r\n        const validateResult = ctlMappings._resultToShowOrHide();\r\n        if (validateResult) {\r\n          ctlMappings._showTootip(validateResult)\r\n          ctlMappings._showValidateError()\r\n          ctlMappings.focus()\r\n          _.set(result, ctlMappings.entityName, validateResult)\r\n        }\r\n      }\r\n      else {\r\n        let isShow = false;\r\n        _.forEach(ctlMappings, (ctl, key) => {\r\n          if (_.get(ctl, '_required') === true || _.has(ctl, 'onValidate')) {\r\n            const validateResult = ctl._resultToShowOrHide();\r\n            if (validateResult) {\r\n              ctl._showValidateError()\r\n              _.set(result, key, validateResult)\r\n              if (!isShow) {\r\n                isShow = true\r\n                ctl._showTootip(validateResult)\r\n                ctl.focus()\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      if (_.size(result) > 0) {\r\n        reject(result)\r\n      } else {\r\n        resolver(_.get(this, entityName));\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 获取或设置 window 标题\r\n   */\r\n  set title(v: string) {\r\n    if (this._webixId && _.has(this, '_titleLabel')) {\r\n      // webix 对象已经出现\r\n      this._webixId.define('title', v)\r\n      const _titleLabel = _.get(this, '_titleLabel');\r\n      _titleLabel.define('label', v)\r\n      _titleLabel.refresh()\r\n      return\r\n    }\r\n    console.error('无法设置 title')\r\n  }\r\n\r\n  get title(): string {\r\n    if (this._webixId) {\r\n      // webix 对象已经出现\r\n      return <string>this._webixId.config.title;\r\n    }\r\n    return '无法获取';\r\n  }\r\n}\r\n\r\nexport abstract class BaseDialog<M, Refs, INP> extends BaseModule<M, Refs, INP> {\r\n  /**\r\n   * 对话框 DOM 对象\r\n   */\r\n  layero: any\r\n\r\n  /**\r\n   * 组件对象引用\r\n   */\r\n  refs!: Refs\r\n\r\n  /**\r\n   * 显示对话框\r\n   * @param inParamter 输入参数\r\n   * @param container 父容器\r\n   */\r\n  showDialog!: (\r\n    inParamter: INP,\r\n    container: any,\r\n    isFromSearchBox?: boolean\r\n  ) => void\r\n\r\n  /**\r\n   * 关闭对话框\r\n   */\r\n  closeDialog!: () => void\r\n\r\n  /**\r\n   * 按下 ESC 键\r\n   */\r\n  onEsc() {\r\n    this.closeDialog()\r\n  }\r\n\r\n  /**\r\n   * 按下 Enter 键\r\n   */\r\n  onEnter() {\r\n    debugger\r\n  }\r\n\r\n  /**\r\n   * 关闭后触发\r\n   */\r\n  onClose() { }\r\n\r\n  /**\r\n   * 对话框的父亲（打开者）\r\n   */\r\n  dialogParent!: any\r\n\r\n  /**\r\n   * 显示进行中的状态\r\n   */\r\n  showLoading() {\r\n    webix.extend(this._webixId, webix.OverlayBox)\r\n    //this._webix.showOverlay(\"<div style='...'>There is no data</div>\");\r\n    this._webixId.showOverlay('Loading...')\r\n  }\r\n\r\n  /**\r\n   * 关闭进行中的状态\r\n   */\r\n  closeLoading() {\r\n    this._webixId.hideOverlay()\r\n  }\r\n}\r\n\r\nexport type BaseModuleType<M, Refs, INP> = typeof BaseModule\r\n\r\n/**\r\n * 装饰业务模块\r\n * @param options\r\n */\r\nexport function BizModule<M, Refs, INP>(option?: any): Function {\r\n  return function (Component: BaseModule<M, Refs, INP>) {\r\n    return componentFactory(Component, option)\r\n  }\r\n\r\n  // const option = {\r\n  //     ...createOption,\r\n  //     template: `<webix-ui ref='webixui' :config='viewResolver()'/>`,\r\n  //     ...createMixins<M, Refs, INP>(createOption)\r\n  // }\r\n\r\n  // return VueComponent<BaseModule<M, Refs, INP>>(option)\r\n}\r\n\r\nexport interface BizWatch {\r\n  /**\r\n   * 监听的表达式\r\n   */\r\n  expr: string\r\n\r\n  /**\r\n   * 深度监听\r\n   */\r\n  deep: boolean\r\n\r\n  /**\r\n   * 是否立刻执行\r\n   */\r\n  immediate: boolean\r\n\r\n  /**\r\n   * 执行的方法\r\n   */\r\n  handler: any\r\n}\r\n\r\n/**\r\n * 装饰字段（监听某个属性值变化）\r\n */\r\nexport function Watch(\r\n  propName: string,\r\n  deep: boolean = false,\r\n  immediate: boolean = false\r\n) {\r\n  if (typeof deep === 'undefined') {\r\n    deep = false\r\n  }\r\n  if (typeof immediate === 'undefined') {\r\n    immediate = false\r\n  }\r\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    if (typeof target.watches === 'undefined') {\r\n      target.watches = []\r\n    }\r\n    const watch: BizWatch = {\r\n      expr: propName,\r\n      deep,\r\n      immediate,\r\n      handler: descriptor.value\r\n    }\r\n    target.watches.push(watch)\r\n  }\r\n}\r\n","// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport ts from 'typescript'\r\n\r\n/**\r\n * 导出代码生成器\r\n */\r\nexport function getTS(): typeof ts {\r\n    return ts;\r\n}\r\n\r\n/**\r\n * 导出代码生成器\r\n */\r\nexport function tsCodeGenerate(tsNode: ts.Node): string {\r\n    const resultFile = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        \"\",\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n    const printer = ts.createPrinter({\r\n        newLine: ts.NewLineKind.LineFeed\r\n    });\r\n    const result = printer.printNode(\r\n        ts.EmitHint.Unspecified,\r\n        tsNode,\r\n        resultFile\r\n    );\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * 导出代码AST解析器\r\n */\r\nexport function tsCodeParse(content: string): ts.NodeArray<ts.Statement> {\r\n    const file = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        content,\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n    return file.statements;\r\n}\r\n\r\nexport function getTSDemo2(): any {\r\n    const resultFile = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        contentText,\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n\r\n    return resultFile;\r\n}\r\n\r\nexport function getTSDemo(): string {\r\n\r\n    function makeFactorialFunction() {\r\n\r\n        const functionName = ts.createIdentifier(\"factorial\");\r\n        const paramName = ts.createIdentifier(\"n\");\r\n        const parameter = ts.createParameter(\r\n            /*decorators*/ undefined,\r\n            /*modifiers*/ undefined,\r\n            /*dotDotDotToken*/ undefined,\r\n            paramName\r\n        );\r\n\r\n        const condition = ts.createBinary(\r\n            paramName,\r\n            ts.SyntaxKind.LessThanEqualsToken,\r\n            ts.createLiteral(1)\r\n        );\r\n\r\n        const ifBody = ts.createBlock(\r\n            [ts.createReturn(ts.createLiteral(1))],\r\n            /*multiline*/ true\r\n        );\r\n        const decrementedArg = ts.createBinary(\r\n            paramName,\r\n            ts.SyntaxKind.MinusToken,\r\n            ts.createLiteral(1)\r\n        );\r\n        const recurse = ts.createBinary(\r\n            paramName,\r\n            ts.SyntaxKind.AsteriskToken,\r\n            ts.createCall(functionName, /*typeArgs*/ undefined, [decrementedArg])\r\n        );\r\n        const statements = [\r\n            ts.createEnumDeclaration(\r\n                undefined,\r\n                undefined,\r\n                ts.createIdentifier(\"MyEnum\"),\r\n                [\r\n                    ts.createEnumMember(\r\n                        ts.createIdentifier(\"member\"),\r\n                        undefined\r\n                    ),\r\n                    ts.createEnumMember(\r\n                        ts.createIdentifier(\"user\"),\r\n                        undefined\r\n                    )\r\n                ]\r\n            ),\r\n            ts.createIf(condition, ifBody), ts.createReturn(recurse)\r\n        ];\r\n\r\n        return ts.createFunctionDeclaration(\r\n            /*decorators*/ undefined,\r\n            /*modifiers*/ [ts.createToken(ts.SyntaxKind.ExportKeyword)],\r\n            /*asteriskToken*/ undefined,\r\n            functionName,\r\n            /*typeParameters*/ undefined,\r\n            [parameter],\r\n            /*returnType*/ ts.createKeywordTypeNode(ts.SyntaxKind.NumberKeyword),\r\n            ts.createBlock(statements, /*multiline*/ true)\r\n        );\r\n    }\r\n\r\n    const resultFile = ts.createSourceFile(\r\n        \"someFileName.ts\",\r\n        \"\",\r\n        ts.ScriptTarget.ES2019,\r\n        /*setParentNodes*/ false,\r\n        ts.ScriptKind.TS\r\n    );\r\n    const printer = ts.createPrinter({\r\n        newLine: ts.NewLineKind.LineFeed\r\n    });\r\n    const result = printer.printNode(\r\n        ts.EmitHint.Unspecified,\r\n        makeFactorialFunction(),\r\n        resultFile\r\n    );\r\n\r\n    return result;\r\n}\r\n\r\nconst contentText = `export type Refs = {\r\n};\r\n\r\nexport default abstract class<M, INP> extends YvanUI.BaseDialog<M, Refs, INP> {\r\n\r\n    main: {\r\n        FADMINID:string,\r\n        FADMINNAME: string,\r\n        FADMINPHONE: string,\r\n        FEMAIL: string\r\n    } = {\r\n        FADMINID:'',\r\n        FADMINNAME: '',\r\n        FADMINPHONE:'',\r\n        FEMAIL:''\r\n    };\r\n\r\n    viewResolver(): any {\r\n        console.log(this, this.inParamter);\r\n\r\n        return {\r\n            title: '联系方式维护',\r\n            modal: true,\r\n            width: 400,\r\n            height: 200,\r\n            body: {\r\n                rows: [\r\n                    {\r\n                        view: 'text',\r\n                        entityName: \"main.FADMINNAME\",\r\n                        label: \"管理员名称\",\r\n                        required: true,\r\n                        width: 320,\r\n                    },\r\n                    {\r\n                        view: 'text',\r\n                        entityName: 'main.FADMINPHONE',\r\n                        label: '管理员联系方式',\r\n                        width: 320,\r\n                        required: true,\r\n                    },\r\n                    {\r\n                        view: 'text',\r\n                        entityName: \"main.FEMAIL\",\r\n                        label: \"联系EMAIL\",\r\n                        width: 320,\r\n                        required: true,\r\n                    },\r\n                    {\r\n                        cols: [\r\n                            {width: 110},\r\n                            {\r\n                                view: \"button\", text: \"确定\", cssType: \"primary\", width: 0,\r\n                                onClick: {\r\n                                    type: 'function',\r\n                                    bind: 'ok'\r\n                                }\r\n                            },\r\n                            {\r\n                                view: \"button\", text: \"取消\", cssType: 'default', width: 0,\r\n                                onClick: {\r\n                                    type: 'function',\r\n                                    bind: 'cancel'\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    }\r\n}`;\r\n","export type GroupType = 'css' | 'data' | 'bind' | 'common'\r\n\r\nexport interface PropertyValue {\r\n  /**\r\n   * 属性名\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * 默认值\r\n   */\r\n  default: any\r\n\r\n  /**\r\n   * 隶属分组\r\n   */\r\n  group: GroupType\r\n\r\n  /**\r\n   * 描述\r\n   */\r\n  desc: string\r\n\r\n  /**\r\n   * 取值范围\r\n   */\r\n  type:\r\n    | 'boolean'\r\n    | 'number'\r\n    | 'string'\r\n    | 'object'\r\n    | 'dataSource'\r\n    | 'valid'\r\n    | Array<string>\r\n}\r\n\r\nexport interface EventValue {\r\n  /**\r\n   * 属性名\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * 描述\r\n   */\r\n  desc: string\r\n}\r\n\r\nexport interface PropertyDescriptionInterface {\r\n  props: PropertyValue[]\r\n  events?: EventValue[]\r\n}\r\n\r\nexport class PropertyDescription {\r\n  propertyes: PropertyDescriptionInterface = {\r\n    props: [],\r\n    events: []\r\n  }\r\n\r\n  constructor(...args: PropertyDescriptionInterface[]) {\r\n    _.each(args, arg => {\r\n      this.merge(arg)\r\n    })\r\n  }\r\n\r\n  merge(pd: PropertyDescriptionInterface) {\r\n    this.propertyes.props = <any>(\r\n      _.uniqBy([...this.propertyes.props, ...pd.props], 'name')\r\n    )\r\n    if (pd.events) {\r\n      if (this.propertyes.events) {\r\n        this.propertyes.events = <any>(\r\n          _.uniqBy([...this.propertyes.events, ...pd.events], 'name')\r\n        )\r\n      } else {\r\n        this.propertyes.events = <any>_.uniqBy([...pd.events], 'name')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据分组名 获取属性定义\r\n   */\r\n  getPropsByGroup(name: GroupType): PropertyValue[] {\r\n    return _.filter(this.propertyes.props, i => i.group === name)\r\n  }\r\n\r\n  /**\r\n   * 获取全部事件\r\n   */\r\n  getEvents(): EventValue[] {\r\n    return this.propertyes.events!\r\n  }\r\n}\r\n","import {\r\n  PropertyDescription,\r\n  PropertyDescriptionInterface\r\n} from './PropertyDescription'\r\n\r\nexport const PropertyDescriptionTable = new Map<String, PropertyDescription>()\r\n\r\nPropertyDescriptionTable.set(\r\n  'layout',\r\n  new PropertyDescription({\r\n    props: [\r\n      {\r\n        name: 'borderless',\r\n        default: true,\r\n        group: 'css',\r\n        desc: '有无边框',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'type',\r\n        default: '',\r\n        group: 'css',\r\n        desc: '布局类型',\r\n        type: ['line', 'clean', 'wide', 'space', 'form']\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nconst YvBase: PropertyDescriptionInterface = {\r\n  props: [\r\n    {\r\n      name: 'entityName',\r\n      default: '',\r\n      group: 'bind',\r\n      desc: '实体类名',\r\n      type: 'string'\r\n    },\r\n    {\r\n      name: 'ctlName',\r\n      default: '',\r\n      group: 'bind',\r\n      desc: '控件名',\r\n      type: 'string'\r\n    },\r\n    {\r\n      name: 'css',\r\n      default: '',\r\n      group: 'css',\r\n      desc: '样式类名',\r\n      type: 'string'\r\n    },\r\n    {\r\n      name: 'attr',\r\n      default: {},\r\n      group: 'css',\r\n      desc: 'HTML属性',\r\n      type: 'object'\r\n    },\r\n    {\r\n      name: 'render',\r\n      default: true,\r\n      group: 'common',\r\n      desc: '是否显示',\r\n      type: 'boolean'\r\n    },\r\n    {\r\n      name: 'padding',\r\n      default: undefined,\r\n      group: 'css',\r\n      desc: '内边距',\r\n      type: 'object'\r\n    },\r\n    {\r\n      name: 'margin',\r\n      default: undefined,\r\n      group: 'css',\r\n      desc: '外边距',\r\n      type: 'object'\r\n    },\r\n    {\r\n      name: 'ff',\r\n      default: 0,\r\n      group: 'common',\r\n      desc: '自动定焦时间',\r\n      type: 'number'\r\n    }\r\n  ],\r\n  events: [{ name: 'onRender', desc: '第一次控件被渲染时触发' }]\r\n}\r\n\r\nconst YvDataSource: PropertyDescriptionInterface = {\r\n  props: [\r\n    {\r\n      name: 'type',\r\n      default: '',\r\n      group: 'data',\r\n      desc: '数据源类型',\r\n      type: 'dataSource'\r\n    }\r\n  ],\r\n  events: [{ name: 'onDataComplete', desc: '数据绑定完成后触发' }]\r\n}\r\n\r\nPropertyDescriptionTable.set(\r\n  'template',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'template',\r\n        default: '',\r\n        group: 'common',\r\n        desc: 'HTML内容',\r\n        type: 'string'\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'text',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'label',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '文本描述',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'labelAlign',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '描述对齐方式',\r\n        type: ['left', 'right', 'center']\r\n      },\r\n      {\r\n        name: 'labelWidth',\r\n        default: undefined,\r\n        group: 'common',\r\n        desc: '文本宽度',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'gravity',\r\n        default: 1,\r\n        group: 'common',\r\n        desc: '占位权重',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'readonly',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '只读',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'disabled',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '禁用',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'required',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '必填',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'value',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '字段值',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'prompt',\r\n        default: '请输入',\r\n        group: 'common',\r\n        desc: '水印',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'validType',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '校验类型',\r\n        type: 'valid'\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'button',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'text',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '按钮标题',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'icon',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '图标样式',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'disabled',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '是否禁用',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'gravity',\r\n        default: 1,\r\n        group: 'css',\r\n        desc: '占位权重',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'tooltip',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '悬停提示',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'cssType',\r\n        default: 'default',\r\n        group: 'css',\r\n        desc: '样式类型',\r\n        type: ['default', 'primary', 'danger', 'success']\r\n      }\r\n    ],\r\n    events: [{ name: 'onClick', desc: '第一次控件被渲染时触发' }]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'label',\r\n  new PropertyDescription(YvBase, {\r\n    props: [\r\n      {\r\n        name: 'label',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '标签内容',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'align',\r\n        default: 'left',\r\n        group: 'common',\r\n        desc: '对齐方式',\r\n        type: ['left', 'right', 'center']\r\n      },\r\n      {\r\n        name: 'disabled',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '是否禁用',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'width',\r\n        default: 100,\r\n        group: 'css',\r\n        desc: '宽度',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'gravity',\r\n        default: 1,\r\n        group: 'css',\r\n        desc: '占位权重',\r\n        type: 'number'\r\n      },\r\n      {\r\n        name: 'tooltip',\r\n        default: '',\r\n        group: 'common',\r\n        desc: '悬停提示',\r\n        type: 'string'\r\n      }\r\n    ]\r\n  })\r\n)\r\n\r\nPropertyDescriptionTable.set(\r\n  'tree',\r\n  new PropertyDescription(YvDataSource, YvBase, {\r\n    props: [\r\n      {\r\n        name: 'showCheckbox',\r\n        default: false,\r\n        group: 'common',\r\n        desc: '显示勾选',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'showLeftIcon',\r\n        default: true,\r\n        group: 'common',\r\n        desc: '显示左侧图标',\r\n        type: 'boolean'\r\n      },\r\n      {\r\n        name: 'showIcon',\r\n        default: true,\r\n        group: 'common',\r\n        desc: '显示图标',\r\n        type: 'boolean'\r\n      }\r\n    ],\r\n    events: [\r\n      { name: 'onNodeClick', desc: '节点被点击后触发' },\r\n      { name: 'onNodeDblClick', desc: '节点被双击后触发' }\r\n    ]\r\n  })\r\n)\r\n","import { CtlBase } from './CtlBase'\r\nimport { YvEvent, YvEventDispatch } from './YvanEvent'\r\nimport { parseYvanPropChangeVJson } from './CtlUtils'\r\nimport webix from 'webix'\r\n\r\n/**\r\n * 扩展 echarts 组件\r\n */\r\nwebix.protoUI(\r\n  {\r\n    name: 'echarts'\r\n  },\r\n  webix.ui.template\r\n)\r\n\r\nexport class CtlECharts extends CtlBase<CtlECharts> {\r\n  static create(module: any, vjson: any): CtlECharts {\r\n    const that = new CtlECharts(_.cloneDeep(vjson))\r\n    that._module = module\r\n\r\n    if (vjson.hasOwnProperty('debugger')) {\r\n      debugger\r\n    }\r\n\r\n    // 提取基础属性 onRender / ctlName / entityName 等等\r\n    const yvanProp = parseYvanPropChangeVJson(vjson, [])\r\n\r\n    // 将 yvanProp 合并至当前 CtlBase 对象\r\n    _.assign(that, yvanProp)\r\n\r\n    // 删除 vjson 所有数据, 替换为 template 语法\r\n    _.forOwn(vjson, (value, key) => {\r\n      delete vjson[key]\r\n    })\r\n    _.merge(vjson, {\r\n      view: 'echarts',\r\n      template: `<div role=\"echarts\"></div>`,\r\n      on: {\r\n        onAfterRender: function (this: any) {\r\n          that.attachHandle(this, { ...vjson, ...yvanProp })\r\n          that._resetECharts()\r\n        },\r\n        onDestruct(this: any) {\r\n          if (that._echartsHandler) {\r\n            that._echartsHandler.dispose()\r\n            delete that._echartsHandler\r\n          }\r\n          that.removeHandle()\r\n        }\r\n      }\r\n    })\r\n    if (that.vjson.id) {\r\n      vjson.id = that.vjson.id\r\n    }\r\n    return that\r\n  }\r\n\r\n  /*============================ 公共属性部分 ============================*/\r\n  /**\r\n   * 数据绑定完毕后触发\r\n   */\r\n  onClick?: YvEvent<CtlECharts, any>\r\n\r\n  setOption(option: any, opts?: any): void {\r\n    this._echartsHandler.setOption(option, opts)\r\n    _.defer(() => {\r\n      this._echartsHandler.resize()\r\n    })\r\n  }\r\n\r\n  public get handle() {\r\n    return <any>this._echartsHandler\r\n  }\r\n\r\n  // setOption(option: echarts.EChartOption, opts?: echarts.EChartsOptionConfig): void {\r\n  //     this._echartsHandler.setOption(option, opts);\r\n  //     _.defer(() => {\r\n  //         this._echartsHandler.resize();\r\n  //     });\r\n  // }\r\n  //\r\n  // setOption2(option: echarts.EChartOption | echarts.EChartsResponsiveOption, notMerge?: boolean, lazyUpdate?: boolean): void {\r\n  //     this._echartsHandler.setOption(option, notMerge, lazyUpdate);\r\n  //     _.defer(() => {\r\n  //         this._echartsHandler.resize();\r\n  //     });\r\n  // }\r\n\r\n  resize() {\r\n    this._echartsHandler.resize()\r\n  }\r\n\r\n  clear() {\r\n    this._echartsHandler.clear()\r\n  }\r\n\r\n  /*============================ 私有属性部分 ============================*/\r\n  private _echartsHandler!: echarts.ECharts\r\n\r\n  private _resetECharts() {\r\n    const $el = $(this._webix._viewobj).find('[role=\"echarts\"]')[0]\r\n    let el: any = $el\r\n    this._echartsHandler = echarts.init(el)\r\n\r\n    this._echartsHandler.on('click', (params: any) => {\r\n      YvEventDispatch(this.onClick, this, params)\r\n    })\r\n  }\r\n}\r\n","function userComponentFactory(Component: any, name: string) {\r\n\r\n}\r\n\r\n/**\r\n * 自定义组件\r\n */\r\nexport function UserComponent(name: string): Function {\r\n    return function (Component: any) {\r\n        return userComponentFactory(Component, name);\r\n    };\r\n}\r\n\r\n// 自定义组件\r\nexport abstract class UserComponentBase<T> {\r\n\r\n    /**\r\n     * 执行渲染\r\n     */\r\n    abstract render(parentElement: Element): void;\r\n\r\n}\r\n"],"names":["componentRenderFilter","ajax","YvanUI.dbs","YvanUI.getServerPrefix","YvanMessage.showTooltip","YvanMessage.hideTooltip","GridRefreshMode","YvanUI.dict","YvanUI.formatter","formatter","Qs","Db","YvDataSource"],"mappings":"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"}